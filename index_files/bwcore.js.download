/*
 * jQuery outside events - v1.1 - 3/16/2010
 * http://benalman.com/projects/jquery-outside-events-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function ($, c, b) { $.map("click dblclick mousemove mousedown mouseup mouseover mouseout change select submit keydown keypress keyup".split(" "), function (d) { a(d) }); a("focusin", "focus" + b); a("focusout", "blur" + b); $.addOutsideEvent = a; function a(g, e) { e = e || g + b; var d = $(), h = g + "." + e + "-special-event"; $.event.special[e] = { setup: function () { d = d.add(this); if (d.length === 1) { $(c).bind(h, f) } }, teardown: function () { d = d.not(this); if (d.length === 0) { $(c).unbind(h) } }, add: function (i) { var j = i.handler; i.handler = function (l, k) { l.target = k; j.apply(this, arguments) } } }; function f(i) { $(d).each(function () { var j = $(this); if (this !== i.target && !j.has(i.target).length) { j.triggerHandler(e, [i.target]) } }) } } })(jQuery, document, "outside");
/*!
 * verge 1.9.1+201402130803
 * https://github.com/ryanve/verge
 * MIT License 2013 Ryan Van Etten
 */
!function (a, b, c) { "undefined" != typeof module && module.exports ? module.exports = c() : a[b] = c() }(this, "verge", function () { function a() { return { width: k(), height: l() } } function b(a, b) { var c = {}; return b = +b || 0, c.width = (c.right = a.right + b) - (c.left = a.left - b), c.height = (c.bottom = a.bottom + b) - (c.top = a.top - b), c } function c(a, c) { return a = a && !a.nodeType ? a[0] : a, a && 1 === a.nodeType ? b(a.getBoundingClientRect(), c) : !1 } function d(b) { b = null == b ? a() : 1 === b.nodeType ? c(b) : b; var d = b.height, e = b.width; return d = "function" == typeof d ? d.call(b) : d, e = "function" == typeof e ? e.call(b) : e, e / d } var e = {}, f = "undefined" != typeof window && window, g = "undefined" != typeof document && document, h = g && g.documentElement, i = f.matchMedia || f.msMatchMedia, j = i ? function (a) { return !!i.call(f, a).matches } : function () { return !1 }, k = e.viewportW = function () { var a = h.clientWidth, b = f.innerWidth; return b > a ? b : a }, l = e.viewportH = function () { var a = h.clientHeight, b = f.innerHeight; return b > a ? b : a }; return e.mq = j, e.matchMedia = i ? function () { return i.apply(f, arguments) } : function () { return {} }, e.viewport = a, e.scrollX = function () { return f.pageXOffset || h.scrollLeft }, e.scrollY = function () { return f.pageYOffset || h.scrollTop }, e.rectangle = c, e.aspect = d, e.inX = function (a, b) { var d = c(a, b); return !!d && d.right >= 0 && d.left <= k() }, e.inY = function (a, b) { var d = c(a, b); return !!d && d.bottom >= 0 && d.top <= l() }, e.inViewport = function (a, b) { var d = c(a, b); return !!d && d.bottom >= 0 && d.right >= 0 && d.top <= l() && d.left <= k() }, e });
/*!
Waypoints - 4.0.0
Copyright Â© 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s],l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,u,c,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),"function"==typeof f?f=f.apply(d):"string"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf("%")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=y+l-f,h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,u=h&&p,c=!h&&!p,!g&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&c?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n="up"===i||"left"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof module!="undefined"&&module.exports?module.exports=n(require("jquery")):n(jQuery)})(function(n){var e=-1,r=-1,i=function(n){return parseFloat(n)||0},o=function(t){var f=1,e=n(t),u=null,r=[];return e.each(function(){var t=n(this),e=t.offset().top-i(t.css("margin-top")),o=r.length>0?r[r.length-1]:null;o===null?r.push(t):Math.floor(Math.abs(u-e))<=f?r[r.length-1]=o.add(t):r.push(t);u=e}),r},u=function(t){var i={byRow:!0,property:"height",target:null,remove:!1};return typeof t=="object"?n.extend(i,t):(typeof t=="boolean"?i.byRow=t:t==="remove"&&(i.remove=!0),i)},t=n.fn.matchHeight=function(i){var r=u(i),f;return r.remove?(f=this,this.css(r.property,""),n.each(t._groups,function(n,t){t.elements=t.elements.not(f)}),this):this.length<=1&&!r.target?this:(t._groups.push({elements:this,options:r}),t._apply(this,r),this)},f;t.version="0.7.0";t._groups=[];t._throttle=80;t._maintainScroll=!1;t._beforeUpdate=null;t._afterUpdate=null;t._rows=o;t._parse=i;t._parseOptions=u;t._apply=function(r,f){var e=u(f),s=n(r),c=[s],l=n(window).scrollTop(),a=n("html").outerHeight(!0),h=s.parents().filter(":hidden");return h.each(function(){var t=n(this);t.data("style-cache",t.attr("style"))}),h.css("display","block"),e.byRow&&!e.target&&(s.each(function(){var i=n(this),t=i.css("display");t!=="inline-block"&&t!=="flex"&&t!=="inline-flex"&&(t="block");i.data("style-cache",i.attr("style"));i.css({display:t,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),c=o(s),s.each(function(){var t=n(this);t.attr("style",t.data("style-cache")||"")})),n.each(c,function(t,r){var u=n(r),f=0;if(e.target)f=e.target.outerHeight(!1);else{if(e.byRow&&u.length<=1){u.css(e.property,"");return}u.each(function(){var t=n(this),u=t.attr("style"),i=t.css("display"),r;i!=="inline-block"&&i!=="flex"&&i!=="inline-flex"&&(i="block");r={display:i};r[e.property]="";t.css(r);t.outerHeight(!1)>f&&(f=t.outerHeight(!1));u?t.attr("style",u):t.css("display","")})}u.each(function(){var t=n(this),r=0;e.target&&t.is(e.target)||(t.css("box-sizing")!=="border-box"&&(r+=i(t.css("border-top-width"))+i(t.css("border-bottom-width")),r+=i(t.css("padding-top"))+i(t.css("padding-bottom"))),t.css(e.property,f-r+"px"))})}),h.each(function(){var t=n(this);t.attr("style",t.data("style-cache")||null)}),t._maintainScroll&&n(window).scrollTop(l/a*n("html").outerHeight(!0)),this};t._applyDataApi=function(){var t={};n("[data-match-height], [data-mh]").each(function(){var i=n(this),r=i.attr("data-mh")||i.attr("data-match-height");t[r]=r in t?t[r].add(i):i});n.each(t,function(){this.matchHeight(!0)})};f=function(i){t._beforeUpdate&&t._beforeUpdate(i,t._groups);n.each(t._groups,function(){t._apply(this.elements,this.options)});t._afterUpdate&&t._afterUpdate(i,t._groups)};t._update=function(i,u){if(u&&u.type==="resize"){var o=n(window).width();if(o===e)return;e=o}i?r===-1&&(r=setTimeout(function(){f(u);r=-1},t._throttle)):f(u)};n(t._applyDataApi);n(window).bind("load",function(n){t._update(!1,n)});n(window).bind("resize orientationchange",function(n){t._update(!0,n)})});
//! moment.js
//! version : 2.10.6
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Hc.apply(null,arguments)}function b(a){Hc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Jc.length>0)for(c in Jc)d=Jc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Kc===!1&&(Kc=!0,a.updateOffset(this),Kc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Lc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ic._abbr,require("./locale/"+a),w(b)}catch(c){}return Lc[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Ic=c)),Ic._abbr}function x(a,b){return null!==b?(b.abbr=a,Lc[a]=Lc[a]||new s,Lc[a].set(b),w(a),Lc[a]):(delete Lc[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ic;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Mc[c]=Mc[c+"s"]=Mc[b]=a}function A(a){return"string"==typeof a?Mc[a]||Mc[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Qc[a]=e),b&&(Qc[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Qc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Nc);for(b=0,c=d.length;c>b;b++)Qc[d[b]]?d[b]=Qc[d[b]]:d[b]=I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Pc[b]=Pc[b]||J(b),Pc[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oc.lastIndex=0;d>=0&&Oc.test(a);)a=a.replace(Oc,c),Oc.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){dd[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(dd,a)?dd[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)ed[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(ed,a)&&ed[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[gd]<0||c[gd]>11?gd:c[hd]<1||c[hd]>T(c[fd],c[gd])?hd:c[id]<0||c[id]>24||24===c[id]&&(0!==c[jd]||0!==c[kd]||0!==c[ld])?id:c[jd]<0||c[jd]>59?jd:c[kd]<0||c[kd]>59?kd:c[ld]<0||c[ld]>999?ld:-1,j(a)._overflowDayOfYear&&(fd>b||b>hd)&&(b=hd),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){od[a]||(_(b),od[a]=!0)}function ca(a){var b,c,d=a._i,e=pd.exec(d);if(e){for(j(a).iso=!0,b=0,c=qd.length;c>b;b++)if(qd[b][1].exec(d)){a._f=qd[b][0];break}for(b=0,c=rd.length;c>b;b++)if(rd[b][1].exec(d)){a._f+=(e[6]||" ")+rd[b][0];break}d.match(ad)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=sd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[hd]&&null==a._a[gd]&&ua(a),a._dayOfYear&&(e=ra(a._a[fd],d[fd]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[gd]=c.getUTCMonth(),a._a[hd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[id]&&0===a._a[jd]&&0===a._a[kd]&&0===a._a[ld]&&(a._nextDay=!0,a._a[id]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[id]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[fd],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[fd],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[fd]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Nc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Qc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[id]<=12&&b._a[id]>0&&(j(b).bigHour=void 0),b._a[id]=wa(b._locale,b._a[id],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a/60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(ad)||[],c=b[b.length-1]||[],d=(c+"").match(xd)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=yd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[hd])*c,h:q(h[id])*c,m:q(h[jd])*c,s:q(h[kd])*c,ms:q(h[ld])*c}):(h=zd.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this/1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[ld]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=Wd(this._milliseconds),this._days=Wd(this._days),this._months=Wd(this._months),a.milliseconds=Wd(a.milliseconds),a.seconds=Wd(a.seconds),a.minutes=Wd(a.minutes),a.hours=Wd(a.hours),a.months=Wd(a.months),a.years=Wd(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f/1e3),i.seconds=a%60,b=p(a/60),i.minutes=b%60,c=p(b/60),i.hours=c%24,g+=p(c/24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a/146097}function vc(a){return 146097*a/4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=ke(d.as("s")),f=ke(d.as("m")),g=ke(d.as("h")),h=ke(d.as("d")),i=ke(d.as("M")),j=ke(d.as("y")),k=e<le.s&&["s",e]||1===f&&["m"]||f<le.m&&["mm",f]||1===g&&["h"]||g<le.h&&["hh",g]||1===h&&["d"]||h<le.d&&["dd",h]||1===i&&["M"]||i<le.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===le[a]?!1:void 0===b?le[a]:(le[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=me(this._milliseconds)/1e3,e=me(this._days),f=me(this._months);a=p(d/60),b=p(a/60),d%=60,a%=60,c=p(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Hc,Ic,Jc=a.momentProperties=[],Kc=!1,Lc={},Mc={},Nc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pc={},Qc={},Rc=/\d/,Sc=/\d\d/,Tc=/\d{3}/,Uc=/\d{4}/,Vc=/[+-]?\d{6}/,Wc=/\d\d?/,Xc=/\d{1,3}/,Yc=/\d{1,4}/,Zc=/[+-]?\d{1,6}/,$c=/\d+/,_c=/[+-]?\d+/,ad=/Z|[+-]\d\d:?\d\d/gi,bd=/[+-]?\d+(\.\d{1,3})?/,cd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,dd={},ed={},fd=0,gd=1,hd=2,id=3,jd=4,kd=5,ld=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",Wc),N("MM",Wc,Sc),N("MMM",cd),N("MMMM",cd),Q(["M","MM"],function(a,b){b[gd]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[gd]=e:j(c).invalidMonth=a});var md="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),od={};a.suppressDeprecationWarnings=!1;var pd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",_c),N("YY",Wc,Sc),N("YYYY",Yc,Uc),N("YYYYY",Zc,Vc),N("YYYYYY",Zc,Vc),Q(["YYYYY","YYYYYY"],fd),Q("YYYY",function(b,c){c[fd]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[fd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var td=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",Wc),N("ww",Wc,Sc),N("W",Wc),N("WW",Wc,Sc),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ud={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",Xc),N("DDDD",Tc),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var vd=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),wd=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),Ja("ZZ",""),N("Z",ad),N("ZZ",ad),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var xd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var yd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Ad=ab(1,"add"),Bd=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Cd=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",_c),N("g",_c),N("GG",Wc,Sc),N("gg",Wc,Sc),N("GGGG",Yc,Uc),N("gggg",Yc,Uc),N("GGGGG",Zc,Vc),N("ggggg",Zc,Vc),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Rc),Q("Q",function(a,b){b[gd]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",Wc),N("DD",Wc,Sc),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],hd),Q("Do",function(a,b){b[hd]=q(a.match(Wc)[0],10)});var Dd=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",Wc),N("e",Wc),N("E",Wc),N("dd",cd),N("ddd",cd),N("dddd",cd),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Ed="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",Wc),N("h",Wc),N("HH",Wc,Sc),N("hh",Wc,Sc),Q(["H","HH"],id),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[id]=q(a),j(c).bigHour=!0});var Hd=/[ap]\.?m?\.?/i,Id=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",Wc),N("mm",Wc,Sc),Q(["m","mm"],jd);var Jd=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",Wc),N("ss",Wc,Sc),Q(["s","ss"],kd);var Kd=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",Xc,Rc),N("SS",Xc,Sc),N("SSS",Xc,Tc);var Ld;for(Ld="SSSS";Ld.length<=9;Ld+="S")N(Ld,$c);for(Ld="S";Ld.length<=9;Ld+="S")Q(Ld,Wb);var Md=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Nd=n.prototype;Nd.add=Ad,Nd.calendar=cb,Nd.clone=db,Nd.diff=ib,Nd.endOf=ub,Nd.format=mb,Nd.from=nb,Nd.fromNow=ob,Nd.to=pb,Nd.toNow=qb,Nd.get=F,Nd.invalidAt=Cb,Nd.isAfter=eb,Nd.isBefore=fb,Nd.isBetween=gb,Nd.isSame=hb,Nd.isValid=Ab,Nd.lang=Cd,Nd.locale=rb,Nd.localeData=sb,Nd.max=wd,Nd.min=vd,Nd.parsingFlags=Bb,Nd.set=F,Nd.startOf=tb,Nd.subtract=Bd,Nd.toArray=yb,Nd.toObject=zb,Nd.toDate=xb,Nd.toISOString=lb,Nd.toJSON=lb,Nd.toString=kb,Nd.unix=wb,Nd.valueOf=vb,Nd.year=td,Nd.isLeapYear=ia,Nd.weekYear=Fb,Nd.isoWeekYear=Gb,Nd.quarter=Nd.quarters=Jb,Nd.month=Y,Nd.daysInMonth=Z,Nd.week=Nd.weeks=na,Nd.isoWeek=Nd.isoWeeks=oa,Nd.weeksInYear=Ib,Nd.isoWeeksInYear=Hb,Nd.date=Dd,Nd.day=Nd.days=Pb,Nd.weekday=Qb,Nd.isoWeekday=Rb,Nd.dayOfYear=qa,Nd.hour=Nd.hours=Id,Nd.minute=Nd.minutes=Jd,Nd.second=Nd.seconds=Kd,
Nd.millisecond=Nd.milliseconds=Md,Nd.utcOffset=Na,Nd.utc=Pa,Nd.local=Qa,Nd.parseZone=Ra,Nd.hasAlignedHourOffset=Sa,Nd.isDST=Ta,Nd.isDSTShifted=Ua,Nd.isLocal=Va,Nd.isUtcOffset=Wa,Nd.isUtc=Xa,Nd.isUTC=Xa,Nd.zoneAbbr=Xb,Nd.zoneName=Yb,Nd.dates=aa("dates accessor is deprecated. Use date instead.",Dd),Nd.months=aa("months accessor is deprecated. Use month instead",Y),Nd.years=aa("years accessor is deprecated. Use year instead",td),Nd.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Od=Nd,Pd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Qd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Rd="Invalid date",Sd="%d",Td=/\d{1,2}/,Ud={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vd=s.prototype;Vd._calendar=Pd,Vd.calendar=_b,Vd._longDateFormat=Qd,Vd.longDateFormat=ac,Vd._invalidDate=Rd,Vd.invalidDate=bc,Vd._ordinal=Sd,Vd.ordinal=cc,Vd._ordinalParse=Td,Vd.preparse=dc,Vd.postformat=dc,Vd._relativeTime=Ud,Vd.relativeTime=ec,Vd.pastFuture=fc,Vd.set=gc,Vd.months=U,Vd._months=md,Vd.monthsShort=V,Vd._monthsShort=nd,Vd.monthsParse=W,Vd.week=ka,Vd._week=ud,Vd.firstDayOfYear=ma,Vd.firstDayOfWeek=la,Vd.weekdays=Lb,Vd._weekdays=Ed,Vd.weekdaysMin=Nb,Vd._weekdaysMin=Gd,Vd.weekdaysShort=Mb,Vd._weekdaysShort=Fd,Vd.weekdaysParse=Ob,Vd.isPM=Ub,Vd._meridiemParse=Hd,Vd.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var Wd=Math.abs,Xd=yc("ms"),Yd=yc("s"),Zd=yc("m"),$d=yc("h"),_d=yc("d"),ae=yc("w"),be=yc("M"),ce=yc("y"),de=Ac("milliseconds"),ee=Ac("seconds"),fe=Ac("minutes"),ge=Ac("hours"),he=Ac("days"),ie=Ac("months"),je=Ac("years"),ke=Math.round,le={s:45,m:45,h:22,d:26,M:11},me=Math.abs,ne=Ha.prototype;ne.abs=oc,ne.add=qc,ne.subtract=rc,ne.as=wc,ne.asMilliseconds=Xd,ne.asSeconds=Yd,ne.asMinutes=Zd,ne.asHours=$d,ne.asDays=_d,ne.asWeeks=ae,ne.asMonths=be,ne.asYears=ce,ne.valueOf=xc,ne._bubble=tc,ne.get=zc,ne.milliseconds=de,ne.seconds=ee,ne.minutes=fe,ne.hours=ge,ne.days=he,ne.weeks=Bc,ne.months=ie,ne.years=je,ne.humanize=Fc,ne.toISOString=Gc,ne.toString=Gc,ne.toJSON=Gc,ne.locale=rb,ne.localeData=sb,ne.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),ne.lang=Cd,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",_c),N("X",bd),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),a.version="2.10.6",b(Da),a.fn=Od,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var oe=a;return oe});
(function(a){a.Placeholder={settings:{color:"rgb(169,169,169)",dataName:"original-font-color"},init:function(b){if(b){a.extend(a.Placeholder.settings,b)}var c=function(b){return a(b).val()};var d=function(b,c){a(b).val(c)};var e=function(b){return a(b).attr("placeholder")};var f=function(a){var b=c(a);return b.length===0||b==e(a)};var g=function(b){a(b).data(a.Placeholder.settings.dataName,a(b).css("color"));a(b).css("color",a.Placeholder.settings.color)};var h=function(b){a(b).css("color",a(b).data(a.Placeholder.settings.dataName));a(b).removeData(a.Placeholder.settings.dataName)};var i=function(a){d(a,e(a));g(a)};var j=function(b){if(a(b).data(a.Placeholder.settings.dataName)){d(b,"");h(b)}};var k=function(){if(f(this)){j(this)}};var l=function(){if(f(this)){i(this)}};var m=function(){if(f(this)){j(this)}};a("textarea, input[type='text']").each(function(b,c){if(a(c).attr("placeholder")){a(c).focus(k);a(c).blur(l);a(c).bind("parentformsubmitted",m);a(c).trigger("blur");a(c).parents("form").submit(function(){a(c).trigger("parentformsubmitted")})}});return this},cleanBeforeSubmit:function(b){if(!b){b=a("form")}a(b).find("textarea, input[type='text']").trigger("parentformsubmitted");return b}}})(jQuery);
/*!
 * jquery.customSelect() - v0.5.1
 * http://adam.co/lab/jquery/customselect/
 * 2014-04-19
 *
 * Copyright 2013 Adam Coulombe
 * @license http://www.opensource.org/licenses/mit-license.html MIT License
 * @license http://www.gnu.org/licenses/gpl.html GPL2 License 
 */
(function(a){a.fn.extend({customSelect:function(c){if(typeof document.body.style.maxHeight==="undefined"){return this}var e={customClass:"customSelect",mapClass:true,mapStyle:true},c=a.extend(e,c),d=c.customClass,f=function(h,k){var g=h.find(":selected"),j=k.children(":first"),i=g.html()||"&nbsp;";j.html(i);if(g.attr("disabled")){k.addClass(b("DisabledOption"))}else{k.removeClass(b("DisabledOption"))}setTimeout(function(){k.removeClass(b("Open"));a(document).off("mouseup.customSelect")},60)},b=function(g){return d+g};return this.each(function(){var g=a(this),i=a("<span />").addClass(b("Inner")),h=a("<span />");g.after(h.append(i));h.addClass(d);if(c.mapClass){h.addClass(g.attr("class"))}if(c.mapStyle){h.attr("style",g.attr("style"))}g.addClass("hasCustomSelect").on("render.customSelect",function(){f(g,h);g.css("width","");var k=parseInt(g.outerWidth(),10)-(parseInt(h.outerWidth(),10)-parseInt(h.width(),10));h.css({display:"inline-block"});var j=h.outerHeight();if(g.attr("disabled")){h.addClass(b("Disabled"))}else{h.removeClass(b("Disabled"))}i.css({width:k,display:"inline-block"});g.css({"-webkit-appearance":"menulist-button",width:h.outerWidth(),position:"absolute",opacity:0,height:j,fontSize:h.css("font-size")})}).on("change.customSelect",function(){h.addClass(b("Changed"));f(g,h)}).on("keyup.customSelect",function(j){if(!h.hasClass(b("Open"))){g.trigger("blur.customSelect");g.trigger("focus.customSelect")}else{if(j.which==13||j.which==27){f(g,h)}}}).on("mousedown.customSelect",function(){h.removeClass(b("Changed"))}).on("mouseup.customSelect",function(j){if(!h.hasClass(b("Open"))){if(a("."+b("Open")).not(h).length>0&&typeof InstallTrigger!=="undefined"){g.trigger("focus.customSelect")}else{h.addClass(b("Open"));j.stopPropagation();a(document).one("mouseup.customSelect",function(k){if(k.target!=g.get(0)&&a.inArray(k.target,g.find("*").get())<0){g.trigger("blur.customSelect")}else{f(g,h)}})}}}).on("focus.customSelect",function(){h.removeClass(b("Changed")).addClass(b("Focus"))}).on("blur.customSelect",function(){h.removeClass(b("Focus")+" "+b("Open"))}).on("mouseenter.customSelect",function(){h.addClass(b("Hover"))}).on("mouseleave.customSelect",function(){h.removeClass(b("Hover"))}).trigger("render.customSelect")})}})})(jQuery);
/*! jquery.cookie v1.4.1 | MIT */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?a(require("jquery")):a(jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});
/**
 * bxSlider v4.2.1d - MODIFIED FOR CHROME 73/74 BUTTON CLICK BUG (SBX)
 * Copyright 2013-2017 Steven Wanderski
 * Written while drinking Belgian ales and listening to jazz
 * Licensed under MIT (http://opensource.org/licenses/MIT)
 */
!function (t) { var e = { mode: "horizontal", slideSelector: "", infiniteLoop: !0, hideControlOnEnd: !1, speed: 500, easing: null, slideMargin: 0, startSlide: 0, randomStart: !1, captions: !1, ticker: !1, tickerHover: !1, adaptiveHeight: !1, adaptiveHeightSpeed: 500, video: !1, useCSS: !0, preloadImages: "visible", responsive: !0, slideZIndex: 50, wrapperClass: "bx-wrapper", touchEnabled: void 0 !== window.orientation || -1 !== navigator.userAgent.indexOf("IEMobile"), swipeThreshold: 50, oneToOneTouch: !0, preventDefaultSwipeX: !0, preventDefaultSwipeY: !1, ariaLive: !0, ariaHidden: !0, keyboardEnabled: !1, pager: !0, pagerType: "full", pagerShortSeparator: " / ", pagerSelector: null, buildPager: null, pagerCustom: null, controls: !0, nextText: "Next", prevText: "Prev", nextSelector: null, prevSelector: null, autoControls: !1, startText: "Start", stopText: "Stop", autoControlsCombine: !1, autoControlsSelector: null, auto: !1, pause: 4e3, autoStart: !0, autoDirection: "next", stopAutoOnClick: !1, autoHover: !1, autoDelay: 0, autoSlideForOnePage: !1, minSlides: 1, maxSlides: 1, moveSlides: 0, slideWidth: 0, shrinkItems: !1, onSliderLoad: function () { return !0 }, onSlideBefore: function () { return !0 }, onSlideAfter: function () { return !0 }, onSlideNext: function () { return !0 }, onSlidePrev: function () { return !0 }, onSliderResize: function () { return !0 }, onAutoChange: function () { return !0 } }; t.fn.bxSlider = function (n) { if (0 === this.length) return this; if (this.length > 1) return this.each(function () { t(this).bxSlider(n) }), this; var s = {}, o = this, r = t(window).width(), a = t(window).height(); if (!t(o).data("bxSlider")) { var l = function () { !t(o).data("bxSlider") && (s.settings = t.extend({}, e, n), s.settings.slideWidth = parseInt(s.settings.slideWidth), s.children = o.children(s.settings.slideSelector), s.children.length < s.settings.minSlides && (s.settings.minSlides = s.children.length), s.children.length < s.settings.maxSlides && (s.settings.maxSlides = s.children.length), s.settings.randomStart && (s.settings.startSlide = Math.floor(Math.random() * s.children.length)), s.active = { index: s.settings.startSlide }, s.carousel = s.settings.minSlides > 1 || s.settings.maxSlides > 1, s.carousel && (s.settings.preloadImages = "all"), s.minThreshold = s.settings.minSlides * s.settings.slideWidth + (s.settings.minSlides - 1) * s.settings.slideMargin, s.maxThreshold = s.settings.maxSlides * s.settings.slideWidth + (s.settings.maxSlides - 1) * s.settings.slideMargin, s.working = !1, s.controls = {}, s.interval = null, s.animProp = "vertical" === s.settings.mode ? "top" : "left", s.usingCSS = s.settings.useCSS && "fade" !== s.settings.mode && function () { for (var t = document.createElement("div"), e = ["WebkitPerspective", "MozPerspective", "OPerspective", "msPerspective"], n = 0; n < e.length; n++)if (void 0 !== t.style[e[n]]) return s.cssPrefix = e[n].replace("Perspective", "").toLowerCase(), s.animProp = "-" + s.cssPrefix + "-transform", !0; return !1 }(), "vertical" === s.settings.mode && (s.settings.maxSlides = s.settings.minSlides), o.data("origStyle", o.attr("style")), o.children(s.settings.slideSelector).each(function () { t(this).data("origStyle", t(this).attr("style")) }), d()) }, d = function () { var e = s.children.eq(s.settings.startSlide); o.wrap('<div class="' + s.settings.wrapperClass + '"><div class="bx-viewport"></div></div>'), s.viewport = o.parent(), s.settings.ariaLive && !s.settings.ticker && s.viewport.attr("aria-live", "polite"), s.loader = t('<div class="bx-loading" />'), s.viewport.prepend(s.loader), o.css({ width: "horizontal" === s.settings.mode ? 1e3 * s.children.length + 215 + "%" : "auto", position: "relative" }), s.usingCSS && s.settings.easing ? o.css("-" + s.cssPrefix + "-transition-timing-function", s.settings.easing) : s.settings.easing || (s.settings.easing = "swing"), s.viewport.css({ width: "100%", overflow: "hidden", position: "relative" }), s.viewport.parent().css({ maxWidth: p() }), s.children.css({ float: "horizontal" === s.settings.mode ? "left" : "none", listStyle: "none", position: "relative" }), s.children.css("width", h()), "horizontal" === s.settings.mode && s.settings.slideMargin > 0 && s.children.css("marginRight", s.settings.slideMargin), "vertical" === s.settings.mode && s.settings.slideMargin > 0 && s.children.css("marginBottom", s.settings.slideMargin), "fade" === s.settings.mode && (s.children.css({ position: "absolute", zIndex: 0, display: "none" }), s.children.eq(s.settings.startSlide).css({ zIndex: s.settings.slideZIndex, display: "block" })), s.controls.el = t('<div class="bx-controls" />'), s.settings.captions && _(), s.active.last = s.settings.startSlide === f() - 1, s.settings.video && o.fitVids(), "none" === s.settings.preloadImages ? e = null : ("all" === s.settings.preloadImages || s.settings.ticker) && (e = s.children), s.settings.ticker ? s.settings.pager = !1 : (s.settings.controls && w(), s.settings.auto && s.settings.autoControls && C(), s.settings.pager && b(), (s.settings.controls || s.settings.autoControls || s.settings.pager) && s.viewport.after(s.controls.el)), null === e ? g() : c(e, g) }, c = function (e, n) { var s = e.find('img:not([src=""]), iframe').length, o = 0; if (0 === s) { n(); return } e.find('img:not([src=""]), iframe').each(function () { t(this).one("load error", function () { ++o === s && n() }).each(function () { (this.complete || "" == this.src) && t(this).trigger("load") }) }) }, g = function () { if (s.settings.infiniteLoop && "fade" !== s.settings.mode && !s.settings.ticker) { var e = "vertical" === s.settings.mode ? s.settings.minSlides : s.settings.maxSlides, n = s.children.slice(0, e).clone(!0).addClass("bx-clone"), r = s.children.slice(-e).clone(!0).addClass("bx-clone"); s.settings.ariaHidden && (n.attr("aria-hidden", !0), r.attr("aria-hidden", !0)), o.append(n).prepend(r) } s.loader.remove(), m(), "vertical" === s.settings.mode && (s.settings.adaptiveHeight = !0), s.viewport.height(u()), o.redrawSlider(), s.settings.onSliderLoad.call(o, s.active.index), s.initialized = !0, s.settings.responsive && t(window).on("resize", F), s.settings.auto && s.settings.autoStart && (f() > 1 || s.settings.autoSlideForOnePage) && H(), s.settings.ticker && W(), s.settings.pager && z(s.settings.startSlide), s.settings.controls && A(), s.settings.touchEnabled && !s.settings.ticker && B(), s.settings.keyboardEnabled && !s.settings.ticker && t(document).keydown(N) }, u = function () { var e = 0, n = t(); if ("vertical" === s.settings.mode || s.settings.adaptiveHeight) { if (s.carousel) { var o = 1 === s.settings.moveSlides ? s.active.index : s.active.index * x(); for (i = 1, n = s.children.eq(o); i <= s.settings.maxSlides - 1; i++)n = o + i >= s.children.length ? n.add(s.children.eq(i - 1)) : n.add(s.children.eq(o + i)) } else n = s.children.eq(s.active.index) } else n = s.children; return "vertical" === s.settings.mode ? (n.each(function (n) { e += t(this).outerHeight() }), s.settings.slideMargin > 0 && (e += s.settings.slideMargin * (s.settings.minSlides - 1))) : e = Math.max.apply(Math, n.map(function () { return t(this).outerHeight(!1) }).get()), "border-box" === s.viewport.css("box-sizing") ? e += parseFloat(s.viewport.css("padding-top")) + parseFloat(s.viewport.css("padding-bottom")) + parseFloat(s.viewport.css("border-top-width")) + parseFloat(s.viewport.css("border-bottom-width")) : "padding-box" === s.viewport.css("box-sizing") && (e += parseFloat(s.viewport.css("padding-top")) + parseFloat(s.viewport.css("padding-bottom"))), e }, p = function () { var t = "100%"; return s.settings.slideWidth > 0 && (t = "horizontal" === s.settings.mode ? s.settings.maxSlides * s.settings.slideWidth + (s.settings.maxSlides - 1) * s.settings.slideMargin : s.settings.slideWidth), t }, h = function () { var t = s.settings.slideWidth, e = s.viewport.width(); return 0 === s.settings.slideWidth || s.settings.slideWidth > e && !s.carousel || "vertical" === s.settings.mode ? t = e : s.settings.maxSlides > 1 && "horizontal" === s.settings.mode && (e > s.maxThreshold || (e < s.minThreshold ? t = (e - s.settings.slideMargin * (s.settings.minSlides - 1)) / s.settings.minSlides : s.settings.shrinkItems && (t = Math.floor((e + s.settings.slideMargin) / Math.ceil((e + s.settings.slideMargin) / (t + s.settings.slideMargin)) - s.settings.slideMargin)))), t }, v = function () { var t = 1, e = null; return "horizontal" === s.settings.mode && s.settings.slideWidth > 0 ? s.viewport.width() < s.minThreshold ? t = s.settings.minSlides : s.viewport.width() > s.maxThreshold ? t = s.settings.maxSlides : (e = s.children.first().width() + s.settings.slideMargin, t = Math.floor((s.viewport.width() + s.settings.slideMargin) / e) || 1) : "vertical" === s.settings.mode && (t = s.settings.minSlides), t }, f = function () { var t = 0, e = 0, n = 0; if (s.settings.moveSlides > 0) { if (s.settings.infiniteLoop) t = Math.ceil(s.children.length / x()); else { for (; e < s.children.length;)++t, e = n + v(), n += s.settings.moveSlides <= v() ? s.settings.moveSlides : v(); return n } } else t = Math.ceil(s.children.length / v()); return t }, x = function () { return s.settings.moveSlides > 0 && s.settings.moveSlides <= v() ? s.settings.moveSlides : v() }, m = function () { var t, e, n; s.children.length > s.settings.maxSlides && s.active.last && !s.settings.infiniteLoop ? "horizontal" === s.settings.mode ? $(-((t = (e = s.children.last()).position()).left - (s.viewport.width() - e.outerWidth())), "reset", 0) : "vertical" === s.settings.mode && (n = s.children.length - s.settings.minSlides, $(-(t = s.children.eq(n).position()).top, "reset", 0)) : (t = s.children.eq(s.active.index * x()).position(), s.active.index === f() - 1 && (s.active.last = !0), void 0 !== t && ("horizontal" === s.settings.mode ? $(-t.left, "reset", 0) : "vertical" === s.settings.mode && $(-t.top, "reset", 0))) }, $ = function (e, n, r, a) { var l, d; s.usingCSS ? (d = "vertical" === s.settings.mode ? "translate3d(0, " + e + "px, 0)" : "translate3d(" + e + "px, 0, 0)", o.css("-" + s.cssPrefix + "-transition-duration", r / 1e3 + "s"), "slide" === n ? (o.css(s.animProp, d), 0 !== r ? o.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function (e) { t(e.target).is(o) && (o.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"), M()) }) : M()) : "reset" === n ? o.css(s.animProp, d) : "ticker" === n && (o.css("-" + s.cssPrefix + "-transition-timing-function", "linear"), o.css(s.animProp, d), 0 !== r ? o.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd", function (e) { t(e.target).is(o) && (o.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"), $(a.resetValue, "reset", 0), L()) }) : ($(a.resetValue, "reset", 0), L()))) : ((l = {})[s.animProp] = e, "slide" === n ? o.animate(l, r, s.settings.easing, function () { M() }) : "reset" === n ? o.css(s.animProp, e) : "ticker" === n && o.animate(l, r, "linear", function () { $(a.resetValue, "reset", 0), L() })) }, S = function () { for (var e = "", n = "", o = f(), r = 0; r < o; r++)n = "", s.settings.buildPager && t.isFunction(s.settings.buildPager) || s.settings.pagerCustom ? (n = s.settings.buildPager(r), s.pagerEl.addClass("bx-custom-pager")) : (n = r + 1, s.pagerEl.addClass("bx-default-pager")), e += '<div class="bx-pager-item"><a href="" data-slide-index="' + r + '" class="bx-pager-link">' + n + "</a></div>"; s.pagerEl.html(e) }, b = function () { s.settings.pagerCustom ? s.pagerEl = t(s.settings.pagerCustom) : (s.pagerEl = t('<div class="bx-pager" />'), s.settings.pagerSelector ? t(s.settings.pagerSelector).html(s.pagerEl) : s.controls.el.addClass("bx-has-pager").append(s.pagerEl), S()), s.pagerEl.on("click touchend", "a", y) }, w = function () { s.controls.next = t('<a class="bx-next" href="">' + s.settings.nextText + "</a>"), s.controls.prev = t('<a class="bx-prev" href="">' + s.settings.prevText + "</a>"), s.controls.next.on("click touchend", k), s.controls.prev.on("click touchend", T), s.settings.nextSelector && t(s.settings.nextSelector).append(s.controls.next), s.settings.prevSelector && t(s.settings.prevSelector).append(s.controls.prev), s.settings.nextSelector || s.settings.prevSelector || (s.controls.directionEl = t('<div class="bx-controls-direction" />'), s.controls.directionEl.append(s.controls.prev).append(s.controls.next), s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl)) }, C = function () { s.controls.start = t('<div class="bx-controls-auto-item"><a class="bx-start" href="">' + s.settings.startText + "</a></div>"), s.controls.stop = t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">' + s.settings.stopText + "</a></div>"), s.controls.autoEl = t('<div class="bx-controls-auto" />'), s.controls.autoEl.on("click", ".bx-start", P), s.controls.autoEl.on("click", ".bx-stop", E), s.settings.autoControlsCombine ? s.controls.autoEl.append(s.controls.start) : s.controls.autoEl.append(s.controls.start).append(s.controls.stop), s.settings.autoControlsSelector ? t(s.settings.autoControlsSelector).html(s.controls.autoEl) : s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl), I(s.settings.autoStart ? "stop" : "start") }, _ = function () { s.children.each(function (e) { var n = t(this).find("img:first").attr("title"); void 0 !== n && ("" + n).length && t(this).append('<div class="bx-caption"><span>' + n + "</span></div>") }) }, k = function (t) { t.preventDefault(), !s.controls.el.hasClass("disabled") && (s.settings.auto && s.settings.stopAutoOnClick && o.stopAuto(), o.goToNextSlide()) }, T = function (t) { t.preventDefault(), !s.controls.el.hasClass("disabled") && (s.settings.auto && s.settings.stopAutoOnClick && o.stopAuto(), o.goToPrevSlide()) }, P = function (t) { o.startAuto(), t.preventDefault() }, E = function (t) { o.stopAuto(), t.preventDefault() }, y = function (e) { var n, r; e.preventDefault(), !s.controls.el.hasClass("disabled") && (s.settings.auto && s.settings.stopAutoOnClick && o.stopAuto(), void 0 !== (n = t(e.currentTarget)).attr("data-slide-index") && (r = parseInt(n.attr("data-slide-index"))) !== s.active.index && o.goToSlide(r)) }, z = function (e) { var n = s.children.length; if ("short" === s.settings.pagerType) { s.settings.maxSlides > 1 && (n = Math.ceil(s.children.length / s.settings.maxSlides)), s.pagerEl.html(e + 1 + s.settings.pagerShortSeparator + n); return } s.pagerEl.find("a").removeClass("active"), s.pagerEl.each(function (n, s) { t(s).find("a").eq(e).addClass("active") }) }, M = function () { if (s.settings.infiniteLoop) { var t = ""; 0 === s.active.index ? t = s.children.eq(0).position() : s.active.index === f() - 1 && s.carousel ? t = s.children.eq((f() - 1) * x()).position() : s.active.index === s.children.length - 1 && (t = s.children.eq(s.children.length - 1).position()), t && ("horizontal" === s.settings.mode ? $(-t.left, "reset", 0) : "vertical" === s.settings.mode && $(-t.top, "reset", 0)) } s.working = !1, s.settings.onSlideAfter.call(o, s.children.eq(s.active.index), s.oldIndex, s.active.index) }, I = function (t) { s.settings.autoControlsCombine ? s.controls.autoEl.html(s.controls[t]) : (s.controls.autoEl.find("a").removeClass("active"), s.controls.autoEl.find("a:not(.bx-" + t + ")").addClass("active")) }, A = function () { 1 === f() ? (s.controls.prev.addClass("disabled"), s.controls.next.addClass("disabled")) : !s.settings.infiniteLoop && s.settings.hideControlOnEnd && (0 === s.active.index ? (s.controls.prev.addClass("disabled"), s.controls.next.removeClass("disabled")) : s.active.index === f() - 1 ? (s.controls.next.addClass("disabled"), s.controls.prev.removeClass("disabled")) : (s.controls.prev.removeClass("disabled"), s.controls.next.removeClass("disabled"))) }, D = function () { o.startAuto() }, q = function () { o.stopAuto() }, H = function () { s.settings.autoDelay > 0 ? setTimeout(o.startAuto, s.settings.autoDelay) : (o.startAuto(), t(window).focus(D).blur(q)), s.settings.autoHover && o.hover(function () { s.interval && (o.stopAuto(!0), s.autoPaused = !0) }, function () { s.autoPaused && (o.startAuto(!0), s.autoPaused = null) }) }, W = function () { var e, n, r, a, l, d, c, g, u = 0; "next" === s.settings.autoDirection ? o.append(s.children.clone().addClass("bx-clone")) : (o.prepend(s.children.clone().addClass("bx-clone")), e = s.children.first().position(), u = "horizontal" === s.settings.mode ? -e.left : -e.top), $(u, "reset", 0), s.settings.pager = !1, s.settings.controls = !1, s.settings.autoControls = !1, s.settings.tickerHover && (s.usingCSS ? (a = "horizontal" === s.settings.mode ? 4 : 5, s.viewport.hover(function () { r = parseFloat((n = o.css("-" + s.cssPrefix + "-transform")).split(",")[a]), $(r, "reset", 0) }, function () { g = 0, s.children.each(function (e) { g += "horizontal" === s.settings.mode ? t(this).outerWidth(!0) : t(this).outerHeight(!0) }), l = s.settings.speed / g, d = "horizontal" === s.settings.mode ? "left" : "top", c = l * (g - Math.abs(parseInt(r))), L(c) })) : s.viewport.hover(function () { o.stop() }, function () { g = 0, s.children.each(function (e) { g += "horizontal" === s.settings.mode ? t(this).outerWidth(!0) : t(this).outerHeight(!0) }), l = s.settings.speed / g, d = "horizontal" === s.settings.mode ? "left" : "top", c = l * (g - Math.abs(parseInt(o.css(d)))), L(c) })), L() }, L = function (t) { var e, n, r, a = t || s.settings.speed, l = { left: 0, top: 0 }, d = { left: 0, top: 0 }; "next" === s.settings.autoDirection ? l = o.find(".bx-clone").first().position() : d = s.children.first().position(), $(e = "horizontal" === s.settings.mode ? -l.left : -l.top, "ticker", a, r = { resetValue: n = "horizontal" === s.settings.mode ? -d.left : -d.top }) }, O = function (e) { var n = t(window), s = { top: n.scrollTop(), left: n.scrollLeft() }, o = e.offset(); return s.right = s.left + n.width(), s.bottom = s.top + n.height(), o.right = o.left + e.outerWidth(), o.bottom = o.top + e.outerHeight(), !(s.right < o.left || s.left > o.right || s.bottom < o.top || s.top > o.bottom) }, N = function (t) { if (null == RegExp(document.activeElement.tagName.toLowerCase(), ["i"]).exec("input|textarea") && O(o)) { if (39 === t.keyCode) return k(t), !1; if (37 === t.keyCode) return T(t), !1 } }, B = function () { s.touch = { start: { x: 0, y: 0 }, end: { x: 0, y: 0 } }, s.viewport.on("touchstart MSPointerDown pointerdown", X), s.viewport.on("click", ".bxslider a", function (t) { s.viewport.hasClass("click-disabled") && (t.preventDefault(), s.viewport.removeClass("click-disabled")) }) }, X = function (t) { if ("touchstart" === t.type || 0 === t.button) { if (t.preventDefault(), s.controls.el.addClass("disabled"), s.working) s.controls.el.removeClass("disabled"); else { s.touch.originalPos = o.position(); var e = t.originalEvent, n = void 0 !== e.changedTouches ? e.changedTouches : [e]; if ("function" == typeof PointerEvent && void 0 === e.pointerId) return; s.touch.start.x = n[0].pageX, s.touch.start.y = n[0].pageY, s.viewport.get(0).setPointerCapture && (s.pointerId = e.pointerId, s.viewport.get(0).setPointerCapture(s.pointerId)), s.originalClickTarget = e.originalTarget || e.target, s.originalClickButton = e.button, s.originalClickButtons = e.buttons, s.originalEventType = e.type, s.hasMove = !1, s.viewport.on("touchmove MSPointerMove pointermove", V), s.viewport.on("touchend MSPointerUp pointerup", Z), s.viewport.on("MSPointerCancel pointercancel", Y) } } }, Y = function (t) { t.preventDefault(), $(s.touch.originalPos.left, "reset", 0), s.controls.el.removeClass("disabled"), s.viewport.off("MSPointerCancel pointercancel", Y), s.viewport.off("touchmove MSPointerMove pointermove", V), s.viewport.off("touchend MSPointerUp pointerup", Z), s.viewport.get(0).releasePointerCapture && s.viewport.get(0).releasePointerCapture(s.pointerId) }, V = function (t) { var e = t.originalEvent, n = void 0 !== e.changedTouches ? e.changedTouches : [e], o = Math.abs(n[0].pageX - s.touch.start.x), r = Math.abs(n[0].pageY - s.touch.start.y), a = 0, l = 0; s.hasMove = !0, 3 * o > r && s.settings.preventDefaultSwipeX ? t.preventDefault() : 3 * r > o && s.settings.preventDefaultSwipeY && t.preventDefault(), "touchmove" !== t.type && t.preventDefault(), "fade" !== s.settings.mode && s.settings.oneToOneTouch && ("horizontal" === s.settings.mode ? (l = n[0].pageX - s.touch.start.x, a = s.touch.originalPos.left + l) : (l = n[0].pageY - s.touch.start.y, a = s.touch.originalPos.top + l), $(a, "reset", 0)) }, Z = function (e) { e.preventDefault(), s.viewport.off("touchmove MSPointerMove pointermove", V), s.controls.el.removeClass("disabled"); var n = e.originalEvent, r = void 0 !== n.changedTouches ? n.changedTouches : [n], a = 0, l = 0; s.touch.end.x = r[0].pageX, s.touch.end.y = r[0].pageY, "fade" === s.settings.mode ? (l = Math.abs(s.touch.start.x - s.touch.end.x)) >= s.settings.swipeThreshold && (s.touch.start.x > s.touch.end.x ? o.goToNextSlide() : o.goToPrevSlide(), o.stopAuto()) : ("horizontal" === s.settings.mode ? (l = s.touch.end.x - s.touch.start.x, a = s.touch.originalPos.left) : (l = s.touch.end.y - s.touch.start.y, a = s.touch.originalPos.top), !s.settings.infiniteLoop && (0 === s.active.index && l > 0 || s.active.last && l < 0) ? $(a, "reset", 200) : Math.abs(l) >= s.settings.swipeThreshold ? (l < 0 ? o.goToNextSlide() : o.goToPrevSlide(), o.stopAuto()) : $(a, "reset", 200)), s.viewport.off("touchend MSPointerUp pointerup", Z), s.viewport.get(0).releasePointerCapture && s.viewport.get(0).releasePointerCapture(s.pointerId), !1 === s.hasMove && (0 === s.originalClickButton || "touchstart" === s.originalEventType) && t(s.originalClickTarget).trigger({ type: "click", button: s.originalClickButton, buttons: s.originalClickButtons }) }, F = function (e) { if (s.initialized) { if (s.working) window.setTimeout(F, 10); else { var n = t(window).width(), l = t(window).height(); (r !== n || a !== l) && (r = n, a = l, o.redrawSlider(), s.settings.onSliderResize.call(o, s.active.index)) } } }, R = function (t) { var e = v(); s.settings.ariaHidden && !s.settings.ticker && (s.children.attr("aria-hidden", "true"), s.children.slice(t, t + e).attr("aria-hidden", "false")) }; return o.goToSlide = function (e, n) { var r, a, l, d, c, g = !0, p = 0, h = { left: 0, top: 0 }, v = null; if (s.oldIndex = s.active.index, s.active.index = (c = e, c < 0 ? s.settings.infiniteLoop ? f() - 1 : s.active.index : c >= f() ? s.settings.infiniteLoop ? 0 : s.active.index : c), !s.working && s.active.index !== s.oldIndex) { if (s.working = !0, void 0 !== (g = s.settings.onSlideBefore.call(o, s.children.eq(s.active.index), s.oldIndex, s.active.index)) && !g) { s.active.index = s.oldIndex, s.working = !1; return } "next" === n ? s.settings.onSlideNext.call(o, s.children.eq(s.active.index), s.oldIndex, s.active.index) || (g = !1) : "prev" !== n || s.settings.onSlidePrev.call(o, s.children.eq(s.active.index), s.oldIndex, s.active.index) || (g = !1), s.active.last = s.active.index >= f() - 1, (s.settings.pager || s.settings.pagerCustom) && z(s.active.index), s.settings.controls && A(), "fade" === s.settings.mode ? (s.settings.adaptiveHeight && s.viewport.height() !== u() && s.viewport.animate({ height: u() }, s.settings.adaptiveHeightSpeed), s.children.filter(":visible").fadeOut(s.settings.speed).css({ zIndex: 0 }), s.children.eq(s.active.index).css("zIndex", s.settings.slideZIndex + 1).fadeIn(s.settings.speed, function () { t(this).css("zIndex", s.settings.slideZIndex), M() })) : (s.settings.adaptiveHeight && s.viewport.height() !== u() && s.viewport.animate({ height: u() }, s.settings.adaptiveHeightSpeed), !s.settings.infiniteLoop && s.carousel && s.active.last ? "horizontal" === s.settings.mode ? (h = (v = s.children.eq(s.children.length - 1)).position(), p = s.viewport.width() - v.outerWidth()) : (r = s.children.length - s.settings.minSlides, h = s.children.eq(r).position()) : s.carousel && s.active.last && "prev" === n ? (a = 1 === s.settings.moveSlides ? s.settings.maxSlides - x() : (f() - 1) * x() - (s.children.length - s.settings.maxSlides), h = (v = o.children(".bx-clone").eq(a)).position()) : "next" === n && 0 === s.active.index ? (h = o.find("> .bx-clone").eq(s.settings.maxSlides).position(), s.active.last = !1) : e >= 0 && (d = e * parseInt(x()), h = s.children.eq(d).position()), void 0 !== h && $(l = "horizontal" === s.settings.mode ? -(h.left - p) : -h.top, "slide", s.settings.speed), s.working = !1), s.settings.ariaHidden && R(s.active.index * x()) } }, o.goToNextSlide = function () { if ((s.settings.infiniteLoop || !s.active.last) && !0 !== s.working) { var t = parseInt(s.active.index) + 1; o.goToSlide(t, "next") } }, o.goToPrevSlide = function () { if ((s.settings.infiniteLoop || 0 !== s.active.index) && !0 !== s.working) { var t = parseInt(s.active.index) - 1; o.goToSlide(t, "prev") } }, o.startAuto = function (t) { !s.interval && (s.interval = setInterval(function () { "next" === s.settings.autoDirection ? o.goToNextSlide() : o.goToPrevSlide() }, s.settings.pause), s.settings.onAutoChange.call(o, !0), s.settings.autoControls && !0 !== t && I("stop")) }, o.stopAuto = function (t) { s.autoPaused && (s.autoPaused = !1), s.interval && (clearInterval(s.interval), s.interval = null, s.settings.onAutoChange.call(o, !1), s.settings.autoControls && !0 !== t && I("start")) }, o.getCurrentSlide = function () { return s.active.index }, o.getCurrentSlideElement = function () { return s.children.eq(s.active.index) }, o.getSlideElement = function (t) { return s.children.eq(t) }, o.getSlideCount = function () { return s.children.length }, o.isWorking = function () { return s.working }, o.redrawSlider = function () { s.children.add(o.find(".bx-clone")).outerWidth(h()), s.viewport.css("height", u()), s.settings.ticker || m(), s.active.last && (s.active.index = f() - 1), s.active.index >= f() && (s.active.last = !0), s.settings.pager && !s.settings.pagerCustom && (S(), z(s.active.index)), s.settings.ariaHidden && R(s.active.index * x()) }, o.destroySlider = function () { s.initialized && (s.initialized = !1, t(".bx-clone", this).remove(), s.children.each(function () { void 0 !== t(this).data("origStyle") ? t(this).attr("style", t(this).data("origStyle")) : t(this).removeAttr("style") }), void 0 !== t(this).data("origStyle") ? this.attr("style", t(this).data("origStyle")) : t(this).removeAttr("style"), t(this).unwrap().unwrap(), s.controls.el && s.controls.el.remove(), s.controls.next && s.controls.next.remove(), s.controls.prev && s.controls.prev.remove(), s.pagerEl && s.settings.controls && !s.settings.pagerCustom && s.pagerEl.remove(), t(".bx-caption", this).remove(), s.controls.autoEl && s.controls.autoEl.remove(), clearInterval(s.interval), s.settings.responsive && t(window).off("resize", F), s.settings.keyboardEnabled && t(document).off("keydown", N), t(this).removeData("bxSlider"), t(window).off("blur", q).off("focus", D)) }, o.reloadSlider = function (e) { void 0 !== e && (n = e), o.destroySlider(), l(), t(o).data("bxSlider", this) }, l(), t(o).data("bxSlider", this), this } } }(jQuery);
(function(n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):"undefined"!=typeof exports?module.exports=n(require("jquery")):n(jQuery)})(function(n){"use strict";var t=window.Slick||{};t=function(){function t(t,r){var f,u=this;u.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:n(t),appendDots:n(t),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous<\/button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next<\/button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,i){return n('<button type="button" />').text(i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3};u.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1};n.extend(u,u.initials);u.activeBreakpoint=null;u.animType=null;u.animProp=null;u.breakpoints=[];u.breakpointSettings=[];u.cssTransitions=!1;u.focussed=!1;u.interrupted=!1;u.hidden="hidden";u.paused=!0;u.positionProp=null;u.respondTo=null;u.rowCount=1;u.shouldClick=!0;u.$slider=n(t);u.$slidesCache=null;u.transformType=null;u.transitionType=null;u.visibilityChange="visibilitychange";u.windowWidth=0;u.windowTimer=null;f=n(t).data("slick")||{};u.options=n.extend({},u.defaults,r,f);u.currentSlide=u.options.initialSlide;u.originalSettings=u.options;"undefined"!=typeof document.mozHidden?(u.hidden="mozHidden",u.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(u.hidden="webkitHidden",u.visibilityChange="webkitvisibilitychange");u.autoPlay=n.proxy(u.autoPlay,u);u.autoPlayClear=n.proxy(u.autoPlayClear,u);u.autoPlayIterator=n.proxy(u.autoPlayIterator,u);u.changeSlide=n.proxy(u.changeSlide,u);u.clickHandler=n.proxy(u.clickHandler,u);u.selectHandler=n.proxy(u.selectHandler,u);u.setPosition=n.proxy(u.setPosition,u);u.swipeHandler=n.proxy(u.swipeHandler,u);u.dragHandler=n.proxy(u.dragHandler,u);u.keyHandler=n.proxy(u.keyHandler,u);u.instanceUid=i++;u.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;u.registerBreakpoints();u.init(!0)}var i=0;return t}();t.prototype.activateADA=function(){var n=this;n.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})};t.prototype.addSlide=t.prototype.slickAdd=function(t,i,r){var u=this;if("boolean"==typeof i)r=i,i=null;else if(i<0||i>=u.slideCount)return!1;u.unload();"number"==typeof i?0===i&&0===u.$slides.length?n(t).appendTo(u.$slideTrack):r?n(t).insertBefore(u.$slides.eq(i)):n(t).insertAfter(u.$slides.eq(i)):r===!0?n(t).prependTo(u.$slideTrack):n(t).appendTo(u.$slideTrack);u.$slides=u.$slideTrack.children(this.options.slide);u.$slideTrack.children(this.options.slide).detach();u.$slideTrack.append(u.$slides);u.$slides.each(function(t,i){n(i).attr("data-slick-index",t)});u.$slidesCache=u.$slides;u.reinit()};t.prototype.animateHeight=function(){var n=this,t;1===n.options.slidesToShow&&n.options.adaptiveHeight===!0&&n.options.vertical===!1&&(t=n.$slides.eq(n.currentSlide).outerHeight(!0),n.$list.animate({height:t},n.options.speed))};t.prototype.animateSlide=function(t,i){var u={},r=this;r.animateHeight();r.options.rtl===!0&&r.options.vertical===!1&&(t=-t);r.transformsEnabled===!1?r.options.vertical===!1?r.$slideTrack.animate({left:t},r.options.speed,r.options.easing,i):r.$slideTrack.animate({top:t},r.options.speed,r.options.easing,i):r.cssTransitions===!1?(r.options.rtl===!0&&(r.currentLeft=-r.currentLeft),n({animStart:r.currentLeft}).animate({animStart:t},{duration:r.options.speed,easing:r.options.easing,step:function(n){n=Math.ceil(n);r.options.vertical===!1?(u[r.animType]="translate("+n+"px, 0px)",r.$slideTrack.css(u)):(u[r.animType]="translate(0px,"+n+"px)",r.$slideTrack.css(u))},complete:function(){i&&i.call()}})):(r.applyTransition(),t=Math.ceil(t),u[r.animType]=r.options.vertical===!1?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",r.$slideTrack.css(u),i&&setTimeout(function(){r.disableTransition();i.call()},r.options.speed))};t.prototype.getNavTarget=function(){var i=this,t=i.options.asNavFor;return t&&null!==t&&(t=n(t).not(i.$slider)),t};t.prototype.asNavFor=function(t){var r=this,i=r.getNavTarget();null!==i&&"object"==typeof i&&i.each(function(){var i=n(this).slick("getSlick");i.unslicked||i.slideHandler(t,!0)})};t.prototype.applyTransition=function(n){var t=this,i={};i[t.transitionType]=t.options.fade===!1?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase;t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(n).css(i)};t.prototype.autoPlay=function(){var n=this;n.autoPlayClear();n.slideCount>n.options.slidesToShow&&(n.autoPlayTimer=setInterval(n.autoPlayIterator,n.options.autoplaySpeed))};t.prototype.autoPlayClear=function(){var n=this;n.autoPlayTimer&&clearInterval(n.autoPlayTimer)};t.prototype.autoPlayIterator=function(){var n=this,t=n.currentSlide+n.options.slidesToScroll;n.paused||n.interrupted||n.focussed||(n.options.infinite===!1&&(1===n.direction&&n.currentSlide+1===n.slideCount-1?n.direction=0:0===n.direction&&(t=n.currentSlide-n.options.slidesToScroll,n.currentSlide-1==0&&(n.direction=1))),n.slideHandler(t))};t.prototype.buildArrows=function(){var t=this;t.options.arrows===!0&&(t.$prevArrow=n(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=n(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),t.options.infinite!==!0&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))};t.prototype.buildDots=function(){var i,r,t=this;if(t.options.dots===!0&&t.slideCount>t.options.slidesToShow){for(t.$slider.addClass("slick-dotted"),r=n("<ul />").addClass(t.options.dotsClass),i=0;i<=t.getDotCount();i+=1)r.append(n("<li />").append(t.options.customPaging.call(this,t,i)));t.$dots=r.appendTo(t.options.appendDots);t.$dots.find("li").first().addClass("slick-active")}};t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide");t.slideCount=t.$slides.length;t.$slides.each(function(t,i){n(i).attr("data-slick-index",t).data("originalStyling",n(i).attr("style")||"")});t.$slider.addClass("slick-slider");t.$slideTrack=0===t.slideCount?n('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent();t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent();t.$slideTrack.css("opacity",0);t.options.centerMode!==!0&&t.options.swipeToSlide!==!0||(t.options.slidesToScroll=1);n("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading");t.setupInfinite();t.buildArrows();t.buildDots();t.updateDots();t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0);t.options.draggable===!0&&t.$list.addClass("draggable")};t.prototype.buildRows=function(){var t,i,r,f,c,u,e,n=this,o,s,h;if(f=document.createDocumentFragment(),u=n.$slider.children(),n.options.rows>0){for(e=n.options.slidesPerRow*n.options.rows,c=Math.ceil(u.length/e),t=0;t<c;t++){for(o=document.createElement("div"),i=0;i<n.options.rows;i++){for(s=document.createElement("div"),r=0;r<n.options.slidesPerRow;r++)h=t*e+(i*n.options.slidesPerRow+r),u.get(h)&&s.appendChild(u.get(h));o.appendChild(s)}f.appendChild(o)}n.$slider.empty().append(f);n.$slider.children().children().children().css({width:100/n.options.slidesPerRow+"%",display:"inline-block"})}};t.prototype.checkResponsive=function(t,i){var f,u,e,r=this,o=!1,s=r.$slider.width(),h=window.innerWidth||n(window).width();if("window"===r.respondTo?e=h:"slider"===r.respondTo?e=s:"min"===r.respondTo&&(e=Math.min(h,s)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){u=null;for(f in r.breakpoints)r.breakpoints.hasOwnProperty(f)&&(r.originalSettings.mobileFirst===!1?e<r.breakpoints[f]&&(u=r.breakpoints[f]):e>r.breakpoints[f]&&(u=r.breakpoints[f]));null!==u?null!==r.activeBreakpoint?(u!==r.activeBreakpoint||i)&&(r.activeBreakpoint=u,"unslick"===r.breakpointSettings[u]?r.unslick(u):(r.options=n.extend({},r.originalSettings,r.breakpointSettings[u]),t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),o=u):(r.activeBreakpoint=u,"unslick"===r.breakpointSettings[u]?r.unslick(u):(r.options=n.extend({},r.originalSettings,r.breakpointSettings[u]),t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t)),o=u):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,t===!0&&(r.currentSlide=r.options.initialSlide),r.refresh(t),o=u);t||o===!1||r.$slider.trigger("breakpoint",[r,o])}};t.prototype.changeSlide=function(t,i){var f,e,o,r=this,u=n(t.currentTarget),s;switch(u.is("a")&&t.preventDefault(),u.is("li")||(u=u.closest("li")),o=r.slideCount%r.options.slidesToScroll!=0,f=o?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,t.data.message){case"previous":e=0===f?r.options.slidesToScroll:r.options.slidesToShow-f;r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-e,!1,i);break;case"next":e=0===f?r.options.slidesToScroll:f;r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+e,!1,i);break;case"index":s=0===t.data.index?0:t.data.index||u.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(s),!1,i);u.children().trigger("focus");break;default:return}};t.prototype.checkNavigable=function(n){var t,i,u=this,r;if(t=u.getNavigableIndexes(),i=0,n>t[t.length-1])n=t[t.length-1];else for(r in t){if(n<t[r]){n=i;break}i=t[r]}return n};t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(n("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",n.proxy(t.interrupt,t,!0)).off("mouseleave.slick",n.proxy(t.interrupt,t,!1)),t.options.accessibility===!0&&t.$dots.off("keydown.slick",t.keyHandler));t.$slider.off("focus.slick blur.slick");t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),t.options.accessibility===!0&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler)));t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler);t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler);t.$list.off("touchend.slick mouseup.slick",t.swipeHandler);t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler);t.$list.off("click.slick",t.clickHandler);n(document).off(t.visibilityChange,t.visibility);t.cleanUpSlideEvents();t.options.accessibility===!0&&t.$list.off("keydown.slick",t.keyHandler);t.options.focusOnSelect===!0&&n(t.$slideTrack).children().off("click.slick",t.selectHandler);n(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange);n(window).off("resize.slick.slick-"+t.instanceUid,t.resize);n("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault);n(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)};t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",n.proxy(t.interrupt,t,!0));t.$list.off("mouseleave.slick",n.proxy(t.interrupt,t,!1))};t.prototype.cleanUpRows=function(){var n,t=this;t.options.rows>0&&(n=t.$slides.children().children(),n.removeAttr("style"),t.$slider.empty().append(n))};t.prototype.clickHandler=function(n){var t=this;t.shouldClick===!1&&(n.stopImmediatePropagation(),n.stopPropagation(),n.preventDefault())};t.prototype.destroy=function(t){var i=this;i.autoPlayClear();i.touchObject={};i.cleanUpEvents();n(".slick-cloned",i.$slider).detach();i.$dots&&i.$dots.remove();i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove());i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove());i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){n(this).attr("style",n(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides));i.cleanUpRows();i.$slider.removeClass("slick-slider");i.$slider.removeClass("slick-initialized");i.$slider.removeClass("slick-dotted");i.unslicked=!0;t||i.$slider.trigger("destroy",[i])};t.prototype.disableTransition=function(n){var t=this,i={};i[t.transitionType]="";t.options.fade===!1?t.$slideTrack.css(i):t.$slides.eq(n).css(i)};t.prototype.fadeSlide=function(n,t){var i=this;i.cssTransitions===!1?(i.$slides.eq(n).css({zIndex:i.options.zIndex}),i.$slides.eq(n).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(n),i.$slides.eq(n).css({opacity:1,zIndex:i.options.zIndex}),t&&setTimeout(function(){i.disableTransition(n);t.call()},i.options.speed))};t.prototype.fadeSlideOut=function(n){var t=this;t.cssTransitions===!1?t.$slides.eq(n).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(n),t.$slides.eq(n).css({opacity:0,zIndex:t.options.zIndex-2}))};t.prototype.filterSlides=t.prototype.slickFilter=function(n){var t=this;null!==n&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(n).appendTo(t.$slideTrack),t.reinit())};t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick","*",function(){var i=n(this);setTimeout(function(){t.options.pauseOnFocus&&i.is(":focus")&&(t.focussed=!0,t.autoPlay())},0)}).on("blur.slick","*",function(){n(this);t.options.pauseOnFocus&&(t.focussed=!1,t.autoPlay())})};t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){var n=this;return n.currentSlide};t.prototype.getDotCount=function(){var n=this,i=0,r=0,t=0;if(n.options.infinite===!0)if(n.slideCount<=n.options.slidesToShow)++t;else for(;i<n.slideCount;)++t,i=r+n.options.slidesToScroll,r+=n.options.slidesToScroll<=n.options.slidesToShow?n.options.slidesToScroll:n.options.slidesToShow;else if(n.options.centerMode===!0)t=n.slideCount;else if(n.options.asNavFor)for(;i<n.slideCount;)++t,i=r+n.options.slidesToScroll,r+=n.options.slidesToScroll<=n.options.slidesToShow?n.options.slidesToScroll:n.options.slidesToShow;else t=1+Math.ceil((n.slideCount-n.options.slidesToShow)/n.options.slidesToScroll);return t-1};t.prototype.getLeft=function(n){var f,r,i,e,t=this,u=0;return t.slideOffset=0,r=t.$slides.first().outerHeight(!0),t.options.infinite===!0?(t.slideCount>t.options.slidesToShow&&(t.slideOffset=t.slideWidth*t.options.slidesToShow*-1,e=-1,t.options.vertical===!0&&t.options.centerMode===!0&&(2===t.options.slidesToShow?e=-1.5:1===t.options.slidesToShow&&(e=-2)),u=r*t.options.slidesToShow*e),t.slideCount%t.options.slidesToScroll!=0&&n+t.options.slidesToScroll>t.slideCount&&t.slideCount>t.options.slidesToShow&&(n>t.slideCount?(t.slideOffset=(t.options.slidesToShow-(n-t.slideCount))*t.slideWidth*-1,u=(t.options.slidesToShow-(n-t.slideCount))*r*-1):(t.slideOffset=t.slideCount%t.options.slidesToScroll*t.slideWidth*-1,u=t.slideCount%t.options.slidesToScroll*r*-1))):n+t.options.slidesToShow>t.slideCount&&(t.slideOffset=(n+t.options.slidesToShow-t.slideCount)*t.slideWidth,u=(n+t.options.slidesToShow-t.slideCount)*r),t.slideCount<=t.options.slidesToShow&&(t.slideOffset=0,u=0),t.options.centerMode===!0&&t.slideCount<=t.options.slidesToShow?t.slideOffset=t.slideWidth*Math.floor(t.options.slidesToShow)/2-t.slideWidth*t.slideCount/2:t.options.centerMode===!0&&t.options.infinite===!0?t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)-t.slideWidth:t.options.centerMode===!0&&(t.slideOffset=0,t.slideOffset+=t.slideWidth*Math.floor(t.options.slidesToShow/2)),f=t.options.vertical===!1?n*t.slideWidth*-1+t.slideOffset:n*r*-1+u,t.options.variableWidth===!0&&(i=t.slideCount<=t.options.slidesToShow||t.options.infinite===!1?t.$slideTrack.children(".slick-slide").eq(n):t.$slideTrack.children(".slick-slide").eq(n+t.options.slidesToShow),f=t.options.rtl===!0?i[0]?(t.$slideTrack.width()-i[0].offsetLeft-i.width())*-1:0:i[0]?i[0].offsetLeft*-1:0,t.options.centerMode===!0&&(i=t.slideCount<=t.options.slidesToShow||t.options.infinite===!1?t.$slideTrack.children(".slick-slide").eq(n):t.$slideTrack.children(".slick-slide").eq(n+t.options.slidesToShow+1),f=t.options.rtl===!0?i[0]?(t.$slideTrack.width()-i[0].offsetLeft-i.width())*-1:0:i[0]?i[0].offsetLeft*-1:0,f+=(t.$list.width()-i.outerWidth())/2)),f};t.prototype.getOption=t.prototype.slickGetOption=function(n){var t=this;return t.options[n]};t.prototype.getNavigableIndexes=function(){var i,n=this,t=0,r=0,u=[];for(n.options.infinite===!1?i=n.slideCount:(t=n.options.slidesToScroll*-1,r=n.options.slidesToScroll*-1,i=2*n.slideCount);t<i;)u.push(t),t=r+n.options.slidesToScroll,r+=n.options.slidesToScroll<=n.options.slidesToShow?n.options.slidesToScroll:n.options.slidesToShow;return u};t.prototype.getSlick=function(){return this};t.prototype.getSlideCount=function(){var f,i,r,u,t=this;return u=t.options.centerMode===!0?Math.floor(t.$list.width()/2):0,r=t.swipeLeft*-1+u,t.options.swipeToSlide===!0?(t.$slideTrack.find(".slick-slide").each(function(u,f){var e,o,s;if(e=n(f).outerWidth(),o=f.offsetLeft,t.options.centerMode!==!0&&(o+=e/2),s=o+e,r<s)return i=f,!1}),f=Math.abs(n(i).attr("data-slick-index")-t.currentSlide)||1):t.options.slidesToScroll};t.prototype.goTo=t.prototype.slickGoTo=function(n,t){var i=this;i.changeSlide({data:{message:"index",index:parseInt(n)}},t)};t.prototype.init=function(t){var i=this;n(i.$slider).hasClass("slick-initialized")||(n(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler());t&&i.$slider.trigger("init",[i]);i.options.accessibility===!0&&i.initADA();i.options.autoplay&&(i.paused=!1,i.autoPlay())};t.prototype.initADA=function(){var t=this,f=Math.ceil(t.slideCount/t.options.slidesToShow),r=t.getNavigableIndexes().filter(function(n){return n>=0&&n<t.slideCount}),i,u;for(t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==t.$dots&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){var f=r.indexOf(i),u;(n(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+i,tabindex:-1}),f!==-1)&&(u="slick-slide-control"+t.instanceUid+f,n("#"+u).length&&n(this).attr({"aria-describedby":u}))}),t.$dots.attr("role","tablist").find("li").each(function(i){var u=r[i];n(this).attr({role:"presentation"});n(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+i,"aria-controls":"slick-slide"+t.instanceUid+u,"aria-label":i+1+" of "+f,"aria-selected":null,tabindex:"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end()),i=t.currentSlide,u=i+t.options.slidesToShow;i<u;i++)t.options.focusOnChange?t.$slides.eq(i).attr({tabindex:"0"}):t.$slides.eq(i).removeAttr("tabindex");t.activateADA()};t.prototype.initArrowEvents=function(){var n=this;n.options.arrows===!0&&n.slideCount>n.options.slidesToShow&&(n.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},n.changeSlide),n.$nextArrow.off("click.slick").on("click.slick",{message:"next"},n.changeSlide),n.options.accessibility===!0&&(n.$prevArrow.on("keydown.slick",n.keyHandler),n.$nextArrow.on("keydown.slick",n.keyHandler)))};t.prototype.initDotEvents=function(){var t=this;t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&(n("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),t.options.accessibility===!0&&t.$dots.on("keydown.slick",t.keyHandler));t.options.dots===!0&&t.options.pauseOnDotsHover===!0&&t.slideCount>t.options.slidesToShow&&n("li",t.$dots).on("mouseenter.slick",n.proxy(t.interrupt,t,!0)).on("mouseleave.slick",n.proxy(t.interrupt,t,!1))};t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",n.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",n.proxy(t.interrupt,t,!1)))};t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents();t.initDotEvents();t.initSlideEvents();t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler);t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler);t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler);t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler);t.$list.on("click.slick",t.clickHandler);n(document).on(t.visibilityChange,n.proxy(t.visibility,t));t.options.accessibility===!0&&t.$list.on("keydown.slick",t.keyHandler);t.options.focusOnSelect===!0&&n(t.$slideTrack).children().on("click.slick",t.selectHandler);n(window).on("orientationchange.slick.slick-"+t.instanceUid,n.proxy(t.orientationChange,t));n(window).on("resize.slick.slick-"+t.instanceUid,n.proxy(t.resize,t));n("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault);n(window).on("load.slick.slick-"+t.instanceUid,t.setPosition);n(t.setPosition)};t.prototype.initUI=function(){var n=this;n.options.arrows===!0&&n.slideCount>n.options.slidesToShow&&(n.$prevArrow.show(),n.$nextArrow.show());n.options.dots===!0&&n.slideCount>n.options.slidesToShow&&n.$dots.show()};t.prototype.keyHandler=function(n){var t=this;n.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===n.keyCode&&t.options.accessibility===!0?t.changeSlide({data:{message:t.options.rtl===!0?"next":"previous"}}):39===n.keyCode&&t.options.accessibility===!0&&t.changeSlide({data:{message:t.options.rtl===!0?"previous":"next"}}))};t.prototype.lazyLoad=function(){function e(i){n("img[data-lazy]",i).each(function(){var i=n(this),r=n(this).attr("data-lazy"),f=n(this).attr("data-srcset"),e=n(this).attr("data-sizes")||t.$slider.attr("data-sizes"),u=document.createElement("img");u.onload=function(){i.animate({opacity:0},100,function(){f&&(i.attr("srcset",f),e&&i.attr("sizes",e));i.attr("src",r).animate({opacity:1},200,function(){i.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")});t.$slider.trigger("lazyLoaded",[t,i,r])})};u.onerror=function(){i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");t.$slider.trigger("lazyLoadError",[t,i,r])};u.src=r})}var u,f,i,r,t=this;if(t.options.centerMode===!0?t.options.infinite===!0?(i=t.currentSlide+(t.options.slidesToShow/2+1),r=i+t.options.slidesToShow+2):(i=Math.max(0,t.currentSlide-(t.options.slidesToShow/2+1)),r=2+(t.options.slidesToShow/2+1)+t.currentSlide):(i=t.options.infinite?t.options.slidesToShow+t.currentSlide:t.currentSlide,r=Math.ceil(i+t.options.slidesToShow),t.options.fade===!0&&(i>0&&i--,r<=t.slideCount&&r++)),u=t.$slider.find(".slick-slide").slice(i,r),"anticipated"===t.options.lazyLoad)for(var o=i-1,s=r,h=t.$slider.find(".slick-slide"),c=0;c<t.options.slidesToScroll;c++)o<0&&(o=t.slideCount-1),u=u.add(h.eq(o)),u=u.add(h.eq(s)),o--,s++;e(u);t.slideCount<=t.options.slidesToShow?(f=t.$slider.find(".slick-slide"),e(f)):t.currentSlide>=t.slideCount-t.options.slidesToShow?(f=t.$slider.find(".slick-cloned").slice(0,t.options.slidesToShow),e(f)):0===t.currentSlide&&(f=t.$slider.find(".slick-cloned").slice(t.options.slidesToShow*-1),e(f))};t.prototype.loadSlider=function(){var n=this;n.setPosition();n.$slideTrack.css({opacity:1});n.$slider.removeClass("slick-loading");n.initUI();"progressive"===n.options.lazyLoad&&n.progressiveLazyLoad()};t.prototype.next=t.prototype.slickNext=function(){var n=this;n.changeSlide({data:{message:"next"}})};t.prototype.orientationChange=function(){var n=this;n.checkResponsive();n.setPosition()};t.prototype.pause=t.prototype.slickPause=function(){var n=this;n.autoPlayClear();n.paused=!0};t.prototype.play=t.prototype.slickPlay=function(){var n=this;n.autoPlay();n.options.autoplay=!0;n.paused=!1;n.focussed=!1;n.interrupted=!1};t.prototype.postSlide=function(t){var i=this,r;!i.unslicked&&(i.$slider.trigger("afterChange",[i,t]),i.animating=!1,i.slideCount>i.options.slidesToShow&&i.setPosition(),i.swipeLeft=null,i.options.autoplay&&i.autoPlay(),i.options.accessibility===!0&&(i.initADA(),i.options.focusOnChange))&&(r=n(i.$slides.get(i.currentSlide)),r.attr("tabindex",0).focus())};t.prototype.prev=t.prototype.slickPrev=function(){var n=this;n.changeSlide({data:{message:"previous"}})};t.prototype.preventDefault=function(n){n.preventDefault()};t.prototype.progressiveLazyLoad=function(t){t=t||1;var r,u,e,o,f,i=this,s=n("img[data-lazy]",i.$slider);s.length?(r=s.first(),u=r.attr("data-lazy"),e=r.attr("data-srcset"),o=r.attr("data-sizes")||i.$slider.attr("data-sizes"),f=document.createElement("img"),f.onload=function(){e&&(r.attr("srcset",e),o&&r.attr("sizes",o));r.attr("src",u).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading");i.options.adaptiveHeight===!0&&i.setPosition();i.$slider.trigger("lazyLoaded",[i,r,u]);i.progressiveLazyLoad()},f.onerror=function(){t<3?setTimeout(function(){i.progressiveLazyLoad(t+1)},500):(r.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),i.$slider.trigger("lazyLoadError",[i,r,u]),i.progressiveLazyLoad())},f.src=u):i.$slider.trigger("allImagesLoaded",[i])};t.prototype.refresh=function(t){var r,u,i=this;u=i.slideCount-i.options.slidesToShow;!i.options.infinite&&i.currentSlide>u&&(i.currentSlide=u);i.slideCount<=i.options.slidesToShow&&(i.currentSlide=0);r=i.currentSlide;i.destroy(!0);n.extend(i,i.initials,{currentSlide:r});i.init();t||i.changeSlide({data:{message:"index",index:r}},!1)};t.prototype.registerBreakpoints=function(){var u,f,i,t=this,r=t.options.responsive||null;if("array"===n.type(r)&&r.length){t.respondTo=t.options.respondTo||"window";for(u in r)if(i=t.breakpoints.length-1,r.hasOwnProperty(u)){for(f=r[u].breakpoint;i>=0;)t.breakpoints[i]&&t.breakpoints[i]===f&&t.breakpoints.splice(i,1),i--;t.breakpoints.push(f);t.breakpointSettings[f]=r[u].settings}t.breakpoints.sort(function(n,i){return t.options.mobileFirst?n-i:i-n})}};t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide");t.slideCount=t.$slides.length;t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll);t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0);t.registerBreakpoints();t.setProps();t.setupInfinite();t.buildArrows();t.updateArrows();t.initArrowEvents();t.buildDots();t.updateDots();t.initDotEvents();t.cleanUpSlideEvents();t.initSlideEvents();t.checkResponsive(!1,!0);t.options.focusOnSelect===!0&&n(t.$slideTrack).children().on("click.slick",t.selectHandler);t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0);t.setPosition();t.focusHandler();t.paused=!t.options.autoplay;t.autoPlay();t.$slider.trigger("reInit",[t])};t.prototype.resize=function(){var t=this;n(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=n(window).width();t.checkResponsive();t.unslicked||t.setPosition()},50))};t.prototype.removeSlide=t.prototype.slickRemove=function(n,t,i){var r=this;return"boolean"==typeof n?(t=n,n=t===!0?0:r.slideCount-1):n=t===!0?--n:n,!(r.slideCount<1||n<0||n>r.slideCount-1)&&(r.unload(),i===!0?r.$slideTrack.children().remove():r.$slideTrack.children(this.options.slide).eq(n).remove(),r.$slides=r.$slideTrack.children(this.options.slide),r.$slideTrack.children(this.options.slide).detach(),r.$slideTrack.append(r.$slides),r.$slidesCache=r.$slides,void r.reinit())};t.prototype.setCSS=function(n){var r,u,t=this,i={};t.options.rtl===!0&&(n=-n);r="left"==t.positionProp?Math.ceil(n)+"px":"0px";u="top"==t.positionProp?Math.ceil(n)+"px":"0px";i[t.positionProp]=n;t.transformsEnabled===!1?t.$slideTrack.css(i):(i={},t.cssTransitions===!1?(i[t.animType]="translate("+r+", "+u+")",t.$slideTrack.css(i)):(i[t.animType]="translate3d("+r+", "+u+", 0px)",t.$slideTrack.css(i)))};t.prototype.setDimensions=function(){var n=this,t;n.options.vertical===!1?n.options.centerMode===!0&&n.$list.css({padding:"0px "+n.options.centerPadding}):(n.$list.height(n.$slides.first().outerHeight(!0)*n.options.slidesToShow),n.options.centerMode===!0&&n.$list.css({padding:n.options.centerPadding+" 0px"}));n.listWidth=n.$list.width();n.listHeight=n.$list.height();n.options.vertical===!1&&n.options.variableWidth===!1?(n.slideWidth=Math.ceil(n.listWidth/n.options.slidesToShow),n.$slideTrack.width(Math.ceil(n.slideWidth*n.$slideTrack.children(".slick-slide").length))):n.options.variableWidth===!0?n.$slideTrack.width(5e3*n.slideCount):(n.slideWidth=Math.ceil(n.listWidth),n.$slideTrack.height(Math.ceil(n.$slides.first().outerHeight(!0)*n.$slideTrack.children(".slick-slide").length)));t=n.$slides.first().outerWidth(!0)-n.$slides.first().width();n.options.variableWidth===!1&&n.$slideTrack.children(".slick-slide").width(n.slideWidth-t)};t.prototype.setFade=function(){var i,t=this;t.$slides.each(function(r,u){i=t.slideWidth*r*-1;t.options.rtl===!0?n(u).css({position:"relative",right:i,top:0,zIndex:t.options.zIndex-2,opacity:0}):n(u).css({position:"relative",left:i,top:0,zIndex:t.options.zIndex-2,opacity:0})});t.$slides.eq(t.currentSlide).css({zIndex:t.options.zIndex-1,opacity:1})};t.prototype.setHeight=function(){var n=this,t;1===n.options.slidesToShow&&n.options.adaptiveHeight===!0&&n.options.vertical===!1&&(t=n.$slides.eq(n.currentSlide).outerHeight(!0),n.$list.css("height",t))};t.prototype.setOption=t.prototype.slickSetOption=function(){var u,f,e,i,r,t=this,o=!1;if("object"===n.type(arguments[0])?(e=arguments[0],o=arguments[1],r="multiple"):"string"===n.type(arguments[0])&&(e=arguments[0],i=arguments[1],o=arguments[2],"responsive"===arguments[0]&&"array"===n.type(arguments[1])?r="responsive":"undefined"!=typeof arguments[1]&&(r="single")),"single"===r)t.options[e]=i;else if("multiple"===r)n.each(e,function(n,i){t.options[n]=i});else if("responsive"===r)for(f in i)if("array"!==n.type(t.options.responsive))t.options.responsive=[i[f]];else{for(u=t.options.responsive.length-1;u>=0;)t.options.responsive[u].breakpoint===i[f].breakpoint&&t.options.responsive.splice(u,1),u--;t.options.responsive.push(i[f])}o&&(t.unload(),t.reinit())};t.prototype.setPosition=function(){var n=this;n.setDimensions();n.setHeight();n.options.fade===!1?n.setCSS(n.getLeft(n.currentSlide)):n.setFade();n.$slider.trigger("setPosition",[n])};t.prototype.setProps=function(){var n=this,t=document.body.style;n.positionProp=n.options.vertical===!0?"top":"left";"top"===n.positionProp?n.$slider.addClass("slick-vertical"):n.$slider.removeClass("slick-vertical");void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||n.options.useCSS===!0&&(n.cssTransitions=!0);n.options.fade&&("number"==typeof n.options.zIndex?n.options.zIndex<3&&(n.options.zIndex=3):n.options.zIndex=n.defaults.zIndex);void 0!==t.OTransform&&(n.animType="OTransform",n.transformType="-o-transform",n.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(n.animType=!1));void 0!==t.MozTransform&&(n.animType="MozTransform",n.transformType="-moz-transform",n.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(n.animType=!1));void 0!==t.webkitTransform&&(n.animType="webkitTransform",n.transformType="-webkit-transform",n.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(n.animType=!1));void 0!==t.msTransform&&(n.animType="msTransform",n.transformType="-ms-transform",n.transitionType="msTransition",void 0===t.msTransform&&(n.animType=!1));void 0!==t.transform&&n.animType!==!1&&(n.animType="transform",n.transformType="transform",n.transitionType="transition");n.transformsEnabled=n.options.useTransform&&null!==n.animType&&n.animType!==!1};t.prototype.setSlideClasses=function(n){var u,i,r,f,t=this,e;(i=t.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),t.$slides.eq(n).addClass("slick-current"),t.options.centerMode===!0)?(e=t.options.slidesToShow%2==0?1:0,u=Math.floor(t.options.slidesToShow/2),t.options.infinite===!0&&(n>=u&&n<=t.slideCount-1-u?t.$slides.slice(n-u+e,n+u+1).addClass("slick-active").attr("aria-hidden","false"):(r=t.options.slidesToShow+n,i.slice(r-u+1+e,r+u+2).addClass("slick-active").attr("aria-hidden","false")),0===n?i.eq(i.length-1-t.options.slidesToShow).addClass("slick-center"):n===t.slideCount-1&&i.eq(t.options.slidesToShow).addClass("slick-center")),t.$slides.eq(n).addClass("slick-center")):n>=0&&n<=t.slideCount-t.options.slidesToShow?t.$slides.slice(n,n+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=t.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(f=t.slideCount%t.options.slidesToShow,r=t.options.infinite===!0?t.options.slidesToShow+n:n,t.options.slidesToShow==t.options.slidesToScroll&&t.slideCount-n<t.options.slidesToShow?i.slice(r-(t.options.slidesToShow-f),r+f).addClass("slick-active").attr("aria-hidden","false"):i.slice(r,r+t.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==t.options.lazyLoad&&"anticipated"!==t.options.lazyLoad||t.lazyLoad()};t.prototype.setupInfinite=function(){var i,r,u,t=this;if(t.options.fade===!0&&(t.options.centerMode=!1),t.options.infinite===!0&&t.options.fade===!1&&(r=null,t.slideCount>t.options.slidesToShow)){for(u=t.options.centerMode===!0?t.options.slidesToShow+1:t.options.slidesToShow,i=t.slideCount;i>t.slideCount-u;i-=1)r=i-1,n(t.$slides[r]).clone(!0).attr("id","").attr("data-slick-index",r-t.slideCount).prependTo(t.$slideTrack).addClass("slick-cloned");for(i=0;i<u+t.slideCount;i+=1)r=i,n(t.$slides[r]).clone(!0).attr("id","").attr("data-slick-index",r+t.slideCount).appendTo(t.$slideTrack).addClass("slick-cloned");t.$slideTrack.find(".slick-cloned").find("[id]").each(function(){n(this).attr("id","")})}};t.prototype.interrupt=function(n){var t=this;n||t.autoPlay();t.interrupted=n};t.prototype.selectHandler=function(t){var i=this,u=n(t.target).is(".slick-slide")?n(t.target):n(t.target).parents(".slick-slide"),r=parseInt(u.attr("data-slick-index"));return r||(r=0),i.slideCount<=i.options.slidesToShow?void i.slideHandler(r,!1,!0):void i.slideHandler(r)};t.prototype.slideHandler=function(n,t,i){var u,f,s,o,e,h=null,r=this;if(t=t||!1,!(r.animating===!0&&r.options.waitForAnimate===!0||r.options.fade===!0&&r.currentSlide===n))return t===!1&&r.asNavFor(n),u=n,h=r.getLeft(u),o=r.getLeft(r.currentSlide),r.currentLeft=null===r.swipeLeft?o:r.swipeLeft,r.options.infinite===!1&&r.options.centerMode===!1&&(n<0||n>r.getDotCount()*r.options.slidesToScroll)?void(r.options.fade===!1&&(u=r.currentSlide,i!==!0&&r.slideCount>r.options.slidesToShow?r.animateSlide(o,function(){r.postSlide(u)}):r.postSlide(u))):r.options.infinite===!1&&r.options.centerMode===!0&&(n<0||n>r.slideCount-r.options.slidesToScroll)?void(r.options.fade===!1&&(u=r.currentSlide,i!==!0&&r.slideCount>r.options.slidesToShow?r.animateSlide(o,function(){r.postSlide(u)}):r.postSlide(u))):(r.options.autoplay&&clearInterval(r.autoPlayTimer),f=u<0?r.slideCount%r.options.slidesToScroll!=0?r.slideCount-r.slideCount%r.options.slidesToScroll:r.slideCount+u:u>=r.slideCount?r.slideCount%r.options.slidesToScroll!=0?0:u-r.slideCount:u,r.animating=!0,r.$slider.trigger("beforeChange",[r,r.currentSlide,f]),s=r.currentSlide,r.currentSlide=f,r.setSlideClasses(r.currentSlide),r.options.asNavFor&&(e=r.getNavTarget(),e=e.slick("getSlick"),e.slideCount<=e.options.slidesToShow&&e.setSlideClasses(r.currentSlide)),r.updateDots(),r.updateArrows(),r.options.fade===!0?(i!==!0?(r.fadeSlideOut(s),r.fadeSlide(f,function(){r.postSlide(f)})):r.postSlide(f),void r.animateHeight()):void(i!==!0&&r.slideCount>r.options.slidesToShow?r.animateSlide(h,function(){r.postSlide(f)}):r.postSlide(f)))};t.prototype.startLoad=function(){var n=this;n.options.arrows===!0&&n.slideCount>n.options.slidesToShow&&(n.$prevArrow.hide(),n.$nextArrow.hide());n.options.dots===!0&&n.slideCount>n.options.slidesToShow&&n.$dots.hide();n.$slider.addClass("slick-loading")};t.prototype.swipeDirection=function(){var i,r,u,n,t=this;return i=t.touchObject.startX-t.touchObject.curX,r=t.touchObject.startY-t.touchObject.curY,u=Math.atan2(r,i),n=Math.round(180*u/Math.PI),n<0&&(n=360-Math.abs(n)),n<=45&&n>=0?t.options.rtl===!1?"left":"right":n<=360&&n>=315?t.options.rtl===!1?"left":"right":n>=135&&n<=225?t.options.rtl===!1?"right":"left":t.options.verticalSwiping===!0?n>=35&&n<=135?"down":"up":"vertical"};t.prototype.swipeEnd=function(){var t,i,n=this;if(n.dragging=!1,n.swiping=!1,n.scrolling)return n.scrolling=!1,!1;if(n.interrupted=!1,n.shouldClick=!(n.touchObject.swipeLength>10),void 0===n.touchObject.curX)return!1;if(n.touchObject.edgeHit===!0&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(i=n.swipeDirection()){case"left":case"down":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount();n.currentDirection=0;break;case"right":case"up":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount();n.currentDirection=1}"vertical"!=i&&(n.slideHandler(t),n.touchObject={},n.$slider.trigger("swipe",[n,i]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})};t.prototype.swipeHandler=function(n){var t=this;if(!(t.options.swipe===!1||"ontouchend"in document&&t.options.swipe===!1||t.options.draggable===!1&&n.type.indexOf("mouse")!==-1))switch(t.touchObject.fingerCount=n.originalEvent&&void 0!==n.originalEvent.touches?n.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,t.options.verticalSwiping===!0&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),n.data.action){case"start":t.swipeStart(n);break;case"move":t.swipeMove(n);break;case"end":t.swipeEnd(n)}};t.prototype.swipeMove=function(n){var f,e,r,u,i,o,t=this;return i=void 0!==n.originalEvent?n.originalEvent.touches:null,!(!t.dragging||t.scrolling||i&&1!==i.length)&&(f=t.getLeft(t.currentSlide),t.touchObject.curX=void 0!==i?i[0].pageX:n.clientX,t.touchObject.curY=void 0!==i?i[0].pageY:n.clientY,t.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(t.touchObject.curX-t.touchObject.startX,2))),o=Math.round(Math.sqrt(Math.pow(t.touchObject.curY-t.touchObject.startY,2))),!t.options.verticalSwiping&&!t.swiping&&o>4?(t.scrolling=!0,!1):(t.options.verticalSwiping===!0&&(t.touchObject.swipeLength=o),e=t.swipeDirection(),void 0!==n.originalEvent&&t.touchObject.swipeLength>4&&(t.swiping=!0,n.preventDefault()),u=(t.options.rtl===!1?1:-1)*(t.touchObject.curX>t.touchObject.startX?1:-1),t.options.verticalSwiping===!0&&(u=t.touchObject.curY>t.touchObject.startY?1:-1),r=t.touchObject.swipeLength,t.touchObject.edgeHit=!1,t.options.infinite===!1&&(0===t.currentSlide&&"right"===e||t.currentSlide>=t.getDotCount()&&"left"===e)&&(r=t.touchObject.swipeLength*t.options.edgeFriction,t.touchObject.edgeHit=!0),t.swipeLeft=t.options.vertical===!1?f+r*u:f+r*(t.$list.height()/t.listWidth)*u,t.options.verticalSwiping===!0&&(t.swipeLeft=f+r*u),t.options.fade!==!0&&t.options.touchMove!==!1&&(t.animating===!0?(t.swipeLeft=null,!1):void t.setCSS(t.swipeLeft))))};t.prototype.swipeStart=function(n){var i,t=this;return t.interrupted=!0,1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow?(t.touchObject={},!1):(void 0!==n.originalEvent&&void 0!==n.originalEvent.touches&&(i=n.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=void 0!==i?i.pageX:n.clientX,t.touchObject.startY=t.touchObject.curY=void 0!==i?i.pageY:n.clientY,void(t.dragging=!0))};t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var n=this;null!==n.$slidesCache&&(n.unload(),n.$slideTrack.children(this.options.slide).detach(),n.$slidesCache.appendTo(n.$slideTrack),n.reinit())};t.prototype.unload=function(){var t=this;n(".slick-cloned",t.$slider).remove();t.$dots&&t.$dots.remove();t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove();t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove();t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")};t.prototype.unslick=function(n){var t=this;t.$slider.trigger("unslick",[t,n]);t.destroy()};t.prototype.updateArrows=function(){var t,n=this;t=Math.floor(n.options.slidesToShow/2);n.options.arrows===!0&&n.slideCount>n.options.slidesToShow&&!n.options.infinite&&(n.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),n.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===n.currentSlide?(n.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),n.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):n.currentSlide>=n.slideCount-n.options.slidesToShow&&n.options.centerMode===!1?(n.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),n.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):n.currentSlide>=n.slideCount-1&&n.options.centerMode===!0&&(n.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),n.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))};t.prototype.updateDots=function(){var n=this;null!==n.$dots&&(n.$dots.find("li").removeClass("slick-active").end(),n.$dots.find("li").eq(Math.floor(n.currentSlide/n.options.slidesToScroll)).addClass("slick-active"))};t.prototype.visibility=function(){var n=this;n.options.autoplay&&(n.interrupted=document[n.hidden]?!0:!1)};n.fn.slick=function(){for(var u,i=this,r=arguments[0],f=Array.prototype.slice.call(arguments,1),e=i.length,n=0;n<e;n++)if("object"==typeof r||"undefined"==typeof r?i[n].slick=new t(i[n],r):u=i[n].slick[r].apply(i[n].slick,f),"undefined"!=typeof u)return u;return i}});
/*! nouislider - 8.1.0 - 2015-10-25 16:05:43 */

!function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?module.exports=a():window.noUiSlider=a()}(function(){"use strict";function a(a){return a.filter(function(a){return this[a]?!1:this[a]=!0},{})}function b(a,b){return Math.round(a/b)*b}function c(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.documentElement,e=m();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(e.x=0),{top:b.top+e.y-d.clientTop,left:b.left+e.x-d.clientLeft}}function d(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function e(a){var b=Math.pow(10,7);return Number((Math.round(a*b)/b).toFixed(7))}function f(a,b,c){j(a,b),setTimeout(function(){k(a,b)},c)}function g(a){return Math.max(Math.min(a,100),0)}function h(a){return Array.isArray(a)?a:[a]}function i(a){var b=a.split(".");return b.length>1?b[1].length:0}function j(a,b){a.classList?a.classList.add(b):a.className+=" "+b}function k(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp("(^|\\b)"+b.split(" ").join("|")+"(\\b|$)","gi")," ")}function l(a,b){a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)}function m(){var a=void 0!==window.pageXOffset,b="CSS1Compat"===(document.compatMode||""),c=a?window.pageXOffset:b?document.documentElement.scrollLeft:document.body.scrollLeft,d=a?window.pageYOffset:b?document.documentElement.scrollTop:document.body.scrollTop;return{x:c,y:d}}function n(a){return function(b){return a+b}}function o(a,b){return 100/(b-a)}function p(a,b){return 100*b/(a[1]-a[0])}function q(a,b){return p(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function r(a,b){return b*(a[1]-a[0])/100+a[0]}function s(a,b){for(var c=1;a>=b[c];)c+=1;return c}function t(a,b,c){if(c>=a.slice(-1)[0])return 100;var d,e,f,g,h=s(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+q([d,e],c)/o(f,g)}function u(a,b,c){if(c>=100)return a.slice(-1)[0];var d,e,f,g,h=s(c,b);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],r([d,e],(c-f)*o(f,g))}function v(a,c,d,e){if(100===e)return e;var f,g,h=s(e,a);return d?(f=a[h-1],g=a[h],e-f>(g-f)/2?g:f):c[h-1]?a[h-1]+b(e-a[h-1],c[h-1]):e}function w(a,b,c){var e;if("number"==typeof b&&(b=[b]),"[object Array]"!==Object.prototype.toString.call(b))throw new Error("noUiSlider: 'range' contains invalid value.");if(e="min"===a?0:"max"===a?100:parseFloat(a),!d(e)||!d(b[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");c.xPct.push(e),c.xVal.push(b[0]),e?c.xSteps.push(isNaN(b[1])?!1:b[1]):isNaN(b[1])||(c.xSteps[0]=b[1])}function x(a,b,c){return b?void(c.xSteps[a]=p([c.xVal[a],c.xVal[a+1]],b)/o(c.xPct[a],c.xPct[a+1])):!0}function y(a,b,c,d){this.xPct=[],this.xVal=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=b,this.direction=c;var e,f=[];for(e in a)a.hasOwnProperty(e)&&f.push([a[e],e]);for(f.length&&"object"==typeof f[0][0]?f.sort(function(a,b){return a[0][0]-b[0][0]}):f.sort(function(a,b){return a[0]-b[0]}),e=0;e<f.length;e++)w(f[e][1],f[e][0],this);for(this.xNumSteps=this.xSteps.slice(0),e=0;e<this.xNumSteps.length;e++)x(e,this.xNumSteps[e],this)}function z(a,b){if(!d(b))throw new Error("noUiSlider: 'step' is not numeric.");a.singleStep=b}function A(a,b){if("object"!=typeof b||Array.isArray(b))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===b.min||void 0===b.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");a.spectrum=new y(b,a.snap,a.dir,a.singleStep)}function B(a,b){if(b=h(b),!Array.isArray(b)||!b.length||b.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");a.handles=b.length,a.start=b}function C(a,b){if(a.snap=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function D(a,b){if(a.animate=b,"boolean"!=typeof b)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function E(a,b){if("lower"===b&&1===a.handles)a.connect=1;else if("upper"===b&&1===a.handles)a.connect=2;else if(b===!0&&2===a.handles)a.connect=3;else{if(b!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");a.connect=0}}function F(a,b){switch(b){case"horizontal":a.ort=0;break;case"vertical":a.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function G(a,b){if(!d(b))throw new Error("noUiSlider: 'margin' option must be numeric.");if(a.margin=a.spectrum.getMargin(b),!a.margin)throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function H(a,b){if(!d(b))throw new Error("noUiSlider: 'limit' option must be numeric.");if(a.limit=a.spectrum.getMargin(b),!a.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function I(a,b){switch(b){case"ltr":a.dir=0;break;case"rtl":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function J(a,b){if("string"!=typeof b)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var c=b.indexOf("tap")>=0,d=b.indexOf("drag")>=0,e=b.indexOf("fixed")>=0,f=b.indexOf("snap")>=0;if(d&&!a.connect)throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.");a.events={tap:c||f,drag:d,fixed:e,snap:f}}function K(a,b){if(b===!0&&(a.tooltips=!0),b&&b.format){if("function"!=typeof b.format)throw new Error("noUiSlider: 'tooltips.format' must be an object.");a.tooltips={format:b.format}}}function L(a,b){if(a.format=b,"function"==typeof b.to&&"function"==typeof b.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function M(a,b){if(void 0!==b&&"string"!=typeof b)throw new Error("noUiSlider: 'cssPrefix' must be a string.");a.cssPrefix=b}function N(a){var b,c={margin:0,limit:0,animate:!0,format:S};b={step:{r:!1,t:z},start:{r:!0,t:B},connect:{r:!0,t:E},direction:{r:!0,t:I},snap:{r:!1,t:C},animate:{r:!1,t:D},range:{r:!0,t:A},orientation:{r:!1,t:F},margin:{r:!1,t:G},limit:{r:!1,t:H},behaviour:{r:!0,t:J},format:{r:!1,t:L},tooltips:{r:!1,t:K},cssPrefix:{r:!1,t:M}};var d={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"};return Object.keys(d).forEach(function(b){void 0===a[b]&&(a[b]=d[b])}),Object.keys(b).forEach(function(d){var e=b[d];if(void 0===a[d]){if(e.r)throw new Error("noUiSlider: '"+d+"' is required.");return!0}e.t(c,a[d])}),c.pips=a.pips,c.style=c.ort?"top":"left",c}function O(b,d){function e(a,b,c){var d=a+b[0],e=a+b[1];return c?(0>d&&(e+=Math.abs(d)),e>100&&(d-=e-100),[g(d),g(e)]):[d,e]}function o(a,b){a.preventDefault();var c,d,e=0===a.type.indexOf("touch"),f=0===a.type.indexOf("mouse"),g=0===a.type.indexOf("pointer"),h=a;return 0===a.type.indexOf("MSPointer")&&(g=!0),e&&(c=a.changedTouches[0].pageX,d=a.changedTouches[0].pageY),b=b||m(),(f||g)&&(c=a.clientX+b.x,d=a.clientY+b.y),h.pageOffset=b,h.points=[c,d],h.cursor=f||g,h}function p(a,b){var c=document.createElement("div"),d=document.createElement("div"),e=["-lower","-upper"];return a&&e.reverse(),j(d,aa[3]),j(d,aa[3]+e[b]),j(c,aa[2]),c.appendChild(d),c}function q(a,b,c){switch(a){case 1:j(b,aa[7]),j(c[0],aa[6]);break;case 3:j(c[1],aa[6]);case 2:j(c[0],aa[7]);case 0:j(b,aa[6])}}function r(a,b,c){var d,e=[];for(d=0;a>d;d+=1)e.push(c.appendChild(p(b,d)));return e}function s(a,b,c){j(c,aa[0]),j(c,aa[8+a]),j(c,aa[4+b]);var d=document.createElement("div");return j(d,aa[1]),c.appendChild(d),d}function t(a){return a}function u(a){var b=document.createElement("div");return b.className=aa[18],a.firstChild.appendChild(b)}function v(a){var b=a.format?a.format:t,c=W.map(u);S("update",function(a,d,e){c[d].innerHTML=b(a[d],e[d])})}function w(a,b,c){if("range"===a||"steps"===a)return Z.xVal;if("count"===a){var d,e=100/(b-1),f=0;for(b=[];(d=f++*e)<=100;)b.push(d);a="positions"}return"positions"===a?b.map(function(a){return Z.fromStepping(c?Z.getStep(a):a)}):"values"===a?c?b.map(function(a){return Z.fromStepping(Z.getStep(Z.toStepping(a)))}):b:void 0}function x(b,c,d){function e(a,b){return(a+b).toFixed(7)/1}var f=Z.direction,g={},h=Z.xVal[0],i=Z.xVal[Z.xVal.length-1],j=!1,k=!1,l=0;return Z.direction=0,d=a(d.slice().sort(function(a,b){return a-b})),d[0]!==h&&(d.unshift(h),j=!0),d[d.length-1]!==i&&(d.push(i),k=!0),d.forEach(function(a,f){var h,i,m,n,o,p,q,r,s,t,u=a,v=d[f+1];if("steps"===c&&(h=Z.xNumSteps[f]),h||(h=v-u),u!==!1&&void 0!==v)for(i=u;v>=i;i=e(i,h)){for(n=Z.toStepping(i),o=n-l,r=o/b,s=Math.round(r),t=o/s,m=1;s>=m;m+=1)p=l+m*t,g[p.toFixed(5)]=["x",0];q=d.indexOf(i)>-1?1:"steps"===c?2:0,!f&&j&&(q=0),i===v&&k||(g[n.toFixed(5)]=[i,q]),l=n}}),Z.direction=f,g}function y(a,b,c){function e(a){return["-normal","-large","-sub"][a]}function f(a,b,c){return'class="'+b+" "+b+"-"+h+" "+b+e(c[1])+'" style="'+d.style+": "+a+'%"'}function g(a,d){Z.direction&&(a=100-a),d[1]=d[1]&&b?b(d[0],d[1]):d[1],i.innerHTML+="<div "+f(a,"noUi-marker",d)+"></div>",d[1]&&(i.innerHTML+="<div "+f(a,"noUi-value",d)+">"+c.to(d[0])+"</div>")}var h=["horizontal","vertical"][d.ort],i=document.createElement("div");return j(i,"noUi-pips"),j(i,"noUi-pips-"+h),Object.keys(a).forEach(function(b){g(b,a[b])}),i}function z(a){var b=a.mode,c=a.density||1,d=a.filter||!1,e=a.values||!1,f=a.stepped||!1,g=w(b,e,f),h=x(c,b,g),i=a.format||{to:Math.round};return X.appendChild(y(h,d,i))}function A(){return V["offset"+["Width","Height"][d.ort]]}function B(a,b){void 0!==b&&1!==d.handles&&(b=Math.abs(b-d.dir)),Object.keys(_).forEach(function(c){var d=c.split(".")[0];a===d&&_[c].forEach(function(a){a(h(M()),b,C(Array.prototype.slice.call($)))})})}function C(a){return 1===a.length?a[0]:d.dir?a.reverse():a}function D(a,b,c,e){var f=function(b){return X.hasAttribute("disabled")?!1:l(X,aa[14])?!1:(b=o(b,e.pageOffset),a===Q.start&&void 0!==b.buttons&&b.buttons>1?!1:(b.calcPoint=b.points[d.ort],void c(b,e)))},g=[];return a.split(" ").forEach(function(a){b.addEventListener(a,f,!1),g.push([a,f])}),g}function E(a,b){if(0===a.buttons&&0===a.which&&0!==b.buttonsProperty)return F(a,b);var c,d,f=b.handles||W,g=!1,h=100*(a.calcPoint-b.start)/b.baseSize,i=f[0]===W[0]?0:1;if(c=e(h,b.positions,f.length>1),g=J(f[0],c[i],1===f.length),f.length>1){if(g=J(f[1],c[i?0:1],!1)||g)for(d=0;d<b.handles.length;d++)B("slide",d)}else g&&B("slide",i)}function F(a,b){var c=V.querySelector("."+aa[15]),d=b.handles[0]===W[0]?0:1;null!==c&&k(c,aa[15]),a.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener));var e=document.documentElement;e.noUiListeners.forEach(function(a){e.removeEventListener(a[0],a[1])}),k(X,aa[12]),B("set",d),B("change",d)}function G(a,b){var c=document.documentElement;if(1===b.handles.length&&(j(b.handles[0].children[0],aa[15]),b.handles[0].hasAttribute("disabled")))return!1;a.stopPropagation();var d=D(Q.move,c,E,{start:a.calcPoint,baseSize:A(),pageOffset:a.pageOffset,handles:b.handles,buttonsProperty:a.buttons,positions:[Y[0],Y[W.length-1]]}),e=D(Q.end,c,F,{handles:b.handles});if(c.noUiListeners=d.concat(e),a.cursor){document.body.style.cursor=getComputedStyle(a.target).cursor,W.length>1&&j(X,aa[12]);var f=function(){return!1};document.body.noUiListener=f,document.body.addEventListener("selectstart",f,!1)}}function H(a){var b,e,g=a.calcPoint,h=0;return a.stopPropagation(),W.forEach(function(a){h+=c(a)[d.style]}),b=h/2>g||1===W.length?0:1,g-=c(V)[d.style],e=100*g/A(),d.events.snap||f(X,aa[14],300),W[b].hasAttribute("disabled")?!1:(J(W[b],e),B("slide",b),B("set",b),B("change",b),void(d.events.snap&&G(a,{handles:[W[b]]})))}function I(a){var b,c;if(!a.fixed)for(b=0;b<W.length;b+=1)D(Q.start,W[b].children[0],G,{handles:[W[b]]});a.tap&&D(Q.start,V,H,{handles:W}),a.drag&&(c=[V.querySelector("."+aa[7])],j(c[0],aa[10]),a.fixed&&c.push(W[c[0]===W[0]?1:0].children[0]),c.forEach(function(a){D(Q.start,a,G,{handles:W})}))}function J(a,b,c){var e=a!==W[0]?1:0,f=Y[0]+d.margin,h=Y[1]-d.margin,i=Y[0]+d.limit,l=Y[1]-d.limit,m=Z.fromStepping(b);return W.length>1&&(b=e?Math.max(b,f):Math.min(b,h)),c!==!1&&d.limit&&W.length>1&&(b=e?Math.min(b,i):Math.max(b,l)),b=Z.getStep(b),b=g(parseFloat(b.toFixed(7))),b===Y[e]&&m===$[e]?!1:(window.requestAnimationFrame?window.requestAnimationFrame(function(){a.style[d.style]=b+"%"}):a.style[d.style]=b+"%",a.previousSibling||(k(a,aa[17]),b>50&&j(a,aa[17])),Y[e]=b,$[e]=Z.fromStepping(b),B("update",e),!0)}function K(a,b){var c,e,f;for(d.limit&&(a+=1),c=0;a>c;c+=1)e=c%2,f=b[e],null!==f&&f!==!1&&("number"==typeof f&&(f=String(f)),f=d.format.from(f),(f===!1||isNaN(f)||J(W[e],Z.toStepping(f),c===3-d.dir)===!1)&&B("update",e))}function L(a){var b,c,e=h(a);for(d.dir&&d.handles>1&&e.reverse(),d.animate&&-1!==Y[0]&&f(X,aa[14],300),b=W.length>1?3:1,1===e.length&&(b=1),K(b,e),c=0;c<W.length;c++)B("set",c)}function M(){var a,b=[];for(a=0;a<d.handles;a+=1)b[a]=d.format.to($[a]);return C(b)}function O(){aa.forEach(function(a){a&&k(X,a)}),X.innerHTML="",delete X.noUiSlider}function P(){var a=Y.map(function(a,b){var c=Z.getApplicableStep(a),d=i(String(c[2])),e=$[b],f=100===a?null:c[2],g=Number((e-c[2]).toFixed(d)),h=0===a?null:g>=c[1]?c[2]:c[0]||!1;return[h,f]});return C(a)}function S(a,b){_[a]=_[a]||[],_[a].push(b),"update"===a.split(".")[0]&&W.forEach(function(a,b){B("update",b)})}function T(a){var b=a.split(".")[0],c=a.substring(b.length);Object.keys(_).forEach(function(a){var d=a.split(".")[0],e=a.substring(d.length);b&&b!==d||c&&c!==e||delete _[a]})}function U(a){var b=N({start:[0,0],margin:a.margin,limit:a.limit,step:a.step,range:a.range,animate:a.animate});d.margin=b.margin,d.limit=b.limit,d.step=b.step,d.range=b.range,d.animate=b.animate,Z=b.spectrum}var V,W,X=b,Y=[-1,-1],Z=d.spectrum,$=[],_={},aa=["target","base","origin","handle","horizontal","vertical","background","connect","ltr","rtl","draggable","","state-drag","","state-tap","active","","stacking","tooltip"].map(n(d.cssPrefix||R));if(X.noUiSlider)throw new Error("Slider was already initialized.");return V=s(d.dir,d.ort,X),W=r(d.handles,d.dir,V),q(d.connect,X,W),I(d.events),d.pips&&z(d.pips),d.tooltips&&v(d.tooltips),{destroy:O,steps:P,on:S,off:T,get:M,set:L,updateOptions:U}}function P(a,b){if(!a.nodeName)throw new Error("noUiSlider.create requires a single element.");var c=N(b,a),d=O(a,c);return d.set(c.start),a.noUiSlider=d,d}var Q=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},R="noUi-";y.prototype.getMargin=function(a){return 2===this.xPct.length?p(this.xVal,a):!1},y.prototype.toStepping=function(a){return a=t(this.xVal,this.xPct,a),this.direction&&(a=100-a),a},y.prototype.fromStepping=function(a){return this.direction&&(a=100-a),e(u(this.xVal,this.xPct,a))},y.prototype.getStep=function(a){return this.direction&&(a=100-a),a=v(this.xPct,this.xSteps,this.snap,a),this.direction&&(a=100-a),a},y.prototype.getApplicableStep=function(a){var b=s(a,this.xPct),c=100===a?2:1;return[this.xNumSteps[b-2],this.xVal[b-c],this.xNumSteps[b-c]]},y.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var S={to:function(a){return void 0!==a&&a.toFixed(2)},from:Number};return{create:P}});
var tns=function(){function rt(){for(var t,i,n,r=arguments[0]||{},u=1,f=arguments.length;u<f;u++)if((t=arguments[u])!==null)for(i in t)if(n=t[i],r===n)continue;else n!==undefined&&(r[i]=n);return r}function o(n){return["true","false"].indexOf(n)>=0?JSON.parse(n):n}function s(n,t,i,r){if(r)try{n.setItem(t,i)}catch(u){}return i}function yt(){var n=window.tnsId;return window.tnsId=n?n+1:1,"tns"+window.tnsId}function d(){var t=document,n=t.body;return n||(n=t.createElement("body"),n.fake=!0),n}function g(n){var t="";return n.fake&&(t=y.style.overflow,n.style.background="",n.style.overflow=y.style.overflow="hidden",y.appendChild(n)),t}function nt(n,t){n.fake&&(n.remove(),y.style.overflow=t,y.offsetHeight)}function pt(){var o=document,t=d(),s=g(t),i=o.createElement("div"),f=!1,n,e,u,r;t.appendChild(i);try{for(n="(10px * 10)",e=["calc"+n,"-moz-calc"+n,"-webkit-calc"+n],r=0;r<3;r++)if(u=e[r],i.style.width=u,i.offsetWidth===100){f=u.replace(n,"");break}}catch(h){}return t.fake?nt(t,s):i.remove(),f}function wt(){var u=document,t=d(),s=g(t),n=u.createElement("div"),i=u.createElement("div"),f="",e=70,o=!1,r;for(n.className="tns-t-subp2",i.className="tns-t-ct",r=0;r<e;r++)f+="<div><\/div>";return i.innerHTML=f,n.appendChild(i),t.appendChild(n),o=Math.abs(n.getBoundingClientRect().left-i.children[e-3].getBoundingClientRect().left)<2,t.fake?nt(t,s):n.remove(),o}function bt(){var r=document,n=d(),e=g(n),t=r.createElement("div"),i=r.createElement("style"),u="@media all and (min-width:1px){.tns-mq-test{position:absolute}}",f;return i.type="text/css",t.className="tns-mq-test",n.appendChild(i),n.appendChild(t),i.styleSheet?i.styleSheet.cssText=u:i.appendChild(r.createTextNode(u)),f=window.getComputedStyle?window.getComputedStyle(t).position:t.currentStyle.position,n.fake?nt(n,e):t.remove(),f==="absolute"}function kt(n){var t=document.createElement("style");return n&&t.setAttribute("media",n),document.querySelector("head").appendChild(t),t.sheet?t.sheet:t.styleSheet}function c(n,t,i,r){"insertRule"in n?n.insertRule(t+"{"+i+"}",r):n.addRule(t,i,r)}function dt(n,t){"deleteRule"in n?n.deleteRule(t):n.removeRule(t)}function h(n){var t="insertRule"in n?n.cssRules:n.rules;return t.length}function gt(n,t){return Math.atan2(n,t)*(180/Math.PI)}function ni(n,t){var i=!1,r=Math.abs(90-Math.abs(n));return r>=90-t?i="horizontal":r<=t&&(i="vertical"),i}function a(n,t,i){for(var r=0,u=n.length;r<u;r++)t.call(i,n[r],r)}function w(n,t){return n.hasAttribute(t)}function tt(n,t){return n.getAttribute(t)}function st(n){return typeof n.item!="undefined"}function u(n,t){var i,r;if(n=st(n)||n instanceof Array?n:[n],Object.prototype.toString.call(t)==="[object Object]")for(i=n.length;i--;)for(r in t)n[i].setAttribute(r,t[r])}function v(n,t){var u,i,r;for(n=st(n)||n instanceof Array?n:[n],t=t instanceof Array?t:[t],u=t.length,i=n.length;i--;)for(r=u;r--;)n[i].removeAttribute(t[r])}function ht(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i}function f(n){n.style.display!=="none"&&(n.style.display="none")}function e(n){n.style.display==="none"&&(n.style.display="")}function ct(n){return window.getComputedStyle(n).display!=="none"}function b(n){var u,e,t,i;if(typeof n=="string"){var r=[n],f=n.charAt(0).toUpperCase()+n.substr(1);["Webkit","Moz","ms","O"].forEach(function(t){(t!=="ms"||n==="transform")&&r.push(t+f)});n=r}for(u=document.createElement("fakeelement"),e=n.length,t=0;t<n.length;t++)if(i=n[t],u.style[i]!==undefined)return i;return!1}function ti(n){if(!n||!window.getComputedStyle)return!1;var f=document,t=d(),e=g(t),i=f.createElement("p"),r,u=n.length>9?"-"+n.slice(0,-9).toLowerCase()+"-":"";return u+="transform",t.insertBefore(i,null),i.style[n]="translate3d(1px,1px,1px)",r=window.getComputedStyle(i).getPropertyValue(u),t.fake?nt(t,e):i.remove(),r!==undefined&&r.length>0&&r!=="none"}function lt(n,t){var i=!1;return/^Webkit/.test(n)?i="webkit"+t+"End":/^O/.test(n)?i="o"+t+"End":n&&(i=t.toLowerCase()+"end"),i}function n(n,t,i){var r,u;for(r in t)u=["touchstart","touchmove"].indexOf(r)>=0&&!i?et:!1,n.addEventListener(r,t[r],u)}function i(n,t){var i,r;for(i in t)r=["touchstart","touchmove"].indexOf(i)>=0?et:!1,n.removeEventListener(i,t[i],r)}function ii(){return{topics:{},on:function(n,t){this.topics[n]=this.topics[n]||[];this.topics[n].push(t)},off:function(n,t){if(this.topics[n])for(var i=0;i<this.topics[n].length;i++)if(this.topics[n][i]===t){this.topics[n].splice(i,1);break}},emit:function(n,t){t.type=n;this.topics[n]&&this.topics[n].forEach(function(i){i(t,n)})}}}function ri(n,t,i,r,u,f,e){function c(){f-=o;h+=l;n.style[t]=i+h+s+r;f>0?setTimeout(c,o):e()}var o=Math.min(f,10),s=u.indexOf("%")>=0?"%":"px",u=u.replace(s,""),h=Number(n.style[t].replace(i,"").replace(r,"").replace(s,"")),l=(u-h)/f*o;setTimeout(c,o)}var y,ft,at,et,vt;Object.keys||(Object.keys=function(n){var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t});"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var k=window,l=k.requestAnimationFrame||k.webkitRequestAnimationFrame||k.mozRequestAnimationFrame||k.msRequestAnimationFrame||function(n){return setTimeout(n,16)},ot=window,it=ot.cancelAnimationFrame||ot.mozCancelAnimationFrame||function(n){clearTimeout(n)};y=document.documentElement;var ut="classList"in document.createElement("_"),p=ut?function(n,t){return n.classList.contains(t)}:function(n,t){return n.className.indexOf(t)>=0},t=ut?function(n,t){p(n,t)||n.classList.add(t)}:function(n,t){p(n,t)||(n.className+=" "+t)},r=ut?function(n,t){p(n,t)&&n.classList.remove(t)}:function(n,t){p(n,t)&&(n.className=n.className.replace(t,""))};ft=!1;try{at=Object.defineProperty({},"passive",{get:function(){ft=!0}});window.addEventListener("test",null,at)}catch(ui){}return et=ft?{passive:!0}:!1,vt=function(y){function sc(n){for(var t in n)d||(t==="slideBy"&&(n[t]="page"),t==="edgePadding"&&(n[t]=!1),t==="autoHeight"&&(n[t]=!1)),t==="responsive"&&sc(n[t])}function ns(n){n&&(nu=tu=lu=au=hu=ur=yu=pu=!1)}function bc(){for(var n=d?k-ki:k;n<0;)n+=ut;return n%ut+1}function kc(n){return n=n?Math.max(0,Math.min(tr?ut-1:ut-st,n)):0,d?n+ki:n}function ts(n){for(n==null&&(n=k),d&&(n-=ki);n<0;)n+=ut;return Math.floor(n%ut)}function dc(){var n=ts(),t;return t=pe?n:g||et?Math.ceil((n+1)*br/ut-1):Math.floor(n/st),!tr&&d&&k===vr&&(t=br-1),t}function fv(){var t,n,r,i;if(et||g&&!ih)return ut-1;if(t=g?"fixedWidth":"items",n=[],(g||y[t]<ut)&&n.push(y[t]),ci)for(r in ci)i=ci[r][t],i&&(g||i<ut)&&n.push(i);return n.length||n.push(0),Math.ceil(g?ih/Math.min.apply(null,n):Math.max.apply(null,n))}function ev(){var t=fv(),n=d?Math.ceil((t*5-ut)/2):t*4-ut;return n=Math.max(t,n),gu("edgePadding")?n+1:n}function gc(){return fu.innerWidth||di.documentElement.clientWidth||di.body.clientWidth}function ph(n){return n==="top"?"afterbegin":"beforeend"}function nl(n){if(n!==null){var t=di.createElement("div"),i,r;return n.appendChild(t),i=t.getBoundingClientRect(),r=i.right-i.left,t.remove(),r||nl(n.parentNode)}}function tl(){var n=ai?ai*2-at:0;return nl(th)-n}function gu(n){if(y[n])return!0;if(ci)for(var t in ci)if(ci[t][n])return!0;return!1}function ft(n,t){var i,r;if(t==null&&(t=so),n==="items"&&g)return Math.floor((wi+at)/(g+at))||1;if(i=y[n],ci)for(r in ci)t>=parseInt(r)&&n in ci[r]&&(i=ci[r][n]);return n==="slideBy"&&i==="page"&&(i=ft("items")),d||n!=="slideBy"&&n!=="items"||(i=Math.floor(i)),i}function ov(n){return tf?tf+"("+n*100+"% / "+ei+")":n*100/ei+"%"}function is(n,t,i,r,u){var f="",e,o,s;return n!==undefined?(e=n,t&&(e-=t),f=fi?"margin: 0 "+e+"px 0 "+n+"px;":"margin: "+n+"px 0 "+e+"px 0;"):t&&!i&&(o="-"+t+"px",s=fi?o+" 0 0":"0 "+o+" 0",f="margin: 0 "+s+";"),!d&&u&&rr&&r&&(f+=cf(r)),f}function rs(n,t,i){return n?(n+t)*ei+"px":tf?tf+"("+ei*100+"% / "+i+")":ei*100/i+"%"}function us(n,t,i){var r,u;return n?r=n+t+"px":(d||(i=Math.floor(i)),u=d?ei:i,ga===!0&&window.matchMedia("(max-width: 991px)").matches&&(u=u+.4),r=tf?tf+"(100% / "+u+")":100/u+"%"),r="width:"+r,yf!=="inner"?r+";":r+" !important;"}function fs(n){var t="",i,r;return n!==!1&&(i=fi?"padding-":"margin-",r=fi?"right":"bottom",t=i+r+": "+n+"px;"),t}function il(n,t){var i=n.substring(0,n.length-t).toLowerCase();return i&&(i="-"+i+"-"),i}function cf(n){return il(rr,18)+"transition-duration:"+n/1e3+"s;"}function rl(n){return il(fo,17)+"animation-duration:"+n/1e3+"s;"}function sv(){var h=gu("gutter"),s,i,n,r,f,e,o;if(er.className="tns-outer",or.className="tns-inner",er.id=li+"-ow",or.id=li+"-iw",nt.id===""&&(nt.id=li),du+=uc||et?" tns-subpixel":" tns-no-subpixel",du+=tf?" tns-calc":" tns-no-calc",et&&(du+=" tns-autowidth"),du+=" tns-"+y.axis,nt.className+=du,d?(hr=di.createElement("div"),hr.id=li+"-mw",hr.className="tns-ovh",er.appendChild(hr),hr.appendChild(or)):er.appendChild(or),sr&&(s=hr?hr:or,s.className+=" tns-ah"),th.insertBefore(er,nt),or.appendChild(nt),a(ui,function(n,i){t(n,"tns-item");n.id||(n.id=li+"-item"+i);!d&&gr&&t(n,gr);u(n,{"aria-hidden":"true",tabindex:"-1"})}),ki){for(i=di.createDocumentFragment(),n=di.createDocumentFragment(),r=ki;r--;)f=r%ut,e=ui[f].cloneNode(!0),v(e,"id"),n.insertBefore(e,n.firstChild),d&&(o=ui[ut-1-f].cloneNode(!0),v(o,"id"),i.appendChild(o));nt.insertBefore(i,nt.firstChild);nt.appendChild(n);ui=nt.children}}function ul(){if(gu("autoHeight")||et||!fi){var i=nt.querySelectorAll("img");a(i,function(i){var r=i.src;r&&r.indexOf("data:image")<0?(n(i,yo),i.src="",i.src=r,t(i,"loading")):ho||bl(i)});l(function(){hs(ht(i),function(){lh=!0})});!et&&fi&&(i=dh(k,Math.min(k+st-1,ei-1)));ho?fl():l(function(){hs(ht(i),fl)})}else d&&no(),ol(),sl()}function fl(){if(et){var n=tr?k:ut-1;(function t(){ui[n-1].getBoundingClientRect().right.toFixed(2)===ui[n].getBoundingClientRect().left.toFixed(2)?el():setTimeout(function(){t()},16)})()}else el()}function el(){(!fi||et)&&(ia(),et?(kf=nc(),ao&&(wr=wh()),vr=ee(),ns(cr||wr)):rc());d&&no();ol();sl()}function hv(){var o,w,l,n,i;if(!d)for(o=k,w=k+Math.min(ut,st);o<w;o++)l=ui[o],l.style.left=(o-k)*100/st+"%",t(l,su),r(l,gr);if(fi&&(uc||et?(c(oi,"#"+li+" > .tns-item","font-size:"+fu.getComputedStyle(ui[0]).fontSize+";",h(oi)),c(oi,"#"+li,"font-size:0;",h(oi))):d&&a(ui,function(n,t){n.style.marginLeft=ov(t)})),vf?(rr&&(n=hr&&y.autoHeight?cf(y.speed):"",c(oi,"#"+li+"-mw",n,h(oi))),n=is(y.edgePadding,y.gutter,y.fixedWidth,y.speed,y.autoHeight),c(oi,"#"+li+"-iw",n,h(oi)),d&&(n=fi&&!et?"width:"+rs(y.fixedWidth,y.gutter,y.items)+";":"",rr&&(n+=cf(ar)),c(oi,"#"+li,n,h(oi))),n=fi&&!et?us(y.fixedWidth,y.gutter,y.items):"",y.gutter&&(n+=fs(y.gutter)),d||(rr&&(n+=cf(ar)),fo&&(n+=rl(ar))),n&&c(oi,"#"+li+" > .tns-item",n,h(oi))):(gl(),or.style.cssText=is(ai,at,g,sr),d&&fi&&!et&&(nt.style.width=rs(g,at,st)),n=fi&&!et?us(g,at,st):"",at&&(n+=fs(at)),n&&c(oi,"#"+li+" > .tns-item",n,h(oi))),ci&&vf)for(i in ci){i=parseInt(i);var u=ci[i],n="",b="",tt="",e="",f="",it=et?null:ft("items",i),p=ft("fixedWidth",i),s=ft("speed",i),rt=ft("edgePadding",i),ot=ft("autoHeight",i),v=ft("gutter",i);rr&&hr&&ft("autoHeight",i)&&"speed"in u&&(b="#"+li+"-mw{"+cf(s)+"}");("edgePadding"in u||"gutter"in u)&&(tt="#"+li+"-iw{"+is(rt,v,p,s,ot)+"}");d&&fi&&!et&&("fixedWidth"in u||"items"in u||g&&"gutter"in u)&&(e="width:"+rs(p,v,it)+";");rr&&"speed"in u&&(e+=cf(s));e&&(e="#"+li+"{"+e+"}");("fixedWidth"in u||g&&"gutter"in u||!d&&"items"in u)&&(f+=us(p,v,it));"gutter"in u&&(f+=fs(v));!d&&"speed"in u&&(rr&&(f+=cf(s)),fo&&(f+=rl(s)));f&&(f="#"+li+" > .tns-item{"+f+"}");n=b+tt+e+f;n&&oi.insertRule("@media (min-width: "+i/16+"em) {"+n+"}",oi.cssRules.length)}}function ol(){var f,l,i,s,r,o,e;if(gh(),er.insertAdjacentHTML("afterbegin",'<div class="tns-liveregion tns-visually-hidden" aria-live="polite" aria-atomic="true">slide <span class="current">'+wl()+"<\/span>  of "+ut+"<\/div>"),ah=er.querySelector(".tns-liveregion .current"),sh&&(f=ur?"stop":"start",vi?u(vi,{"data-action":f}):y.autoplayButtonOutput&&(er.insertAdjacentHTML(ph(y.autoplayPosition),'<button data-action="'+f+'">'+de[0]+f+de[1]+vu[0]+"<\/button>"),vi=er.querySelector("[data-action]")),vi&&n(vi,{click:ca}),ur&&(ps(),yu&&n(nt,ce),pu&&n(nt,le))),oh){if(l=d?ki:0,ir)u(ir,{"aria-label":"Carousel Pagination"}),yr=ir.children,a(yr,function(n,t){u(n,{"data-nav":t,tabindex:"-1","aria-label":ne+(t+1),"aria-controls":li})});else{for(i="",s=pe?"":'style="display:none"',r=0;r<ut;r++)i+='<button onclick="return false" data-nav="'+r+'" tabindex="-1" aria-controls="'+li+'" '+s+' aria-label="'+ne+(r+1)+'"><\/button>';i='<div class="tns-nav">'+i+"<\/div>";er.insertAdjacentHTML(ph(y.navPosition),i);ir=er.querySelector(".tns-nav");yr=ir.children}ka();rr&&(o=rr.substring(0,rr.length-18).toLowerCase(),e="transition: all "+ar/1e3+"s",o&&(e="-"+o+"-"+e),c(oi,"[aria-controls^="+li+"-item]",e,h(oi)));u(yr[pr],{"aria-label":ne+(pr+1)+vh});v(yr[pr],"tabindex");t(yr[pr],po);n(ir,eh)}vo&&(pi||si&&hi||(er.insertAdjacentHTML(ph(y.controlsPosition),'<div class="tns-controls" tabindex="0"><button data-controls="prev" tabindex="-1" aria-controls="'+li+'">'+cu[0]+'<\/button><button data-controls="next" tabindex="-1" aria-controls="'+li+'">'+cu[1]+"<\/button><\/div>"),pi=er.querySelector(".tns-controls")),si&&hi||(si=pi.children[0],hi=pi.children[1]),y.controlsContainer&&u(pi,{tabindex:"0"}),(y.controlsContainer||y.prevButton&&y.nextButton)&&u([si,hi],{"aria-controls":li,tabindex:"-1"}),(y.controlsContainer||y.prevButton&&y.nextButton)&&(u(si,{"data-controls":"prev"}),u(hi,{"data-controls":"next"})),be=ra(si),ke=ra(hi),fa(),pi?n(pi,he):(n(si,he),n(hi,he)));bh()}function sl(){if(d&&rf){var t={};t[rf]=uu;n(nt,t)}if(lu&&n(nt,ve,y.preventScrollOnTouch),au&&n(nt,ye),hu&&n(di,ae),yf==="inner")bi.on("outerResized",function(){cl();bi.emit("innerLoaded",fr())});else(ci||g||et||sr||!fi)&&n(fu,{resize:hl});if(sr)if(yf==="outer")bi.on("innerLoaded",ss);else cr||ss();kh();cr?yl():wr&&vl();bi.on("indexChanged",dl);yf==="inner"&&bi.emit("innerLoaded",fr());typeof fh=="function"&&fh(fr());ue=!0}function cv(){var n,r,t;oi.disabled=!0;oi.ownerNode&&oi.ownerNode.remove();i(fu,{resize:hl});hu&&i(di,ae);pi&&i(pi,he);ir&&i(ir,eh);i(nt,ce);i(nt,le);vi&&i(vi,{click:ca});ur&&clearInterval(wo);d&&rf&&(n={},n[rf]=uu,i(nt,n));lu&&i(nt,ve);au&&i(nt,ye);r=[hc,vc,tv,iv,yc,wc];ds.forEach(function(n,t){var i=n==="container"?er:y[n],u,f;typeof i=="object"&&(u=i.previousElementSibling?i.previousElementSibling:!1,f=i.parentNode,i.outerHTML=r[t],y[n]=u?u.nextElementSibling:f.firstElementChild)});ds=su=oo=nh=gr=fi=er=or=nt=th=hc=ui=ut=re=so=et=g=ai=at=wi=st=wf=ih=hu=ar=fe=tr=sr=oi=ho=yi=bf=ki=ei=cc=kf=uh=uf=wu=df=ee=k=bu=iu=vr=nv=lo=ru=ku=fh=bi=du=li=cr=oe=ao=wr=se=he=eh=ce=le=ae=ve=ye=vo=oh=pe=sh=lc=ac=hh=ch=yo=lh=nu=cu=pi=vc=si=hi=be=ke=tu=ir=yc=yr=br=ff=ef=pr=gf=po=ne=vh=ur=rh=pc=vu=yu=vi=wc=pu=de=wo=lr=bo=te=ko=sf=dr=go=rv=uv=hf=kr=yh=lu=au=null;for(t in this)t!=="rebuild"&&(this[t]=null);ue=!1}function hl(n){l(function(){cl(eu(n))})}function cl(t){var r,p,u,w,b,it;if(ue){yf==="outer"&&bi.emit("outerResized",fr(t));so=gc();p=re;u=!1;ci&&(ll(),r=p!==re,r&&bi.emit("newBreakpointStart",fr(t)));var s,o,rt=st,ut=cr,ot=wr,ht=hu,ct=nu,lt=tu,vt=lu,yt=au,pt=ur,wt=yu,bt=pu,kt=k;if(r){var gt=g,ni=sr,ti=cu,ii=nr,l=vu;vf||(w=at,b=ai)}if(hu=ft("arrowKeys"),nu=ft("controls"),tu=ft("nav"),lu=ft("touch"),nr=ft("center"),au=ft("mouseDrag"),ur=ft("autoplay"),yu=ft("autoplayHoverPause"),pu=ft("autoplayResetOnVisibility"),r&&(cr=ft("disable"),g=ft("fixedWidth"),ar=ft("speed"),sr=ft("autoHeight"),cu=ft("controlsText"),vu=ft("autoplayText"),rh=ft("autoplayTimeout"),vf||(ai=ft("edgePadding"),at=ft("gutter"))),ns(cr),wi=tl(),fi&&!et||cr||(ia(),fi||(rc(),u=!0)),(g||et)&&(kf=nc(),vr=ee()),(r||g)&&(st=ft("items"),wf=ft("slideBy"),o=st!==rt,o&&(g||et||(vr=ee()),es())),r&&cr!==ut&&(cr?yl():av()),ao&&(r||g||et)&&(wr=wh(),wr!==ot&&(wr?(tc(as(kc(0))),vl()):(lv(),u=!0))),ns(cr||wr),ur||(yu=pu=!1),hu!==ht&&(hu?n(di,ae):i(di,ae)),nu!==ct&&(nu?pi?e(pi):(si&&e(si),hi&&e(hi)):pi?f(pi):(si&&f(si),hi&&f(hi))),tu!==lt&&(tu?e(ir):f(ir)),lu!==vt&&(lu?n(nt,ve,y.preventScrollOnTouch):i(nt,ve)),au!==yt&&(au?n(nt,ye):i(nt,ye)),ur!==pt&&(ur?(vi&&e(vi),lr||te||ps()):(vi&&f(vi),lr&&io())),yu!==wt&&(yu?n(nt,ce):i(nt,ce)),pu!==bt&&(pu?n(di,le):i(di,le)),r){if((g!==gt||nr!==ii)&&(u=!0),sr!==ni&&(sr||(or.style.height="")),nu&&cu!==ti&&(si.innerHTML=cu[0],hi.innerHTML=cu[1]),vi&&vu!==l){var a=ur?1:0,v=vi.innerHTML,tt=v.length-l[a].length;v.substring(tt)===l[a]&&(vi.innerHTML=v.substring(0,tt)+vu[a])}}else nr&&(g||et)&&(u=!0);(o||g&&!et)&&(br=ba(),ka());s=k!==kt;s?(bi.emit("indexChanged",fr()),u=!0):o?s||dl():(g||et)&&(kh(),gh(),pl());o&&!d&&wv();cr||wr||(r&&!vf&&((sr!==autoheightTem||ar!==speedTem)&&gl(),(ai!==b||at!==w)&&(or.style.cssText=is(ai,at,g,ar,sr)),fi&&(d&&(nt.style.width=rs(g,at,st)),it=us(g,at,st)+fs(at),dt(oi,h(oi)-1),c(oi,"#"+li+" > .tns-item",it,h(oi)))),sr&&ss(),u&&(no(),bu=k));r&&bi.emit("newBreakpointEnd",fr(t))}}function wh(){var t,i,n;return!g&&!et?(t=nr?st-(st-1)/2:st,ut<=t):(i=g?(g+at)*ut:yi[ut],n=ai?wi+ai*2:wi+at,nr&&(n-=g?(wi-g)/2:(wi-(yi[k+1]-yi[k]-at))/2),i<=n)}function ll(){re=0;for(var n in ci)n=parseInt(n),so>=n&&(re=n)}function bh(){!ur&&vi&&f(vi);!tu&&ir&&f(ir);nu||(pi?f(pi):(si&&f(si),hi&&f(hi)))}function al(){ur&&vi&&e(vi);tu&&ir&&e(ir);nu&&(pi?e(pi):(si&&e(si),hi&&e(hi)))}function vl(){var i,n;if(!se){if(ai&&(or.style.margin="0px"),ki)for(i="tns-transparent",n=ki;n--;)d&&t(ui[n],i),t(ui[ei-n-1],i);bh();se=!0}}function lv(){var t,n;if(se){if(ai&&vf&&(or.style.margin=""),ki)for(t="tns-transparent",n=ki;n--;)d&&r(ui[n],t),r(ui[ei-n-1],t);al();se=!1}}function yl(){var n,t,u,i;if(!oe){if(oi.disabled=!0,nt.className=nt.className.replace(du.substring(1),""),v(nt,["style"]),tr)for(n=ki;n--;)d&&f(ui[n]),f(ui[ei-n-1]);if(fi&&d||v(or,["style"]),!d)for(t=k,u=k+ut;t<u;t++)i=ui[t],v(i,["style"]),r(i,su),r(i,gr);bh();oe=!0}}function av(){var i,n,u,r,f;if(oe){if(oi.disabled=!1,nt.className+=du,no(),tr)for(i=ki;i--;)d&&e(ui[i]),e(ui[ei-i-1]);if(!d)for(n=k,u=k+ut;n<u;n++)r=ui[n],f=n<k+st?su:gr,r.style.left=(n-k)*100/st+"%",t(r,f);al();oe=!1}}function pl(){var n=wl();ah.innerHTML!==n&&(ah.innerHTML=n)}function wl(){var t=os(),n=t[0]+1,i=t[1]+1;return n===i?n+"":n+" to "+i}function os(n){var t,i,r,u,f,e,o;return n==null&&(n=as()),t=k,nr||ai?(et||g)&&(r=-(parseFloat(n)+ai),u=r+wi+ai*2):et&&(r=yi[k],u=r+wi),et?yi.forEach(function(n,f){f<ei&&((nr||ai)&&n<=r+.5&&(t=f),u-n>=.5&&(i=f))}):(g?(f=g+at,nr||ai?(t=Math.floor(r/f),i=Math.ceil(u/f-1)):i=t+Math.ceil(wi/f)-1):nr||ai?(e=st-1,nr?(t-=e/2,i=k+e/2):i=k+e,ai&&(o=ai*st/wi,t-=o,i+=o),t=Math.floor(t),i=Math.ceil(i)):i=t+st-1,t=Math.max(t,0),i=Math.min(i,ei-1)),[t,i]}function kh(){ho&&!cr&&dh.apply(null,os()).forEach(function(i){var r,u;p(i,ch)||(r={},r[rf]=function(n){n.stopPropagation()},n(i,r),n(i,yo),i.src=tt(i,"data-src"),u=tt(i,"data-srcset"),u&&(i.srcset=u),t(i,"loading"))})}function vv(n){bl(ro(n))}function yv(n){pv(ro(n))}function bl(n){t(n,"loaded");kl(n)}function pv(n){t(n,"failed");kl(n)}function kl(n){t(n,"tns-complete");r(n,"loading");i(n,yo)}function dh(n,t){for(var i=[];n<=t;)a(ui[n].querySelectorAll("img"),function(n){i.push(n)}),n++;return i}function ss(){var n=dh.apply(null,os());l(function(){hs(n,ta)})}function hs(n,t){if(lh||(n.forEach(function(t,i){p(t,ch)&&n.splice(i,1)}),!n.length))return t();l(function(){hs(n,t)})}function dl(){kh();gh();pl();fa();bv()}function gl(){d&&sr&&(hr.style[rr]=ar/1e3+"s")}function na(n,t){for(var r=[],i=n,u=Math.min(n+t,ei);i<u;i++)r.push(ui[i].offsetHeight);return Math.max.apply(null,r)}function ta(){var n=sr?na(k,st):na(ki,ut),t=hr?hr:or;t.style.height!==n&&(t.style.height=n+"px")}function ia(){yi=[0];var n=fi?"left":"top",i=fi?"right":"bottom",t=ui[0].getBoundingClientRect()[n];a(ui,function(r,u){u&&yi.push(r.getBoundingClientRect()[n]-t);u===ei-1&&yi.push(r.getBoundingClientRect()[i]-t)})}function gh(){var n=os(),i=n[0],f=n[1];a(ui,function(n,e){e>=i&&e<=f?w(n,"aria-hidden")&&(v(n,["aria-hidden","tabindex"]),t(n,hh)):w(n,"aria-hidden")||(u(n,{"aria-hidden":"true",tabindex:"-1"}),r(n,hh))})}function wv(){for(var n,u=k+Math.min(ut,st),i=ei;i--;)n=ui[i],i>=k&&i<u?(t(n,"tns-moving"),n.style.left=(i-k)*100/st+"%",t(n,su),r(n,gr)):n.style.left&&(n.style.left="",t(n,gr),r(n,su)),r(n,oo);setTimeout(function(){a(ui,function(n){r(n,"tns-moving")})},300)}function bv(){if(tu&&(pr=ef>=0?ef:dc(),ef=-1,pr!==gf)){var i=yr[gf],n=yr[pr];u(i,{tabindex:"-1","aria-label":ne+(gf+1)});r(i,po);u(n,{"aria-label":ne+(pr+1)+vh});v(n,"tabindex");t(n,po);gf=pr}}function kv(n){return n.nodeName.toLowerCase()}function ra(n){return kv(n)==="button"}function ua(n){return n.getAttribute("aria-disabled")==="true"}function cs(n,t,i){n?t.disabled=i:t.setAttribute("aria-disabled",i.toString())}function fa(){if(nu&&!fe&&!tr){var n=be?si.disabled:ua(si),t=ke?hi.disabled:ua(hi),i=k<=iu?!0:!1,r=!fe&&k>=vr?!0:!1;i&&!n&&cs(be,si,!0);!i&&n&&cs(be,si,!1);r&&!t&&cs(ke,hi,!0);!r&&t&&cs(ke,hi,!1)}}function ls(n,t){rr&&(n.style[rr]=t)}function dv(){return g?(g+at)*ei:yi[ei]}function ge(n){n==null&&(n=k);var t=ai?at:0;return et?(wi-t-(yi[n+1]-yi[n]-at))/2:g?(wi-g)/2:(st-1)/2}function nc(){var t=ai?at:0,n=wi+t-dv();return nr&&!tr&&(n=g?-(g+at)*(ei-1)-ge():ge(ei-1)-yi[ei-1]),n>0&&(n=0),n}function as(n){var t,i;return n==null&&(n=k),fi&&!et?g?(t=-(g+at)*n,nr&&(t+=ge())):(i=ie?ei:st,nr&&(n-=ge()),t=-n*100/i):(t=-yi[n],nr&&et&&(t+=ge())),cc&&(t=Math.max(t,kf)),t+(fi&&!et&&!g?"%":"px")}function no(n){ls(nt,"0s");tc(n)}function tc(n){n==null&&(n=as());nt.style[uf]=wu+n+df}function ea(n,i,u,f){var s=n+st,o,e;for(tr||(s=Math.min(s,ei)),o=n;o<s;o++)e=ui[o],f||(e.style.left=(o-k)*100/st+"%"),nh&&uo&&(e.style[uo]=e.style[ks]=nh*(o-n)/1e3+"s"),r(e,i),t(e,u),f&&bf.push(e)}function ic(n,t){uh&&es();(k!==bu||t)&&(bi.emit("indexChanged",fr()),bi.emit("transitionStart",fr()),sr&&ss(),lr&&n&&["click","keydown"].indexOf(n.type)>=0&&io(),ku=!0,oa())}function sa(n){return n.toLowerCase().replace(/-/g,"")}function uu(n){var u,i,f;if(d||ku){if(bi.emit("transitionEnd",fr(n)),!d&&bf.length>0)for(u=0;u<bf.length;u++)i=bf[u],i.style.left="",ks&&uo&&(i.style[ks]="",i.style[uo]=""),r(i,oo),t(i,gr);n&&(d||n.target.parentNode!==nt)&&(n.target!==nt||sa(n.propertyName)!==sa(uf))||(uh||(f=k,es(),k!==f&&(bi.emit("indexChanged",fr()),no())),yf==="inner"&&bi.emit("innerLoaded",fr()),ku=!1,bu=k)}}function to(n,t){var r,i,u;if(!wr)if(n==="prev")nf(t,-1);else if(n==="next")nf(t,1);else{if(ku){if(co)return;uu()}r=ts();i=0;n==="first"?i=-r:n==="last"?i=d?ut-st-r:ut-1-r:(typeof n!="number"&&(n=parseInt(n)),isNaN(n)||(t||(n=Math.max(0,Math.min(ut-1,n))),i=n-r));!d&&i&&Math.abs(i)<st&&(u=i>0?1:-1,i+=k+i-ut>=iu?ut*u:ut*2*u*-1);k+=i;d&&tr&&(k<iu&&(k+=ut),k>vr&&(k-=ut));ts(k)!==ts(bu)&&ic(t)}}function nf(n,t){var u,i,r;if(ku){if(co)return;uu()}if(!t){for(n=eu(n),i=ro(n);i!==pi&&[si,hi].indexOf(i)<0;)i=i.parentNode;r=[si,hi].indexOf(i);r>=0&&(u=!0,t=r===0?-1:1)}if(fe){if(k===iu&&t===-1){to("last",n);return}if(k===vr&&t===1){to("first",n);return}}t&&(k+=wf*t,et&&(k=Math.floor(k)),ic(u||n&&n.type==="keydown"?n:null))}function gv(n){var t,i;if(ku){if(co)return;uu()}for(n=eu(n),t=ro(n);t!==ir&&!w(t,"data-nav");)t=t.parentNode;if(w(t,"data-nav")){var i=ef=Number(tt(t,"data-nav")),r=g||et?i*ut/br:i*st,u=pe?i:Math.min(Math.ceil(r),ut-1);to(u,n);pr===i&&(lr&&io(),ef=-1)}}function vs(){wo=setInterval(function(){nf(null,pc)},rh);lr=!0}function ys(){clearInterval(wo);lr=!1}function ha(n,t){u(vi,{"data-action":n});vi.innerHTML=de[0]+n+de[1]+t}function ps(){vs();vi&&ha("stop",vu[1])}function io(){ys();vi&&ha("start",vu[0])}function ny(){ur&&!lr&&(ps(),te=!1)}function ty(){lr&&(io(),te=!0)}function ca(){lr?(io(),te=!0):(ps(),te=!1)}function iy(){di.hidden?lr&&(ys(),ko=!0):ko&&(vs(),ko=!1)}function ry(){lr&&(ys(),bo=!0)}function uy(){bo&&(vs(),bo=!1)}function fy(n){n=eu(n);var t=[ou.LEFT,ou.RIGHT].indexOf(n.keyCode);t>=0&&nf(n,t===0?-1:1)}function ey(n){n=eu(n);var t=[ou.LEFT,ou.RIGHT].indexOf(n.keyCode);t>=0&&(t===0?si.disabled||nf(n,-1):hi.disabled||nf(n,1))}function la(n){n.focus()}function oy(n){var r,i,t;(n=eu(n),r=di.activeElement,w(r,"data-nav"))&&(i=[ou.LEFT,ou.RIGHT,ou.ENTER,ou.SPACE].indexOf(n.keyCode),t=Number(tt(r,"data-nav")),i>=0&&(i===0?t>0&&la(yr[t-1]):i===1?t<br-1&&la(yr[t+1]):(ef=t,to(t,n))))}function eu(n){return n=n||fu.event,lf(n)?n.changedTouches[0]:n}function ro(n){return n.target||fu.event.srcElement}function lf(n){return n.type.indexOf("touch")>=0}function aa(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function va(){return ni(gt(dr.y-sf.y,dr.x-sf.x),lo)===y.axis}function ya(n){if(ku){if(co)return;uu()}ur&&lr&&ys();hf=!0;kr&&(it(kr),kr=null);var t=eu(n);bi.emit(lf(n)?"touchStart":"dragStart",fr(n));lf(n)||aa(n);dr.x=sf.x=t.clientX;dr.y=sf.y=t.clientY;d&&(go=parseFloat(nt.style[uf].replace(wu,"")),ls(nt,"0s"))}function pa(n){if(hf){var t=eu(n);dr.x=t.clientX;dr.y=t.clientY;d?kr||(kr=l(function(){wa(n)})):(ru==="?"&&(ru=va()),ru&&(we=!0));we&&n.preventDefault()}}function wa(n){var t,i,r;if(!ru){hf=!1;return}if(it(kr),hf&&(kr=l(function(){wa(n)})),ru==="?"&&(ru=va()),ru){!we&&lf(n)&&(we=!0);try{n.type&&bi.emit(lf(n)?"touchMove":"dragMove",fr(n))}catch(u){}t=go;i=yh(dr,sf);!fi||g||et?(t+=i,t+="px"):(r=ie?i*st*100/((wi+at)*ei):i*100/(wi+at),t+=r,t+="%");nt.style[uf]=wu+t+df}}function ws(t){var u,r,f;hf&&(kr&&(it(kr),kr=null),d&&ls(nt,""),hf=!1,u=eu(t),dr.x=u.clientX,dr.y=u.clientY,r=yh(dr,sf),Math.abs(r)>2.5&&(lf(t)||(f=ro(t),n(f,{click:function e(n){aa(n);i(f,{click:e})}})),d?kr=l(function(){var i,u,n;if(fi&&!et)i=-r*st/(wi+at),i=r>0?Math.floor(i):Math.ceil(i),k+=i;else if(u=-(go+r),u<=0)k=iu;else if(u>=yi[ei-1])k=vr;else for(n=0;n<ei&&u>=yi[n];)k=n,u>yi[n]&&r<0&&(k+=1),n++;ic(t,r);bi.emit(lf(t)?"touchEnd":"dragEnd",fr(t))}):ru&&nf(t,r>0?-1:1)));y.preventScrollOnTouch==="auto"&&(we=!1);lo&&(ru="?");ur&&!lr&&vs()}function rc(){var n=hr?hr:or;n.style.height=yi[k+st]-yi[k]+"px"}function ba(){var n=g?(g+at)*ut/wi:ut/st;return Math.min(Math.ceil(n),ut)}function ka(){if(tu&&!pe&&br!==ff){var n=ff,t=br,i=e;for(ff>br&&(n=br,t=ff,i=f);n<t;)i(yr[n]),n++;ff=br}}function fr(n){return{container:nt,slideItems:ui,navContainer:ir,navItems:yr,controlsContainer:pi,hasControls:vo,prevButton:si,nextButton:hi,items:st,slideBy:wf,cloneCount:ki,slideCount:ut,slideCountNew:ei,index:k,indexCached:bu,displayIndex:bc(),navCurrentIndex:pr,navCurrentIndexCached:gf,pages:br,pagesCached:ff,sheet:oi,isOn:ue,event:n||{}}}var bs,af,eo,gs,pf,es,oa;y=rt({container:".slider",mode:"carousel",axis:"horizontal",items:1,gutter:0,edgePadding:0,fixedWidth:!1,autoWidth:!1,cutOffStyle:!1,viewportMax:!1,slideBy:1,center:!1,controls:!0,controlsPosition:"top",controlsText:["prev","next"],controlsContainer:!1,prevButton:!1,nextButton:!1,nav:!0,navPosition:"top",navContainer:!1,navAsThumbnails:!1,arrowKeys:!1,speed:300,autoplay:!1,autoplayPosition:"top",autoplayTimeout:5e3,autoplayDirection:"forward",autoplayText:["start","stop"],autoplayHoverPause:!1,autoplayButton:!1,autoplayButtonOutput:!0,autoplayResetOnVisibility:!0,animateIn:"tns-fadeIn",animateOut:"tns-fadeOut",animateNormal:"tns-normal",animateDelay:!1,loop:!0,rewind:!1,autoHeight:!1,responsive:!1,lazyload:!1,lazyloadSelector:".tns-lazy-img",touch:!0,mouseDrag:!1,swipeAngle:15,nested:!1,preventActionWhenRunning:!1,preventScrollOnTouch:!1,freezable:!0,onInit:!1,useLocalStorage:!0},y||{});var di=document,fu=window,ou={ENTER:13,SPACE:32,LEFT:37,RIGHT:39},ot={},gi=y.useLocalStorage;if(gi){bs=navigator.userAgent;af=new Date;try{ot=fu.localStorage;ot?(ot.setItem(af,af),gi=ot.getItem(af)==af,ot.removeItem(af)):gi=!1;gi||(ot={})}catch(sy){gi=!1}gi&&(ot.tnsApp&&ot.tnsApp!==bs&&["tC","tPL","tMQ","tTf","t3D","tTDu","tTDe","tADu","tADe","tTE","tAE"].forEach(function(n){ot.removeItem(n)}),localStorage.tnsApp=bs)}var tf=ot.tC?o(ot.tC):s(ot,"tC",pt(),gi),uc=ot.tPL?o(ot.tPL):s(ot,"tPL",wt(),gi),vf=ot.tMQ?o(ot.tMQ):s(ot,"tMQ",bt(),gi),ie=ot.tTf?o(ot.tTf):s(ot,"tTf",b("transform"),gi),da=ot.t3D?o(ot.t3D):s(ot,"t3D",ti(ie),gi),rr=ot.tTDu?o(ot.tTDu):s(ot,"tTDu",b("transitionDuration"),gi),uo=ot.tTDe?o(ot.tTDe):s(ot,"tTDe",b("transitionDelay"),gi),fo=ot.tADu?o(ot.tADu):s(ot,"tADu",b("animationDuration"),gi),ks=ot.tADe?o(ot.tADe):s(ot,"tADe",b("animationDelay"),gi),rf=ot.tTE?o(ot.tTE):s(ot,"tTE",lt(rr,"Transition"),gi),fc=ot.tAE?o(ot.tAE):s(ot,"tAE",lt(fo,"Animation"),gi),ec=fu.console&&typeof fu.console.warn=="function",ds=["container","controlsContainer","prevButton","nextButton","navContainer","autoplayButton"],oc={};if(ds.forEach(function(n){if(typeof y[n]=="string"){var i=y[n],t=di.querySelector(i);if(oc[n]=i,t&&t.nodeName)y[n]=t;else{ec&&console.warn("Can't find",y[n]);return}}}),y.container.children.length<1){ec&&console.warn("No slides found in",y.container);return}var ci=y.responsive,yf=y.nested,d=y.mode==="carousel"?!0:!1;if(ci){0 in ci&&(y=rt(y,ci[0]),delete ci[0]);eo={};for(gs in ci)pf=ci[gs],pf=typeof pf=="number"?{items:pf}:pf,eo[gs]=pf;ci=eo;eo=null}if(d||sc(y),!d){y.axis="horizontal";y.slideBy="page";y.edgePadding=!1;var su=y.animateIn,oo=y.animateOut,nh=y.animateDelay,gr=y.animateNormal}var fi=y.axis==="horizontal"?!0:!1,er=di.createElement("div"),or=di.createElement("div"),hr,nt=y.container,th=nt.parentNode,hc=nt.outerHTML,ui=nt.children,ut=ui.length,re,so=gc(),ue=!1;ci&&ll();d&&(nt.className+=" tns-vpfix");var et=y.autoWidth,ga=y.cutOffStyle,g=ft("fixedWidth"),ai=ft("edgePadding"),at=ft("gutter"),wi=tl(),nr=ft("center"),st=et?1:Math.floor(ft("items")),wf=ft("slideBy"),ih=y.viewportMax||y.fixedWidthViewportWidth,hu=ft("arrowKeys"),ar=ft("speed"),fe=y.rewind,tr=fe?!1:y.loop,sr=ft("autoHeight"),nu=ft("controls"),cu=ft("controlsText"),tu=ft("nav"),lu=ft("touch"),au=ft("mouseDrag"),ur=ft("autoplay"),rh=ft("autoplayTimeout"),vu=ft("autoplayText"),yu=ft("autoplayHoverPause"),pu=ft("autoplayResetOnVisibility"),oi=kt(),ho=y.lazyload,hy=y.lazyloadSelector,yi,bf=[],ki=tr?ev():0,ei=d?ut+ki*2:ut+ki,cc=(g||et)&&!tr?!0:!1,kf=g?nc():null,uh=!d||!tr?!0:!1,uf=fi?"left":"top",wu="",df="",ee=function(){return g?function(){return nr&&!tr?ut-1:Math.ceil(-kf/(g+at))}:et?function(){for(var n=ei;n--;)if(yi[n]>=-kf)return n}:function(){return nr&&d&&!tr?ut-1:tr||d?Math.max(0,ei-Math.ceil(st)):ei-1}}(),k=kc(ft("startIndex")),bu=k,cy=bc(),iu=0,vr=et?null:ee(),nv,co=y.preventActionWhenRunning,lo=y.swipeAngle,ru=lo?"?":!0,ku=!1,fh=y.onInit,bi=new ii,du=" tns-slider tns-"+y.mode,li=nt.id||yt(),cr=ft("disable"),oe=!1,ao=y.freezable,wr=ao&&!et?wh():!1,se=!1,he={click:nf,keydown:ey},eh={click:gv,keydown:oy},ce={mouseover:ry,mouseout:uy},le={visibilitychange:iy},ae={keydown:fy},ve={touchstart:ya,touchmove:pa,touchend:ws,touchcancel:ws},ye={mousedown:ya,mousemove:pa,mouseup:ws,mouseleave:ws},vo=gu("controls"),oh=gu("nav"),pe=et?!0:y.navAsThumbnails,sh=gu("autoplay"),lc=gu("touch"),ac=gu("mouseDrag"),hh="tns-slide-active",ch="tns-complete",yo={load:vv,error:yv},lh,ah,we=y.preventScrollOnTouch==="force"?!0:!1;if(vo)var pi=y.controlsContainer,vc=y.controlsContainer?y.controlsContainer.outerHTML:"",si=y.prevButton,hi=y.nextButton,tv=y.prevButton?y.prevButton.outerHTML:"",iv=y.nextButton?y.nextButton.outerHTML:"",be,ke;if(oh)var ir=y.navContainer,yc=y.navContainer?y.navContainer.outerHTML:"",yr,br=et?ut:ba(),ff=0,ef=-1,pr=dc(),gf=pr,po="tns-nav-active",ne="Carousel Page ",vh=" (Current Slide)";if(sh)var pc=y.autoplayDirection==="forward"?1:-1,vi=y.autoplayButton,wc=y.autoplayButton?y.autoplayButton.outerHTML:"",de=["<span class='tns-visually-hidden'>"," animation<\/span>"],wo,lr,bo,te,ko;if(lc||ac)var sf={},dr={},go,rv,uv,hf=!1,kr,yh=fi?function(n,t){return n.x-t.x}:function(n,t){return n.y-t.y};return et||ns(cr||wr),ie&&(uf=ie,wu="translate",da?(wu+=fi?"3d(":"3d(0px, ",df=fi?", 0px, 0px)":", 0px)"):(wu+=fi?"X(":"Y(",df=")")),d&&(nt.className=nt.className.replace("tns-vpfix","")),sv(),hv(),ul(),es=function(){return tr?d?function(){var t=iu,n=vr;t+=wf;n-=wf;ai?(t+=1,n-=1):g&&(wi+at)%(g+at)&&(n-=1);ki&&(k>n?k-=ut:k<t&&(k+=ut))}:function(){if(k>vr)while(k>=iu+ut)k-=ut;else if(k<iu)while(k<=vr-ut)k+=ut}:function(){k=Math.max(iu,Math.min(vr,k))}}(),oa=function(){return d?function(){ls(nt,"");rr||!ar?(tc(),ar&&ct(nt)||uu()):ri(nt,uf,wu,df,as(),ar,uu);fi||rc()}:function(){bf=[];var t={};t[rf]=t[fc]=uu;i(ui[bu],t);n(ui[k],t);ea(bu,su,oo,!0);ea(k,gr,su);rf&&fc&&ar&&ct(nt)||uu()}}(),{version:"2.9.2",getInfo:fr,events:bi,goTo:to,play:ny,pause:ty,isOn:ue,updateSliderHeight:ta,refresh:ul,destroy:cv,rebuild:function(){return vt(rt(y,oc))}}}}();
/*!
Waypoints Sticky Element Shortcut - 4.0.1
Copyright ï¿½ 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
!function () { "use strict"; function t(s) { this.options = e.extend({}, i.defaults, t.defaults, s), this.element = this.options.element, this.$element = e(this.element), this.createWrapper(), this.createWaypoint() } var e = window.jQuery, i = window.Waypoint; t.prototype.createWaypoint = function () { var t = this.options.handler; this.waypoint = new i(e.extend({}, this.options, { element: this.wrapper, handler: e.proxy(function (e) { var i = this.options.direction.indexOf(e) > -1, s = i ? this.$element.outerHeight(!0) : ""; this.$wrapper.height(s), this.$element.toggleClass(this.options.stuckClass, i), t && t.call(this, e) }, this) })) }, t.prototype.createWrapper = function () { this.options.wrapper && this.$element.wrap(this.options.wrapper), this.$wrapper = this.$element.parent(), this.wrapper = this.$wrapper[0] }, t.prototype.destroy = function () { this.$element.parent()[0] === this.wrapper && (this.waypoint.destroy(), this.$element.removeClass(this.options.stuckClass), this.options.wrapper && this.$element.unwrap()) }, t.defaults = { wrapper: '<div class="sticky-wrapper" />', stuckClass: "stuck", direction: "down right" }, i.Sticky = t }();
/*!
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(n,t){var $=n.jQuery||n.Cowboy||(n.Cowboy={}),i;$.throttle=i=function(n,i,r,u){function o(){function o(){e=+new Date;r.apply(h,c)}function l(){f=t}var h=this,s=+new Date-e,c=arguments;u&&!f&&o();f&&clearTimeout(f);u===t&&s>n?o():i!==!0&&(f=setTimeout(u?l:o,u===t?n-s:n))}var f,e=0;return typeof i!="boolean"&&(u=r,r=i,i=t),$.guid&&(o.guid=r.guid=r.guid||$.guid++),o};$.debounce=function(n,r,u){return u===t?i(n,r,!1):i(n,u,r!==!1)}})(this);
/*!
 * @fileOverview TouchSwipe - jQuery Plugin
 * @version 1.6.18
 * @author Matt Bryson
 * @license
 * Copyright (c) 2010-2015 Matt Bryson
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
!function(n){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],n):n("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function(n){"use strict";function ut(t){return!t||void 0!==t.allowPageScroll||void 0===t.swipe&&void 0===t.swipeStatus||(t.allowPageScroll=o),void 0!==t.click&&void 0===t.tap&&(t.tap=t.click),t||(t={}),t=n.extend({},n.fn.swipe.defaults,t),this.each(function(){var r=n(this),i=r.data(c);i||(i=new ft(this,t),r.data(c,i))})}function ft(ut,ft){function ki(t){var r,f,u,e;if(!(pu()||n(t.target).closest(ft.excludedElements,ot).length>0)&&(r=t.originalEvent?t.originalEvent:t,!r.pointerType||"mouse"!=r.pointerType||0!=ft.fallbackToMouseEvents))return u=r.touches,e=u?u[0]:r,st=rt,u?ct=u.length:ft.preventDefaultEvents!==!1&&t.preventDefault(),at=0,vt=null,yt=null,kt=null,lt=0,gt=0,ni=0,wt=1,bt=0,pi=ku(),dr(),ci(0,e),!u||ct===ft.fingers||ft.fingers===a||oi()?(sr=dt(),2==ct&&(ci(1,u[1]),gt=ni=fr(ht[0].start,ht[1].start)),(ft.swipeStatus||ft.pinchStatus)&&(f=pt(r,st))):f=!1,f===!1?(st=i,pt(r,st),f):(ft.hold&&(ei=setTimeout(n.proxy(function(){ot.trigger("hold",[r.target]);ft.hold&&(f=ft.hold.call(ot,r,r.target))},this),ft.longTapThreshold)),hi(!0),null)}function di(n){var f=n.originalEvent?n.originalEvent:n,e,h;if(st!==t&&st!==i&&!si()){var o,r=f.touches,c=r?r[0]:f,u=gr(c);(wi=dt(),r&&(ct=r.length),ft.hold&&clearTimeout(ei),st=s,2==ct&&(0==gt?(ci(1,r[1]),gt=ni=fr(ht[0].start,ht[1].start)):(gr(r[1]),ni=fr(ht[0].end,ht[1].end),kt=gu(ht[0].end,ht[1].end)),wt=du(gt,ni),bt=Math.abs(gt-ni)),ct===ft.fingers||ft.fingers===a||!r||oi())?(vt=iu(u.start,u.end),yt=iu(u.last,u.end),uu(n,yt),at=nf(u.start,u.end),lt=tu(),bu(vt,at),o=pt(f,st),!ft.triggerOnTouchEnd||ft.triggerOnTouchLeave)&&(e=!0,ft.triggerOnTouchLeave&&(h=rf(this),e=uf(u.end,h)),!ft.triggerOnTouchEnd&&e?st=tr(s):ft.triggerOnTouchLeave&&!e&&(st=tr(t)),st!=i&&st!=t||pt(f,st)):(st=i,pt(f,st));o===!1&&(st=i,pt(f,st))}}function gi(n){var r=n.originalEvent?n.originalEvent:n,u=r.touches;if(u){if(u.length&&!si())return yu(r),!0;if(u.length&&si())return!0}return si()&&(ct=hr),wi=dt(),lt=tu(),rr()||!ir()?(st=i,pt(r,st)):ft.triggerOnTouchEnd||ft.triggerOnTouchEnd===!1&&st===s?(ft.preventDefaultEvents!==!1&&n.preventDefault(),st=t,pt(r,st)):!ft.triggerOnTouchEnd&&br()?(st=t,ri(r,st,w)):st===s&&(st=i,pt(r,st)),hi(!1),null}function ii(){ct=0;wi=0;sr=0;gt=0;ni=0;wt=1;dr();hi(!1)}function nr(n){var i=n.originalEvent?n.originalEvent:n;ft.triggerOnTouchLeave&&(st=tr(t),pt(i,st))}function cr(){ot.unbind(vi,ki);ot.unbind(yi,ii);ot.unbind(er,di);ot.unbind(or,gi);ui&&ot.unbind(ui,nr);hi(!1)}function tr(n){var r=n,f=lr(),u=ir(),e=rr();return!f||e?r=i:!u||n!=s||ft.triggerOnTouchEnd&&!ft.triggerOnTouchLeave?!u&&n==t&&ft.triggerOnTouchLeave&&(r=i):r=t,r}function pt(n,r){var u,f=n.touches;return(eu()||yr())&&(u=ri(n,r,g)),(fu()||oi())&&u!==!1&&(u=ri(n,r,nt)),au()&&u!==!1?u=ri(n,r,tt):vu()&&u!==!1?u=ri(n,r,it):lu()&&u!==!1&&(u=ri(n,r,w)),r===i&&ii(n),r===t&&(f?f.length||ii(n):ii(n)),u}function ri(o,s,h){var c;if(h==g){if(ot.trigger("swipeStatus",[s,vt||null,at||0,lt||0,ct,ht,yt]),ft.swipeStatus&&(c=ft.swipeStatus.call(ot,o,s,vt||null,at||0,lt||0,ct,ht,yt),c===!1))return!1;if(s==t&&vr()){if(clearTimeout(fi),clearTimeout(ei),ot.trigger("swipe",[vt,at,lt,ct,ht,yt]),ft.swipe&&(c=ft.swipe.call(ot,o,vt,at,lt,ct,ht,yt),c===!1))return!1;switch(vt){case r:ot.trigger("swipeLeft",[vt,at,lt,ct,ht,yt]);ft.swipeLeft&&(c=ft.swipeLeft.call(ot,o,vt,at,lt,ct,ht,yt));break;case u:ot.trigger("swipeRight",[vt,at,lt,ct,ht,yt]);ft.swipeRight&&(c=ft.swipeRight.call(ot,o,vt,at,lt,ct,ht,yt));break;case f:ot.trigger("swipeUp",[vt,at,lt,ct,ht,yt]);ft.swipeUp&&(c=ft.swipeUp.call(ot,o,vt,at,lt,ct,ht,yt));break;case e:ot.trigger("swipeDown",[vt,at,lt,ct,ht,yt]);ft.swipeDown&&(c=ft.swipeDown.call(ot,o,vt,at,lt,ct,ht,yt))}}}if(h==nt){if(ot.trigger("pinchStatus",[s,kt||null,bt||0,lt||0,ct,wt,ht]),ft.pinchStatus&&(c=ft.pinchStatus.call(ot,o,s,kt||null,bt||0,lt||0,ct,wt,ht),c===!1))return!1;if(s==t&&ar())switch(kt){case y:ot.trigger("pinchIn",[kt||null,bt||0,lt||0,ct,wt,ht]);ft.pinchIn&&(c=ft.pinchIn.call(ot,o,kt||null,bt||0,lt||0,ct,wt,ht));break;case p:ot.trigger("pinchOut",[kt||null,bt||0,lt||0,ct,wt,ht]);ft.pinchOut&&(c=ft.pinchOut.call(ot,o,kt||null,bt||0,lt||0,ct,wt,ht))}}return h==w?s!==i&&s!==t||(clearTimeout(fi),clearTimeout(ei),ur()&&!su()?(ti=dt(),fi=setTimeout(n.proxy(function(){ti=null;ot.trigger("tap",[o.target]);ft.tap&&(c=ft.tap.call(ot,o,o.target))},this),ft.doubleTapThreshold)):(ti=null,ot.trigger("tap",[o.target]),ft.tap&&(c=ft.tap.call(ot,o,o.target)))):h==tt?s!==i&&s!==t||(clearTimeout(fi),clearTimeout(ei),ti=null,ot.trigger("doubletap",[o.target]),ft.doubleTap&&(c=ft.doubleTap.call(ot,o,o.target))):h==it&&(s!==i&&s!==t||(clearTimeout(fi),ti=null,ot.trigger("longtap",[o.target]),ft.longTap&&(c=ft.longTap.call(ot,o,o.target)))),c}function ir(){var n=!0;return null!==ft.threshold&&(n=at>=ft.threshold),n}function rr(){var n=!1;return null!==ft.cancelThreshold&&null!==vt&&(n=nu(vt)-at>=ft.cancelThreshold),n}function ru(){return null!==ft.pinchThreshold?bt>=ft.pinchThreshold:!0}function lr(){return ft.maxTimeThreshold?!(lt>=ft.maxTimeThreshold):!0}function uu(n,t){if(ft.preventDefaultEvents!==!1)if(ft.allowPageScroll===o)n.preventDefault();else{var i=ft.allowPageScroll===d;switch(t){case r:(ft.swipeLeft&&i||!i&&ft.allowPageScroll!=b)&&n.preventDefault();break;case u:(ft.swipeRight&&i||!i&&ft.allowPageScroll!=b)&&n.preventDefault();break;case f:(ft.swipeUp&&i||!i&&ft.allowPageScroll!=k)&&n.preventDefault();break;case e:(ft.swipeDown&&i||!i&&ft.allowPageScroll!=k)&&n.preventDefault()}}}function ar(){var n=pr(),t=wr(),i=ru();return n&&t&&i}function oi(){return!!(ft.pinchStatus||ft.pinchIn||ft.pinchOut)}function fu(){return!(!ar()||!oi())}function vr(){var n=lr(),t=ir(),i=pr(),r=wr(),u=rr();return!u&&r&&i&&t&&n}function yr(){return!!(ft.swipe||ft.swipeStatus||ft.swipeLeft||ft.swipeRight||ft.swipeUp||ft.swipeDown)}function eu(){return!(!vr()||!yr())}function pr(){return ct===ft.fingers||ft.fingers===a||!l}function wr(){return 0!==ht[0].end.x}function br(){return!!ft.tap}function ur(){return!!ft.doubleTap}function ou(){return!!ft.longTap}function kr(){if(null==ti)return!1;var n=dt();return ur()&&n-ti<=ft.doubleTapThreshold}function su(){return kr()}function hu(){return(1===ct||!l)&&(isNaN(at)||at<ft.threshold)}function cu(){return lt>ft.longTapThreshold&&et>at}function lu(){return!(!hu()||!br())}function au(){return!(!kr()||!ur())}function vu(){return!(!cu()||!ou())}function yu(n){bi=dt();hr=n.touches.length+1}function dr(){bi=0;hr=0}function si(){var n=!1,t;return bi&&(t=dt()-bi,t<=ft.fingerReleaseThreshold&&(n=!0)),n}function pu(){return!(ot.data(c+"_intouch")!==!0)}function hi(n){ot&&(n===!0?(ot.bind(er,di),ot.bind(or,gi),ui&&ot.bind(ui,nr)):(ot.unbind(er,di,!1),ot.unbind(or,gi,!1),ui&&ot.unbind(ui,nr,!1)),ot.data(c+"_intouch",n===!0))}function ci(n,t){var i={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return i.start.x=i.last.x=i.end.x=t.pageX||t.clientX,i.start.y=i.last.y=i.end.y=t.pageY||t.clientY,ht[n]=i,i}function gr(n){var i=void 0!==n.identifier?n.identifier:0,t=wu(i);return null===t&&(t=ci(i,n)),t.last.x=t.end.x,t.last.y=t.end.y,t.end.x=n.pageX||n.clientX,t.end.y=n.pageY||n.clientY,t}function wu(n){return ht[n]||null}function bu(n,t){n!=o&&(t=Math.max(t,nu(n)),pi[n].distance=t)}function nu(n){if(pi[n])return pi[n].distance}function ku(){var n={};return n[r]=li(r),n[u]=li(u),n[f]=li(f),n[e]=li(e),n}function li(n){return{direction:n,distance:0}}function tu(){return wi-sr}function fr(n,t){var i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y);return Math.round(Math.sqrt(i*i+r*r))}function du(n,t){var i=t/n*1;return i.toFixed(2)}function gu(){return 1>wt?p:y}function nf(n,t){return Math.round(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)))}function tf(n,t){var r=n.x-t.x,u=t.y-n.y,f=Math.atan2(u,r),i=Math.round(180*f/Math.PI);return 0>i&&(i=360-Math.abs(i)),i}function iu(n,t){if(ff(n,t))return o;var i=tf(n,t);return 45>=i&&i>=0?r:360>=i&&i>=315?r:i>=135&&225>=i?u:i>45&&135>i?e:f}function dt(){var n=new Date;return n.getTime()}function rf(t){t=n(t);var i=t.offset();return{left:i.left,right:i.left+t.outerWidth(),top:i.top,bottom:i.top+t.outerHeight()}}function uf(n,t){return n.x>t.left&&n.x<t.right&&n.y>t.top&&n.y<t.bottom}function ff(n,t){return n.x==t.x&&n.y==t.y}var ft=n.extend({},ft),ai=l||h||!ft.fallbackToMouseEvents,vi=ai?h?v?"MSPointerDown":"pointerdown":"touchstart":"mousedown",er=ai?h?v?"MSPointerMove":"pointermove":"touchmove":"mousemove",or=ai?h?v?"MSPointerUp":"pointerup":"touchend":"mouseup",ui=ai?h?"mouseleave":null:"mouseleave",yi=h?v?"MSPointerCancel":"pointercancel":"touchcancel",at=0,vt=null,yt=null,lt=0,gt=0,ni=0,wt=1,bt=0,kt=0,pi=null,ot=n(ut),st="start",ct=0,ht={},sr=0,wi=0,bi=0,hr=0,ti=0,fi=null,ei=null;try{ot.bind(vi,ki);ot.bind(yi,ii)}catch(ef){n.error("events not supported "+vi+","+yi+" on jQuery.swipe")}this.enable=function(){return this.disable(),ot.bind(vi,ki),ot.bind(yi,ii),ot};this.disable=function(){return cr(),ot};this.destroy=function(){cr();ot.data(c,null);ot=null};this.option=function(t,i){if("object"==typeof t)ft=n.extend(ft,t);else if(void 0!==ft[t]){if(void 0===i)return ft[t];ft[t]=i}else{if(!t)return ft;n.error("Option "+t+" does not exist on jQuery.swipe.options")}return null}}var r="left",u="right",f="up",e="down",y="in",p="out",o="none",d="auto",g="swipe",nt="pinch",w="tap",tt="doubletap",it="longtap",b="horizontal",k="vertical",a="all",et=10,rt="start",s="move",t="end",i="cancel",l="ontouchstart"in window,v=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!l,h=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!l,c="TouchSwipe";n.fn.swipe=function(t){var r=n(this),i=r.data(c);if(i&&"string"==typeof t){if(i[t])return i[t].apply(i,Array.prototype.slice.call(arguments,1));n.error("Method "+t+" does not exist on jQuery.swipe")}else if(i&&"object"==typeof t)i.option.apply(i,arguments);else if(!(i||"object"!=typeof t&&t))return ut.apply(this,arguments);return r};n.fn.swipe.version="1.6.18";n.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0};n.fn.swipe.phases={PHASE_START:rt,PHASE_MOVE:s,PHASE_END:t,PHASE_CANCEL:i};n.fn.swipe.directions={LEFT:r,RIGHT:u,UP:f,DOWN:e,IN:y,OUT:p};n.fn.swipe.pageScroll={NONE:o,HORIZONTAL:b,VERTICAL:k,AUTO:d};n.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:a}}),function(n){typeof define=="function"&&define.amd?define(["jquery","moment"],n):typeof exports=="object"&&typeof module!="undefined"?module.exports=n(require("jquery"),require("moment")):n(jQuery,moment)}(function(n,t){n.dateRangePickerLanguages={"default":{selected:"Selected:",day:"Day",days:"Days",nights:"Nights",night:"Night",apply:"Close","week-1":"m","week-2":"t","week-3":"w","week-4":"t","week-5":"f","week-6":"s","week-7":"s","week-number":"W","month-name":["january","february","march","april","may","june","july","august","september","october","november","december"],shortcuts:"Shortcuts","custom-values":"Custom Values",past:"Past",following:"Following",previous:"Previous","prev-week":"Week","prev-month":"Month","prev-year":"Year",next:"Next","next-week":"Week","next-month":"Month","next-year":"Year","less-than":"","more-than":"","default-more":"Please select a date range","default-single":"Please select a date","default-less":"Please select a date range less than %d days","default-range":"Please select a date range between %d and %d days","default-default":"Please select a date range",time:"Time",hour:"Hour",minute:"Minute"},az:{selected:"SeÃ§ildi:",day:" gÃ¼n",days:" gÃ¼n",apply:"tÉtbiq","week-1":"1","week-2":"2","week-3":"3","week-4":"4","week-5":"5","week-6":"6","week-7":"7","month-name":["yanvar","fevral","mart","aprel","may","iyun","iyul","avqust","sentyabr","oktyabr","noyabr","dekabr"],shortcuts:"QÄ±sayollar",past:"KeÃ§miÅ",following:"NÃ¶vbÉti",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"ÃncÉki hÉftÉ","prev-month":"ÃncÉki ay","prev-year":"ÃncÉki il",next:"&nbsp;&nbsp;&nbsp;","next-week":"NÃ¶vbÉti hÉftÉ","next-month":"NÃ¶vbÉti ay","next-year":"NÃ¶vbÉti il","less-than":"Tarix aralÄ±ÄÄ± %d gÃ¼ndÉn Ã§ox olmamalÄ±dÄ±r","more-than":"Tarix aralÄ±ÄÄ± %d gÃ¼ndÉn az olmamalÄ±dÄ±r","default-more":"%d gÃ¼ndÉn Ã§ox bir tarix seÃ§in","default-single":"Tarix seÃ§in","default-less":"%d gÃ¼ndÉn az bir tarix seÃ§in","default-range":"%d vÉ %d gÃ¼n aralÄ±ÄÄ±nda tarixlÉr seÃ§in","default-default":"Tarix aralÄ±ÄÄ± seÃ§in"},cn:{selected:"å·²éæ©:",day:"å¤©",days:"å¤©",apply:"ç¡®å®","week-1":"ä¸","week-2":"äº","week-3":"ä¸","week-4":"å","week-5":"äº","week-6":"å­","week-7":"æ¥","week-number":"å¨","month-name":["ä¸æ","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ","åäºæ"],shortcuts:"å¿«æ·éæ©",past:"è¿å»",following:"å°æ¥",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"ä¸å¨","prev-month":"ä¸ä¸ªæ","prev-year":"å»å¹´",next:"&nbsp;&nbsp;&nbsp;","next-week":"ä¸å¨","next-month":"ä¸ä¸ªæ","next-year":"æå¹´","less-than":"æéæ¥æèå´ä¸è½å¤§äº%då¤©","more-than":"æéæ¥æèå´ä¸è½å°äº%då¤©","default-more":"è¯·éæ©å¤§äº%då¤©çæ¥æèå´","default-less":"è¯·éæ©å°äº%då¤©çæ¥æèå´","default-range":"è¯·éæ©%då¤©å°%då¤©çæ¥æèå´","default-single":"è¯·éæ©ä¸ä¸ªæ¥æ","default-default":"è¯·éæ©ä¸ä¸ªæ¥æèå´",time:"æ¶é´",hour:"å°æ¶",minute:"åé"},cz:{selected:"VybrÃ¡no:",day:"Den",days:"Dny",apply:"ZavÅÃ­t","week-1":"po","week-2":"Ãºt","week-3":"st","week-4":"Ät","week-5":"pÃ¡","week-6":"so","week-7":"ne","month-name":["leden","Ãºnor","bÅezen","duben","kvÄten","Äerven","Äervenec","srpen","zÃ¡ÅÃ­","ÅÃ­jen","listopad","prosinec"],shortcuts:"Zkratky",past:"po",following:"nÃ¡sledujÃ­cÃ­",previous:"pÅedchozÃ­","prev-week":"tÃ½den","prev-month":"mÄsÃ­c","prev-year":"rok",next:"dalÅ¡Ã­","next-week":"tÃ½den","next-month":"mÄsÃ­c","next-year":"rok","less-than":"Rozsah data by nemÄl bÃ½t vÄtÅ¡Ã­ neÅ¾ %d dnÅ¯","more-than":"Rozsah data by nemÄl bÃ½t menÅ¡Ã­ neÅ¾ %d dnÅ¯","default-more":"ProsÃ­m zvolte rozsah data vÄtÅ¡Ã­ neÅ¾ %d dnÅ¯","default-single":"ProsÃ­m zvolte datum","default-less":"ProsÃ­m zvolte rozsah data menÅ¡Ã­ neÅ¾ %d dnÅ¯","default-range":"ProsÃ­m zvolte rozsah data mezi %d a %d dny","default-default":"ProsÃ­m zvolte rozsah data"},de:{selected:"Auswahl:",day:"Tag",days:"Tage",apply:"SchlieÃen","week-1":"mo","week-2":"di","week-3":"mi","week-4":"do","week-5":"fr","week-6":"sa","week-7":"so","month-name":["januar","februar","mÃ¤rz","april","mai","juni","juli","august","september","oktober","november","dezember"],shortcuts:"Schnellwahl",past:"Vorherige",following:"Folgende",previous:"Vorherige","prev-week":"Woche","prev-month":"Monat","prev-year":"Jahr",next:"NÃ¤chste","next-week":"Woche","next-month":"Monat","next-year":"Jahr","less-than":"Datumsbereich darf nicht grÃ¶Ãer sein als %d Tage","more-than":"Datumsbereich darf nicht kleiner sein als %d Tage","default-more":"Bitte mindestens %d Tage auswÃ¤hlen","default-single":"Bitte ein Datum auswÃ¤hlen","default-less":"Bitte weniger als %d Tage auswÃ¤hlen","default-range":"Bitte einen Datumsbereich zwischen %d und %d Tagen auswÃ¤hlen","default-default":"Bitte ein Start- und Enddatum auswÃ¤hlen",Time:"Zeit",hour:"Stunde",minute:"Minute"},es:{selected:"Seleccionado:",day:"Dia",days:"Dias",apply:"Cerrar","week-1":"lu","week-2":"ma","week-3":"mi","week-4":"ju","week-5":"vi","week-6":"sa","week-7":"do","month-name":["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortcuts:"Accesos directos",past:"Pasado",following:"Siguiente",previous:"Anterior","prev-week":"Semana","prev-month":"Mes","prev-year":"AÃ±o",next:"Siguiente","next-week":"Semana","next-month":"Mes","next-year":"AÃ±o","less-than":"El rango no deberia ser mayor de %d dias","more-than":"El rango no deberia ser menor de %d dias","default-more":"Por favor selecciona un rango mayor a %d dias","default-single":"Por favor selecciona un dia","default-less":"Por favor selecciona un rango menor a %d dias","default-range":"Por favor selecciona un rango entre %d y %d dias","default-default":"Por favor selecciona un rango de fechas."},fr:{selected:"SÃ©lection:",day:"Jour",days:"Jours",apply:"Fermer","week-1":"lu","week-2":"ma","week-3":"me","week-4":"je","week-5":"ve","week-6":"sa","week-7":"di","month-name":["janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"],shortcuts:"Raccourcis",past:"PassÃ©",following:"Suivant",previous:"PrÃ©cÃ©dent","prev-week":"Semaine","prev-month":"Mois","prev-year":"AnnÃ©e",next:"Suivant","next-week":"Semaine","next-month":"Mois","next-year":"AnnÃ©e","less-than":"L'intervalle ne doit pas Ãªtre supÃ©rieure Ã  %d jours","more-than":"L'intervalle ne doit pas Ãªtre infÃ©rieure Ã  %d jours","default-more":"Merci de choisir une intervalle supÃ©rieure Ã  %d jours","default-single":"Merci de choisir une date","default-less":"Merci de choisir une intervalle infÃ©rieure %d jours","default-range":"Merci de choisir une intervalle comprise entre %d et %d jours","default-default":"Merci de choisir une date"},hu:{selected:"KivÃ¡lasztva:",day:"Nap",days:"Nap",apply:"Ok","week-1":"h","week-2":"k","week-3":"sz","week-4":"cs","week-5":"p","week-6":"sz","week-7":"v","month-name":["januÃ¡r","februÃ¡r","mÃ¡rcius","Ã¡prilis","mÃ¡jus","jÃºnius","jÃºlius","augusztus","szeptember","oktÃ³ber","november","december"],shortcuts:"GyorsvÃ¡lasztÃ³",past:"MÃºlt",following:"KÃ¶vetkezÅ",previous:"ElÅzÅ","prev-week":"HÃ©t","prev-month":"HÃ³nap","prev-year":"Ãv",next:"KÃ¶vetkezÅ","next-week":"HÃ©t","next-month":"HÃ³nap","next-year":"Ãv","less-than":"A kivÃ¡lasztÃ¡s nem lehet tÃ¶bb %d napnÃ¡l","more-than":"A kivÃ¡lasztÃ¡s nem lehet tÃ¶bb %d napnÃ¡l","default-more":"VÃ¡lassz ki egy idÅszakot ami hosszabb mint %d nap","default-single":"VÃ¡lassz egy napot","default-less":"VÃ¡lassz ki egy idÅszakot ami rÃ¶videbb mint %d nap","default-range":"VÃ¡lassz ki egy %d - %d nap hosszÃº idÅszakot","default-default":"VÃ¡lassz ki egy idÅszakot"},it:{selected:"Selezionati:",day:"Giorno",days:"Giorni",apply:"Chiudi","week-1":"lu","week-2":"ma","week-3":"me","week-4":"gi","week-5":"ve","week-6":"sa","week-7":"do","month-name":["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortcuts:"Scorciatoie",past:"Scorso",following:"Successivo",previous:"Precedente","prev-week":"Settimana","prev-month":"Mese","prev-year":"Anno",next:"Prossimo","next-week":"Settimana","next-month":"Mese","next-year":"Anno","less-than":"L'intervallo non dev'essere maggiore di %d giorni","more-than":"L'intervallo non dev'essere minore di %d giorni","default-more":"Seleziona un intervallo maggiore di %d giorni","default-single":"Seleziona una data","default-less":"Seleziona un intervallo minore di %d giorni","default-range":"Seleziona un intervallo compreso tra i %d e i %d giorni","default-default":"Seleziona un intervallo di date"},no:{selected:"Valgt:",day:"Dag",days:"Dager",apply:"Lukk","week-1":"ma","week-2":"ti","week-3":"on","week-4":"to","week-5":"fr","week-6":"lÃ¸","week-7":"sÃ¸","month-name":["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],shortcuts:"Snarveier","custom-values":"Egendefinerte Verdier",past:"Over",following:"FÃ¸lger",previous:"Forrige","prev-week":"Uke","prev-month":"MÃ¥ned","prev-year":"Ãr",next:"Neste","next-week":"Uke","next-month":"MÃ¥ned","next-year":"Ãr","less-than":"Datoperioden skal ikkje vÃ¦re lengre enn %d dager","more-than":"Datoperioden skal ikkje vÃ¦re kortere enn %d dager","default-more":"Vennligst velg ein datoperiode lengre enn %d dager","default-single":"Vennligst velg ein dato","default-less":"Vennligst velg ein datoperiode mindre enn %d dager","default-range":"Vennligst velg ein datoperiode mellom %d og %d dager","default-default":"Vennligst velg ein datoperiode",time:"Tid",hour:"Time",minute:"Minutter"},nl:{selected:"Geselecteerd:",day:"Dag",days:"Dagen",apply:"Ok","week-1":"ma","week-2":"di","week-3":"wo","week-4":"do","week-5":"vr","week-6":"za","week-7":"zo","month-name":["januari","februari","maart","april","mei","juni","juli","augustus","september","october","november","december"],shortcuts:"Snelkoppelingen","custom-values":"Aangepaste waarden",past:"Verleden",following:"Komend",previous:"Vorige","prev-week":"Week","prev-month":"Maand","prev-year":"Jaar",next:"Volgende","next-week":"Week","next-month":"Maand","next-year":"Jaar","less-than":"Interval moet langer dan %d dagen zijn","more-than":"Interval mag niet minder dan %d dagen zijn","default-more":"Selecteer een interval langer dan %dagen","default-single":"Selecteer een datum","default-less":"Selecteer een interval minder dan %d dagen","default-range":"Selecteer een interval tussen %d en %d dagen","default-default":"Selecteer een interval",time:"Tijd",hour:"Uur",minute:"Minuut"},ru:{selected:"ÐÑÐ±ÑÐ°Ð½Ð¾:",day:"ÐÐµÐ½Ñ",days:"ÐÐ½ÐµÐ¹",apply:"ÐÐ°ÐºÑÑÑÑ","week-1":"Ð¿Ð½","week-2":"Ð²Ñ","week-3":"ÑÑ","week-4":"ÑÑ","week-5":"Ð¿Ñ","week-6":"ÑÐ±","week-7":"Ð²Ñ","month-name":["ÑÐ½Ð²Ð°ÑÑ","ÑÐµÐ²ÑÐ°Ð»Ñ","Ð¼Ð°ÑÑ","Ð°Ð¿ÑÐµÐ»Ñ","Ð¼Ð°Ð¹","Ð¸ÑÐ½Ñ","Ð¸ÑÐ»Ñ","Ð°Ð²Ð³ÑÑÑ","ÑÐµÐ½ÑÑÐ±ÑÑ","Ð¾ÐºÑÑÐ±ÑÑ","Ð½Ð¾ÑÐ±ÑÑ","Ð´ÐµÐºÐ°Ð±ÑÑ"],shortcuts:"ÐÑÑÑÑÑÐ¹ Ð²ÑÐ±Ð¾Ñ",past:"ÐÑÐ¾ÑÐµÐ´ÑÐ¸Ðµ",following:"Ð¡Ð»ÐµÐ´ÑÑÑÐ¸Ðµ",previous:"&nbsp;&nbsp;&nbsp;","prev-week":"ÐÐµÐ´ÐµÐ»Ñ","prev-month":"ÐÐµÑÑÑ","prev-year":"ÐÐ¾Ð´",next:"&nbsp;&nbsp;&nbsp;","next-week":"ÐÐµÐ´ÐµÐ»Ñ","next-month":"ÐÐµÑÑÑ","next-year":"ÐÐ¾Ð´","less-than":"ÐÐ¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ Ð±ÑÑÑ Ð±Ð¾Ð»ÑÑÐµ %d Ð´Ð½ÐµÐ¹","more-than":"ÐÐ¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ Ð±ÑÑÑ Ð¼ÐµÐ½ÑÑÐµ %d Ð´Ð½ÐµÐ¹","default-more":"ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ° Ð²ÑÐ±ÐµÑÐ¸ÑÐµ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð±Ð¾Ð»ÑÑÐµ %d Ð´Ð½ÐµÐ¹","default-single":"ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ° Ð²ÑÐ±ÐµÑÐ¸ÑÐµ Ð´Ð°ÑÑ","default-less":"ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ° Ð²ÑÐ±ÐµÑÐ¸ÑÐµ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð¼ÐµÐ½ÑÑÐµ %d Ð´Ð½ÐµÐ¹","default-range":"ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ° Ð²ÑÐ±ÐµÑÐ¸ÑÐµ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð¼ÐµÐ¶Ð´Ñ %d Ð¸ %d Ð´Ð½ÑÐ¼Ð¸","default-default":"ÐÐ¾Ð¶Ð°Ð»ÑÐ¹ÑÑÐ° Ð²ÑÐ±ÐµÑÐ¸ÑÐµ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½"},pl:{selected:"Wybrany:",day:"DzieÅ",days:"Dni",apply:"Zamknij","week-1":"pon","week-2":"wt","week-3":"År","week-4":"czw","week-5":"pt","week-6":"so","week-7":"nd","month-name":["styczeÅ","luty","marzec","kwiecieÅ","maj","czerwiec","lipiec","sierpieÅ","wrzesieÅ","paÅºdziernik","listopad","grudzieÅ"],shortcuts:"SkrÃ³ty","custom-values":"Niestandardowe wartoÅci",past:"PrzeszÅe",following:"NastÄpne",previous:"Poprzednie","prev-week":"tydzieÅ","prev-month":"miesiÄc","prev-year":"rok",next:"NastÄpny","next-week":"tydzieÅ","next-month":"miesiÄc","next-year":"rok","less-than":"Okres nie powinien byÄ dÅuÅ¼szy niÅ¼ %d dni","more-than":"Okres nie powinien byÄ krÃ³tszy niÅ¼  %d ni","default-more":"Wybierz okres dÅuÅ¼szy niÅ¼ %d dni","default-single":"Wybierz datÄ","default-less":"Wybierz okres krÃ³tszy niÅ¼ %d dni","default-range":"Wybierz okres trwajÄcy od %d do %d dni","default-default":"Wybierz okres",time:"Czas",hour:"Godzina",minute:"Minuta"}};n.fn.dateRangePicker=function(i){function ni(t,i){return t.target==i||i!=undefined&&i.childNodes!=undefined&&n.inArray(t.target,i.childNodes)>=0}function ti(){function h(t){var u=n(t).parents("table").hasClass("month2"),r=u?i.month2:i.month1;(r=c(r),!i.singleMonth&&!i.singleDate&&!u&&s(r,i.month2)>=0||et(r))||(f(r,u?"month2":"month1"),k())}function d(){var t=c(i.month1),n=c(i.month2);et(n)||!i.singleDate&&s(t,n)>=0||(f(t,"month1"),f(n,"month2"),v())}function nt(t){var u=n(t).parents("table").hasClass("month2"),r=u?i.month2:i.month1;(r=a(r),u&&s(r,i.month1)<=0||et(r))||(f(r,u?"month2":"month1"),k())}function it(){var n=a(i.month1),t=a(i.month2);et(n)||!i.singleDate&&s(t,n)<=0||(f(t,"month2"),f(n,"month1"),v())}function ut(){var t=document.getElementsByClassName("month-wrapper"),r;t.length&&(r=t[0].outerHTML,n(t).remove(),setTimeout(function(){n(".drp_top-bar").after(r);n(t).find(".next").click(function(){i.stickyMonths?d(this):h(this)});n(t).find(".prev").click(function(){i.stickyMonths?it(this):nt(this)})},1e3))}var rt=this,e,o;if(n(this).data("date-picker-opened")){y();return}n(this).data("date-picker-opened",!0);r=li().hide();r.append('<div class="date-range-length-tip"><\/div>');r.delegate(".day","mouseleave",function(){r.find(".date-range-length-tip").hide()});n(i.container).append(r);i.inline?r.addClass("inline-wrapper"):tt();i.alwaysOpen&&r.find(".apply-btn").hide();e=i.defaultTime?i.defaultTime:new Date;i.lookBehind?(i.startDate&&s(e,i.startDate)<0&&(e=c(t(i.startDate).toDate())),i.endDate&&s(e,i.endDate)>0&&(e=t(i.endDate).toDate()),f(a(e),"month1"),f(e,"month2")):(i.startDate&&s(e,i.startDate)<0&&(e=t(i.startDate).toDate()),i.endDate&&s(c(e),i.endDate)>0&&(e=a(t(i.endDate).toDate())),f(e,"month1"),f(c(e),"month2"));i.singleDate&&(i.startDate&&s(e,i.startDate)<0&&(e=t(i.startDate).toDate()),i.endDate&&s(e,i.endDate)>0&&(e=t(i.endDate).toDate()),f(e,"month1"));i.time.enabled&&(i.startDate&&i.endDate||i.start&&i.end?(ft(t(i.start||i.startDate).toDate(),"time1"),ft(t(i.end||i.endDate).toDate(),"time2")):(ft(e,"time1"),ft(e,"time2")));o="";o=i.singleDate?u("default-single"):i.minDays&&i.maxDays?u("default-range"):i.minDays?u("default-more"):i.maxDays?u("default-less"):u("default-default");r.find(".default-top").html(o.replace(/\%d/,i.minDays).replace(/\%d/,i.maxDays));i.singleMonth?r.addClass("single-month"):r.addClass("two-months");setTimeout(function(){yt();p=!0},0);r.click(function(n){n.stopPropagation()});n(document).bind("click.datepicker",function(n){ni(n,rt[0])||r.is(":visible")&&y()});r.find(".next").click(function(){i.stickyMonths?d(this):h(this)});r.find(".prev").click(function(){i.stickyMonths?it(this):nt(this)});n(".month-wrapper").swipe({swipe:function(n,t){t=="left"&&(i.stickyMonths?d(this):h(this));t=="right"&&(i.stickyMonths?it(this):nt(this))}});r.delegate(".day","click",function(){fi(n(this))});r.delegate(".day","mouseenter",function(){bt(n(this))});r.delegate(".week-number","click",function(){ei(n(this))});r.attr("unselectable","on").css("user-select","none").bind("selectstart",function(n){return n.preventDefault(),!1});r.find(".apply-btn").click(function(){y();var t=l(new Date(i.start))+i.separator+l(new Date(i.end));n(rt).trigger("datepicker-apply",{value:t,date1:new Date(i.start),date2:new Date(i.end)})});r.find("[custom]").click(function(){var t=n(this).attr("custom");i.start=!1;i.end=!1;r.find(".day.checked").removeClass("checked");i.setValue.call(g,t);w();b(!0);v();i.autoClose&&y()});r.find("[shortcut]").click(function(){var u=n(this).attr("shortcut"),t=new Date,r=!1,h,v,e,y,s,l,o;if(u.indexOf("day")!=-1)h=parseInt(u.split(",",2)[1],10),r=new Date((new Date).getTime()+864e5*h),t=new Date(t.getTime()+864e5*(h>0?1:-1));else if(u.indexOf("week")!=-1){for(e=u.indexOf("prev,")!=-1?-1:1,v=e==1?i.startOfWeek=="monday"?1:0:i.startOfWeek=="monday"?0:6,t=new Date(t.getTime()-864e5);t.getDay()!=v;)t=new Date(t.getTime()+e*864e5);r=new Date(t.getTime()+e*5184e5)}else if(u.indexOf("month")!=-1)e=u.indexOf("prev,")!=-1?-1:1,r=e==1?c(t):a(t),r.setDate(1),t=c(r),t.setDate(1),t=new Date(t.getTime()-864e5);else if(u.indexOf("year")!=-1)e=u.indexOf("prev,")!=-1?-1:1,r=new Date,r.setFullYear(t.getFullYear()+e),r.setMonth(0),r.setDate(1),t.setFullYear(t.getFullYear()+e),t.setMonth(11),t.setDate(31);else if(u=="custom"&&(y=n(this).html(),i.customShortcuts&&i.customShortcuts.length>0))for(s=0;s<i.customShortcuts.length;s++)if(l=i.customShortcuts[s],l.name==y){o=[];o=l.dates.call();o&&o.length==2&&(r=o[0],t=o[1]);o&&o.length==1&&(movetodate=o[0],f(movetodate,"month1"),f(c(movetodate),"month2"),k());break}r&&t&&(at(r,t),w())});r.find(".time1 input[type=range]").bind("change mousemove",function(t){var i=t.target,r=i.name=="hour"?n(i).val().replace(/^(\d{1})$/,"0$1"):undefined,u=i.name=="minute"?n(i).val().replace(/^(\d{1})$/,"0$1"):undefined;ct("time1",r,u)});r.find(".time2 input[type=range]").bind("change mousemove",function(t){var i=t.target,r=i.name=="hour"?n(i).val().replace(/^(\d{1})$/,"0$1"):undefined,u=i.name=="minute"?n(i).val().replace(/^(\d{1})$/,"0$1"):undefined;ct("time2",r,u)});window.matchMedia("(orientation: landscape)").matches&&window.matchMedia("(max-width: 640px)").matches&&ut();window.addEventListener("orientationchange",function(){window.matchMedia("(max-width: 640px)").matches&&ut()})}function tt(){var t,u;i.inline||(t=n(e).offset(),n(i.container).css("position")=="relative"?(u=n(i.container).offset(),r.css({top:t.top-u.top+n(e).outerHeight()+4,left:t.left-u.left})):t.left<460?r.css({top:t.top+n(e).outerHeight()+parseInt(n("body").css("border-top")||0,10),left:t.left}):r.css({top:t.top+n(e).outerHeight()+parseInt(n("body").css("border-top")||0,10),left:t.left+n(e).width()-r.width()-16}))}function ii(){return r}function ot(t,u){tt();st();i.selectEndDateFirstRegardless=u||!1;i.selectEndDateFirstRegardless&&i.start&&r.addClass("date-partially-selected");r.fadeIn(i.duration,function(){n(e).trigger("datepicker-opened",{relatedTarget:r})});n(e).trigger("datepicker-open",{relatedTarget:r});k();yt()}function st(){var u=i.getValue.call(g),n=u?u.split(i.separator):"",r;n&&(n.length==1&&i.singleDate||n.length>=2)&&(r=i.format,r.match(/Do/)&&(r=r.replace(/Do/,"D"),n[0]=n[0].replace(/(\d+)(th|nd|st)/,"$1"),n.length>=2&&(n[1]=n[1].replace(/(\d+)(th|nd|st)/,"$1"))),p=!1,n.length>=2?at(t(n[0],r,t.locale(i.language)).toDate(),t(n[1],r,t.locale(i.language)).toDate()):n.length==1&&i.singleDate&&si(t(n[0],r,t.locale(i.language)).toDate()),p=!0)}function yt(){var n=r.find(".gap").css("margin-left");n&&(n=parseInt(n));var t=r.find(".month1").width(),i=r.find(".gap").width()+(n?n*2:0),u=r.find(".month2").width();r.find(".month-wrapper").width(t+i+u)}function d(n,i){r.find("."+n+" input[type=range].hour-range").val(t(i).hours());r.find("."+n+" input[type=range].minute-range").val(t(i).minutes());ct(n,t(i).format("HH"),t(i).format("mm"))}function ht(n,r){i[n]=parseInt(t(parseInt(r)).startOf("day").add(t(i[n+"Time"]).format("HH"),"h").add(t(i[n+"Time"]).format("mm"),"m").valueOf())}function ri(){d("time1",i.start);d("time2",i.end)}function ct(n,u,f){function e(n,t){var r=t.format("HH"),e=t.format("mm");i[n]=t.startOf("day").add(u||r,"h").add(f||e,"m").valueOf()}u&&r.find("."+n+" .hour-val").text(u);f&&r.find("."+n+" .minute-val").text(f);switch(n){case"time1":i.start&&e("start",t(i.start));e("startTime",t(i.startTime||t().valueOf()));break;case"time2":i.end&&e("end",t(i.end));e("endTime",t(i.endTime||t().valueOf()))}w();b();v()}function ui(){i.start=!1;i.end=!1;r.find(".day.checked").removeClass("checked");r.find(".day.last-date-selected").removeClass("last-date-selected");r.find(".day.first-date-selected").removeClass("first-date-selected");r.find(".day.valid.tmp.date-available-checkout").removeClass("tmp valid").addClass("invalid");i.setValue.call(g,"");rt(i.startDate);w();b();v()}function lt(n){var u=n,e;return i.batchMode==="week-range"?u=i.startOfWeek==="monday"?t(parseInt(n)).startOf("isoweek").valueOf():t(parseInt(n)).startOf("week").valueOf():i.batchMode==="month-range"&&(u=t(parseInt(n)).startOf("month").valueOf()),i.moveToNextMonthOnLastDay&&(e=new Date(parseInt(u)),s(e.addDays(1),e)>0&&f(e.addDays(1),"month1")),r.addClass("date-partially-selected"),u}function pt(u){var f=u;return(i.batchMode==="week-range"?f=i.startOfWeek==="monday"?t(parseInt(u)).endOf("isoweek").valueOf():t(parseInt(u)).endOf("week").valueOf():i.batchMode==="month"&&(f=t(parseInt(u)).endOf("month").valueOf()),r.find(".day.valid.tmp.date-available-checkout").removeClass("tmp valid").addClass("invalid"),i.selectBackward&&i.selectBackwardNewStart&&i.start>f)?(n('[time="'+i.start+'"].day.toMonth').removeClass("invalid").addClass("valid date-available"),i.start=f,i.end=!1,lt(parseInt(f)),null):(r.removeClass("date-partially-selected"),i.selectEndDateFirstRegardless=!1,f)}function fi(r){var u,f;r.hasClass("invalid")||(u=r.attr("time"),r.addClass("checked"),i.singleDate?(i.start=u,i.end=!1):i.batchMode==="week"?i.startOfWeek==="monday"?(i.start=t(parseInt(u)).startOf("isoweek").valueOf(),i.end=t(parseInt(u)).endOf("isoweek").valueOf()):(i.end=t(parseInt(u)).endOf("week").valueOf(),i.start=t(parseInt(u)).startOf("week").valueOf()):i.batchMode==="workweek"?(i.start=t(parseInt(u)).day(1).valueOf(),i.end=t(parseInt(u)).day(5).valueOf()):i.batchMode==="weekend"?(i.start=t(parseInt(u)).day(6).valueOf(),i.end=t(parseInt(u)).day(7).valueOf()):i.batchMode==="month"?(i.start=t(parseInt(u)).startOf("month").valueOf(),i.end=t(parseInt(u)).endOf("month").valueOf()):(!i.start||!i.end||i.selectEndDateFirstRegardless)&&(i.start||i.end)?i.start&&(i.end=pt(u),i.time.enabled&&ht("end",i.end)):(i.start=lt(u),i.end=!1),i.time.enabled&&(i.start&&ht("start",i.start),i.end&&ht("end",i.end)),!i.singleDate&&i.start&&i.end&&i.start>i.end&&(f=i.end,i.end=pt(i.start),i.start=lt(f),i.time.enabled&&i.swapTime&&ri()),i.start=parseInt(i.start),i.end=parseInt(i.end),oi(),i.start&&!i.end&&(n(e).trigger("datepicker-first-date-selected",{date1:new Date(i.start)}),bt(r)),rt(u),w(),b(),v(),ut())}function ei(n){var u=parseInt(n.attr("data-start-time"),10),f,e;i.startWeek?(r.find(".week-number-selected").removeClass("week-number-selected"),f=new Date(u<i.startWeek?u:i.startWeek),e=new Date(u<i.startWeek?i.startWeek:u),i.startWeek=!1,i.start=t(f).day(i.startOfWeek=="monday"?1:0).toDate(),i.end=t(e).day(i.startOfWeek=="monday"?7:6).toDate()):(i.startWeek=u,n.addClass("week-number-selected"),f=new Date(u),i.start=t(f).day(i.startOfWeek=="monday"?1:0).toDate(),i.end=t(f).day(i.startOfWeek=="monday"?7:6).toDate());rt();w();b();v();ut()}function wt(n){var r,t,u,f,e;if((n=parseInt(n,10),i.startDate&&o(n,i.startDate)<0)||i.endDate&&o(n,i.endDate)>0)return!1;if(i.start&&!i.end&&!i.singleDate){if(i.maxDays>0&&h(n,i.start)>i.maxDays||i.minDays>0&&h(n,i.start)<i.minDays||i.selectForward&&n<i.start||i.selectBackward&&n>i.start)return!1;if(i.beforeShowDay&&typeof i.beforeShowDay=="function"){for(r=!0,t=n;h(t,i.start)>1;){if(u=i.beforeShowDay(new Date(t),i.start),u[4]){r=u[4]===!0;break}if(f=!1,e=!1,t>i.start&&(f=!0,t-=864e5),t<i.start&&(e=!0,t+=864e5),f&&e)break}return r}}return!0}function it(n){var r,t,e,u,f;if((n=parseInt(n,10),i.startDate&&o(n,i.startDate)<0)||i.endDate&&o(n,i.endDate)>0)return!1;if(i.start&&!i.end&&!i.singleDate){if(i.maxDays>0&&h(n,i.start)>i.maxDays||i.minDays>0&&h(n,i.start)<i.minDays||!(i.selectForward&&i.selectBackward)&&(i.selectForward&&n<i.start||i.selectBackward&&n>i.start))return!1;if(i.beforeShowDay&&typeof i.beforeShowDay=="function"){for(r=!0,t=n;h(t,i.start)>1;){if(e=i.beforeShowDay(new Date(t),i.start),!e[0]){r=!1;break}if(u=!1,f=!1,t>i.start&&(u=!0,t-=864e5),t<i.start&&(f=!0,t+=864e5),u&&f)break}if(!r)return!1}}return!0}function rt(){return r.find(".day.invalid.tmp").removeClass("tmp invalid").addClass("valid"),r.find(".day.valid.tmp.date-available-checkout").removeClass("tmp valid").addClass("invalid"),i.start&&!i.end&&r.find(".day.toMonth.valid,.day.toMonth.date-available-checkout").each(function(){var t=parseInt(n(this).attr("time"),10),r=t-864e5;it(t)?n(this).addClass("valid tmp").removeClass("invalid"):t>i.start&&(it(r)||t<=i.start+864e5)?n(this).addClass("valid tmp").removeClass("invalid"):n(this).addClass("invalid tmp").removeClass("valid")}),!0}function bt(t){var f=parseInt(t.attr("time")),e="",o;if(t.hasClass("has-tooltip")&&t.attr("data-tooltip")?e='<span style="white-space:nowrap">'+t.attr("data-tooltip")+"<\/span>":t.hasClass("invalid")||(i.singleDate?(r.find(".day.hovering").removeClass("hovering"),t.addClass("hovering")):(r.find(".day").each(function(){var t=parseInt(n(this).attr("time")),r=i.start,u=i.end;t==f?n(this).addClass("hovering"):n(this).removeClass("hovering");i.start&&!i.end&&(i.start<t&&f>=t||i.start>t&&f<=t)?n(this).addClass("hovering"):n(this).removeClass("hovering")}),i.start&&!i.end&&(o=h(f,i.start),i.hoveringTooltip&&(typeof i.hoveringTooltip=="function"?e=i.hoveringTooltip(o,i.start,f):i.hoveringTooltip===!0&&o>1&&(e=o+" "+u("days")))))),e){var l=t.offset(),a=r.offset(),s=l.left-a.left,v=l.top-a.top;s+=t.width()/2;var c=r.find(".date-range-length-tip"),y=c.css({visibility:"hidden",display:"none"}).html(e).width(),p=c.height();s-=y/2;v-=p;setTimeout(function(){c.css({left:s,top:v,display:"block",visibility:"visible"})},10)}else r.find(".date-range-length-tip").hide()}function oi(){r.find(".day.hovering").removeClass("hovering");r.find(".date-range-length-tip").hide()}function ut(){i.singleDate===!0?p&&i.start&&i.autoClose&&y():p&&i.start&&i.end&&i.autoClose&&y()}function w(){var n=Math.ceil((i.end-i.start)/864e5)+1;i.singleDate?i.start&&!i.end?r.find(".drp_top-bar").removeClass("error").addClass("normal"):r.find(".drp_top-bar").removeClass("error").removeClass("normal"):i.maxDays&&n>i.maxDays?(i.start=!1,i.end=!1,r.find(".day").removeClass("checked"),r.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(u("less-than").replace("%d",i.maxDays))):i.minDays&&n<i.minDays?(i.start=!1,i.end=!1,r.find(".day").removeClass("checked"),r.find(".drp_top-bar").removeClass("normal").addClass("error").find(".error-top").html(u("more-than").replace("%d",i.minDays))):i.start||i.end?r.find(".drp_top-bar").removeClass("error").addClass("normal"):r.find(".drp_top-bar").removeClass("error").removeClass("normal");i.singleDate&&i.start&&!i.end||!i.singleDate&&i.start&&i.end?r.find(".apply-btn").removeClass("disabled"):r.find(".apply-btn").addClass("disabled");i.batchMode&&(i.start&&i.startDate&&o(i.start,i.startDate)<0||i.end&&i.endDate&&o(i.end,i.endDate)>0)&&(i.start=!1,i.end=!1,r.find(".day").removeClass("checked"))}function b(t,f){var o;r.find(".start-day").html("...");r.find(".end-day").html("...");r.find(".selected-days").hide();i.start&&r.find(".start-day").html(l(new Date(parseInt(i.start))));i.end&&r.find(".end-day").html(l(new Date(parseInt(i.end))));i.start&&i.singleDate?(r.find(".apply-btn").removeClass("disabled"),o=l(new Date(i.start)),i.setValue.call(g,o,l(new Date(i.start)),l(new Date(i.end))),p&&n(e).trigger("datepicker-change",{value:o,date1:new Date(i.start)})):i.start&&i.end?(r.find(".selected-days").show().find(".selected-days-num").html(h(i.end,i.start)),i.updateExternalDataElements?(n(".selected-nights-num").html(h(i.end,i.start)-1),h(i.end,i.start)-1>1?n(".selected-nights-text").html(u("nights").toLowerCase()):n(".selected-nights-text").html(u("night").toLowerCase())):(r.find(".selected-days").show().find(".selected-nights-num").html(h(i.end,i.start)-1),h(i.end,i.start)-1>1?r.find(".selected-days").show().find(".selected-nights-text").html(u("nights").toLowerCase()):r.find(".selected-days").show().find(".selected-nights-text").html(u("night").toLowerCase())),r.find(".apply-btn").removeClass("disabled"),o=l(new Date(i.start))+i.separator+l(new Date(i.end)),i.setValue.call(g,o,l(new Date(i.start)),l(new Date(i.end))),r.find(".day.valid.date-available-checkout").addClass("invalid").removeClass("valid"),p&&!f&&n(e).trigger("datepicker-change",{value:o,date1:new Date(i.start),date2:new Date(i.end)})):t?r.find(".apply-btn").removeClass("disabled"):r.find(".apply-btn").addClass("disabled")}function h(n,t){return Math.abs(gt(n)-gt(t))+1}function at(n,t,r){var e,u;if(n.getTime()>t.getTime()&&(e=t,t=n,n=e,e=null),u=!0,i.startDate&&o(n,i.startDate)<0&&(u=!1),i.endDate&&o(t,i.endDate)>0&&(u=!1),!u){f(i.startDate,"month1");f(c(i.startDate),"month2");k();return}i.start=n.getTime();i.end=t.getTime();i.time.enabled&&(d("time1",n),d("time2",t));(i.stickyMonths||o(n,t)>0&&s(n,t)==0)&&(i.lookBehind?n=a(t):t=c(n));i.stickyMonths&&s(t,i.endDate)>0&&(n=a(n),t=a(t));i.stickyMonths||s(n,t)==0&&(i.lookBehind?n=a(t):t=c(n));f(n,"month1");f(t,"month2");k();w();b(!1,r);ut()}function si(n){var t=!0;if(i.startDate&&o(n,i.startDate)<0&&(t=!1),i.endDate&&o(n,i.endDate)>0&&(t=!1),!t){f(i.startDate,"month1");return}i.start=n.getTime();i.time.enabled&&d("time1",n);f(n,"month1");k();b();ut()}function v(){(i.start||i.end)&&(r.find(".day").each(function(){var r=parseInt(n(this).attr("time")),u=i.start,f=i.end;i.time.enabled&&(r=t(r).startOf("day").valueOf(),u=t(u||t().valueOf()).startOf("day").valueOf(),f=t(f||t().valueOf()).startOf("day").valueOf());i.start&&i.end&&f>=r&&u<=r||i.start&&!i.end&&t(u).format("YYYY-MM-DD")==t(r).format("YYYY-MM-DD")?n(this).addClass("checked"):n(this).removeClass("checked");i.start&&t(u).format("YYYY-MM-DD")==t(r).format("YYYY-MM-DD")?n(this).addClass("first-date-selected"):n(this).removeClass("first-date-selected");i.end&&t(f).format("YYYY-MM-DD")==t(r).format("YYYY-MM-DD")?n(this).addClass("last-date-selected"):n(this).removeClass("last-date-selected")}),r.find(".week-number").each(function(){n(this).attr("data-start-time")==i.startWeek&&n(this).addClass("week-number-selected")}))}function f(u,f){u=t(u).toDate();n(e).trigger("datepicker-month-change",{month:i[f],number:f});var o=hi(u.getMonth());r.find("."+f+" .month-name").html(o+" "+u.getFullYear());r.find("."+f+" tbody").html(wi(u));i[f]=u;rt()}function ft(n,t){r.find("."+t).append(ci());d(t,n)}function hi(n){return u("month-name")[n]}function l(n){return t(n).format(i.format)}function k(){var u,f;v();var e=parseInt(t(i.month1).format("YYYYMM")),o=parseInt(t(i.month2).format("YYYYMM")),n=Math.abs(e-o),s=n>1&&n!=89;s?r.addClass("has-gap").removeClass("no-gap").find(".gap").css("visibility","visible"):r.removeClass("has-gap").addClass("no-gap").find(".gap").css("visibility","hidden");u=r.find("table.month1").height();f=r.find("table.month2").height();r.find(".gap").height(Math.max(u,f)+10)}function y(){if(!i.alwaysOpen&&(n(r).fadeOut(i.duration,function(){n(e).data("date-picker-opened",!1);n(e).trigger("datepicker-closed",{relatedTarget:r})}),n(e).trigger("datepicker-close",{relatedTarget:r}),isMobile&&/(android)/i.test(navigator.userAgent))){var t=document.querySelector('meta[name="viewport"]');t.content="initial-scale=1";t.content="width=640";n("body, html").css("zoom",1)}}function s(n,i){var r=parseInt(t(n).format("YYYYMM"))-parseInt(t(i).format("YYYYMM"));return r>0?1:r==0?0:-1}function o(n,i){var r=parseInt(t(n).format("YYYYMMDD"))-parseInt(t(i).format("YYYYMMDD"));return r>0?1:r==0?0:-1}function c(n){return t(n).add(1,"months").toDate()}function a(n){return t(n).add(-1,"months").toDate()}function ci(){return"<div>\t\t\t\t\t\t<span>"+u("Time")+': <span class="hour-val">00<\/span>:<span class="minute-val">00<\/span><\/span>\t\t\t\t\t<\/div>\t\t\t\t\t<div class="hour">\t\t\t\t\t\t<label>'+u("Hour")+': <input type="range" class="hour-range" name="hour" min="0" max="23"><\/label>\t\t\t\t\t<\/div>\t\t\t\t\t<div class="minute">\t\t\t\t\t\t<label>'+u("Minute")+': <input type="range" class="minute-range" name="minute" min="0" max="59"><\/label>\t\t\t\t\t<\/div>'}function li(){var t='<div class="date-picker-wrapper',o,f,e,h,r,s;if(i.extraClass&&(t+=" "+i.extraClass+" "),i.singleDate&&(t+=" single-date "),i.showShortcuts||(t+=" no-shortcuts "),i.showTopbar||(t+=" no-topbar "),i.customTopBar&&(t+=" custom-topbar "),t+='"><div>',i.showTopbar&&(t+='<div class="drp_top-bar">',i.customTopBar?(typeof i.customTopBar=="function"&&(i.customTopBar=i.customTopBar()),t+='<div class="custom-top">'+i.customTopBar+"<\/div>"):(t+='<div class="normal-top">\t\t\t\t\t\t\t<span style="color:#333">'+u("selected")+' <\/span> <b class="start-day">...<\/b>',i.singleDate||(t+=' <span class="separator-day">'+i.separator+'<\/span> <b class="end-day">...<\/b> <i class="selected-days">(<span class="selected-days-num">3<\/span> '+u("days")+")<\/i>"),t+="<\/div>",t+='<div class="error-top">error<\/div>\t\t\t\t\t\t<div class="default-top">default<\/div>'),t+='<input type="button" class="apply-btn disabled'+ai()+'" value="'+u("apply")+'" />',t+="<\/div>"),o=i.showWeekNumbers?6:5,t+='<div class="month-wrapper"><table class="month1" cellspacing="0" border="0" cellpadding="0"><thead><tr class="caption"><th style="width:27px;"><span class="prev">&lt;<\/span><\/th><th colspan="'+o+'" class="month-name"><\/th><th style="width:27px;">'+(i.singleDate||!i.stickyMonths?'<span class="next">&gt;<\/span>':"")+'<\/th><\/tr><tr class="week-name">'+kt()+"<\/thead><tbody><\/tbody><\/table>",yi()&&(t+='<div class="gap">'+vi()+'<\/div><table class="month2" cellspacing="0" border="0" cellpadding="0"><thead><tr class="caption"><th style="width:27px;">'+(i.stickyMonths?"":'<span class="prev">&lt;<\/span>')+'<\/th><th colspan="'+o+'" class="month-name"><\/th><th style="width:27px;"><span class="next">&gt;<\/span><\/th><\/tr><tr class="week-name">'+kt()+"<\/thead><tbody><\/tbody><\/table>"),t+='<div style="clear:both;height:0;font-size:0;"><\/div><div class="time"><div class="time1"><\/div>',i.singleDate||(t+='<div class="time2"><\/div>'),t+='<\/div><div style="clear:both;height:0;font-size:0;"><\/div><\/div>',t+='<div class="footer">',i.showShortcuts){if(t+='<div class="shortcuts"><b>'+u("shortcuts")+"<\/b>",f=i.shortcuts,f){if(f["prev-days"]&&f["prev-days"].length>0){for(t+='&nbsp;<span class="prev-days">'+u("past"),r=0;r<f["prev-days"].length;r++)e=f["prev-days"][r],e+=f["prev-days"][r]>1?u("days"):u("day"),t+=' <a href="javascript:;" shortcut="day,-'+f["prev-days"][r]+'">'+e+"<\/a>";t+="<\/span>"}if(f["next-days"]&&f["next-days"].length>0){for(t+='&nbsp;<span class="next-days">'+u("following"),r=0;r<f["next-days"].length;r++)e=f["next-days"][r],e+=f["next-days"][r]>1?u("days"):u("day"),t+=' <a href="javascript:;" shortcut="day,'+f["next-days"][r]+'">'+e+"<\/a>";t+="<\/span>"}if(f.prev&&f.prev.length>0){for(t+='&nbsp;<span class="prev-buttons">'+u("previous"),r=0;r<f.prev.length;r++)e=u("prev-"+f.prev[r]),t+=' <a href="javascript:;" shortcut="prev,'+f.prev[r]+'">'+e+"<\/a>";t+="<\/span>"}if(f.next&&f.next.length>0){for(t+='&nbsp;<span class="next-buttons">'+u("next"),r=0;r<f.next.length;r++)e=u("next-"+f.next[r]),t+=' <a href="javascript:;" shortcut="next,'+f.next[r]+'">'+e+"<\/a>";t+="<\/span>"}}if(i.customShortcuts)for(r=0;r<i.customShortcuts.length;r++)h=i.customShortcuts[r],t+='&nbsp;<span class="custom-shortcut"><a href="javascript:;" shortcut="custom">'+h.name+"<\/a><\/span>";t+="<\/div><\/div>"}if(i.showCustomValues&&(t+='<div class="customValues"><b>'+(i.customValueLabel||u("custom-values"))+"<\/b>",i.customValues))for(r=0;r<i.customValues.length;r++)s=i.customValues[r],t+='&nbsp;<span class="custom-value"><a href="javascript:;" custom="'+s.value+'">'+s.name+"<\/a><\/span>";return t+="<\/div><\/div>",n(t)}function ai(){var n="";return i.autoClose===!0&&(n+=" hide"),i.applyBtnClass!==""&&(n+=" "+i.applyBtnClass),n}function kt(){var n=i.showWeekNumbers?"<th>"+u("week-number")+"<\/th>":"";return i.startOfWeek=="monday"?n+"<th>"+u("week-1")+"<\/th>\t\t\t\t\t<th>"+u("week-2")+"<\/th>\t\t\t\t\t<th>"+u("week-3")+"<\/th>\t\t\t\t\t<th>"+u("week-4")+"<\/th>\t\t\t\t\t<th>"+u("week-5")+"<\/th>\t\t\t\t\t<th>"+u("week-6")+"<\/th>\t\t\t\t\t<th>"+u("week-7")+"<\/th>":n+"<th>"+u("week-7")+"<\/th>\t\t\t\t\t<th>"+u("week-1")+"<\/th>\t\t\t\t\t<th>"+u("week-2")+"<\/th>\t\t\t\t\t<th>"+u("week-3")+"<\/th>\t\t\t\t\t<th>"+u("week-4")+"<\/th>\t\t\t\t\t<th>"+u("week-5")+"<\/th>\t\t\t\t\t<th>"+u("week-6")+"<\/th>"}function et(n){var n=t(n);return i.startDate&&n.endOf("month").isBefore(i.startDate)?!0:i.endDate&&n.startOf("month").isAfter(i.endDate)?!0:!1}function vi(){for(var n=['<div class="gap-top-mask"><\/div><div class="gap-bottom-mask"><\/div><div class="gap-lines">'],t=0;t<20;t++)n.push('<div class="gap-line">\t\t\t\t\t<div class="gap-1"><\/div>\t\t\t\t\t<div class="gap-2"><\/div>\t\t\t\t\t<div class="gap-3"><\/div>\t\t\t\t<\/div>');return n.push("<\/div>"),n.join("")}function yi(){return!i.singleDate&&!i.singleMonth}function dt(n,t,i){var r=jQuery.extend(!0,{},n),f,u;jQuery.each(t,function(n,t){var f=t(i);for(var u in f)r.hasOwnProperty(u)?r[u]+=f[u]:r[u]=f[u]});f="";for(u in r)r.hasOwnProperty(u)&&(f+=u+'="'+r[u]+'" ');return f}function gt(n){return Math.floor(pi(n)/864e5)}function pi(n){return t.isMoment(n)&&(n=n.toDate().getTime()),typeof n=="object"&&n.getTime&&(n=n.getTime()),typeof n!="string"||n.match(/\d{13}/)||(n=t(n,i.format).toDate().getTime()),parseInt(n,10)-new Date(n).getTimezoneOffset()*6e4}function wi(n){var c=[],y,f,s,h,u,a,p;n.setDate(1);var d=new Date(n.getTime()-864e5),w=new Date,l=n.getDay();if(l==0&&i.startOfWeek=="monday"&&(l=7),l>0)for(f=l;f>0;f--){var u=new Date(n.getTime()-864e5*f),e=it(u.getTime()),v=wt(u.getTime());i.startDate&&o(u,i.startDate)<0&&(e=!1);i.endDate&&o(u,i.endDate)>0&&(e=!1);c.push({date:u,type:"lastMonth",day:u.getDate(),time:u.getTime(),valid:e,validCheckout:v})}for(y=n.getMonth(),f=0;f<40;f++){var r=t(n).add(f,"days").toDate(),e=it(r.getTime()),v=wt(r.getTime());i.startDate&&o(r,i.startDate)<0&&(e=!1);i.endDate&&o(r,i.endDate)>0&&(e=!1);c.push({date:r,type:r.getMonth()==y?"toMonth":"nextMonth",day:r.getDate(),time:r.getTime(),valid:e,validCheckout:v})}for(s=[],h=0;h<6;h++){if(c[h*7].type=="nextMonth")break;for(s.push("<tr>"),u=0;u<7;u++){var b=i.startOfWeek=="monday"?u+1:u,r=c[h*7+b],k=t(r.time).format("L")==t(w).format("L");r.extraClass="";r.tooltip="";(r.valid||r.validCheckout)&&i.beforeShowDay&&typeof i.beforeShowDay=="function"&&(a=i.beforeShowDay(t(r.time).toDate()),r.valid=a[0],r.extraClass=a[1]||"",r.tooltip=a[2]||"",r.tooltip!=""&&(r.extraClass+=" has-tooltip "));p={time:r.time,"data-tooltip":r.tooltip,"class":"day "+r.type+" "+r.extraClass+" "+(r.valid?"valid":"invalid")+" "+(k?"real-today":"")};u==0&&i.showWeekNumbers&&s.push('<td><div class="week-number" data-start-time="'+r.time+'">'+i.getWeekNumber(r.date)+"<\/div><\/td>");s.push("<td "+dt({},i.dayTdAttrs,r)+"><div "+dt(p,i.dayDivAttrs,r)+">"+bi(r.time,r.day)+"<\/div><\/td>")}s.push("<\/tr>")}return s.join("")}function bi(n,t){return i.showDateFilter&&typeof i.showDateFilter=="function"?i.showDateFilter(n,t):t}function ki(){var t,r;if(i.language=="auto"){if(t=navigator.language?navigator.language:navigator.browserLanguage,!t)return n.dateRangePickerLanguages["default"];t=t.toLowerCase();for(r in n.dateRangePickerLanguages)if(t.indexOf(r)!=-1)return n.dateRangePickerLanguages[r];return n.dateRangePickerLanguages["default"]}return i.language&&i.language in n.dateRangePickerLanguages?n.dateRangePickerLanguages[i.language]:n.dateRangePickerLanguages["default"]}function u(t){var i=t.toLowerCase(),u=t in nt?nt[t]:i in nt?nt[i]:null,r=n.dateRangePickerLanguages["default"];return u==null&&(u=t in r?r[t]:i in r?r[i]:""),u}i||(i={});i=n.extend(!0,{autoClose:!1,format:"YYYY-MM-DD",separator:" to ",language:"auto",startOfWeek:"sunday",getValue:function(){return n(this).val()},setValue:function(t){n(this).attr("readonly")||n(this).is(":disabled")||t==n(this).val()||n(this).val(t)},startDate:!1,endDate:!1,time:{enabled:!1},minDays:0,maxDays:0,showShortcuts:!1,shortcuts:{},customShortcuts:[],inline:!1,container:"body",alwaysOpen:!1,singleDate:!1,lookBehind:!1,batchMode:!1,duration:200,stickyMonths:!1,dayDivAttrs:[],dayTdAttrs:[],selectForward:!1,selectBackward:!1,selectBackwardNewStart:!1,selectEndDateFirstRegardless:!1,moveToNextMonthOnLastDay:!1,applyBtnClass:"",singleMonth:"auto",hoveringTooltip:function(n){return n>1?n+" "+u("days"):""},showTopbar:!0,swapTime:!1,showWeekNumbers:!1,getWeekNumber:function(n){return t(n).format("w")},getLang:function(n){return u(n)},updateExternalDataElements:!1},i);i.start=!1;i.end=!1;i.startWeek=!1;i.isTouchDevice="ontouchstart"in window||navigator.msMaxTouchPoints;i.isTouchDevice&&(i.hoveringTooltip=!1);i.singleMonth=="auto"&&(i.singleMonth=n(window).width()<480);i.singleMonth&&(i.stickyMonths=!1);i.singleDate&&(i.singleMonth=!0);i.showTopbar||(i.autoClose=!0);i.startDate&&typeof i.startDate=="string"&&(i.startDate=t(i.startDate,i.format).toDate());i.endDate&&typeof i.endDate=="string"&&(i.endDate=t(i.endDate,i.format).toDate());var nt=ki(),r,p=!1,e=this,g=n(e).get(0),vt;return n(this).unbind(".datepicker").bind("click.datepicker",function(){var n=r.is(":visible");n||ot(i.duration)}).bind("change.datepicker",function(){st()}).bind("keyup.datepicker",function(){try{clearTimeout(vt)}catch(n){}vt=setTimeout(function(){st()},2e3)}),ti.call(this),i.alwaysOpen&&ot(0),n(this).data("dateRangePicker",{setDateRange:function(n,r,u){typeof n=="string"&&typeof r=="string"&&(n=t(n,i.format).toDate(),r=t(r,i.format).toDate());at(n,r,u)},setEndDate:function(n){i.end=n},clear:ui,close:y,open:ot,getDatePicker:ii,showMonth:f,destroy:function(){n(e).unbind(".datepicker");n(e).data("dateRangePicker","");n(e).data("date-picker-opened",null);r.remove();n(window).unbind("resize.datepicker",tt);n(document).unbind("click.datepicker",y)}}),n(window).bind("resize.datepicker",tt),this}});
(function(){"use strict";Array.prototype.filter||(Array.prototype.filter=function(n){var i,f,r,e,t,u;if(this===void 0||this===null)throw new TypeError;if(i=Object(this),f=i.length>>>0,typeof n!="function")throw new TypeError;for(r=[],e=arguments.length>=2?arguments[1]:void 0,t=0;t<f;t++)t in i&&(u=i[t],n.call(e,u,t,i)&&r.push(u));return r});Array.prototype.map||(Array.prototype.map=function(n,t){var e,u,i,r,f,o,s;if(this==null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(e=t),u=new Array(f),i=0;i<f;)i in r&&(o=r[i],s=n.call(e,o,i,r),u[i]=s),i++;return u});Array.prototype.reduce||(Array.prototype.reduce=function(n){if(this==null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof n!="function")throw new TypeError(n+" is not a function");var i=Object(this),u=i.length>>>0,t=0,r;if(arguments.length==2)r=arguments[1];else{while(t<u&&!t in i)t++;if(t>=u)throw new TypeError("Reduce of empty array with no initial value");r=i[t++]}for(;t<u;t++)t in i&&(r=n(r,i[t],t,i));return r});Array.prototype.flat||(Array.prototype.flat=function(n){n===undefined&&(n=1);var t=function(n,i){return i<1?n.slice():n.reduce(function(n,r){return n.concat(Array.isArray(r)?t(r,i-1):r)},[])};return t(this,n)})})();
/* jQuery Storage API Plugin 1.7.2 https://github.com/julien-maurel/jQuery-Storage-API */
!function(e){function t(t){var r,i,n,o=arguments.length,s=window[t],a=arguments,u=a[1];if(2>o)throw Error("Minimum 2 arguments must be given");if(e.isArray(u)){i={};for(var f in u){r=u[f];try{i[r]=JSON.parse(s.getItem(r))}catch(c){i[r]=s.getItem(r)}}return i}if(2!=o){try{i=JSON.parse(s.getItem(u))}catch(c){throw new ReferenceError(u+" is not defined in this storage")}for(var f=2;o-1>f;f++)if(i=i[a[f]],void 0===i)throw new ReferenceError([].slice.call(a,1,f+1).join(".")+" is not defined in this storage");if(e.isArray(a[f])){n=i,i={};for(var m in a[f])i[a[f][m]]=n[a[f][m]];return i}return i[a[f]]}try{return JSON.parse(s.getItem(u))}catch(c){return s.getItem(u)}}function r(t){var r,i,n=arguments.length,o=window[t],s=arguments,a=s[1],u=s[2],f={};if(2>n||!e.isPlainObject(a)&&3>n)throw Error("Minimum 3 arguments must be given or second parameter must be an object");if(e.isPlainObject(a)){for(var c in a)r=a[c],e.isPlainObject(r)?o.setItem(c,JSON.stringify(r)):o.setItem(c,r);return a}if(3==n)return"object"==typeof u?o.setItem(a,JSON.stringify(u)):o.setItem(a,u),u;try{i=o.getItem(a),null!=i&&(f=JSON.parse(i))}catch(m){}i=f;for(var c=2;n-2>c;c++)r=s[c],i[r]&&e.isPlainObject(i[r])||(i[r]={}),i=i[r];return i[s[c]]=s[c+1],o.setItem(a,JSON.stringify(f)),f}function i(t){var r,i,n=arguments.length,o=window[t],s=arguments,a=s[1];if(2>n)throw Error("Minimum 2 arguments must be given");if(e.isArray(a)){for(var u in a)o.removeItem(a[u]);return!0}if(2==n)return o.removeItem(a),!0;try{r=i=JSON.parse(o.getItem(a))}catch(f){throw new ReferenceError(a+" is not defined in this storage")}for(var u=2;n-1>u;u++)if(i=i[s[u]],void 0===i)throw new ReferenceError([].slice.call(s,1,u).join(".")+" is not defined in this storage");if(e.isArray(s[u]))for(var c in s[u])delete i[s[u][c]];else delete i[s[u]];return o.setItem(a,JSON.stringify(r)),!0}function n(t,r){var n=a(t);for(var o in n)i(t,n[o]);if(r)for(var o in e.namespaceStorages)u(o)}function o(r){var i=arguments.length,n=arguments,s=(window[r],n[1]);if(1==i)return 0==a(r).length;if(e.isArray(s)){for(var u=0;u<s.length;u++)if(!o(r,s[u]))return!1;return!0}try{var f=t.apply(this,arguments);e.isArray(n[i-1])||(f={totest:f});for(var u in f)if(!(e.isPlainObject(f[u])&&e.isEmptyObject(f[u])||e.isArray(f[u])&&!f[u].length)&&f[u])return!1;return!0}catch(c){return!0}}function s(r){var i=arguments.length,n=arguments,o=(window[r],n[1]);if(2>i)throw Error("Minimum 2 arguments must be given");if(e.isArray(o)){for(var a=0;a<o.length;a++)if(!s(r,o[a]))return!1;return!0}try{var u=t.apply(this,arguments);e.isArray(n[i-1])||(u={totest:u});for(var a in u)if(void 0===u[a]||null===u[a])return!1;return!0}catch(f){return!1}}function a(r){var i=arguments.length,n=window[r],o=arguments,s=(o[1],[]),a={};if(a=i>1?t.apply(this,o):n,a._cookie)for(var u in e.cookie())""!=u&&s.push(u.replace(a._prefix,""));else for(var f in a)s.push(f);return s}function u(t){if(!t||"string"!=typeof t)throw Error("First parameter must be a string");g?(window.localStorage.getItem(t)||window.localStorage.setItem(t,"{}"),window.sessionStorage.getItem(t)||window.sessionStorage.setItem(t,"{}")):(window.localCookieStorage.getItem(t)||window.localCookieStorage.setItem(t,"{}"),window.sessionCookieStorage.getItem(t)||window.sessionCookieStorage.setItem(t,"{}"));var r={localStorage:e.extend({},e.localStorage,{_ns:t}),sessionStorage:e.extend({},e.sessionStorage,{_ns:t})};return e.cookie&&(window.cookieStorage.getItem(t)||window.cookieStorage.setItem(t,"{}"),r.cookieStorage=e.extend({},e.cookieStorage,{_ns:t})),e.namespaceStorages[t]=r,r}function f(e){if(!window[e])return!1;var t="jsapi";try{return window[e].setItem(t,t),window[e].removeItem(t),!0}catch(r){return!1}}var c="ls_",m="ss_",g=f("localStorage"),h={_type:"",_ns:"",_callMethod:function(e,t){var r=[this._type],t=Array.prototype.slice.call(t),i=t[0];return this._ns&&r.push(this._ns),"string"==typeof i&&-1!==i.indexOf(".")&&(t.shift(),[].unshift.apply(t,i.split("."))),[].push.apply(r,t),e.apply(this,r)},get:function(){return this._callMethod(t,arguments)},set:function(){var t=arguments.length,i=arguments,n=i[0];if(1>t||!e.isPlainObject(n)&&2>t)throw Error("Minimum 2 arguments must be given or first parameter must be an object");if(e.isPlainObject(n)&&this._ns){for(var o in n)r(this._type,this._ns,o,n[o]);return n}var s=this._callMethod(r,i);return this._ns?s[n.split(".")[0]]:s},remove:function(){if(arguments.length<1)throw Error("Minimum 1 argument must be given");return this._callMethod(i,arguments)},removeAll:function(e){return this._ns?(r(this._type,this._ns,{}),!0):n(this._type,e)},isEmpty:function(){return this._callMethod(o,arguments)},isSet:function(){if(arguments.length<1)throw Error("Minimum 1 argument must be given");return this._callMethod(s,arguments)},keys:function(){return this._callMethod(a,arguments)}};if(e.cookie){window.name||(window.name=Math.floor(1e8*Math.random()));var l={_cookie:!0,_prefix:"",_expires:null,_path:null,_domain:null,setItem:function(t,r){e.cookie(this._prefix+t,r,{expires:this._expires,path:this._path,domain:this._domain})},getItem:function(t){return e.cookie(this._prefix+t)},removeItem:function(t){return e.removeCookie(this._prefix+t)},clear:function(){for(var t in e.cookie())""!=t&&(!this._prefix&&-1===t.indexOf(c)&&-1===t.indexOf(m)||this._prefix&&0===t.indexOf(this._prefix))&&e.removeCookie(t)},setExpires:function(e){return this._expires=e,this},setPath:function(e){return this._path=e,this},setDomain:function(e){return this._domain=e,this},setConf:function(e){return e.path&&(this._path=e.path),e.domain&&(this._domain=e.domain),e.expires&&(this._expires=e.expires),this},setDefaultConf:function(){this._path=this._domain=this._expires=null}};g||(window.localCookieStorage=e.extend({},l,{_prefix:c,_expires:3650}),window.sessionCookieStorage=e.extend({},l,{_prefix:m+window.name+"_"})),window.cookieStorage=e.extend({},l),e.cookieStorage=e.extend({},h,{_type:"cookieStorage",setExpires:function(e){return window.cookieStorage.setExpires(e),this},setPath:function(e){return window.cookieStorage.setPath(e),this},setDomain:function(e){return window.cookieStorage.setDomain(e),this},setConf:function(e){return window.cookieStorage.setConf(e),this},setDefaultConf:function(){return window.cookieStorage.setDefaultConf(),this}})}e.initNamespaceStorage=function(e){return u(e)},g?(e.localStorage=e.extend({},h,{_type:"localStorage"}),e.sessionStorage=e.extend({},h,{_type:"sessionStorage"})):(e.localStorage=e.extend({},h,{_type:"localCookieStorage"}),e.sessionStorage=e.extend({},h,{_type:"sessionCookieStorage"})),e.namespaceStorages={},e.removeAllStorages=function(t){e.localStorage.removeAll(t),e.sessionStorage.removeAll(t),e.cookieStorage&&e.cookieStorage.removeAll(t),t||(e.namespaceStorages={})}}(jQuery);
(BestWestern.StorageManager===undefined||BestWestern.StorageManager===null)&&(BestWestern.StorageManager=function(){var u=$.initNamespaceStorage("bestwestern"),n=$.localStorage,t=$.cookieStorage,i=$.sessionStorage,r=30;return t.setExpires(r),t.setPath("/"),{Put:function(t,i){n.set("bw."+t,i)},Get:function(t){return t==="promocode"&&this.GetSession(t)!==null?this.GetSession(t):n.isSet("bw."+t)?n.get("bw."+t):n.get(t)},Delete:function(t){n.isSet("bw."+t)&&n.remove("bw."+t);n.isSet(t)&&n.remove(t)},DeleteCookie:function(n){t.remove(n)},GetCookie:function(n){return t.get(n)},PutCookie:function(n,i,u){if(u!==undefined&&u!==null&&u!==r){var f=t.setExpires(u).set(n,i);return t.setExpires(r),f}return t.set(n,i)},PutSession:function(n,t){i.set("bw."+n,t)},GetSession:function(t){return i.isSet("bw."+t)?i.get("bw."+t):n.get(t)},DeleteSession:function(n){i.isSet("bw."+n)&&i.remove("bw."+n);i.isSet(n)&&i.remove(n)}}}()),function(){if(window.promocode!==undefined&&window.promocode!==null){var n=window.promocode.split(":"),t=n[n.length-1];n[0]=="ss"?(BestWestern.StorageManager.Delete("promocode"),BestWestern.StorageManager.PutSession("promocode",t)):(BestWestern.StorageManager.DeleteSession("promocode"),BestWestern.StorageManager.Put("promocode",t));BestWestern.StorageManager.Delete("oi");BestWestern.StorageManager.Delete("ot")}}();
var GoalTracking=function(){function n(){}return n.TryTrackConvertGoal=function(n){console.log("[goal-tracking] - tracking goal",n);try{window._conv_q=window._conv_q||[];_conv_q.push(["triggerConversion",n])}catch(t){console.error("[goal-tracking] - triggerConversion failed",n,t,t.stack)}},n.TrackPDPBookNowClickedGoal=function(){this.TryTrackConvertGoal("100414891")},n.TrackCheckoutPageLoadedGoal=function(){this.TryTrackConvertGoal("100414893")},n.TrackCheckoutBookNowClickedGoal=function(){this.TryTrackConvertGoal("100414892")},n.TrackFoodOptionsModalLoadedGoal=function(){this.TryTrackConvertGoal("100414895")},n.TrackCheckoutFoodOptionAddedGoal=function(){this.TryTrackConvertGoal("100414896")},n.TrackPDPFoodOptionAddedGoal=function(){this.TryTrackConvertGoal("100430405")},n.TrackFoodOptionsModalCompletedGoal=function(){this.TryTrackConvertGoal("100414899")},n.TrackProductOptionsModalLoadedGoal=function(){this.TryTrackConvertGoal("100414900")},n.TrackProductAddedGoal=function(){this.TryTrackConvertGoal("100414901")},n.TrackLegacyProductInBasketAndContinuedGoal=function(){this.TryTrackConvertGoal("100413790")},n.TrackProductOptionsModalCompletedGoal=function(){this.TryTrackConvertGoal("100414903")},n.TrackViewRoomFacilitiesInfoGoal=function(){this.TryTrackConvertGoal("100414904")},n.TrackBreakfastSelectedPdpThenPurchase=function(){this.TryTrackConvertGoal("100469995")},n.TrackRewardsSelectedPdpThenPurchase=function(){this.TryTrackConvertGoal("100469993")},n.TrackRewardsNotSelectedPdpThenPurchase=function(){this.TryTrackConvertGoal("100469994")},n}();
(function(){"use strict";function t(n){return n.split("").reverse().join("")}function i(n,t){return n.substring(0,t.length)===t}function o(n,t){return n.slice(-1*t.length)===t}function r(n,t,i){if((n[t]||n[i])&&n[t]===n[i])throw new Error(t);}function f(n){return typeof n=="number"&&isFinite(n)}function s(n,t){var i=Math.pow(10,t);return(Math.round(n*i)/i).toFixed(t)}function h(n,i,r,u,e,o,h,c,l,a,v,y){var g=y,b,k,w,d="",p="";return(o&&(y=o(y)),!f(y))?!1:(n!==!1&&parseFloat(y.toFixed(n))===0&&(y=0),y<0&&(b=!0,y=Math.abs(y)),n!==!1&&(y=s(y,n)),y=y.toString(),y.indexOf(".")!==-1?(k=y.split("."),w=k[0],r&&(d=r+k[1])):w=y,i&&(w=t(w).match(/.{1,3}/g),w=t(w.join(t(i)))),b&&c&&(p+=c),u&&(p+=u),b&&l&&(p+=l),p+=w,p+=d,e&&(p+=e),a&&(p=a(p,g)),p)}function c(n,t,r,u,e,s,h,c,l,a,v,y){var b=y,w,p="";return(v&&(y=v(y)),!y||typeof y!="string")?!1:(c&&i(y,c)&&(y=y.replace(c,""),w=!0),u&&i(y,u)&&(y=y.replace(u,"")),l&&i(y,l)&&(y=y.replace(l,""),w=!0),e&&o(y,e)&&(y=y.slice(0,-1*e.length)),t&&(y=y.split(t).join("")),r&&(y=y.replace(r,".")),w&&(p+="-"),p+=y,p=p.replace(/[^0-9\.\-.]/g,""),p==="")?!1:(p=Number(p),h&&(p=h(p)),!f(p))?!1:p}function l(t){for(var i,f,u={},e=0;e<n.length;e+=1)if(i=n[e],f=t[i],f===undefined)u[i]=i!=="negative"||u.negativeBefore?i==="mark"&&u.thousand!=="."?".":!1:"-";else if(i==="decimals")if(f>=0&&f<8)u[i]=f;else throw new Error(i);else if(i==="encoder"||i==="decoder"||i==="edit"||i==="undo")if(typeof f=="function")u[i]=f;else throw new Error(i);else if(typeof f=="string")u[i]=f;else throw new Error(i);return r(u,"mark","thousand"),r(u,"prefix","negative"),r(u,"prefix","negativeBefore"),u}function e(t,i,r){for(var f=[],u=0;u<n.length;u+=1)f.push(t[n[u]]);return f.push(r),i.apply("",f)}function u(n){if(!(this instanceof u))return new u(n);typeof n=="object"&&(n=l(n),this.to=function(t){return e(n,h,t)},this.from=function(t){return e(n,c,t)})}var n=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=u})();
function isLoading(n){try{var t=$(n);t.width(t.width()).addClass("is_loading disabled")}catch(i){}}function showAlternativeImages(){return/showAlternativeImages=/.test(document.location.search)}function setCookie(n,t,i){"use strict";var r=new Date,u;r.setDate(r.getDate()+i);u=escape(t)+(i==null?"":"; expires="+r.toUTCString())+"; path=/";document.cookie=n+"="+u}function getCookieValue(n){"use strict";var i="; "+document.cookie,t=i.split("; "+n+"=");if(t.length==2)return t.pop().split(";").shift()}function redirectPost(n,t){"use strict";var i="";$.each(t,function(n,t){i+='<input type="hidden" name="'+n+'" value="'+t+'">'});$('<form action="'+n+'" method="POST">'+i+"<\/form>").appendTo($(document.body)).submit()}function showRoomsAlert(n,t,i){var u=typeof String.format=="undefined"?StringFormat:String.format,t,r;t==""&&(t='<p>To book 4 or more rooms please contact our Specialist Group Advisors who will be able to assist you.<\/p><p><strong>For less than 6 rooms:<\/strong><br>Call 0800 393 130<br><\/p><p><strong>For 6 rooms or more:<\/strong><br>Call 0844 387 6400*<br>Email <a href="mailto:groups@bestwestern.co.uk">groups@bestwestern.co.uk<\/a><\/p><p><strong>For corporate stays:<\/strong><br>Agents call 0844 387 6410*<br>Direct call 0844 387 6240*<\/p><p>Child rates are available upon request.<br><i>*Calls cost 7ppm plus your company&apos;s access charge<\/i><\/p>');r=u('<div class="bw_overlay over-4-people-msg"><div class="fancy-upper"><div class=""><h2>{0}<\/h2><\/div><div class="">{1}<\/div><div class=""><div class="align-center"><div class="button-container"><a class="button right_15 close_btn" style="width: 142px;" href="javascript:;">{2}<\/a><span class="button button-shadow"><\/span><\/div><\/div><\/div><\/div><\/div>',n,t,i);this.showAlert(r,600,null,null,!1,i,null,null)}function showAlert(n,t,i,r,u,f,e,o){var s=typeof String.format=="undefined"?StringFormat:String.format;setTimeout(function(){$.fancybox({content:n,autoSize:!1,width:t,height:"auto",maxWidth:i?i:undefined,maxHeight:r?r:undefined,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},beforeShow:function(){$(".fancybox-outer").append(s('<a title="{0}" class="fancybox-item fancybox-close" href="javascript:void(0);"><\/a>',f));$(".fancybox-close,.close_btn").on("click",function(){$.fancybox.close()});e&&e()},afterShow:o,helpers:u===!1?{overlay:{locked:!1}}:undefined})},1500)}var RecaptchaCallback,InitRecaptchas,urlParams;typeof BestWestern=="undefined"&&(BestWestern={});BestWestern.isElementInViewport=function(n){typeof jQuery=="function"&&n instanceof jQuery&&(n=n[0]);var t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},function(){"use strict";var n=[];window._loadAlreadyOccured=!1;BestWestern.AddWindowLoad=function(t,i){window._loadAlreadyOccured||n.push({f:t,p:i})};$(document).ready(function(){var i,t;if(!window._loadAlreadyOccured)for(window._loadAlreadyOccured=!0,i=n.sort(function(n,t){return t.p-n.p}),t=0;t<i.length;t++)i[t].f()})}(),function(){"use strict";BestWestern.StyleSelects=function(n){n=n===undefined&&isNaN(n)?0:n;setTimeout(function(){$().customSelect!==undefined&&$("select:not(.hasCustomSelect)").customSelect()},n)}}(),function(){"use strict";jQuery.fn.center=function(n){return this.each(function(){var t=jQuery(this);t.css({position:n?"absolute":"fixed",left:"50%",top:"50%"}).css({marginLeft:"-"+t.outerWidth()/2+"px",marginTop:"-"+t.outerHeight()/2+"px"});n&&t.css({marginTop:parseInt(t.css("marginTop"),10)+jQuery(window).scrollTop(),marginLeft:parseInt(t.css("marginLeft"),10)+jQuery(window).scrollLeft()})})}}(),function(){"use strict";return BestWestern.NamespaceExists=function(n){var t=n.split(".");return t.reduce(function(n,t){return typeof n=="undefined"?n:n[t]},window)},BestWestern.GetControl=function(n){for(var i=Sys.Application.getComponents(),t=0;t<i.length;t++)if(i[t]instanceof n)return i[t]},null}(),function(){"use strict";$('a[href*="#"]:not([href="#"]):not(#hd_info_tabs_bar a):not(#trip-advisor-link)').click(function(n){var i=0,t;return $(n.target).attr("href")==="#hd_booknow"&&(i=100),location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname&&(t=$(this.hash),t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)?($("html,body").animate({scrollTop:t.offset().top-i},{duration:600,complete:function(){}}),!1):void 0})}(),function(){"use strict";Date.prototype.removeOffset=function(){return new Date(this.getTime()+this.getTimezoneOffset()*6e4)};Date.Today=function(){var n=new Date;return new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0))};Date.Tomorrow=function(){var n=new Date((new Date).getTime()+864e5);return new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0))};Date.DayAfterTomorrow=function(){var n=new Date((new Date).getTime()+1728e5);return new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0))};Date.FirstOfMonth=function(){var n=new Date;return new Date(Date.UTC(n.getFullYear(),n.getMonth(),1))};Date.prototype.addMonth=function(n){var t=new Date(this.getFullYear(),this.getMonth(),this.getDay());return t.setMonth(t.getMonth()+n),t};Date.prototype.addDays=function(n){var i=this.getTimezoneOffset(),t=new Date(this.getTime()+n*864e5),r=t.getTimezoneOffset();return i>=0&&r<0?t.removeOffset():i<0&&r>=0?new Date(t.getTime()+Math.abs(this.getTimezoneOffset())*6e4):t}}(),function(){"use strict";String.prototype.toDateObject=function(){var t=this,n;return(this.length>10&&(t=t.substring(0,10)),n=t.split("-"),n.length!==3)?null:new Date(n[0],parseInt(n[1],10)-1,n[2],0,0,0)};String.prototype.hashCode=function(){var n=0,t,i;if(this.length===0)return n;for(t=0;t<this.length;t++)i=this.charCodeAt(t),n=(n<<5)-n+i|0;return n}}(),function(){"use strict";Array.prototype.contains=function(n){return this.indexOf(n.toUpperCase())>=0};Array.prototype.containsIndex=function(n){return this.indexOf(n.toUpperCase())};Array.prototype.reduceToCount=function(){return this.reduce(function(n,t){return typeof n[t]=="undefined"?n[t]=1:n[t]+=1,n},{})};Array.prototype.intersect=function(n){for(var t=0,i=0,r=[];t<this.length&&i<n.length;)this[t]<n[i]?t++:this[t]>n[i]?i++:(r.push(this[t]),t++,i++);return r};Array.prototype.reduce2||(Array.prototype.reduce2=function(n){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof n!="function")throw new TypeError(n+" is not a function");var i=Object(this),u=i.length>>>0,t=0,r;if(arguments.length==2)r=arguments[1];else{while(t<u&&!(t in i))t++;if(t>=u)throw new TypeError("Reduce of empty array with no initial value");r=i[t++]}for(;t<u;t++)t in i&&(r=n(r,i[t],t,i));return r});Array.prototype.flat||(Array.prototype.flat=function(n){n===undefined&&(n=1);var t=function(n,i){return i<1?n.slice():n.reduce(function(n,r){return n.concat(Array.isArray(r)?t(r,i-1):r)},[])};return t(this,n)})}(),function(){"use strict";BestWestern.Events=function(){this.events={}};BestWestern.Event=function(n){this.name=n;this.callbacks=[]};BestWestern.Event.prototype.registerCallback=function(n){this.callbacks.push(n)};BestWestern.Events.prototype.registerEvent=function(n){var t=new BestWestern.Event(n);this.events[n]=t};BestWestern.Events.prototype.dispatchEvent=function(n,t){this.events[n].callbacks.forEach(function(n){n(t)})};BestWestern.Events.prototype.addEventListener=function(n,t){this.events[n]==undefined&&this.registerEvent(n);this.events[n].registerCallback(t)};BestWestern.EventHandler=new BestWestern.Events;BestWestern.EventHandler.registerEvent("LoginSuccess");BestWestern.EventHandler.registerEvent("AnonCheckout")}(),function(){"use strict";BestWestern.ResetClaims=function(n){(n===null||n===undefined)&&(n="/");$.ajax({url:"/Sitefinity/Authenticate/SWT",type:"GET",success:function(t){$.ajax({url:"/?"+t,type:"GET",success:function(){window.location=n}})}})};BestWestern.Authenticate=function(n,t,i,r,u,f,e,o){f=f||0;$.ajax({url:"/bwrewards/authenticate",type:"POST",data:{wrap_password:t,wrap_name:n,sf_domain:i,sf_persistent:!0,response:e?grecaptcha.getResponse(f):null,deflate:!0},success:function(n){if(n==null){u!==undefined&&u();return}$.ajax({url:"/?"+n,success:function(n,t){r!==undefined?(r(n,t),BestWestern.ProcessDataLoginTracking()):window.location.reload(!0)},error:function(n,t,i){u!==undefined&&u(n,t,i)}})},error:function(n,t,i){u!==undefined&&u(n,t,i)},complete:function(n,t){o!==undefined&&o(n,t)}})};BestWestern.Unauthenticate=function(){$.ajax({url:"/Sitefinity/SignOut?redirect_url=",success:function(){window.location="/"}})};BestWestern.RecaptchaIds={};BestWestern.InitRecaptchasOnLoad=BestWestern.InitRecaptchasOnLoad||!1;BestWestern.ProcessDataLoginTracking=function(){var t=BestWestern.StorageManager.GetCookie("DataLayerId"),n;t!=null&&t!=undefined&&BestWestern.EventHandler.dispatchEvent("LoginSuccess",t);n=BestWestern.StorageManager.GetCookie("AnonLayerId");n!=null&&n!=undefined&&n!=""&&BestWestern.EventHandler.dispatchEvent("AnonCheckout",n)}}();RecaptchaCallback=function(){BestWestern.InitRecaptchasOnLoad&&InitRecaptchas()};InitRecaptchas=function(){$("[data-captcha]").each(function(n,t){var i=t.id,u=$(t).data("sitekey"),r;BestWestern.RecaptchaIds[i]===undefined&&(r=grecaptcha.render(i,{sitekey:u}),BestWestern.RecaptchaIds[i]=r)})},function(){"use strict";var n=null,t=null;BestWestern.IsAuthenticated=function(i){return n!==null&&(n===!0||n===!1)?(i!==undefined&&i(t),n):($.ajax({url:"/restapi/user/authenticated/",type:"GET",dataType:"json","async":!1,cache:!1,contentType:"application/json; charset=utf-8",accept:"application/json, text/plain",success:function(r){n=r!==null&&r.UserId!==undefined&&r.UserId!=="00000000-0000-0000-0000-000000000000";t=r;t.Authenticated=n;i!==undefined&&i(r)}}),n===!0)}}(),function(){"use strict";var n=function(n){if(typeof n=="string")return n;if(n.responseJSON&&n.responseJSON.ResponseStatus&&n.responseJSON.ResponseStatus.Message)return n.responseJSON.ResponseStatus.Message;if(n.responseText)try{var t=JSON.parse(n.responseText);if(t.ResponseStatus&&t.ResponseStatus.Message)return t.ResponseStatus.Message;if(t.Message)return t.Message}catch(i){}return"A problem has occured with this request"};BestWestern.GetErrorMessage=function(t){return n(t)}}(),function(){"use strict";typeof Storage!="undefined"&&BestWestern.IsAuthenticated(function(n){n.Authenticated===!0&&sessionStorage.getItem("Identified")===null&&typeof dataLayer!="undefined"&&(dataLayer.push({hasLoggedIn:!0,userId:n.UserId}),sessionStorage.setItem("Identified",!0))})}(),function(){"use strict";BestWestern.ShowMessage=function(n,t){var t,i;$(".notification").remove();$("body").append('<div class="notification"><aside><i data-icon="&#xe003;"><\/i><\/aside><div>'+n+"<\/div><\/div>");t||(t=8500);i=$(".notification");i.fadeIn(0);t>0&&setTimeout(function(){i.fadeOut(0,function(){i.remove()})},t)}}(),function(){"use strict";BestWestern.IsGuid=function(n){return/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/.test(n)};BestWestern.GetGuidsInArray=function(n){return n.filter(BestWestern.IsGuid)}}(),function(){"use strict";if(typeof ValidatorUpdateDisplay!="undefined"){var n=ValidatorUpdateDisplay;ValidatorUpdateDisplay=function(t){var i=$("#"+t.controltovalidate);t.isvalid?i.closest("div").removeClass("form_error"):(i.closest("div").addClass("form_error"),i.parents("fieldset").removeClass("fieldset-loading"));n(t)}}}();typeof kendo!=typeof undefined&&(kendo.data.binders.requirednothidden||(kendo.data.binders.requirednothidden=kendo.data.Binder.extend({refresh:function(){var n=this.bindings.requirednothidden.get();n?this.element.setAttribute("requirednothidden",""):this.element.removeAttribute("requirednothidden")}})),kendo.data.binders.cssToggle||(kendo.data.binders.cssToggle=kendo.data.Binder.extend({init:function(n,t,i){kendo.data.Binder.fn.init.call(this,n,t,i);var r=$(n);this.enabledCss=r.data("enabledCss");this.disabledCss=r.data("disabledCss")},refresh:function(){this.bindings.cssToggle.get()?(this.enabledCss&&$(this.element).addClass(this.enabledCss),this.disabledCss&&$(this.element).removeClass(this.disabledCss)):(this.disabledCss&&$(this.element).addClass(this.disabledCss),this.enabledCss&&$(this.element).removeClass(this.enabledCss))}})),kendo.data.binders.text&&(kendo.data.binders.textformat=kendo.data.binders.text.extend({refresh:function(){var n=this.element,s=this.bindings.textformat.path,i=this.bindings.textformat.source,o;if(i!==""){var r=i[s],u=$(n).data("format"),f=$(n).data("default"),e=$(n).data("type"),t=this.bindings.textformat.get();u!==undefined?(e!==undefined&&typeof t=="string"&&e==="date"&&(t=new Date(t)),o=kendo.toString(t,u),$(n).text(o)):f!==undefined?t===undefined||t===null?$(n).text(f):$(n).text(t.toString()):r&&$(n).text(r.toString())}}}))),function(){"use strict";BestWestern.CreatePassword=function(){$.fancybox({content:$("#createPasswordOverlay").html(),tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},autoSize:!1,width:600,height:"auto",beforeShow:function(){var n=$('<a title="Close" class="bw_fancybox_close" href="javascript:void(0);"><\/a>');$(".fancybox-outer").append(n);$(".bw_fancybox_close, .bo_close").on("click",function(){$.fancybox.close()})}})};BestWestern.EditLetter=function(){$("#letter_section").animate({height:"show",opacity:"show"},{complete:function(){$(".edit_my_letter").fadeOut()}})};BestWestern.CheckVals=function(){var i=0,t=$(".profile_complete_pie"),n;$(".profile_fld").each(function(n,t){t=$(t);t.val()!=""&&i++});n=i*10;$(".complete_val").text(n);switch(!0){case n>0&&n<11:t.removeClass().addClass("profile_complete_pie complete_1");break;case n>10&&n<21:t.removeClass().addClass("profile_complete_pie complete_2");break;case n>20&&n<31:t.removeClass().addClass("profile_complete_pie complete_3");break;case n>30&&n<41:t.removeClass().addClass("profile_complete_pie complete_4");break;case n>40&&n<51:t.removeClass().addClass("profile_complete_pie complete_5");break;case n>50&&n<61:t.removeClass().addClass("profile_complete_pie complete_6");break;case n>60&&n<71:t.removeClass().addClass("profile_complete_pie complete_7");break;case n>70&&n<81:t.removeClass().addClass("profile_complete_pie complete_8");break;case n>80&&n<91:t.removeClass().addClass("profile_complete_pie complete_9");break;case n>90&&n<101:t.removeClass().addClass("profile_complete_pie complete_10")}$(".profile_completion_bar > div").css({width:n+"%"});n===100&&($(".file_the_letter").hide(),$(".send_the_letter").fadeIn())}}(),function(){"use strict";BestWestern.ShowAddiliateSections=function(){var n=BestWestern.StorageManager.GetCookie("iata");(n==null||n!=="00224322"&&n!=="00224321")&&$("[data-affiliatesection]").show()}}();urlParams={},function(){"use strict";for(var n,i=/\+/g,r=/([^&=]+)=?([^&]*)/g,t=function(n){return decodeURIComponent(n.replace(i," "))},u=window.location.search.substring(1);n=r.exec(u);)urlParams[t(n[1]).toLowerCase()]=t(n[2]);urlParams.corpid!==undefined&&(BestWestern.StorageManager.Put("oi",urlParams.corpid),BestWestern.StorageManager.Put("ot","corpid"))}();$(document).ready(function(){"use strict";urlParams.corpid!==undefined&&BestWestern.StorageManager.Put("promocode",urlParams.corpid);urlParams.iata!==undefined&&BestWestern.StorageManager.PutCookie("iata",'"'+urlParams.iata+'"');BestWestern.ShowAddiliateSections()}),function(){"use strict";urlParams.voucher!==undefined&&BestWestern.StorageManager.Put("voucher",urlParams.voucher)}();$(document).ready(function(){"use strict";urlParams.trv_reference!==undefined&&(BestWestern.StorageManager.PutCookie("trv_reference",urlParams.trv_reference),document.referrer===undefined||document.referrer===null||document.referrer===""||document.referrer.includes("bestwestern")||BestWestern.StorageManager.PutCookie("trv_reference_referrer",new URL(document.referrer).hostname))}),function(){"use strict";BestWestern.SetSsob=function(){var n=urlParams.ssob,t=null;if(arguments[0]&&(n=arguments[0]),arguments[1])try{t=parseInt(arguments[1])}catch(i){}n!==null&&n!==undefined&&(cookieStorage.setExpires(t),BestWestern.StorageManager.PutCookie("ssob",'"'+n+'"'),cookieStorage.setExpires(30))}}(),function(){BestWestern.AgentName=function(){var n=BestWestern.StorageManager.GetCookie("agent-name");return n===undefined&&(n=null),n}}(),function(){"use strict";BestWestern.Header=function(n){return n==undefined?this.headerControl:(this.headerControl=n,this.headerControl)}}(),function(){"use strict";BestWestern.SelectDates=function(){var n=BestWestern.Header();n&&(n.set_datesOnly(!0),n.initSearchDialog())}}(),function(){"use strict";BestWestern.ConfirmationTrackingOn=function(){BestWestern.StorageManager.PutCookie("gtm_ec",!0)};BestWestern.ConfirmationTrackingOff=function(){BestWestern.StorageManager.PutCookie("gtm_ec",!1)};BestWestern.ConfirmationTracking=function(){return BestWestern.StorageManager.GetCookie("gtm_ec")==!0}}(),function(){$(".nav-select").change(function(){var n=jQuery(this).find("option:selected").val();window.location.replace(n)})}(),function(){var n=function(n,t){var r=n[t],i,u;r?(i=new Date,i.setFullYear(i.getFullYear()+5),u=(i.getTime()-(new Date).getTime())/864e5,setCookie(t,r,u)):$.removeCookie(t,{path:"/"})};(urlParams.utm_source||urlParams.utm_medium)&&(n(urlParams,"utm_source"),n(urlParams,"utm_medium"))}();
/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
!function(n,t,i,r){var p=i("html"),e=i(n),o=i(t),u=i.fancybox=function(){u.open.apply(this,arguments)},y=navigator.userAgent.match(/msie/i),v=null,s=t.createTouch!==r,a=function(n){return n&&n.hasOwnProperty&&n instanceof i},c=function(n){return n&&"string"===i.type(n)},l=function(n){return c(n)&&0<n.indexOf("%")},f=function(n,t){var i=parseInt(n,10)||0;return t&&l(n)&&(i*=u.getViewport()[t]/100),Math.ceil(i)},h=function(n,t){return f(n,t)+"px"};i.extend(u,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(y?' allowtransparency="true"':"")+"><\/iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.<\/p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"><\/a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span><\/span><\/a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span><\/span><\/a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(n,t){if(n&&(i.isPlainObject(t)||(t={}),!1!==u.close(!0)))return i.isArray(n)||(n=a(n)?i(n).get():[n]),i.each(n,function(f,e){var s,y,l,o,v,h={};"object"===i.type(e)&&(e.nodeType&&(e=i(e)),a(e)?(h={href:e.data("fancybox-href")||e.attr("href"),title:e.data("fancybox-title")||e.attr("title"),isDom:!0,element:e},i.metadata&&i.extend(!0,h,e.metadata())):h=e);s=t.href||h.href||(c(e)?e:null);y=t.title!==r?t.title:h.title||"";!(o=(l=t.content||h.content)?"html":t.type||h.type)&&h.isDom&&((o=e.data("fancybox-type"))||(o=(o=e.prop("class").match(/fancybox\.(\w+)/))?o[1]:null));c(s)&&(o||(u.isImage(s)?o="image":u.isSWF(s)?o="swf":"#"===s.charAt(0)?o="inline":c(e)&&(o="html",l=e)),"ajax"===o&&(v=s.split(/\s+/,2),s=v.shift(),v=v.shift()));l||("inline"===o?s?l=i(c(s)?s.replace(/.*(?=#[^\s]+$)/,""):s):h.isDom&&(l=e):"html"===o?l=s:!o&&!s&&h.isDom&&(o="inline",l=e));i.extend(h,{href:s,type:o,content:l,title:y,selector:v});n[f]=h}),u.opts=i.extend(!0,{},u.defaults,t),t.keys!==r&&(u.opts.keys=!!t.keys&&i.extend({},u.defaults.keys,t.keys)),u.group=n,u._start(u.opts.index)},cancel:function(){var n=u.coming;n&&!1!==u.trigger("onCancel")&&(u.hideLoading(),u.ajaxLoad&&u.ajaxLoad.abort(),u.ajaxLoad=null,u.imgPreload&&(u.imgPreload.onload=u.imgPreload.onerror=null),n.wrap&&n.wrap.stop(!0,!0).trigger("onReset").remove(),u.coming=null,u.current||u._afterZoomOut(n))},close:function(n){u.cancel();!1!==u.trigger("beforeClose")&&(u.unbindEvents(),u.isActive&&(u.isOpen&&!0!==n?(u.isOpen=u.isOpened=!1,u.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),u.wrap.stop(!0,!0).removeClass("fancybox-opened"),u.transitions[u.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),u._afterZoomOut())))},play:function(n){var t=function(){clearTimeout(u.player.timer)},i=function(){t();u.current&&u.player.isActive&&(u.player.timer=setTimeout(u.next,u.current.playSpeed))},r=function(){t();o.unbind(".player");u.player.isActive=!1;u.trigger("onPlayEnd")};!0===n||!u.player.isActive&&!1!==n?u.current&&(u.current.loop||u.current.index<u.group.length-1)&&(u.player.isActive=!0,o.bind({"onCancel.player beforeClose.player":r,"onUpdate.player":i,"beforeLoad.player":t}),i(),u.trigger("onPlayStart")):r()},next:function(n){var t=u.current;t&&(c(n)||(n=t.direction.next),u.jumpto(t.index+1,n,"next"))},prev:function(n){var t=u.current;t&&(c(n)||(n=t.direction.prev),u.jumpto(t.index-1,n,"prev"))},jumpto:function(n,t,i){var e=u.current;e&&(n=f(n),u.direction=t||e.direction[n>=e.index?"next":"prev"],u.router=i||"jumpto",e.loop&&(0>n&&(n=e.group.length+n%e.group.length),n%=e.group.length),e.group[n]!==r&&(u.cancel(),u._start(n)))},reposition:function(n,t){var r,f=u.current,e=f?f.wrap:null;e&&(r=u._getPosition(t),n&&"scroll"===n.type?(delete r.position,e.stop(!0,!0).animate(r,200)):(e.css(r),f.pos=i.extend({},f.dim,r)))},update:function(n){var t=n&&n.type,i=!t||"orientationchange"===t;i&&(clearTimeout(v),v=null);u.isOpen&&!v&&(v=setTimeout(function(){var r=u.current;r&&!u.isClosing&&(u.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&r.autoResize)&&u._setDimension(),"scroll"===t&&r.canShrink||u.reposition(n),u.trigger("onUpdate"),v=null)},i&&!s?0:300))},toggle:function(n){u.isOpen&&(u.current.fitToView="boolean"===i.type(n)?n:!u.current.fitToView,s&&(u.wrap.removeAttr("style").addClass("fancybox-tmp"),u.trigger("onUpdate")),u.update())},hideLoading:function(){o.unbind(".loading");i("#fancybox-loading").remove()},showLoading:function(){var t,n;u.hideLoading();t=i('<div id="fancybox-loading"><div><\/div><\/div>').click(u.cancel).appendTo("body");o.bind("keydown.loading",function(n){27===(n.which||n.keyCode)&&(n.preventDefault(),u.cancel())});u.defaults.fixed||(n=u.getViewport(),t.css({position:"absolute",top:.5*n.h+n.y,left:.5*n.w+n.x}))},getViewport:function(){var i=u.current&&u.current.locked||!1,t={x:e.scrollLeft(),y:e.scrollTop()};return i?(t.w=i[0].clientWidth,t.h=i[0].clientHeight):(t.w=s&&n.innerWidth?n.innerWidth:e.width(),t.h=s&&n.innerHeight?n.innerHeight:e.height()),t},unbindEvents:function(){u.wrap&&a(u.wrap)&&u.wrap.unbind(".fb");o.unbind(".fb");e.unbind(".fb")},bindEvents:function(){var t,n=u.current;n&&(e.bind("orientationchange.fb"+(s?"":" resize.fb")+(n.autoCenter&&!n.locked?" scroll.fb":""),u.update),(t=n.keys)&&o.bind("keydown.fb",function(f){var e=f.which||f.keyCode,o=f.target||f.srcElement;if(27===e&&u.coming)return!1;f.ctrlKey||f.altKey||f.shiftKey||f.metaKey||o&&(o.type||i(o).is("[contenteditable]"))||i.each(t,function(t,o){return 1<n.group.length&&o[e]!==r?(u[t](o[e]),f.preventDefault(),!1):-1<i.inArray(e,o)?(u[t](),f.preventDefault(),!1):void 0})}),i.fn.mousewheel&&n.mouseWheel&&u.wrap.bind("mousewheel.fb",function(t,r,f,e){for(var o=i(t.target||null),s=!1;o.length&&!s&&!o.is(".fancybox-skin")&&!o.is(".fancybox-wrap");)s=o[0]&&!(o[0].style.overflow&&"hidden"===o[0].style.overflow)&&(o[0].clientWidth&&o[0].scrollWidth>o[0].clientWidth||o[0].clientHeight&&o[0].scrollHeight>o[0].clientHeight),o=i(o).parent();0!==r&&!s&&1<u.group.length&&!n.canShrink&&(0<e||0<f?u.prev(0<e?"down":"left"):(0>e||0>f)&&u.next(0>e?"up":"right"),t.preventDefault())}))},trigger:function(n,t){var f,r=t||u.coming||u.current;if(r){if(i.isFunction(r[n])&&(f=r[n].apply(r,Array.prototype.slice.call(arguments,1))),!1===f)return!1;r.helpers&&i.each(r.helpers,function(t,f){f&&u.helpers[t]&&i.isFunction(u.helpers[t][n])&&u.helpers[t][n](i.extend(!0,{},u.helpers[t].defaults,f),r)});o.trigger(n)}},isImage:function(n){return c(n)&&n.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(n){return c(n)&&n.match(/\.(swf)((\?|#).*)?$/i)},_start:function(n){var e,r,t={};if(n=f(n),!(e=u.group[n]||null))return!1;if(e=(t=i.extend(!0,{},u.opts,e)).margin,r=t.padding,"number"===i.type(e)&&(t.margin=[e,e,e,e]),"number"===i.type(r)&&(t.padding=[r,r,r,r]),t.modal&&i.extend(!0,t,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),t.autoSize&&(t.autoWidth=t.autoHeight=!0),"auto"===t.width&&(t.autoWidth=!0),"auto"===t.height&&(t.autoHeight=!0),t.group=u.group,t.index=n,u.coming=t,!1===u.trigger("beforeLoad"))u.coming=null;else{if(r=t.type,e=t.href,!r)return u.coming=null,!(!u.current||!u.router||"jumpto"===u.router)&&(u.current.index=n,u[u.router](u.direction));if(u.isActive=!0,"image"!==r&&"swf"!==r||(t.autoHeight=t.autoWidth=!1,t.scrolling="visible"),"image"===r&&(t.aspectRatio=!0),"iframe"===r&&s&&(t.scrolling="scroll"),t.wrap=i(t.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+r+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body"),i.extend(t,{skin:i(".fancybox-skin",t.wrap),outer:i(".fancybox-outer",t.wrap),inner:i(".fancybox-inner",t.wrap)}),i.each(["Top","Right","Bottom","Left"],function(n,i){t.skin.css("padding"+i,h(t.padding[n]))}),u.trigger("onReady"),"inline"===r||"html"===r){if(!t.content||!t.content.length)return u._error("content")}else if(!e)return u._error("href");"image"===r?u._loadImage():"ajax"===r?u._loadAjax():"iframe"===r?u._loadIframe():u._afterLoad()}},_error:function(n){i.extend(u.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:n,content:u.coming.tpl.error});u._afterLoad()},_loadImage:function(){var n=u.imgPreload=new Image;n.onload=function(){this.onload=this.onerror=null;u.coming.width=this.width/u.opts.pixelRatio;u.coming.height=this.height/u.opts.pixelRatio;u._afterLoad()};n.onerror=function(){this.onload=this.onerror=null;u._error("image")};n.src=u.coming.href;!0!==n.complete&&u.showLoading()},_loadAjax:function(){var n=u.coming;u.showLoading();u.ajaxLoad=i.ajax(i.extend({},n.ajax,{url:n.href,error:function(n,t){u.coming&&"abort"!==t?u._error("ajax",n):u.hideLoading()},success:function(t,i){"success"===i&&(n.content=t,u._afterLoad())}}))},_loadIframe:function(){var n=u.coming,t=i(n.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":n.iframe.scrolling).attr("src",n.href);i(n.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(n){}});n.iframe.preload&&(u.showLoading(),t.one("load",function(){i(this).data("ready",1);s||i(this).bind("load.fb",u.update);i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();u._afterLoad()}));n.content=t.appendTo(n.inner);n.iframe.preload||u._afterLoad()},_preloadImages:function(){for(var t,r=u.group,i=u.current,f=r.length,e=i.preload?Math.min(i.preload,f-1):0,n=1;n<=e;n+=1)"image"===(t=r[(i.index+n)%f]).type&&t.href&&((new Image).src=t.href)},_afterLoad:function(){var t,s,f,e,o,n=u.coming,r=u.current;if(u.hideLoading(),n&&!1!==u.isActive)if(!1===u.trigger("afterLoad",n,r))n.wrap.stop(!0).trigger("onReset").remove(),u.coming=null;else{switch(r&&(u.trigger("beforeChange",r),r.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),u.unbindEvents(),t=n.content,s=n.type,f=n.scrolling,i.extend(u,{wrap:n.wrap,skin:n.skin,outer:n.outer,inner:n.inner,current:n,previous:r}),e=n.href,s){case"inline":case"ajax":case"html":n.selector?t=i("<div>").html(t).find(n.selector):a(t)&&(t.data("fancybox-placeholder")||t.data("fancybox-placeholder",i('<div class="fancybox-placeholder"><\/div>').insertAfter(t).hide()),t=t.show().detach(),n.wrap.bind("onReset",function(){i(this).find(t).length&&t.hide().replaceAll(t.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":t=n.tpl.image.replace("{href}",e);break;case"swf":t='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+e+'"><\/param>';o="";i.each(n.swf,function(n,i){t+='<param name="'+n+'" value="'+i+'"><\/param>';o+=" "+n+'="'+i+'"'});t+='<embed src="'+e+'" type="application/x-shockwave-flash" width="100%" height="100%"'+o+"><\/embed><\/object>"}a(t)&&t.parent().is(n.inner)||n.inner.append(t);u.trigger("beforeShow");n.inner.css("overflow","yes"===f?"scroll":"no"===f?"hidden":f);u._setDimension();u.reposition();u.isOpen=!1;u.coming=null;u.bindEvents();u.isOpened?r.prevMethod&&u.transitions[r.prevMethod]():i(".fancybox-wrap").not(n.wrap).stop(!0).trigger("onReset").remove();u.transitions[u.isOpened?n.nextMethod:n.openMethod]();u._preloadImages()}},_setDimension:function(){var ot,p,rt,d,w,tt,et,g,ut,o=u.getViewport(),st=0,s=!1,n=!1,nt=(s=u.wrap,u.skin),e=u.inner,r=u.current,t=(n=r.width,r.height),c=r.minWidth,a=r.minHeight,v=r.maxWidth,y=r.maxHeight,ht=r.scrolling,ft=r.scrollOutside?r.scrollbarWidth:0,b=r.margin,k=f(b[1]+b[3]),it=f(b[0]+b[2]);if(s.add(nt).add(e).width("auto").height("auto").removeClass("fancybox-tmp"),p=k+(b=f(nt.outerWidth(!0)-nt.width())),rt=it+(ot=f(nt.outerHeight(!0)-nt.height())),d=l(n)?(o.w-p)*f(n)/100:n,w=l(t)?(o.h-rt)*f(t)/100:t,"iframe"===r.type){if(ut=r.content,r.autoHeight&&1===ut.data("ready"))try{ut[0].contentWindow.document.location&&(e.width(d).height(9999),tt=ut.contents().find("body"),ft&&tt.css("overflow-x","hidden"),w=tt.outerHeight(!0))}catch(ot){}}else(r.autoWidth||r.autoHeight)&&(e.addClass("fancybox-tmp"),r.autoWidth||e.width(d),r.autoHeight||e.height(w),r.autoWidth&&(d=e.width()),r.autoHeight&&(w=e.height()),e.removeClass("fancybox-tmp"));if(n=f(d),t=f(w),g=d/w,c=f(l(c)?f(c,"w")-p:c),v=f(l(v)?f(v,"w")-p:v),a=f(l(a)?f(a,"h")-rt:a),tt=v,et=y=f(l(y)?f(y,"h")-rt:y),r.fitToView&&(v=Math.min(o.w-p,v),y=Math.min(o.h-rt,y)),p=o.w-k,it=o.h-it,r.aspectRatio?(n>v&&(t=f((n=v)/g)),t>y&&(n=f((t=y)*g)),n<c&&(t=f((n=c)/g)),t<a&&(n=f((t=a)*g))):(n=Math.max(c,Math.min(n,v)),r.autoHeight&&"iframe"!==r.type&&(e.width(n),t=e.height()),t=Math.max(a,Math.min(t,y))),r.fitToView)if(e.width(n).height(t),s.width(n+b),o=s.width(),k=s.height(),r.aspectRatio)for(;(o>p||k>it)&&n>c&&t>a&&!(19<st++);)t=Math.max(a,Math.min(y,t-10)),(n=f(t*g))<c&&(t=f((n=c)/g)),n>v&&(t=f((n=v)/g)),e.width(n).height(t),s.width(n+b),o=s.width(),k=s.height();else n=Math.max(c,Math.min(n,n-(o-p))),t=Math.max(a,Math.min(t,t-(k-it)));ft&&"auto"===ht&&t<w&&n+b+ft<p&&(n+=ft);e.width(n).height(t);s.width(n+b);o=s.width();k=s.height();s=(o>p||k>it)&&n>c&&t>a;n=r.aspectRatio?n<tt&&t<et&&n<d&&t<w:(n<tt||t<et)&&(n<d||t<w);i.extend(r,{dim:{width:h(o),height:h(k)},origWidth:d,origHeight:w,canShrink:s,canExpand:n,wPadding:b,hPadding:ot,wrapSpace:k-nt.outerHeight(!0),skinSpace:nt.height()-t});!ut&&r.autoHeight&&t>a&&t<y&&!n&&e.height("auto")},_getPosition:function(n){var i=u.current,r=u.getViewport(),t=i.margin,f=u.wrap.width()+t[1]+t[3],e=u.wrap.height()+t[0]+t[2];return t={position:"absolute",top:t[0],left:t[3]},i.autoCenter&&i.fixed&&!n&&e<=r.h&&f<=r.w?t.position="fixed":i.locked||(t.top+=r.y,t.left+=r.x),t.top=h(Math.max(t.top,t.top+(r.h-e)*i.topRatio)),t.left=h(Math.max(t.left,t.left+(r.w-f)*i.leftRatio)),t},_afterZoomIn:function(){var n=u.current;n&&(u.isOpen=u.isOpened=!0,u.wrap.css("overflow","visible").addClass("fancybox-opened"),u.update(),(n.closeClick||n.nextClick&&1<u.group.length)&&u.inner.css("cursor","pointer").bind("click.fb",function(t){i(t.target).is("a")||i(t.target).parent().is("a")||(t.preventDefault(),u[n.closeClick?"close":"next"]())}),n.closeBtn&&i(n.tpl.closeBtn).appendTo(u.skin).bind("click.fb",function(n){n.preventDefault();u.close()}),n.arrows&&1<u.group.length&&((n.loop||0<n.index)&&i(n.tpl.prev).appendTo(u.outer).bind("click.fb",u.prev),(n.loop||n.index<u.group.length-1)&&i(n.tpl.next).appendTo(u.outer).bind("click.fb",u.next)),u.trigger("afterShow"),n.loop||n.index!==n.group.length-1?u.opts.autoPlay&&!u.player.isActive&&(u.opts.autoPlay=!1,u.play()):u.play(!1))},_afterZoomOut:function(n){n=n||u.current;i(".fancybox-wrap").trigger("onReset").remove();i.extend(u,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});u.trigger("afterClose",n)}});u.transitions={getOrigPosition:function(){var n=u.current,f=n.element,t=n.orig,i={},e=50,o=50,s=n.hPadding,c=n.wPadding,r=u.getViewport();return!t&&n.isDom&&f.is(":visible")&&((t=f.find("img:first")).length||(t=f)),a(t)?(i=t.offset(),t.is("img")&&(e=t.outerWidth(),o=t.outerHeight())):(i.top=r.y+(r.h-o)*n.topRatio,i.left=r.x+(r.w-e)*n.leftRatio),("fixed"===u.wrap.css("position")||n.locked)&&(i.top-=r.y,i.left-=r.x),{top:h(i.top-s*n.topRatio),left:h(i.left-c*n.leftRatio),width:h(e+c),height:h(o+s)}},step:function(n,t){var e,i,r=t.prop,o=(i=u.current).wrapSpace,s=i.skinSpace;"width"!==r&&"height"!==r||(e=t.end===t.start?1:(n-t.start)/(t.end-t.start),u.isClosing&&(e=1-e),i=n-(i="width"===r?i.wPadding:i.hPadding),u.skin[r](f("width"===r?i:i-o*e)),u.inner[r](f("width"===r?i:i-o*e-s*e)))},zoomIn:function(){var n=u.current,t=n.pos,r=n.openEffect,f="elastic"===r,e=i.extend({opacity:1},t);delete e.position;f?(t=this.getOrigPosition(),n.openOpacity&&(t.opacity=.1)):"fade"===r&&(t.opacity=.1);u.wrap.css(t).animate(e,{duration:"none"===r?0:n.openSpeed,easing:n.openEasing,step:f?this.step:null,complete:u._afterZoomIn})},zoomOut:function(){var n=u.current,i=n.closeEffect,r="elastic"===i,t={opacity:.1};r&&(t=this.getOrigPosition(),n.closeOpacity&&(t.opacity=.1));u.wrap.animate(t,{duration:"none"===i?0:n.closeSpeed,easing:n.closeEasing,step:r?this.step:null,complete:u._afterZoomOut})},changeIn:function(){var n,i=u.current,o=i.nextEffect,t=i.pos,e={opacity:1},r=u.direction;t.opacity=.1;"elastic"===o&&(n="down"===r||"up"===r?"top":"left","down"===r||"right"===r?(t[n]=h(f(t[n])-200),e[n]="+=200px"):(t[n]=h(f(t[n])+200),e[n]="-=200px"));"none"===o?u._afterZoomIn():u.wrap.css(t).animate(e,{duration:i.nextSpeed,easing:i.nextEasing,complete:u._afterZoomIn})},changeOut:function(){var n=u.previous,r=n.prevEffect,f={opacity:.1},t=u.direction;"elastic"===r&&(f["down"===t||"up"===t?"top":"left"]=("up"===t||"left"===t?"-":"+")+"=200px");n.wrap.animate(f,{duration:"none"===r?0:n.prevSpeed,easing:n.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}};u.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(n){n=i.extend({},this.defaults,n);this.overlay&&this.close();this.overlay=i('<div class="fancybox-overlay"><\/div>').appendTo(u.coming?u.coming.parent:n.parent);this.fixed=!1;n.fixed&&u.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(n){var t=this;n=i.extend({},this.defaults,n);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(n);this.fixed||(e.bind("resize.overlay",i.proxy(this.update,this)),this.update());n.closeClick&&this.overlay.bind("click.overlay",function(n){if(i(n.target).hasClass("fancybox-overlay"))return u.isActive?u.close():t.close(),!1});this.overlay.css(n.css).show()},close:function(){var n,t;e.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),n=e.scrollTop(),t=e.scrollLeft(),this.el.removeClass("fancybox-lock"),e.scrollTop(n).scrollLeft(t));i(".fancybox-overlay").remove().hide();i.extend(this,{overlay:null,fixed:!1})},update:function(){var i,n="100%";this.overlay.width(n).height("100%");y?(i=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),o.width()>i&&(n=o.width())):o.width()>e.width()&&(n=o.width());this.overlay.width(n).height(o.height())},onReady:function(n,t){var r=this.overlay;i(".fancybox-overlay").stop(!0,!0);r||this.create(n);n.locked&&this.fixed&&t.fixed&&(r||(this.margin=o.height()>e.height()&&i("html").css("margin-right").replace("px","")),t.locked=this.overlay.append(t.wrap),t.fixed=!1);!0===n.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(n,t){var r,u;t.locked&&(!1!==this.margin&&(i("*").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),r=e.scrollTop(),u=e.scrollLeft(),this.el.addClass("fancybox-lock"),e.scrollTop(r).scrollLeft(u));this.open(n)},onUpdate:function(){this.fixed||this.update()},afterClose:function(n){this.overlay&&!u.coming&&this.overlay.fadeOut(n.speedOut,i.proxy(this.close,this))}};u.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(n){var t=u.current,e=t.title,r=n.type;if(i.isFunction(e)&&(e=e.call(t.element,t)),c(e)&&""!==i.trim(e)){switch(t=i('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+e+"<\/div>"),r){case"inside":r=u.skin;break;case"outside":r=u.wrap;break;case"over":r=u.inner;break;default:r=u.skin;t.appendTo("body");y&&t.width(t.width());t.wrapInner('<span class="child"><\/span>');u.current.margin[2]+=Math.abs(f(t.css("margin-bottom")))}t["top"===n.position?"prependTo":"appendTo"](r)}}};i.fn.fancybox=function(n){var r,f=i(this),t=this.selector||"",e=function(e){var h,o,s=i(this).blur(),c=r;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||s.is(".fancybox-wrap")||(h=n.groupAttr||"data-fancybox-group",(o=s.attr(h))||(h="rel",o=s.get(0)[h]),o&&""!==o&&"nofollow"!==o&&(c=(s=(s=t.length?i(t):f).filter("["+h+'="'+o+'"]')).index(this)),n.index=c,!1!==u.open(s,n)&&e.preventDefault())};return r=(n=n||{}).index||0,t&&!1!==n.live?o.undelegate(t,"click.fb-start").delegate(t+":not('.fancybox-item, .fancybox-nav')","click.fb-start",e):f.unbind("click.fb-start").bind("click.fb-start",e),this.filter("[data-fancybox-start=1]").trigger("click"),this};o.ready(function(){var f,t,e;(i.scrollbarWidth===r&&(i.scrollbarWidth=function(){var t=i('<div style="width:50px;height:50px;overflow:auto"><div/><\/div>').appendTo("body"),n=(n=t.children()).innerWidth()-n.height(99).innerWidth();return t.remove(),n}),i.support.fixedPosition===r)&&(f=i.support,e=20===(t=i('<div style="position:fixed;top:20px;"><\/div>').appendTo("body"))[0].offsetTop||15===t[0].offsetTop,t.remove(),f.fixedPosition=e);i.extend(u.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")});f=i(n).width();p.addClass("fancybox-lock-test");t=i(n).width();p.removeClass("fancybox-lock-test");i("<style type='text/css'>.fancybox-margin{margin-right:"+(t-f)+"px;}<\/style>").appendTo("head")})}(window,document,jQuery);
function setLogo(){"use strict";win.width()>1279?img.attr("src",img.data("full")):img.attr("src",imgsrc)}function equaliseHeights(){"use strict";var n=$("[data-equalise]");n.removeClass("equalised").removeAttr("style");n.each(function(n,t){t=$(t);var r=t.data("equalise"),i=0;$('[data-equalise="'+r+'"]').each(function(n,t){t=$(t);t.height()>i&&(i=t.height());t.addClass("equalised")});t.height(i)})}function invokeLogin(){"use strict";$(".dialogue_overlay").hide();$("#ha_user .header_overlay").fadeIn();$("li[data-auth-tab]").removeClass("active");$('li[data-auth-tab="signup"]').addClass("active");$("div[data-auth-tab]").hide();$('div[data-auth-tab="signup"]').show()}function closeWelcomeOverlay(n){"use strict";n=$(n);n.parents(".dialogue_overlay").fadeOut(200,function(){typeof Storage!="undefined"&&localStorage.setItem("welcomeNote",!0);$(this).remove()})}function homePromo(){if($(".home-float-message--wrp").length)$("#hero_wrp .responsive-search").addClass("has-promo");else return!1}function moreLess(n,t){"use strict";n==="more"?t.parents(".ta_review").find(".ta_review_summary").hide().next(".ta_review_text").show():t.parents(".ta_review").find(".ta_review_summary").show().next(".ta_review_text").hide()}function initViewMap(n,t){function u(){n.removeClass("active");$("#hd_map").fadeOut(function(){$(this).remove();$("body").removeClass("noscroll")})}var f=$("#hd_header_look_inside"),i,r;f.is(".active")&&(f.removeClass("active"),$("#look_inside").fadeOut(function(){$(this).remove()}));n=$(n);r=!1;$(window).scrollTop()<800?i=$("#hd_hero"):(i=$("body"),r=!0);n.data("pos")==="in-body"&&(i=$("body"),r=!0);n.is(".active")?t!==!1&&u():(n.addClass("active"),t===!1?i.append('<div id="hd_map"><div><div id="hotel_map_element"><\/div><\/div><\/div>'):i.append('<div id="hd_map"><div><span class="close"><\/span><div id="hotel_map_element"><\/div><\/div><\/div>'),r&&($("body").addClass("noscroll"),$("#hd_map").addClass("in-body")),initHotelMap(r));$(".close").on("click",function(){u()});$(document).on("keyup",function(n){n.keyCode==27&&t!==!1&&u()})}function initHotelMap(n){var t,i,f=$("[data-hotel-lat]").attr("data-hotel-lat"),e=$("[data-hotel-long]").attr("data-hotel-long"),r=new google.maps.LatLng(f,e),u,h;i=n?!0:!1;var o={zoom:17,center:r,scrollwheel:i},s=new google.maps.StyledMapType([{featureType:"poi.business",stylers:[{visibility:"off"}]}],{name:"Styled Map"});t=new google.maps.Map(document.getElementById("hotel_map_element"),o);t.mapTypes.set("map_style",s);t.setMapTypeId("map_style");u="/App_Themes/BestWesternX2/Images/x2marker.png";h=new google.maps.Marker({position:r,map:t,icon:u});google.maps.event.addListenerOnce(t,"idle",function(){$("#hd_map").addClass("state_loaded");$("#hd_hero #hd_map").css({marginTop:"91px"})})}function initLookInside(n){var i=!1,r,f,t,s;if($(window).scrollTop()<800?t=$("#look_inside"):(t=$("body"),i=!0),scrollWheelStatus=i?!0:!1,$(n).attr("HasLookInside")==="true"){r=$("#hd_header_view_map");r.is(".active")&&(r.removeClass("active"),$("#hd_map").fadeOut(function(){$(this).remove()}));function u(){n.removeClass("active");$("#look_inside").fadeOut(function(){$(this).remove()})}if(f=function(){BestWestern.ShowMessage('Unfortunately our "Look Inside" feature is not currently available for this hotel');u();$("#hd_header_look_inside").remove()},n=$(n),t=$("#hd_hero"),n.is(".active"))u();else{n.addClass("active");t.append('<div class="hidden" id="look_inside"><span class="close"><\/span><div id="hotel_lookinside_element"><\/div><\/div>');i&&($("body").addClass("noscroll"),$("#look_inside").addClass("in-body"));$("#look_inside").fadeIn();var h=new google.maps.StreetViewService,e=$("[lookinside-lat]").attr("lookinside-lat"),o=$("[lookinside-long]").attr("lookinside-long");if(e===null||e===""||o===""||o===""){f();return}s=new google.maps.LatLng(e,o);h.getPanoramaByLocation(s,75,function(n,t){var i,r;t==google.maps.StreetViewStatus.OK?(i=new google.maps.StreetViewPanorama(document.getElementById("hotel_lookinside_element")),r=n.location.pano,i.setPano(r),i.setPov({heading:270,pitch:0}),i.setVisible(!0)):f()})}$(".close").on("click",function(){u()})}}var isMobile=!1,hideKeyboard=function(){document.activeElement.blur();$("input").blur()},oldIE,infoDeskTip;(function(){"use strict";var n=[];$.preLoadImages=function(){for(var t,r=arguments.length,i=r;i--;)t=document.createElement("img"),t.src=arguments[i],n.push(t)}})(),function(){$("html").is(".ie8, .ie9")&&(oldIE=!0)}();var win=$(window),img=$(".bw_logo"),imgsrc=img.attr("src");(function(){"use strict";if($().bxSlider&&$(".banner_items").length>0)var n=$(".banner_items").show().bxSlider({auto:!0,pause:7500,mode:"fade",controls:!0,pager:!1,onSlideAfter:function(){n.startAuto()}})})(),function(){"use strict";$(document).ready(function(){function r(n){return n*360}function i(n){return Math.ceil(n/5)*5}var n=$("input.sfTxt",".rewards_voucher_quantity"),t=$("input.sfTxt",".rewards_points_value");$(n).keyup(function(){var f=$(n).val(),u=i(f);isNaN(u)?($(t).val(""),$(t).text("")):$(t).val(r(u))});$(n).blur(function(){var r=$(n).val(),t=i(r);isNaN(t)?($(n).val(""),$(n).text("")):$(n).val(t)})})}();var showTip=function(n){"use strict";var t=$(n).data("tooltip");$(n).append('<div class="data-tooltip">'+t+"<\/div>");$(n).addClass("tip-hovered")},hideTip=function(){"use strict";$(".data-tooltip").remove();$("[data-tooltip]").removeClass("tip-hovered")},ToggleTip=function(){"use strict"},MobToggleTip=function(n){"use strict";if(window.matchMedia("(max-width: 1024px)").matches){hideTip(n);var t=$(n).data("tooltip");$(n).append('<div class="data-tooltip">'+t+"<\/div>");$(".infoBox").on("click",function(n){console.log("ss "+n.target);n.target.classList.contains("fas")||$(".data-tooltip").remove()})}};(function(){if(typeof Waypoint!="undefined"){var n=$('.sticky-search [data-placeholder-label="Search wrap"]'),t=$("body");n.waypoint({handler:function(i){i==="down"&&$(window).width()>1024?(n.height(n.height()),t.addClass("sticky-search-active")):(n.removeAttr("style"),t.removeClass("sticky-search-active"))}})}})(),function(){"use strict";var n=$("body");$(".default_nav .li1").on("mouseenter",function(){var t=$(this),n=t.find(".ul2");n.length>0&&n.delay(200).animate({height:"show",opacity:"show"})}).on("mouseleave",function(){var t=$(this),n=t.find(".ul2");n.length>0&&n.stop(!0,!0).animate({height:"hide",opacity:"hide"})});$(".nav-toggle, .tablet-nav--toggle").on("click",function(){n.toggleClass("tablet-nav-active")});$(".tablet-nav").on("clickoutside",function(t){$(t.target).is(".nav-toggle-in")||n.removeClass("tablet-nav-active")});$(".tablet-nav").on("transitionend webkitTransitionEnd oTransitionEnd",function(){$("body").is(".tablet-nav-active")?$(".tablet-nav--toggle").addClass("active"):($(".tablet-nav--toggle").removeClass("active"),$(".tablet-nav .li1").removeClass("active"))});$(".hc-toggle").on("click",function(){$(this).parent(".li1").toggleClass("active")});$("#main_nav a").on("click",function(){var n=$(this).text();typeof dataLayer!="undefined"&&dataLayer.push({event:"navigation-click",category:"Header Navigation",action:"Navigation Clicked",label:n})})}(),function(){"use strict";var n=$(".date_picker input");n.length>0&&(n.bsDatepicker({format:"dd/mm/yy",orientation:"right",autoclose:!0,todayHighlight:!0}),$(".date_picker").click(function(){$(this).find("input").focus()}))}(),function(){"use strict";var n=$(".tabs li a"),t=$(".tabs_content > .sf_cols");$(".tabs li").each(function(n,t){t=$(t);n===0&&t.find("a").addClass("active");t.find("a").attr({href:"#tab_"+n+"",role:"tab"})});t.each(function(n,t){t=$(t);t.attr({"data-tab":"#tab_"+n+"",role:"tabpanel"});n===0&&t.addClass("active").show()});n.on("click",function(i){var r=$(this),f=r.attr("href"),u=$('.tabs_content > .sf_cols[data-tab="'+f+'"]');u.is(":hidden")&&(n.removeClass("active"),r.addClass("active"),t.removeClass("active").hide(),u.addClass("active").animate({opacity:"show"}));i.preventDefault()})}(),function(){"use strict";$(".styled_select select:not(:hidden)").customSelect()}(),function(){"use strict";var n=$("body"),t=$("#canvas");$("#bw_fav, #oc_close").on("click",function(i){if(i.stopPropagation(),n.is(".oc_active"))n.removeClass("oc_active"),oldIE&&t.animate({left:"0"});else{var r=FHManager.GetControl();r!==null&&r.loadData();$(".header-action").removeClass("active").off("clickoutside");n.addClass("oc_active");oldIE&&t.animate({left:"-350px"})}});$("html, body").on("click",function(i){var r=$("#off_canvas");r.is(i.target)||r.has(i.target).length!==0||(n.removeClass("oc_active"),oldIE&&t.animate({left:"0"}))})}(),function(){BestWestern.DefaultShowLockPrice=function(){$(".usp-bar").addClass("usp-bar--variant-c");$(".lock-rates").show()};var t=!1,i=!1,n=[],r=function(){while(n.length)n.pop()()};BestWestern.ShowLockPrice=function(u,f){f!==!0?(t=!0,u!==undefined&&n.push(u),i===!0&&r()):(i=!0,t===!0&&r())}}(),function(){"use strict";BestWestern.ConfigureOverLays=function(){$(".has_overlay .ha_txt, .has_overlay .ha_icon").on("click",function(n){var i=$(this),t=i.next(".header_overlay"),r=i.parents(".has_overlay").data("rewardsuser");r!==undefined&&(t=i.next('.header_overlay[data-rewardsuser="'+r+'"]'));t.is(":hidden")?($(".header_overlay").removeClass("active").fadeOut(200),t.addClass("active").fadeIn(200)):t.removeClass("active").fadeOut(200);n.stopPropagation()});$("html, body").on("click",function(n){var t=$(".has_overlay");t.is(n.target)||t.has(n.target).length!==0||t.find(".header_overlay").removeClass("active").fadeOut(200)})};BestWestern.AddWindowLoad(BestWestern.ConfigureOverLays,0)}(),function(){"use strict";$(".auth_tabs li").on("click",function(){var n=$(this),i=n.data("auth-tab"),t=$('.auth_tab_content[data-auth-tab="'+i+'"]');t.is(":hidden")&&($(".auth_tabs li").removeClass("active"),n.addClass("active"),$(".auth_tab_content").hide(),t.fadeIn())});$('.check_password input[type="checkbox"]').on("change",function(){var t=$(this),n=$(".signup_password");t.is(":checked")?n.attr("type","text"):n.attr("type","password")})}(),function(){"use strict";equaliseHeights()}();infoDeskTip=function(n,t,i){n=$(n);var u=$(t).html(),r=$(u).appendTo("body");if(r.show().css({top:n.offset().top-r.height()-20,left:n.offset().left-r.outerWidth()/2+n.outerWidth()/2}),i)n.on("clickoutside",function(){setTimeout(function(){r.remove()},100)});else n.on("mouseleave",function(){setTimeout(function(){r.remove()},100)})},function(){"use strict";var n=$(".accordion_header"),t=$(".accordion_content");n.on("click",function(){var n=$(this),t=n.next(),i;t.is(":hidden")?(n.addClass("active"),t.slideDown("linear"),equaliseHeights(),i=$("a",this).text(),typeof dataLayer!="undefined"&&dataLayer.push({event:"accordion-interaction",category:"Accordion Interaction",action:"Facilities Accordion",label:i})):(n.removeClass("active"),t.slideUp("linear"))});$(".accordion_header.active").next().show();equaliseHeights()}(),function(){"use strict";BestWestern.ConfigureLoginPanels=function(){BestWestern.IsAuthenticated(function(n){n===null||n.Authenticated!==!0?($("[data-show-logged-out]").show(),$("[data-show-logged-in]").hide()):($(".username").html(n.FirstName),$("[data-show-logged-out]").hide(),$("[data-show-logged-in]").show())})};BestWestern.AddWindowLoad(BestWestern.ConfigureLoginPanels,0)}(),function(){"use strict";BestWestern.LastKeyPressEnter=!1}(),function(){"use strict";homePromo()}(),function(){"use strict";var n=function(){BestWestern.IsAuthenticated()||$("#ha_messages .ha_message_icon").removeClass("ha_message_icon").addClass("ha_alert_icon")};BestWestern.AddWindowLoad(n,0)}(),function(){"use strict";var n=[],t=function(n,t){var i=n.data("promo-id"),r=n.data("promo-name");i&&r&&(t.push({id:i,name:r,creative:n.data("promo-creative")||null,position:n.data("promo-position")||null}),window.console&&console.log(t))};$("[data-promo-id]").each(function(){var i=$(this);t(i,n)});typeof dataLayer!="undefined"&&n.length>0&&dataLayer.push({ecommerce:{promoView:{promotions:n}}});$("[data-promo-id]").on("click",function(){var n=$(this),r=n.data("promo-id"),u=n.data("promo-name"),i=[];t(n,i);typeof dataLayer!="undefined"&&i.length>0&&dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:i}},eventCallback:function(){document.location=n[0].href}})})}(),function(){"use strict";BestWestern.EventHandler.addEventListener("LoginSuccess",function(n){typeof dataLayer!="undefined"&&dataLayer.push({userId:n.toString(),event:"authentication"})});BestWestern.EventHandler.addEventListener("AnonCheckout",function(n){typeof dataLayer!="undefined"&&dataLayer.push({userId:n.toString(),event:"authentication"});window.location.href.indexOf("/checkout/confirmation")>-1&&BestWestern.StorageManager.PutCookie("AnonLayerId","")})}(),function(){(oldIE==!0||navigator.appVersion.indexOf("MSIE 10")!==-1)&&(sessionStorage.getItem("legacy")=="true"?console.log("legacy message seen"):(sessionStorage.setItem("legacy","true"),$.fancybox({content:'<div style="padding:10% 4%;text-align:center;"><h2 class="mb25">PLEASE UPDATE YOUR WEB BROWSER<\/h2><p>In order to provide the best security for our customers, from early June our website will no longer support your current browser.<\/p><p>Please consider updating your browser to the most recent version so that you can continue to enjoy the Best Western website.<\/p><\/div>',autoSize:!1,width:1100,height:"auto",margin:[125,20,20,20],beforeShow:function(){$("body").append('<div class="fancybox-overlay fancybox-overlay-fixed legacy-fancy-bg" style="display:block;"><\/div>')},afterClose:function(){$(".legacy-fancy-bg").hide()}})))}();$(window).on("resize",function(){"use strict";clearTimeout(this.id);this.id=setTimeout(function(){equaliseHeights();$("#tablet_nav").removeAttr("style");typeof Waypoint!="undefined"&&Waypoint.refreshAll()},150)});(function(){BestWestern.EditSearch=function(){if(BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.Header)){var n=BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.Header);return n.initSearchClickHandler(),!1}}})();var showIntroText=function(){$("#show_intro_text").removeClass("down_btn").addClass("up_btn").text("View less");$("#intro_excerpt").hide();$("#intro_text").show()},hideIntroText=function(){$("#show_intro_text").removeClass("up_btn").addClass("down_btn").text("View more");$("#intro_text").hide();$("#intro_excerpt").show()},showIntro=function(){$("#intro_text").is(":hidden")?showIntroText():hideIntroText()};~function(){"use strict";var n=document.querySelector(".packages-cat-listing"),t;n!==null&&(t=document.querySelectorAll(".pcl__item"),Array.prototype.forEach.call(t,function(t){var i=t.getAttribute("data-pcl-hex"),f;t.querySelector(".pcl__item__title").setAttribute("style","background: "+i+";");t.querySelector(".button").setAttribute("style","background: "+i+";");t.querySelector(".pcl-item-shade").setAttribute("style","background: "+i+";");var u=t.querySelector("h2"),r=u.textContent.split(" "),e=r[0];r.splice(0,1);f="<strong>"+e+"<\/strong> "+r.join(" ");u.innerHTML=f;setTimeout(function(){n.setAttribute("style","opacity: 1;")},500)}))}(),function(){$(document).ready(function(){$("input.disableAutoFill").each(function(){$(this).attr("autocomplete","_off")})})}();
/*! URI.js v1.13.2 http://medialize.github.io/URI.js/ */
(function(n,t){"object"==typeof exports?module.exports=t(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],t):n.URI=t(n.punycode,n.IPv6,n.SecondLevelDomains,n)})(this,function(n,t,i,r){function u(n,t){return(this instanceof u)?(void 0===n&&(n="undefined"!=typeof location?location.href+"":""),this.href(n),void 0!==t?this.absoluteTo(t):this):new u(n,t)}function l(n){return n.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function v(n){return void 0===n?"Undefined":String(Object.prototype.toString.call(n)).slice(8,-1)}function e(n){return"Array"===v(n)}function a(n,t){var i,r,u;if(e(t)){for(i=0,r=t.length;i<r;i++)if(!a(n,t[i]))return!1;return!0}for(u=v(t),i=0,r=n.length;i<r;i++)if("RegExp"===u){if("string"==typeof n[i]&&n[i].match(t))return!0}else if(n[i]===t)return!0;return!1}function p(n,t){if(!e(n)||!e(t)||n.length!==t.length)return!1;n.sort();t.sort();for(var i=0,r=n.length;i<r;i++)if(n[i]!==t[i])return!1;return!0}function b(n){return escape(n)}function y(n){return encodeURIComponent(n).replace(/[!'()*]/g,b).replace(/\*/g,"%2A")}var k=r&&r.URI,f,h,s,o,c,w;u.version="1.13.2";f=u.prototype;h=Object.prototype.hasOwnProperty;u._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:u.duplicateQueryParameters,escapeQuerySpace:u.escapeQuerySpace}};u.duplicateQueryParameters=!1;u.escapeQuerySpace=!0;u.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;u.idn_expression=/[^a-z0-9\.-]/i;u.punycode_expression=/(xn--)/i;u.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;u.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;u.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;u.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};u.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};u.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/;u.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"};u.getDomAttribute=function(n){if(n&&n.nodeName){var t=n.nodeName.toLowerCase();return"input"===t&&"image"!==n.type?void 0:u.domAttributes[t]}};u.encode=y;u.decode=decodeURIComponent;u.iso8859=function(){u.encode=escape;u.decode=unescape};u.unicode=function(){u.encode=y;u.decode=decodeURIComponent};u.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};u.encodeQuery=function(n,t){var i=u.encode(n+"");return void 0===t&&(t=u.escapeQuerySpace),t?i.replace(/%20/g,"+"):i};u.decodeQuery=function(n,t){n+="";void 0===t&&(t=u.escapeQuerySpace);try{return u.decode(t?n.replace(/\+/g,"%20"):n)}catch(i){return n}};u.recodePath=function(n){n=(n+"").split("/");for(var t=0,i=n.length;t<i;t++)n[t]=u.encodePathSegment(u.decode(n[t]));return n.join("/")};u.decodePath=function(n){n=(n+"").split("/");for(var t=0,i=n.length;t<i;t++)n[t]=u.decodePathSegment(n[t]);return n.join("/")};s={encode:"encode",decode:"decode"};c=function(n,t){return function(i){return u[t](i+"").replace(u.characters[n][t].expression,function(i){return u.characters[n][t].map[i]})}};for(o in s)u[o+"PathSegment"]=c("pathname",s[o]);u.encodeReserved=c("reserved","encode");u.parse=function(n,t){var i;return t||(t={}),i=n.indexOf("#"),-1<i&&(t.fragment=n.substring(i+1)||null,n=n.substring(0,i)),i=n.indexOf("?"),-1<i&&(t.query=n.substring(i+1)||null,n=n.substring(0,i)),"//"===n.substring(0,2)?(t.protocol=null,n=n.substring(2),n=u.parseAuthority(n,t)):(i=n.indexOf(":"),-1<i&&(t.protocol=n.substring(0,i)||null,t.protocol&&!t.protocol.match(u.protocol_expression)?t.protocol=void 0:"file"===t.protocol?n=n.substring(i+3):"//"===n.substring(i+1,i+3)?(n=n.substring(i+3),n=u.parseAuthority(n,t)):(n=n.substring(i+1),t.urn=!0))),t.path=n,t};u.parseHost=function(n,t){var i=n.indexOf("/"),r;return-1===i&&(i=n.length),"["===n.charAt(0)?(r=n.indexOf("]"),t.hostname=n.substring(1,r)||null,t.port=n.substring(r+2,i)||null,"/"===t.port&&(t.port=null)):n.indexOf(":")!==n.lastIndexOf(":")?(t.hostname=n.substring(0,i)||null,t.port=null):(r=n.substring(0,i).split(":"),t.hostname=r[0]||null,t.port=r[1]||null),t.hostname&&"/"!==n.substring(i).charAt(0)&&(i++,n="/"+n),n.substring(i)||"/"};u.parseAuthority=function(n,t){return n=u.parseUserinfo(n,t),u.parseHost(n,t)};u.parseUserinfo=function(n,t){var i=n.indexOf("/"),r=-1<i?n.lastIndexOf("@",i):n.indexOf("@");return-1<r&&(-1===i||r<i)?(i=n.substring(0,r).split(":"),t.username=i[0]?u.decode(i[0]):null,i.shift(),t.password=i[0]?u.decode(i.join(":")):null,n=n.substring(r+1)):(t.username=null,t.password=null),n};u.parseQuery=function(n,t){if(!n)return{};if(n=n.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!n)return{};for(var i={},o=n.split("&"),s=o.length,r,f,e=0;e<s;e++)r=o[e].split("="),f=u.decodeQuery(r.shift(),t),r=r.length?u.decodeQuery(r.join("="),t):null,i[f]?("string"==typeof i[f]&&(i[f]=[i[f]]),i[f].push(r)):i[f]=r;return i};u.build=function(n){var t="";return n.protocol&&(t+=n.protocol+":"),!n.urn&&(t||n.hostname)&&(t+="//"),t+=u.buildAuthority(n)||"","string"==typeof n.path&&("/"!==n.path.charAt(0)&&"string"==typeof n.hostname&&(t+="/"),t+=n.path),"string"==typeof n.query&&n.query&&(t+="?"+n.query),"string"==typeof n.fragment&&n.fragment&&(t+="#"+n.fragment),t};u.buildHost=function(n){var t="";if(n.hostname)t=u.ip6_expression.test(n.hostname)?t+("["+n.hostname+"]"):t+n.hostname;else return"";return n.port&&(t+=":"+n.port),t};u.buildAuthority=function(n){return u.buildUserinfo(n)+u.buildHost(n)};u.buildUserinfo=function(n){var t="";return n.username&&(t+=u.encode(n.username),n.password&&(t+=":"+u.encode(n.password)),t+="@"),t};u.buildQuery=function(n,t,i){var o="",s,r,f,c;for(r in n)if(h.call(n,r)&&r)if(e(n[r]))for(s={},f=0,c=n[r].length;f<c;f++)void 0!==n[r][f]&&void 0===s[n[r][f]+""]&&(o+="&"+u.buildQueryParameter(r,n[r][f],i),!0!==t&&(s[n[r][f]+""]=!0));else void 0!==n[r]&&(o+="&"+u.buildQueryParameter(r,n[r],i));return o.substring(1)};u.buildQueryParameter=function(n,t,i){return u.encodeQuery(n,i)+(null!==t?"="+u.encodeQuery(t,i):"")};u.addQuery=function(n,t,i){if("object"==typeof t)for(var r in t)h.call(t,r)&&u.addQuery(n,r,t[r]);else if("string"==typeof t)void 0===n[t]?n[t]=i:("string"==typeof n[t]&&(n[t]=[n[t]]),e(i)||(i=[i]),n[t]=n[t].concat(i));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};u.removeQuery=function(n,t,i){var r,s,f,o;if(e(t))for(i=0,r=t.length;i<r;i++)n[t[i]]=void 0;else if("object"==typeof t)for(r in t)h.call(t,r)&&u.removeQuery(n,r,t[r]);else if("string"==typeof t)if(void 0!==i){if(n[t]===i)n[t]=void 0;else if(e(n[t])){if(r=n[t],s={},e(i))for(f=0,o=i.length;f<o;f++)s[i[f]]=!0;else s[i]=!0;for(f=0,o=r.length;f<o;f++)void 0!==s[r[f]]&&(r.splice(f,1),o--,f--);n[t]=r}}else n[t]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};u.hasQuery=function(n,t,i,r){if("object"==typeof t){for(var f in t)if(h.call(t,f)&&!u.hasQuery(n,f,t[f]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(v(i)){case"Undefined":return t in n;case"Boolean":return n=Boolean(e(n[t])?n[t].length:n[t]),i===n;case"Function":return!!i(n[t],t,n);case"Array":return e(n[t])?(r?a:p)(n[t],i):!1;case"RegExp":return e(n[t])?r?a(n[t],i):!1:Boolean(n[t]&&n[t].match(i));case"Number":i=String(i);case"String":return e(n[t])?r?a(n[t],i):!1:n[t]===i;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};u.commonPath=function(n,t){for(var r=Math.min(n.length,t.length),i=0;i<r;i++)if(n.charAt(i)!==t.charAt(i)){i--;break}return 1>i?n.charAt(0)===t.charAt(0)&&"/"===n.charAt(0)?"/":"":(("/"!==n.charAt(i)||"/"!==t.charAt(i))&&(i=n.substring(0,i).lastIndexOf("/")),n.substring(0,i+1))};u.withinString=function(n,t,i){var r,f,e;i||(i={});var o=i.start||u.findUri.start,s=i.end||u.findUri.end,h=i.trim||u.findUri.trim;for(o.lastIndex=0;;){if(r=o.exec(n),!r)break;(r=r.index,i.ignoreHtml&&(f=n.slice(Math.max(r-3,0),r),f&&/[a-z0-9-]=["']?$/i.test(f)))||(f=r+n.slice(r).search(s),e=n.slice(r,f).replace(h,""),i.ignore&&i.ignore.test(e)||(f=r+e.length,e=t(e,r,f,n),n=n.slice(0,r)+e+n.slice(f),o.lastIndex=r+e.length))}return o.lastIndex=0,n};u.ensureValidHostname=function(t){if(t.match(u.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(n.toASCII(t).match(u.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');}};u.noConflict=function(n){return n?(n={URI:this.noConflict()},r.URITemplate&&"function"==typeof r.URITemplate.noConflict&&(n.URITemplate=r.URITemplate.noConflict()),r.IPv6&&"function"==typeof r.IPv6.noConflict&&(n.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&"function"==typeof r.SecondLevelDomains.noConflict&&(n.SecondLevelDomains=r.SecondLevelDomains.noConflict()),n):(r.URI===this&&(r.URI=k),this)};f.build=function(n){return!0===n?this._deferred_build=!0:(void 0===n||this._deferred_build)&&(this._string=u.build(this._parts),this._deferred_build=!1),this};f.clone=function(){return new u(this)};f.valueOf=f.toString=function(){return this.build(!1)._string};s={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};c=function(n){return function(t,i){return void 0===t?this._parts[n]||"":(this._parts[n]=t||null,this.build(!i),this)}};for(o in s)f[o]=c(s[o]);s={query:"?",fragment:"#"};c=function(n,t){return function(i,r){return void 0===i?this._parts[n]||"":(null!==i&&(i+="",i.charAt(0)===t&&(i=i.substring(1))),this._parts[n]=i,this.build(!r),this)}};for(o in s)f[o]=c(o,s[o]);s={search:["?","query"],hash:["#","fragment"]};c=function(n,t){return function(i,r){var u=this[n](i,r);return"string"==typeof u&&u.length?t+u:u}};for(o in s)f[o]=c(s[o][1],s[o][0]);f.pathname=function(n,t){if(void 0===n||!0===n){var i=this._parts.path||(this._parts.hostname?"/":"");return n?u.decodePath(i):i}return this._parts.path=n?u.recodePath(n):"/",this.build(!t),this};f.path=f.pathname;f.href=function(n,t){var f,i,r;if(void 0===n)return this.toString();if(this._string="",this._parts=u._parts(),i=n instanceof u,r="object"==typeof n&&(n.hostname||n.path||n.pathname),n.nodeName&&(r=u.getDomAttribute(n),n=n[r]||"",r=!1),!i&&r&&void 0!==n.pathname&&(n=n.toString()),"string"==typeof n)this._parts=u.parse(n,this._parts);else if(i||r)for(f in i=i?n._parts:n,i)h.call(this._parts,f)&&(this._parts[f]=i[f]);else throw new TypeError("invalid input");return this.build(!t),this};f.is=function(n){var r=!1,f=!1,e=!1,t=!1,s=!1,h=!1,c=!1,o=!this._parts.urn;this._parts.hostname&&(o=!1,f=u.ip4_expression.test(this._parts.hostname),e=u.ip6_expression.test(this._parts.hostname),r=f||e,s=(t=!r)&&i&&i.has(this._parts.hostname),h=t&&u.idn_expression.test(this._parts.hostname),c=t&&u.punycode_expression.test(this._parts.hostname));switch(n.toLowerCase()){case"relative":return o;case"absolute":return!o;case"domain":case"name":return t;case"sld":return s;case"ip":return r;case"ip4":case"ipv4":case"inet4":return f;case"ip6":case"ipv6":case"inet6":return e;case"idn":return h;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return c}return null};var d=f.protocol,g=f.port,nt=f.hostname;return f.protocol=function(n,t){if(void 0!==n&&n&&(n=n.replace(/:(\/\/)?$/,""),!n.match(u.protocol_expression)))throw new TypeError('Protocol "'+n+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return d.call(this,n,t)},f.scheme=f.protocol,f.port=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0!==n&&(0===n&&(n=null),n&&(n+="",":"===n.charAt(0)&&(n=n.substring(1)),n.match(/[^0-9]/))))throw new TypeError('Port "'+n+'" contains characters other than [0-9]');return g.call(this,n,t)},f.hostname=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0!==n){var i={};u.parseHost(n,i);n=i.hostname}return nt.call(this,n,t)},f.host=function(n,t){return this._parts.urn?void 0===n?"":this:void 0===n?this._parts.hostname?u.buildHost(this._parts):"":(u.parseHost(n,this._parts),this.build(!t),this)},f.authority=function(n,t){return this._parts.urn?void 0===n?"":this:void 0===n?this._parts.hostname?u.buildAuthority(this._parts):"":(u.parseAuthority(n,this._parts),this.build(!t),this)},f.userinfo=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n){if(!this._parts.username)return"";var i=u.buildUserinfo(this._parts);return i.substring(0,i.length-1)}return"@"!==n[n.length-1]&&(n+="@"),u.parseUserinfo(n,this._parts),this.build(!t),this},f.resource=function(n,t){var i;return void 0===n?this.path()+this.search()+this.hash():(i=u.parse(n),this._parts.path=i.path,this._parts.query=i.query,this._parts.fragment=i.fragment,this.build(!t),this)},f.subdomain=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,i)||""}return i=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,i),i=new RegExp("^"+l(i)),n&&"."!==n.charAt(n.length-1)&&(n+="."),n&&u.ensureValidHostname(n),this._parts.hostname=this._parts.hostname.replace(i,n),this.build(!t),this},f.domain=function(n,t){if(this._parts.urn)return void 0===n?"":this;if("boolean"==typeof n&&(t=n,n=void 0),void 0===n){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.match(/\./g);return i&&2>i.length?this._parts.hostname:(i=this._parts.hostname.length-this.tld(t).length-1,i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||"")}if(!n)throw new TypeError("cannot set domain empty");return u.ensureValidHostname(n),!this._parts.hostname||this.is("IP")?this._parts.hostname=n:(i=new RegExp(l(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(i,n)),this.build(!t),this},f.tld=function(n,t){if(this._parts.urn)return void 0===n?"":this;if("boolean"==typeof n&&(t=n,n=void 0),void 0===n){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.lastIndexOf("."),r=this._parts.hostname.substring(r+1);return!0!==t&&i&&i.list[r.toLowerCase()]?i.get(this._parts.hostname)||r:r}if(n)if(n.match(/[^a-zA-Z0-9-]/))if(i&&i.is(n))r=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(r,n);else throw new TypeError('TLD "'+n+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");r=new RegExp(l(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(r,n)}else throw new TypeError("cannot set TLD empty");return this.build(!t),this},f.directory=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n||!0===n){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var i=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,i)||(this._parts.hostname?"/":"");return n?u.decodePath(i):i}return i=this._parts.path.length-this.filename().length,i=this._parts.path.substring(0,i),i=new RegExp("^"+l(i)),this.is("relative")||(n||(n="/"),"/"!==n.charAt(0)&&(n="/"+n)),n&&"/"!==n.charAt(n.length-1)&&(n+="/"),n=u.recodePath(n),this._parts.path=this._parts.path.replace(i,n),this.build(!t),this},f.filename=function(n,t){var i,r;return this._parts.urn?void 0===n?"":this:void 0===n||!0===n?!this._parts.path||"/"===this._parts.path?"":(i=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(i+1),n?u.decodePathSegment(i):i):(i=!1,"/"===n.charAt(0)&&(n=n.substring(1)),n.match(/\.?\//)&&(i=!0),r=new RegExp(l(this.filename())+"$"),n=u.recodePath(n),this._parts.path=this._parts.path.replace(r,n),i?this.normalizePath(t):this.build(!t),this)},f.suffix=function(n,t){if(this._parts.urn)return void 0===n?"":this;if(void 0===n||!0===n){if(!this._parts.path||"/"===this._parts.path)return"";var i=this.filename(),r=i.lastIndexOf(".");return-1===r?"":(i=i.substring(r+1),i=/^[a-z0-9%]+$/i.test(i)?i:"",n?u.decodePathSegment(i):i)}if("."===n.charAt(0)&&(n=n.substring(1)),i=this.suffix())r=n?new RegExp(l(i)+"$"):new RegExp(l("."+i)+"$");else{if(!n)return this;this._parts.path+="."+u.recodePath(n)}return r&&(n=u.recodePath(n),this._parts.path=this._parts.path.replace(r,n)),this.build(!t),this},f.segment=function(n,t,i){var u=this._parts.urn?":":"/",r=this.path(),f="/"===r.substring(0,1),r=r.split(u),o;if(void 0!==n&&"number"!=typeof n&&(i=t,t=n,n=void 0),void 0!==n&&"number"!=typeof n)throw Error('Bad segment "'+n+'", must be 0-based integer');if(f&&r.shift(),0>n&&(n=Math.max(r.length+n,0)),void 0===t)return void 0===n?r:r[n];if(null===n||void 0===r[n])if(e(t))for(r=[],n=0,o=t.length;n<o;n++)(t[n].length||r.length&&r[r.length-1].length)&&(r.length&&!r[r.length-1].length&&r.pop(),r.push(t[n]));else(t||"string"==typeof t)&&(""===r[r.length-1]?r[r.length-1]=t:r.push(t));else t||"string"==typeof t&&t.length?r[n]=t:r.splice(n,1);return f&&r.unshift(""),this.path(r.join(u),i)},f.segmentCoded=function(n,t,i){var r,f;if("number"!=typeof n&&(i=t,t=n,n=void 0),void 0===t){if(n=this.segment(n,t,i),e(n))for(r=0,f=n.length;r<f;r++)n[r]=u.decode(n[r]);else n=void 0!==n?u.decode(n):void 0;return n}if(e(t))for(r=0,f=t.length;r<f;r++)t[r]=u.decode(t[r]);else t="string"==typeof t?u.encode(t):t;return this.segment(n,t,i)},w=f.query,f.query=function(n,t){if(!0===n)return u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof n){var i=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r=n.call(this,i);return this._parts.query=u.buildQuery(r||i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==n&&"string"!=typeof n?(this._parts.query=u.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):w.call(this,n,t)},f.setQuery=function(n,t,i){var f=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace),r;if("object"==typeof n)for(r in n)h.call(n,r)&&(f[r]=n[r]);else if("string"==typeof n)f[n]=void 0!==t?t:null;else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=u.buildQuery(f,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof n&&(i=t),this.build(!i),this},f.addQuery=function(n,t,i){var r=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return u.addQuery(r,n,void 0===t?null:t),this._parts.query=u.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof n&&(i=t),this.build(!i),this},f.removeQuery=function(n,t,i){var r=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return u.removeQuery(r,n,t),this._parts.query=u.buildQuery(r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof n&&(i=t),this.build(!i),this},f.hasQuery=function(n,t,i){var r=u.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return u.hasQuery(r,n,t,i)},f.setSearch=f.setQuery,f.addSearch=f.addQuery,f.removeSearch=f.removeQuery,f.hasSearch=f.hasQuery,f.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},f.normalizeProtocol=function(n){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!n)),this},f.normalizeHostname=function(i){return this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!i)),this},f.normalizePort=function(n){return"string"==typeof this._parts.protocol&&this._parts.port===u.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!n)),this},f.normalizePath=function(n){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var e,t=this._parts.path,r="",i,f;for("/"!==t.charAt(0)&&(e=!0,t="/"+t),t=t.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(r=t.substring(1).match(/^(\.\.\/)+/)||"")&&(r=r[0]);;){if(i=t.indexOf("/.."),-1===i)break;else if(0===i){t=t.substring(3);continue}f=t.substring(0,i).lastIndexOf("/");-1===f&&(f=i);t=t.substring(0,f)+t.substring(i+3)}return e&&this.is("relative")&&(t=r+t.substring(1)),t=u.recodePath(t),this._parts.path=t,this.build(!n),this},f.normalizePathname=f.normalizePath,f.normalizeQuery=function(n){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(u.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!n)),this},f.normalizeFragment=function(n){return this._parts.fragment||(this._parts.fragment=null,this.build(!n)),this},f.normalizeSearch=f.normalizeQuery,f.normalizeHash=f.normalizeFragment,f.iso8859=function(){var n=u.encode,t=u.decode;return u.encode=escape,u.decode=decodeURIComponent,this.normalize(),u.encode=n,u.decode=t,this},f.unicode=function(){var n=u.encode,t=u.decode;return u.encode=y,u.decode=unescape,this.normalize(),u.encode=n,u.decode=t,this},f.readable=function(){var t=this.clone(),i,f,r;if(t.username("").password("").normalize(),i="",t._parts.protocol&&(i+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&n?(i+=n.toUnicode(t._parts.hostname),t._parts.port&&(i+=":"+t._parts.port)):i+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(i+="/"),i+=t.path(!0),t._parts.query){for(var r="",e=0,o=t._parts.query.split("&"),s=o.length;e<s;e++)f=(o[e]||"").split("="),r=r+("&"+u.decodeQuery(f[0],this._parts.escapeQuerySpace).replace(/&/g,"%26")),void 0!==f[1]&&(r+="="+u.decodeQuery(f[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"));i+="?"+r.substring(1)}return i+u.decodeQuery(t.hash(),!0)},f.absoluteTo=function(n){var t=this.clone(),f=["protocol","username","password","hostname","port"],i,r;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(n instanceof u||(n=new u(n)),t._parts.protocol||(t._parts.protocol=n._parts.protocol),this._parts.hostname)return t;for(i=0;r=f[i];i++)t._parts[r]=n._parts[r];return t._parts.path?".."===t._parts.path.substring(-2)&&(t._parts.path+="/"):(t._parts.path=n._parts.path,t._parts.query||(t._parts.query=n._parts.query)),"/"!==t.path().charAt(0)&&(n=n.directory(),t._parts.path=(n?n+"/":"")+t._parts.path,t.normalizePath()),t.build(),t},f.relativeTo=function(n){var r=this.clone().normalize(),t,i,f,e;if(r._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(n=new u(n).normalize(),t=r._parts,i=n._parts,f=r.path(),e=n.path(),"/"!==f.charAt(0))throw Error("URI is already relative");if("/"!==e.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===i.protocol&&(t.protocol=null),t.username===i.username&&t.password===i.password&&null===t.protocol&&null===t.username&&null===t.password&&t.hostname===i.hostname&&t.port===i.port)t.hostname=null,t.port=null;else return r.build();return f===e?(t.path="",r.build()):(n=u.commonPath(r.path(),n.path()),!n)?r.build():(i=i.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),t.path=i+t.path.substring(n.length),r.build())},f.equals=function(n){var f=this.clone();n=new u(n);var i={},r={},o={},t;if(f.normalize(),n.normalize(),f.toString()===n.toString())return!0;if(i=f.query(),r=n.query(),f.query(""),n.query(""),f.toString()!==n.toString()||i.length!==r.length)return!1;i=u.parseQuery(i,this._parts.escapeQuerySpace);r=u.parseQuery(r,this._parts.escapeQuerySpace);for(t in i)if(h.call(i,t)){if(e(i[t])){if(!p(i[t],r[t]))return!1}else if(i[t]!==r[t])return!1;o[t]=!0}for(t in r)if(h.call(r,t)&&!o[t])return!1;return!0},f.duplicateQueryParameters=function(n){return this._parts.duplicateQueryParameters=!!n,this},f.escapeQuerySpace=function(n){return this._parts.escapeQuerySpace=!!n,this},u}),function(n,t){"object"==typeof exports?module.exports=t(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],t):n.URITemplate=t(n.URI,n)}(this,function(n,t){function i(n){return i._cache[n]?i._cache[n]:(this instanceof i)?(this.expression=n,i._cache[n]=this,this):new i(n)}function r(n){this.data=n;this.cache={}}var e=t&&t.URITemplate,o=Object.prototype.hasOwnProperty,u=i.prototype,f={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return i._cache={},i.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,i.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/,i.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/,i.expand=function(n,t){for(var u=f[n.operator],h=u.named?"Named":"Unnamed",c=n.variables,e=[],o,r,s=0;r=c[s];s++)o=t.get(r.name),o.val.length?e.push(i["expand"+h](o,u,r.explode,r.explode&&u.separator||",",r.maxlength,r.name)):o.type&&e.push("");return e.length?u.prefix+e.join(u.separator):""},i.expandNamed=function(t,i,r,u,f,e){var c="",o=i.encode,a,l,h,s,v;for(i=i.empty_name_separator,a=!t[o].length,l=2===t.type?"":n[o](e),s=0,v=t.val.length;s<v;s++)f?(h=n[o](t.val[s][1].substring(0,f)),2===t.type&&(l=n[o](t.val[s][0].substring(0,f)))):a?(h=n[o](t.val[s][1]),2===t.type?(l=n[o](t.val[s][0]),t[o].push([l,h])):t[o].push([void 0,h])):(h=t[o][s][1],2===t.type&&(l=t[o][s][0])),c&&(c+=u),r?c+=l+(i||h?"=":"")+h:(s||(c+=n[o](e)+(i||h?"=":"")),2===t.type&&(c+=l+","),c+=h);return c},i.expandUnnamed=function(t,i,r,u,f){var o="",s=i.encode,c,l,h,e,a;for(i=i.empty_name_separator,c=!t[s].length,e=0,a=t.val.length;e<a;e++)f?h=n[s](t.val[e][1].substring(0,f)):c?(h=n[s](t.val[e][1]),t[s].push([2===t.type?n[s](t.val[e][0]):void 0,h])):h=t[s][e][1],o&&(o+=u),2===t.type&&(l=f?n[s](t.val[e][0].substring(0,f)):t[s][e][0],o+=l,o=r?o+(i||h?"=":""):o+","),o+=h;return o},i.noConflict=function(){return t.URITemplate===i&&(t.URITemplate=e),i},u.expand=function(n){var u="",t,f;for(this.parts&&this.parts.length||this.parse(),n instanceof r||(n=new r(n)),t=0,f=this.parts.length;t<f;t++)u+="string"==typeof this.parts[t]?this.parts[t]:i.expand(this.parts[t],n);return u},u.parse=function(){var o=this.expression,h=i.EXPRESSION_PATTERN,l=i.VARIABLE_PATTERN,a=i.VARIABLE_NAME_PATTERN,u=[],s=0,r,n,t,e,c;for(h.lastIndex=0;;){if(n=h.exec(o),null===n){u.push(o.substring(s));break}else u.push(o.substring(s,n.index)),s=n.index+n[0].length;if(!f[n[1]])throw Error('Unknown Operator "'+n[1]+'" in "'+n[0]+'"');if(!n[3])throw Error('Unclosed Expression "'+n[0]+'"');for(r=n[2].split(","),e=0,c=r.length;e<c;e++){if(t=r[e].match(l),null===t)throw Error('Invalid Variable "'+r[e]+'" in "'+n[0]+'"');if(t[1].match(a))throw Error('Invalid Variable Name "'+t[1]+'" in "'+n[0]+'"');r[e]={name:t[1],explode:!!t[3],maxlength:t[4]&&parseInt(t[4],10)}}if(!r.length)throw Error('Expression Missing Variable(s) "'+n[0]+'"');u.push({expression:n[0],operator:n[1],variables:r})}return u.length||u.push(o),this.parts=u,this},r.prototype.get=function(n){var t=this.data,r={type:0,val:[],encode:[],encodeReserved:[]},i;if(void 0!==this.cache[n])return this.cache[n];if(this.cache[n]=r,t="[object Function]"===String(Object.prototype.toString.call(t))?t(n):"[object Function]"===String(Object.prototype.toString.call(t[n]))?t[n](n):t[n],void 0!==t&&null!==t)if("[object Array]"===String(Object.prototype.toString.call(t))){for(i=0,n=t.length;i<n;i++)void 0!==t[i]&&null!==t[i]&&r.val.push([void 0,String(t[i])]);r.val.length&&(r.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(t))){for(i in t)o.call(t,i)&&void 0!==t[i]&&null!==t[i]&&r.val.push([i,String(t[i])]);r.val.length&&(r.type=2)}else r.type=1,r.val.push([void 0,String(t)]);return r},n.expand=function(t,r){var u=new i(t).expand(r);return new n(u)},i});
(function(){BestWestern.SearchRoom=function(){return{Adults:null,Children:null,Ages:null}};BestWestern.SearchModel=function(){return{Term:null,Type:null,CheckIn:null,CheckOut:null,Adults:null,Children:null,Ages:null,RoomQuantity:null,OfferId:null,OfferType:null,PromoCode:null,Plan:null,People:function(){return parseInt(this.Children,10)+parseInt(this.Adults,10)},EmptySearch:!0,International:!1,RoomComposition:[]}};var t=function(t){var i=[];return t.Type==="hotel"?i.push("{Term*}"):i.push("{Type}{/Term*}"),n(t,i)},i=function(n){var t="/checkout/guest-details/{Term}/in-{CheckIn}/out-{CheckOut}/adults-{Adults*}/children-{Children*}/rooms-{RoomQuantity}";return n.Affiliate?t="/booking/guest-details/{Term}/in-{CheckIn}/out-{CheckOut}/adults-{Adults*}/children-{Children*}/rooms-{RoomQuantity}":n.CheckoutUrl&&(t=n.CheckoutUrl+"{Term}/in-{CheckIn}/out-{CheckOut}/adults-{Adults*}/children-{Children*}/rooms-{RoomQuantity}"),n.Ages!==null&&n.Ages.length!==undefined&&n.Ages.length>0&&(n.Ages.toJSON&&(n.Ages=n.Ages.toJSON()),t=t+"/ages-{Ages*}"),n.PromoCode!==null&&n.PromoCode!==undefined&&n.PromoCode!==""&&(t=t+"/promo-{PromoCode}"),t+"/plan-{Plan*}"},n=function(n,t){if(t==undefined&&(t=[]),(n.CheckIn!==null||n.CheckOut!==null)&&(t.push("in-{CheckIn}"),t.push("out-{CheckOut}")),n.RoomComposition!=null&&n.RoomComposition.length){let r=n.RoomComposition.map(function(n){return n.Adults}),u=n.RoomComposition.map(function(n){return n.Children}),i=n.RoomComposition.map(function(n){return Array.from(n.Ages||[])}).join(",").split(",").filter(function(n){return n});n.RoomAdults=r;n.RoomChildren=u;n.ChildAges=i;t.push("adults-{RoomAdults*}");n.RoomChildren&&n.RoomChildren.length&&n.RoomChildren[0]!=undefined&&n.RoomChildren[0]!=null&&(t.push("children-{RoomChildren*}"),i&&i!=""&&t.push("ages-{ChildAges}"));t.push("rooms-{RoomQuantity}")}else(n.Adults!==null||n.Children!==null||n.RoomQuantity!==null)&&(t.push("adults-{Adults}"),t.push("children-{Children}"),n.Ages!==null&&n.Ages.length!==undefined&&n.Ages.length>0&&t.push("ages-{Ages*}"),t.push("rooms-{RoomQuantity}"));return n!==undefined&&n!==""&&n.PromoCode!==null&&t.push("promo-{PromoCode}"),n!==undefined&&n!==""&&n.Ages!==null&&(n.Ages=Array.from(n.Ages)),"/"+t.join("/")};BestWestern.Search={BuildBookingUrl:function(n){var t=new URITemplate(i(n));return t.expand(n).toLowerCase()},BuildSearchUrl:function(n){n.Type==="place"&&(n.Term=n.Term.split("/"));var i=new URITemplate(t(n));return BestWestern.StorageManager.Put("oi",n.OfferId),BestWestern.StorageManager.Put("ot",n.OfferType),i.expand(n).toLowerCase()},BuildSearchParams:function(t){var i=new URITemplate(n(t));return i.expand(t)},GetSearchModel:function(n){var t=new BestWestern.SearchModel,i,e,s,h,c,l,a,v,u,r,f,y,o,p;if(t.OfferId=BestWestern.StorageManager.Get("oi"),t.OfferType=BestWestern.StorageManager.Get("ot"),n.startsWith("/")&&(n=n.substring(1)),i=n.split("/"),i.length===1)t.Term=i[0];else if(i.length>=2){if(i[0].startsWith("in-")===!1&&i[0].startsWith("adults-")===!1&&(t.Type=i[0],t.Term=i[1],(t.Type==="hotel-variant"||t.Type==="hotels"||t.Type==="hotelsx2"||t.Type==="hotelsx4"||t.Type==="stay-at"||t.Type==="room-select")&&(t.Type="hotel"),t.Type==="place"&&(t.Term=[i[1],i[2]].join("/"))),e=i.filter(function(n){return n.startsWith("rooms-")}),s=e&&e.length>0?i.indexOf(e[0]):-1,s>=0){try{t.RoomQuantity=parseInt(i[s].substring(6))}catch(w){}if(t.RoomQuantity>0)for(r=0;r<t.RoomQuantity;r++)t.RoomComposition[r]=new BestWestern.SearchRoom}for(r=0;r<i.length;r++)if(i[r].startsWith("in-"))t.CheckIn=i[r].substring(3),t.EmptySearch=!1;else if(i[r].startsWith("out-"))t.CheckOut=i[r].substring(4);else if(i[r].startsWith("adults-"))if(t.Adults=i[r].substring(7),t.Adults.toString().indexOf(",")>0){for(h=0,c=t.Adults.split(","),u=0;u<c.length;u++)l=parseInt(c[u]),h+=l,t.RoomComposition[u].Adults=l;t.Adults=h}else t.RoomComposition[0].Adults=parseInt(t.Adults);else if(i[r].startsWith("children-"))if(t.Children=i[r].substring(9),t.Children.toString().indexOf(",")>0){for(a=0,v=t.Children.split(","),u=0;u<v.length;u++)f=parseInt(v[u]),a+=f,t.RoomComposition[u].Children=f;t.Children=a}else t.RoomComposition[0].Children=parseInt(t.Children);else i[r].startsWith("ages-")?t.Ages=decodeURIComponent(i[r]).substring(5).split(",").map(function(n){return parseInt(n,10)}):i[r].startsWith("promo-")&&(t.PromoCode=i[r].substring(6));if(t&&t.Ages&&t.Ages.length==t.Children){let n=0;for(r=0;r<t.RoomComposition.length;r++)f=t.RoomComposition[r].Children,t.RoomComposition[r].Ages=t.Ages.slice(n,n+f),n+=f}y=BestWestern.StorageManager.Get("promocode");y!==null&&(t.Promo=y);(i.length==3&&i[2]=="today"||i[2]=="tomorrow")&&(o=Date.Today(),i[2]=="tomorrow"&&(o=Date.Tomorrow()),t.CheckIn=new moment(o).format("YYYY-MM-DD"),p=new moment(new Date(o.getTime()+864e5)),t.CheckOut=p.format("YYYY-MM-DD"),t.Adults=1,t.RoomQuantity=1,t.EmptySearch=!1)}return t.Term=decodeURI(t.Term),t}}})();
if(FHManager===undefined||FHManager===null)var FHManager=function(){var r="/restapi/user/favourites/",c="/restapi/user/favourites-full",s="fh",u=[],t=!1,f=!1,e=[],l=function(){while(e.length)e.pop()()},i=function(n,t){return function(n,i,r){t!==undefined&&t(n,i,r)}},n=function(n,i,r){return r===undefined&&(r=!0),function(e){t=r!==!0;u=e;i==="add"?FHManager.AddFavouriteUI(e,!0):i==="delete"&&FHManager.RemoveFavouriteUI(e);n!==undefined&&n(e);f=!1;l()}},o=function(){var n=BestWestern.StorageManager.Get(s);return Object.prototype.toString.call(n)!=="[object Array]"&&(n=[]),BestWestern.GetGuidsInArray(n)},h=function(n){Object.prototype.toString.call(n)!=="[object Array]"&&(n=[]);n=BestWestern.GetGuidsInArray(n);BestWestern.StorageManager.Put(s,n)};return{GetControl:function(){return BestWestern.NamespaceExists("Spinbox.Clients.BestWestern.Frontend.Web.UI.FavoriteHotels")!==undefined?BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.FavoriteHotels):null},GetFull:function(n,t){$.ajax({url:c,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){var i=kendo.observable({Hotels:t,Count:t.length,CountText:function(){return String.format("{0} hotels added to your favourites",this.get("Count"))},MobileCountText:function(){return String.format("{0}",this.get("Count"))},ListViewMode:!0,SwitchToListView:function(){this.set("ListViewMode",!0)},SwitchToGridView:function(){this.set("ListViewMode",!1)},DataBound:!0});$(i.Hotels).each(function(){$.extend(this,{detailsUrl:function(){return this.Url}})});n!==undefined&&n(i)},error:i("GetFullHotelContent",t)})},Get:function(s,h){if(f)e.push(function(){FHManager.Get(s,h,!1)});else if(u===null||t!==!0){f=!0;var c="GET",l=null;BestWestern.IsAuthenticated()||(c="POST",l=JSON.stringify({ids:o()}));$.ajax({url:r,type:c,dataType:"json",data:l,contentType:"application/json; charset=utf-8",success:function(t){n(s,"get",!1)(t)},error:function(n,t,r){i("GetFavouriteHotels",h)(n,t,r)}})}else n(s,"get",!1)(u)},Add:function(u,f,e,s){if(t=!1,BestWestern.IsAuthenticated())$.ajax({url:r,type:"PUT",dataType:"json",data:{id:u,list:f},success:n(e,"add",!0),error:i("AddToFavourites",s)});else{var c=o();return c.contains(u)===!1&&c.push(u.toUpperCase()),h(c),n(e,"add",!0)(u),c}},Delete:function(u,f,e){var s,c;t=!1;BestWestern.IsAuthenticated()?$.ajax({url:r+u,type:"DELETE",dataType:"json",success:n(f,"delete",!0),error:i("DeleteFromFavourites",e)}):(s=o(),s.contains(u)&&(c=s.containsIndex(u),s.splice(c,1),h(s),n(f,"delete",!0)(u)))},AddFavouriteUI:function(n,t){var r=n,i;BestWestern.IsGuid(r)===!1&&(r=n.Id);i=$('[data-favourite-hotel-id="'+r+'"]');i.off("click").on("click",FHManager.RemovedFromFavourites);i.removeClass("out_favourites").addClass("in_favourites");i.attr("title","Remove from favourites");t===!0&&BestWestern.ShowMessage("This hotel has been added to your favourites")},RemoveFavouriteUI:function(n){var i=n,t;BestWestern.IsGuid(i)===!1&&(i=n.Id);t=$('[data-favourite-hotel-id="'+i+'"]');t.off("click").on("click",FHManager.AddedToFavourites);t.removeClass("in_favourites").addClass("out_favourites");t.attr("title","Add to favourites")},AddedToFavourites:function(n){FHManager.Add($(n.target).data("favourite-hotel-id"))},RemovedFromFavourites:function(n){FHManager.Delete($(n.target).data("favourite-hotel-id"))},PostBind:function(n){$("[data-favourite-hotel-id]").off("click");$("[data-favourite-hotel-id]").on("click",FHManager.AddedToFavourites);FHManager.Get(function(t){BestWestern.IsAuthenticated()&&(t=t.map(function(n){return n.Id}));(n===undefined||n===null)&&(n=FHManager.RemovedFromFavourites);for(var i=0;i<t.length;i++){$('[data-favourite-hotel-id="'+t[i]+'"]').off("click");$('[data-favourite-hotel-id="'+t[i]+'"]').on("click",n);FHManager.AddFavouriteUI(t[i],!1)}})}}}();
if(RVHManager===undefined||RVHManager===null)var RVHManager=function(){var t="/restapi/user/recentlyviewed/",e="/restapi/user/recentlyviewed-full",u="rv",o=4,n=function(n,t){return function(n,i,r){t!==undefined&&t(n,i,r)}},i=function(n){return function(t){n!==undefined&&n(t)}},r=function(){var n=BestWestern.StorageManager.Get(u);return Object.prototype.toString.call(n)!=="[object Array]"&&(n=[]),BestWestern.GetGuidsInArray(n)},f=function(n){for(Object.prototype.toString.call(n)!=="[object Array]"&&(n=[]),n=BestWestern.GetGuidsInArray(n);n.length>o;)n.pop();BestWestern.StorageManager.Put(u,n)};return{GetFull:function(t,i){$.ajax({url:e,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",success:function(n){var i=kendo.observable({Hotels:n,Count:n.length,CountText:function(){return String.format("{0} hotels in your recently viewed",this.get("Count"))},MobileCountText:function(){return String.format("{0}",this.get("Count"))},ListViewMode:!0,SwitchToListView:function(){this.set("ListViewMode",!0)},SwitchToGridView:function(){this.set("ListViewMode",!1)},DataBound:!0});$(i.Hotels).each(function(){$.extend(this,{detailsUrl:function(){return this.Url}})});t!==undefined&&t(i)},error:n("GetFullHotelContent",i)})},Get:function(u,f){if(BestWestern.IsAuthenticated())$.ajax({url:t,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",success:i(u),error:n("Get",f)});else{var e=r();$.ajax({url:t,type:"POST",dataType:"json",data:JSON.stringify({ids:e}),contentType:"application/json; charset=utf-8",success:i(u),error:n("Get unauthed",f)})}},Add:function(u,e,o){if(BestWestern.IsAuthenticated())$.ajax({url:t,type:"PUT",dataType:"json",data:{id:u},success:i(e),error:n("Add",o)});else{var s=r(),h=s.containsIndex(u);return h>=0&&s.splice(h,1),s.unshift(u.toUpperCase()),f(s),e!==undefined&&e(s),s}},Delete:function(u,e,o){var s,h;BestWestern.IsAuthenticated()?$.ajax({url:t+u,type:"DELETE",dataType:"json",success:i(e),error:n("Delete",o)}):(s=r(),u===null?s=[]:s.contains(u)&&(h=s.containsIndex(u),s.splice(h,1)),f(s),e!==undefined&&e(r()))}}}();
(function(){var n,t;$("body").is(".search-page, .hotel")&&BestWestern.StorageManager.Get("searchHint")===null&&(n='<div id="search_hint" class="search_overlay user_confirmation"><span class="so_close"><\/span><div class="so_title">Change your search criteria here<\/div><div class="so_body"><a class="so_close_btn button" href="javascript:void(0);">Okay, got it<\/a><\/div><\/div>',n=$(n),t=this,setTimeout(function(){$("#search_hint").length===0&&n.insertAfter(".search span.search_keyword")},1e3));$(document).on("click",".so_close, .so_close_btn",function(){$(".user_confirmation").fadeOut(200,function(){typeof Storage!="undefined"&&BestWestern.StorageManager.Put("searchHint",!0);$(this).remove()})})})(),function(){"use strict";setTimeout(function(){oldIE&&$.Placeholder.init()},1e3)}(),function(){BestWestern.IsAuthenticated()&&$("[ShowIfAuthenticated]").each(function(n,t){$(t).show()})}();
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.Header=function(n){this._searchActive=null;this._initSearchElement=null;this._offerId=null;this._viewModel=null;this._minLength=null;this._kendoAutoComplete=null;this._targetEntityTitle=null;this._clearSelection=null;this._isOnResultsPage=null;this._isOnDestinationPage=null;this._isOnHotelDetailsPage=null;this._basePath=null;this._targetEntityTitle=null;this._targetEntityInternational=null;this._detailsBasePath=null;this._basePath=null;this._childUnder3Message=null;this._childUnder3Message=null;this._checkOutDateFld=null;this._checkInDateFld=null;this._checkInDatePicker=null;this._checkOutDatePicker=null;this._initSearchDelegate=null;this._searchOverlayShownDelegate=null;this._selectOptionChangedDelegate=null;this._childAgeOptionChangedDelegate=null;this._quickOptionSelectedDelegate=null;this._onDateChangedDelegate=null;this._noDatesCheckedDelegate=null;this._offerTypeSelectedDelegate=null;this._defaultCheckinDate=null;this._defaultCheckoutDate=null;this._datesOnly=!1;Spinbox.Clients.BestWestern.Frontend.Web.UI.Header.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.Header.prototype={initialize:function(){var n,i,t;Spinbox.Clients.BestWestern.Frontend.Web.UI.Header.callBaseMethod(this,"initialize");n=this;this._initSearchDelegate=Function.createDelegate(this,this.initSearchClickHandler);this._searchOverlayShownDelegate=Function.createDelegate(this,this.searchOverlayShownHandler);this._doSearchDelegate=Function.createDelegate(this,this.doSearch);this._selectOptionChangedDelegate=Function.createDelegate(this,this.selectOptionChanged);this._childAgeOptionChangedDelegate=Function.createDelegate(this,this.childOptionChanged);this._quickOptionSelectedDelegate=Function.createDelegate(this,this.quickOptionSelected);this._onDateChangedDelegate=Function.createDelegate(this,this.onDateChanged);this._noDatesCheckedDelegate=Function.createDelegate(this,this.noDateChecked);this._offerTypeSelectedDelegate=Function.createDelegate(this,this.offerTypeSelected);this.get_searchActive()===!0&&this.get_initSearchElement()&&$addHandler(this.get_initSearchElement(),"click",this._initSearchDelegate);BestWestern.IsAuthenticated(function(t){if(t!==null&&t.Authenticated===!0)$(".rewards-logged-in").show(),$(".Xrewards-logged-in").show(),$(".show-authenticated").show(),$("body").addClass("user-authenticated");else if($(".rewards-anonymous").show(),$(".show-unauthenticated").show(),$(".bw-rewards-drop",n.get_element()).length>0)$(".loginOpenFancy",n.get_element()).on("click",function(){InitRecaptchas()})});$(".header-rewards").length>0&&(this.getProfileInfo(),i=5e3,startTime=Date.now(),t=setInterval(function(){if($(".real-rewards-amount").length>0&&$(".real-rewards-amount").text()&&$(".real-rewards-amount").text()!==""){var n=$(".real-rewards-amount").text()+" points";$(".header-rewards--buttons__real-rewards-amount").text(n);clearInterval(t)}else Date.now()-startTime>i&&clearInterval(t)},500));this.initHeaderActions();BestWestern.Header(this)},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.Header.callBaseMethod(this,"dispose")},getProfileInfo:function(){var n=kendo.template($("#miniProfile").html());$.ajax({url:"/restapi/my-account/profile",type:"GET",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(t){var i=n(t);$("#mini-profile-ph").removeClass("loading").html(i)},error:function(){$("#mini-profile-ph").removeClass("loading").html('<div class="sfMsgNegative align-center">Error retrieving account information<\/div>')}})},initHeaderActions:function(){var n=this;$(".header-link").on("click",function(){var t=$(this).parent(".header-action");if(t.is(".active"))n.unbindInactiveDropdowns();else{n.unbindInactiveDropdowns();$(this).parent(".header-action").addClass("active");t.on("clickoutside",function(){n.unbindInactiveDropdowns()})}});$(".language-list a").on("click",function(){n.getTrackerName();typeof ga!="undefined"&&BestWestern.TrackerName!==null&&ga(BestWestern.TrackerName+".send","event",{eventCategory:"LanguageSelector",eventAction:"click",eventLabel:$(this).text()})})},unbindInactiveDropdowns:function(){$(".header-action").removeClass("active").off("clickoutside")},autoShowDates:!0,getTrackerName:function(){var t,r,n,i;if(typeof ga!="undefined")for(t=ga.getAll(),r=null,n=0;n<t.length;++n)i=t[n],BestWestern.TrackerName=i.get("name")},initSearchClickHandler:function(n){"use strict";this.getTrackerName();typeof ga!="undefined"&&BestWestern.TrackerName!==null&&ga(BestWestern.TrackerName+".send","event",{eventCategory:"Search",eventAction:"click",eventLabel:"Universal Header Search"});this.set_datesOnly(!1);this.initSearchDialog(n)},initSearchDialog:function(){var n=this,t=kendo.template($("#modal-search").html()),i={GuestOptions:[{Text:"1 adult",Rooms:1,Adults:1,Children:0},{Text:"2 adults (1 room)",Rooms:1,Adults:2,Children:0}],MoreBookingsOptions:[{Text:"Corporate ID",FilterType:"offer",Key:"corpid"},{Text:"Promotion Code",FilterType:"offer",Key:"cc"},{Text:"IATA",FilterType:"offer",Key:"iata"}],Guests:{Rooms:3,Adults:6,Children:6,Under3Message:n.get_childUnder3Message()},DatesOnly:n.get_datesOnly(),Title:n.get_targetEntityTitle()},r=t(i);$.fancybox({content:r,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox bw-modal-search"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},autoSize:!1,topRatio:.25,width:680,height:"auto",beforeShow:function(){var n=$('<a title="Close" class="bw_fancybox_close" href="javascript:void(0);"><\/a>');$(".fancybox-outer").append(n);$(".bw_fancybox_close, .bo_close").on("click",function(){$.fancybox.close()})},afterShow:n._searchOverlayShownDelegate})},searchOverlayShownHandler:function(){for(var i,r,n=this,t=0;t<this.get_findHotel().length;t++)$addHandler(this.get_findHotel()[t],"click",this._doSearchDelegate);$('[data-filter-type="offer"]',".modal-search").each(function(t,i){$addHandler(i,"change",n._offerTypeSelectedDelegate)});$(".country-filter-selection",".modal-search").on("click",function(){$(".country-filter-options",".modal-search").toggle()});$(".country-filter-options a").on("click",function(){var n=$(this);$(".country-filter-selection",".modal-search").text(n.text());$(".country-filter-options",".modal-search").hide();$(".country-filter",".modal-search").data("value",n.text())});$(".country-filter",".modal-search").on("clickoutside",function(){$(".country-filter-options",".modal-search").hide()});i=$(".clear-selection",".modal-search");i.length>0&&(this.set_clearSelection(i[0]),this._clearSearchDelegate=Function.createDelegate(this,this.clearSearch),$addHandler(this.get_clearSelection(),"click",this._clearSearchDelegate));this.configureDatepickers();this.configureAutocomplete();this.configureDefaultValuesFromSearchUrl();$(this.get_checkOutDate()).bsDatepicker("hide");$(this.get_checkInDate()).bsDatepicker("hide");$("a.guests_fld").on("click",function(){$(".modal-search .guests_overlay").toggle()});$(".modal-search .guest-selection-container").on("clickoutside",function(){$(".modal-search .guests_overlay").hide()});$(".go_ops_lnk a").on("click",function(){var n=$("#go-compostion"),t=$(".go_pre_itm");n.is(":hidden")?($(this).text("less options"),n.show(),t.hide(),$("select:not(.hasCustomSelect)").customSelect()):($(this).text("more options"),n.hide(),t.show())});$(".go_pre_itm a",".modal-search").on("click",this._quickOptionSelectedDelegate);for(t=0;t<this.get_childrenSelect().length;t++)$addHandler(this.get_childrenSelect()[t],"change",this._childAgeOptionChangedDelegate);$("select",".guests_overlay").on("change",this._selectOptionChangedDelegate);$(".go_title, .go_ops_btn .button",".modal-search").on("click",function(){var n=$(this),t=!1;$("[data-child] .sfDropdownList",".modal-search").removeClass("form_error");$("[data-child] select",".modal-search").each(function(n,i){$(i).val()==="-"&&(t=!0,$(i).parents(".sfDropdownList").addClass("form_error"))});t==!1&&(n.parents(".guests_overlay").hide(),setTimeout(function(){BestWestern.LastKeyPressEnter===!0&&n.parents(".guest_fld").find("input").focus()},200))});$(".more_booking_options").on("click",function(){$(".modal-search .advanced_search").toggle()});r=$(".modal-search .advanced_search");$(".modal-search .advanced_search_wrp").on("clickoutside",function(t){var i=$(".advanced_search_wrp");$("body").is(".variant-c")&&(i=$(".lower-search-wrap"));i.is(t.target)||i.has(t.target).length!==0||r.length>0&&!r.is(":hidden")&&($(".offer-id-txt-wrp").is(".form_error")?(n.removeErrors(),n.clearForm()):n.performValidations(n))});$(".as_close").on("click",function(){n.performValidations(n)});$("#return-to-search").on("click",function(){$(".child-notice").hide();$(".modal-search").show(50,function(){$(".modal-search .guests_overlay").show()})});$("input.modal-search--search-input").focus()},offerTypeSelected:function(n){$('[data-filter-type="offer"]:checked').length>1&&($('[data-filter-type="offer"]:checked').prop("checked",!1),n.target.checked=!0)},removeErrors:function(){$(".as_error").text("");$(".offer-id-txt-wrp").removeClass("form_error")},clearForm:function(){var n=$(".advanced_search_wrp .advanced_search");n.fadeOut();n.find(":checkbox").prop("checked",!1);oldIE?n.find(".offer-id-txt-wrp .sfTxt").val("My number is..."):n.find(".offer-id-txt-wrp .sfTxt").val("");BestWestern.StorageManager.Delete("oi");BestWestern.StorageManager.Delete("ot");return},validateIataCode:function(n){return/^[0-9]{8}$/.test(n)},validateCorpBusinessId:function(n,t,i){var u=this,r=String.format("/restapi/booking/validate-business/{0}/{1}",t,n);$.ajax({url:r,type:"GET",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(n){if(i){if(n!==null&&n.Status==="OK"){i(!0);return}i(!1)}},error:function(n){BestWestern.ShowMessage(n)}})},quickOptionSelected:function(n){var t=$(n.target);this.setGuestsValue(parseInt(t.data("guest-rooms")),parseInt(t.data("guest-adults")),parseInt(t.data("guest-children")));this.showOverlay()},selectOptionChanged:function(){this.setGuestsValue(parseInt($(this.get_roomsSelect()).val()),parseInt($(this.get_adultsSelect()).val()),parseInt($(this.get_childrenSelect()).val()))},getRooms:function(){return parseInt($(this.get_guestsInput()).data("rooms"))},getAdults:function(){return parseInt($(this.get_guestsInput()).data("adults"))},getChildren:function(){return parseInt($(this.get_guestsInput()).data("children"))},getChildAges:function(){this.childOptionChanged();var n=$("[data-child-age-selector]",".modal-search").map(function(n,t){return parseInt($(t).val())}).sort(function(n,t){return n-t}).toArray();return n.filter(function(n){return!isNaN(n)})},childOptionChanged:function(n){var t=parseInt($(this.get_childrenSelect()).val()),r=$(this.get_childAgeContainer()),i=r.data("children"),f=this,u;if(isNaN(i)&&(i=0),t>0){if(i<t)for(i=$("[data-child]",".modal-search").length,u=i+1;u<=t;u++)this.addChildColumn(u);else i>t?$("[data-child]",".modal-search").filter(function(){return $(this).data("child")>t}).remove():($("[data-child] .sfDropdownList",".modal-search").removeClass("form_error"),$("[data-child] select",".modal-search").each(function(n,t){$(t).val()==="-"&&(errors=!0,$(t).parents(".sfDropdownList").addClass("form_error"))}));r.show()}else r.hide(),$("[data-child]").remove();r.data("children",t);this.selectOptionChanged(n)},showOverlayOnly:function(){$(this.get_guestsOverlay()).show()},hideOverlayOnly:function(){$(this.get_guestsOverlay()).hide()},showOverlay:function(){$(this.get_guestsOverlay()).is(":hidden")?this.showOverlayOnly():this.hideOverlayOnly();$(".dateselector").length>0&&$(".dateselector").hide()},getGuestsValue:function(){return[this.getRooms(),this.getAdults(),this.getChildren(),this.getChildAges()]},setGuestsValue:function(n,t,i){var r,u;isNaN(n)&&isNaN(t)&&isNaN(i)||(n=="4"&&(showRoomsAlert("Group Booking","","OK"),n--),r=[],t>0&&r.push(t+(t>1?" adults":" adult")),i>0&&r.push(i+(i>1?" children":" child")),n>0&&r.push("("+n+(n>1?" rooms":" room")+")"),u=r.join(", "),$(this.get_guestsInput()).text(u),$("[data-guests-selection]").text(u),$(this.get_roomsSelect()).val(n),$(this.get_adultsSelect()).val(t),$(this.get_childrenSelect()).val(i),$(this.get_guestsInput()).data("rooms",n),$("[data-rooms-qty]").val(n),$(this.get_guestsInput()).data("adults",t),$('[data-guest-type="adults"]').val(t),$(this.get_guestsInput()).data("children",i),$('[data-guest-type="children"]').val(i),$(this.get_element()).data("set",1),$(this.get_childrenSelect()).val()==="0"||$('[data-guest-type="children"]').val()==="0"?$(".child_age_lbl").hide():$(".child_age_lbl").show())},addChildColumn:function(n){var t=this,i=$(t.getFormattedChildAgeColumn(n));$(t.get_childAgeContainer()).append(i);$("select",i).on("change",function(n){var r=$(n.target),i;if(r.parents(".sfDropdownList").removeClass("form_error"),i=$(".country-filter",".modal-search").data("value")==="INTL",t.get_childMessageShown()!==!0&&i===!1){t.set_childMessageShown(!0);$(".modal-search").hide();$(".child-notice").show();return}});setTimeout(function(){$(t.get_childAgeContainer()).find("select:not(.hasCustomSelect)").customSelect()},25)},getFormattedChildAgeColumn:function(n){var t=document.getElementById("child_age_column").innerHTML;return String.format(t,n)},configureAutocomplete:function(){var n=this,t=this.get_searchInput(),i=$(t).parents(".sfFieldWrp, .inputwrapper"),r=$(".modal-search--search-input-container"),u,f;$(t).on("keyup",function(u){i.hasClass("form_error")&&u.which!==13&&i.removeClass("form_error");r.hasClass("form_error")&&t.length>0&&r.removeClass("sfFieldWrp form_error");$(this).val()||n.clearSearch(u)});u=kendo.observable({selectedPoint:null,promoCode:null,onSelect:function(t){var i=t.sender.dataItem(t.item.index()),r;if(this.set("selectedPoint",i),i!==null){$.ajax({url:"/restapi/autocomplete/log",data:{term:t.sender._prev,type:i.TypeName,entityId:i.id},type:"PUT",dataType:"json"});r=["GB","EN","SF","WL"].indexOf(i.CountryCode)>=0;try{}catch(t){}}$(n.get_noSpecificDatesCheck()).is(":checked")||(n.get_checkInDate().val()===""?$(n.get_checkInDate()).data("datepicker").show():n.get_checkOutDate().val()===""&&$(n.get_checkOutDate()).data("datepicker").show());$("html").is(".k-ie11, .k-ie10, .k-ie9")||$(n.get_clearSelection()).show()},points:new kendo.data.DataSource({serverFiltering:!0,transport:{cache:!0,parameterMap:function(){return{term:$(t).val().trim(),international:$(".country-filter",".modal-search").data("value")==="INTL"}},read:{url:"/restapi/autocomplete/poi/",contentType:"application/json charset=utf-8",serverPaging:!0,type:"GET",dataType:"json"}}}),onChange:function(t){t&&t.data&&t.data.selectedPoint!==null?(t.data.selectedPoint===n.get_targetEntityTitle()&&(t.data.selectedPoint=n._searchPoint),$(n.get_clearSelection()).show()):$(n.get_clearSelection()).hide()},onDataBound:function(){},onClose:function(){isMobile&&setTimeout(function(){$("input.search_keyword").focus().blur()},50)}});this.set_viewModel(u);kendo.bind($(this.get_searchInput()),this.get_viewModel());this.set_kendoAutoComplete($(this.get_searchInput()).data("kendoAutoComplete"));f=this.get_kendoAutoComplete();f!=undefined&&(this.get_kendoAutoComplete().options.minLength=this.get_minLength());$("input.search_keyword").on("focus",function(){if($("input.search_keyword").length>0&&isMobile){$("#autocomplete-position").remove();var n=$("input.search_keyword").offset().top+$("input.search_keyword").outerHeight();$("head").append('<style id="autocomplete-position">.k-animation-container { top: '+n+"px !important; }<\/style>")}})},setChildAges:function(n){this.childOptionChanged();$("[data-child-age-selector]",".modal-search").each(function(t,i){$(i).val(n[t]).trigger("render")})},configureDefaultValuesFromSearchUrl:function(){var t,n;if(this.get_targetEntityTitle()!==null&&this.get_targetEntityTitle()!==""&&$(this.get_searchInput()).val(this.get_targetEntityTitle()),t=window.location.pathname.replace(this.get_basePath(),""),this.get_basePath()==="/hotel"||this.get_basePath()==="/hotel-variant"||this.get_basePath()==="/hotels"||this.get_basePath()==="/room-select"||this.get_basePath()==="/hotelsx2"||this.get_basePath()==="/hotelsx4"||this.get_basePath()==="/stay-at"?t=this.get_basePath()+t:this.get_basePath()==="/checkout/guest"||this.get_basePath()==="/checkout/guest-details"||this.get_basePath()==="/checkout/guest-detailsx2"||this.get_basePath()==="/checkout/guest-detailsx4"?t="/hotels"+t:this.get_isOnDestinationPage()&&(t=t.substr(1).indexOf("/")>=0?"place"+t:"county"+t),n=BestWestern.Search.GetSearchModel(t),n.Adults===null&&(n.Adults=1),n.Children===null&&(n.Children=0),n.RoomQuantity===null&&(n.RoomQuantity=1),this.get_targetEntityInternational()&&($(".country-filter-options",".modal-search").hide(),$(".country-filter",".modal-search").data("value","INTL"),$(".country-filter-selection",".modal-search").text("INTL")),n!==null){if(this.setGuestsValue(n.RoomQuantity,n.Adults,n.Children),n.Ages!==null&&this.setChildAges(n.Ages),n.Type==="term"?(this.get_viewModel().selectedPoint=decodeURIComponent(n.Term),$(this.get_clearSelection()).show()):n.Type!==null&&(this.get_viewModel().selectedPoint={Url:n.Term,TypeName:n.Type},$(this.get_clearSelection()).show()),this._searchPoint=this.get_viewModel().selectedPoint,this.get_viewModel().promoCode=n.PromoCode,n.CheckIn!==null?this.get_checkInDatePicker().setDate(n.CheckIn.toDateObject()):this.get_checkInDatePicker().setDate(this.get_defaultCheckinDate().toDateObject()),n.CheckOut!==null?this.get_checkOutDatePicker().setDate(n.CheckOut.toDateObject()):this.get_checkOutDatePicker().setDate(this.get_defaultCheckoutDate().toDateObject()),$('[data-type="nights"]').hide(),n.CheckIn!==null&&n.CheckOut!==null){var i=n.CheckIn.toDateObject(),r=n.CheckOut.toDateObject(),u=Math.ceil(Math.abs(r.getTime()-i.getTime())/864e5);$('[data-object="nights"]').text(String.format(" for {0} nights",u));$('[data-object="checkin"]').text(i.format("dd/MM/yyyy"));$('[data-object="checkout"]').text(r.format("dd/MM/yyyy"));$('[data-type="nights"]').show()}$('[data-object="people"]').text(n.People());n.OfferId!==null&&n.OfferId!==""&&n.OfferId!=="null"&&(this.get_offerIdInput().val(n.OfferId),$('[data-key="'+n.OfferType+'"]').prop("checked",!0));this.hideOverlayOnly();$(this.get_element()).data("set",1)}},configureDatepickers:function(){var n=new Date,u=n.addDays(1),f=n.addDays(2),e=n.addDays(348),o=n.addDays(349),r=$(".modal-search .checkindate").bsDatepicker({format:"D, dd/mm",startDate:n,endDate:e,multidateSeparator:"-",todayHighlight:!0,customClass:"dropdown-menu datepicker-orient-top datepicker-orient-left"}),t,s,i;r.on("change",this._onDateChangedDelegate).on("blue",this._onDateChangedDelegate).on("hide",this._onDateChangedDelegate);this.set_checkInDatePicker(r.data("datepicker"));t=$(".modal-search .checkoutdate").bsDatepicker({format:"D, dd/mm",startDate:u,endDate:o,multidateSeparator:"-",todayHighlight:!0,customClass:"dropdown-menu datepicker-orient-top datepicker-orient-left"});t.on("change",this._onDateChangedDelegate).on("blur",this._onDateChangedDelegate);this.set_checkOutDatePicker(t.data("datepicker"));this.set_checkInDateFld($(".checkindate_fld",".modal-search")[0]);this.set_checkOutDateFld($(".checkoutdate_fld",".modal-search")[0]);this.get_checkInDateFld()&&$(this.get_checkInDateFld()).text()===""&&this.setInField(u);this.get_checkInDateFld()&&$(this.get_checkInDateFld()).text()===""&&this.setOutField(f);r.on("changeDate",this._onDateChangedDelegate);t.on("changeDate",this._onDateChangedDelegate);for(s=function(){$(".dateselector").hide();$(".date-fld-wrp").removeClass("active").off("clickoutside")},i=0;i<this.get_noSpecificDatesCheck().length;i++)$addHandler(this.get_noSpecificDatesCheck()[i],"click",this._noDatesCheckedDelegate);$(".modal-search .date, .search_wrp .date").on("click",function(){var n=$(this),i=n.data("type"),t=$("."+i,".modal-search");n.prop("disabled")||(setTimeout(function(){n.addClass("selecting-date")},200),$(".date").removeClass("active selecting-date"),n.addClass("active"),t.is(":hidden")?($(".dateselector",".modal-search").hide(),t.show()):(n.removeClass("active selecting-date").find(".sfTxt").blur(),t.hide()))});$(".modal-search .date-fld-wrp--a").on("clickoutside",function(){$(this).find(".dateselector").hide()});$(".modal-search .date-fld-wrp--b").on("clickoutside",function(){})},setInField:function(n){var t=this.get_checkInDateFld();t&&(n===null?$(t).text(""):$(t).text(n.format("ddd, dd/MM")))},setOutField:function(n){var t=this.get_checkOutDateFld();t&&(n===null?$(t).text(""):$(t).text(n.format("ddd, dd/MM")))},onDateChanged:function(){var i=$(".modal-search"),n=this.get_checkInDatePicker(),t=this.get_checkOutDatePicker(),f=this.get_checkInDateFld(),e=this.get_checkOutDateFld(),r,u;if(n.getDates().length>0?this.setInField(n.getDate()):this.setInField(null),t.getDates().length>0?this.setOutField(t.getDate()):this.setOutField(null),$(this.get_noSpecificDatesCheck()).prop("checked",n.getDates().length===0&&t.getDates().length===0),t.getDates().length>0&&$(this.get_checkOutDate()).parents(".sfFieldWrp").removeClass("form_error"),n.getDates().length>0&&$(this.get_checkInDate()).parents(".sfFieldWrp").removeClass("form_error"),t.getDates().length===0&&n.getDates().length>0){this.autoShowDates&&(n.hide(),t.show());$(".checkoutdate",".modal-search").show();r=$('.date[data-type="checkoutdate"]',".modal-search");$(".date").removeClass("active selecting-date");r.addClass("active");setTimeout(function(){r.addClass("selecting-date");isMobile||i.find(".checkoutdate_fld").text()===""&&BestWestern.LastKeyPressEnter===!0&&i.find(".checkoutdate_fld").focus()},200);this.onDateClosed(this);this.hideOverlayOnly()}else if(t.getDates().length>0&&n.getDates().length===0){this.autoShowDates&&(t.hide(),n.show());$(".checkindate",".modal-search").show();u=$('.date[data-type="checkoutdate"]',this.get_element());$(".date").removeClass("active");u.addClass("active");setTimeout(function(){u.addClass("selecting-date")},200);this.onDateClosed(this);this.hideOverlayOnly()}else{$(this.get_element()).data("set")===undefined&&this.showOverlayOnly();$(".checkoutdate").hide();$(".checkindate").hide();$(".date").removeClass("active selecting-date");this.onDateClosed(this);setTimeout(function(){isMobile||i.find(".checkoutdate_fld").text()!==""&&BestWestern.LastKeyPressEnter===!0&&i.find(".guest_fld input").focus()},200)}},onDateClosed:function(){var u=this.get_checkInDatePicker();if(u.getDates().length!==0){var f=u.getDate(),n=this.get_checkOutDatePicker(),t=null;n.getDates().length>0&&(t=n.getDate());var r=f.addDays(1),i=f.addDays(30),e=(new Date).addDays(349);i=i<e?i:e;t!==null&&(t>i||t<r)&&(n.setDate(null),this.setOutField(null));n.o.startDate.toDateString()!==r.toDateString()&&n.setStartDate(r);n.o.endDate.toDateString()!==i.toDateString()&&n.setEndDate(i);t!==null&&n.getDate()!==null&&n.getDate().getTime()!==t.getTime()&&n.setDate(t)}},noDateChecked:function(n){var f=$(".date");if($(n.target).prop("checked"))this.autoShowDates=!1,$(this.get_checkInDate()).val(""),$(this.get_checkOutDate()).val(""),f.attr("disabled","disabled").prop("disabled",!0),this.get_checkInDatePicker().setDate(null),this.get_checkOutDatePicker().setDate(null),this.setInField(null),this.setOutField(null);else{f.removeAttr("disabled").prop("disabled",!1);var e=new Date,t=e.addDays(1),i=e.addDays(2),r=$(".modal-search .checkindate"),u=$(".modal-search .checkoutdate");r.datepicker("setDate",t);r.datepicker("setStartDate",t);r.datepicker("update",t);u.datepicker("setDate",i);u.datepicker("setStartDate",i);u.datepicker("update",i)}this.autoShowDates=!0},doSearch:function(n){var t=this.get_searchViewModel(),u=this,r=!1,i,f;return(t.CheckIn===null&&t.CheckOut!==null&&($(this.get_checkInDate()).parents(".sfFieldWrp, .inputwrapper").addClass("form_error"),this.get_checkInDatePicker().show(),r=!0),t.CheckIn!==null&&t.CheckOut===null&&($(this.get_checkOutDate()).parents(".sfFieldWrp, .inputwrapper").addClass("form_error"),this.get_checkOutDatePicker().show(),r=!0),(t.Term===null||t.Term===$(this.get_searchInput()).attr("placeholder")||t.Type===null)&&($(this.get_searchInput()).parents(".sfFieldWrp, .inputwrapper").addClass("form_error"),this.get_searchInput().focus(),$(".modal-search--search-input-container").addClass("sfFieldWrp form_error"),r=!0),((t.Ages===null||t.Ages.length===0)&&t.Children>0||!isNaN(t.Children)&&t.Children!==t.Ages.length)&&(setTimeout(function(){u.showOverlayOnly()},50),alert("error"),r=!0),r)?!1:(t.Type==="term"&&$.ajax({url:"/restapi/autocomplete/log",data:{term:t.Term,type:"term",entityId:"00000000-0000-0000-0000-000000000000"},type:"PUT",dataType:"json"}),typeof ga!="undefined"&&BestWestern.TrackerName!==null&&ga(BestWestern.TrackerName+".send","event",{eventCategory:"Search",eventAction:"search-performed",eventLabel:"Universal Header Search"}),typeof dataLayer=="undefined"||$(n.target).is(".rr_button")||(i=[],t.Term!==null&&i.push(t.Term),t.CheckIn!==null&&i.push(t.CheckIn),t.CheckOut!==null&&i.push(t.CheckOut),t.Adults!==null&&t.Children!==null&&i.push(t.Adults+" adults, "+t.Children+" children"),dataLayer.push({event:"hotel-search",category:"Hotel Search",action:"Booking Options",label:i.join(", ")}),f=[],t.OfferType!==null&&dataLayer.push({event:"booking-extras",category:"Hotel Search",action:"More Booking Options",label:t.OfferType})),this.performDoSearchWithModel(t),!1)},performDoSearchWithModel:function(n){BestWestern.StorageManager.Get("promocode")=="fx"&&BestWestern.StorageManager.DeleteSession("promocode");n.PromoCode=="fx"&&(n.PromoCode=null);n.OfferType=="fx"&&(n.OfferType=null);window.document.location=n.Type==="hotel"?this.get_detailsBasePath()+BestWestern.Search.BuildSearchUrl(n):this.get_resultsBasePath()+BestWestern.Search.BuildSearchUrl(n)},get_searchViewModel:function(){var n=new BestWestern.SearchModel,t=this.get_viewModel(),i,r,f,u;return t.selectedPoint!==null&&(typeof t.selectedPoint=="string"?(n.Term=t.selectedPoint,n.Type="term"):(n.Term=t.selectedPoint.Url,n.Type=t.selectedPoint.TypeName)),n.Term!==null&&(n.Term=n.Term.trim()),this.get_noSpecificDatesCheck().is(":checked")||(i=this.get_checkInDatePicker(),r=this.get_checkOutDatePicker(),i.dates.length>0?(n.CheckIn=i.getDate().format("yyyy-MM-dd"),n.EmptySearch=!1):n.CheckIn=Date.Tomorrow().format("yyyy-MM-dd"),r.dates.length>0?n.CheckOut=r.getDate().format("yyyy-MM-dd"):i.dates.length>0?(f=new Date(i.getDate().getTime()+864e5),n.CheckOut=f.format("yyyy-MM-dd")):n.CheckOut=Date.DayAfterTomorrow().format("yyyy-MM-dd")),n.RoomQuantity=this.getRooms(),n.Adults=this.getAdults(),n.Children=this.getChildren(),n.Ages=this.getChildAges(),n.PromoCode=this.get_promo(),!n.PromoCode&&t.promoCode&&(n.PromoCode=t.promoCode),this.get_queryCorpId()!=null?(n.OfferId=this.get_queryCorpId(),n.OfferType="corpid"):AlertsManager.GetOffer()!=null&&(n.OfferId=AlertsManager.GetOffer(),n.OfferType="corpid"),u=this.getOffer(),u!==null&&$.extend(n,u),n},clearSearch:function(){this.get_viewModel().selectedPoint=null;$(this.get_searchInput()).data("kendoAutoComplete").value("");$(this.get_clearSelection()).hide()},getOffer:function(){var n,t;return this.get_offerId()!==null?{OfferId:this.get_offerId(),OfferType:this.get_offerType()}:(n=this.get_offerIdInput().val(),n===null||n==="")?null:(t=$('[data-filter-type="offer"]:checked').data("key"),{OfferId:n,OfferType:t})},performValidations:function(n){var i=$(".advanced_search_wrp .advanced_search"),t;if(n.get_offerIdInput().val()===null||n.get_offerIdInput().val()==="")$('[data-filter-type="offer"]:checked').removeAttr("checked"),i.hide(),n.removeErrors();else if(t=n.getOffer(),t.OfferType==="iata"){if(n.validateIataCode(t.OfferId)!==!0){$(".as_error").text("IATA invalid");$(".offer-id-txt-wrp").addClass("form_error");return}BestWestern.StorageManager.PutCookie("iata",'"'+t.OfferId+'"');i.hide();n.removeErrors()}else t.OfferType==="ba"?n.validateCorpBusinessId(t.OfferId,"BWBUSINESS",function(t){if(t)i.hide(),n.removeErrors();else{$(".as_error").text("Business account invalid");$(".offer-id-txt-wrp").addClass("form_error");return}}):t.OfferType==="ncp"?n.validateCorpBusinessId(t.OfferId,"NCP",function(t){t?(i.hide(),n.removeErrors()):($(".as_error").text("NCP account invalid"),$(".offer-id-txt-wrp").addClass("form_error"))}):(i.hide(),n.removeErrors())},get_initSearchElement:function(){return this._initSearchElement},set_initSearchElement:function(n){this._initSearchElement=n},get_searchActive:function(){return this._searchActive},set_searchActive:function(n){this._searchActive=n},get_viewModel:function(){return this._viewModel},set_viewModel:function(n){this._viewModel=n},get_kendoAutoComplete:function(){return this._kendoAutoComplete},set_kendoAutoComplete:function(n){this._kendoAutoComplete=n},get_minLength:function(){return this._minLength},set_minLength:function(n){this._minLength=n},set_targetEntityTitle:function(n){this._targetEntityTitle=n},get_offerId:function(){return this._offerId},set_offerId:function(n){this._offerId=n},get_offerType:function(){return this._offerType},set_offerType:function(n){this._offerType=n},get_isOnResultsPage:function(){return this._isOnResultsPage},set_isOnResultsPage:function(n){this._isOnResultsPage=n},get_isOnDestinationPage:function(){return this._isOnDestinationPage},set_isOnDestinationPage:function(n){this._isOnDestinationPage=n},get_isOnHotelDetailsPage:function(){return this._isOnHotelDetailsPage},set_isOnHotelDetailsPage:function(n){this._isOnHotelDetailsPage=n},get_targetEntityTitle:function(){var n=this._targetEntityTitle;return!n&&BestWestern.SearchRequestObj&&(n=BestWestern.SearchRequestObj.Hotel.Title),n},set_targetEntityTitle:function(n){this._targetEntityTitle=n},get_targetEntityInternational:function(){return this._targetEntityInternational},set_targetEntityInternational:function(n){this._targetEntityInternational=n},get_detailsBasePath:function(){return this._detailsBasePath},set_detailsBasePath:function(n){this._detailsBasePath=n},get_resultsBasePath:function(){return this._resultsBasePath},set_resultsBasePath:function(n){this._resultsBasePath=n},get_basePath:function(){return this._basePath},set_basePath:function(n){this._basePath=n},get_noSpecificDatesCheck:function(){return $("#noSpecificDatesCheck")},get_searchInput:function(){return $('[data-control="search-input"]')},get_findHotel:function(){return $('[data-control="find-hotel"]')},get_offerIdInput:function(){return $('[data-control="offer-id"]')},set_promo:function(n){this.isCorpId(n)||BestWestern.StorageManager.Put("promocode",n)},get_promo:function(){var n=BestWestern.StorageManager.Get("promocode");return this.isCorpId(n)?null:n},get_queryCorpId:function(){var n=BestWestern.StorageManager.Get("promocode");return this.isCorpId(n)?n:null},isCorpId:function(n){var t=new RegExp("([0-9*]{8})");return t.exec(n)!==null&&t.exec(n).length>0},get_checkInDate:function(){return $('[data-control="checkInDate"]')},get_checkInDatePicker:function(){return this._checkInDatePicker},set_checkInDatePicker:function(n){this._checkInDatePicker=n},get_checkInDateFld:function(){return this._checkInDateFld},set_checkInDateFld:function(n){this._checkInDateFld=n},get_checkOutDate:function(){return $('[data-control="checkOutDate"]')},get_checkOutDatePicker:function(){return this._checkOutDatePicker},set_checkOutDatePicker:function(n){this._checkOutDatePicker=n},get_checkOutDateFld:function(){return this._checkOutDateFld},set_checkOutDateFld:function(n){this._checkOutDateFld=n},get_clearSelection:function(){return this._clearSelection},set_clearSelection:function(n){this._clearSelection=n},get_guestsInput:function(){return $('[data-control="guests-input"]')},get_roomsSelect:function(){return $('[data-control="guest-rooms"]')},get_adultsSelect:function(){return $('[data-control="guest-adults"]')},get_childrenSelect:function(){return $('[data-control="guest-children"]')},get_childAgeContainer:function(){return $('[data-control="guest-child-age-container"]')},get_childMessageShown:function(){return this._childMessageShown},set_childMessageShown:function(n){this._childMessageShown=n},get_childUnder3Message:function(){return this._childUnder3Message},set_childUnder3Message:function(n){this._childUnder3Message=n},get_moreOptionsContainter:function(){return $('[data-control="guest-more-options"]')},get_guestsOverlay:function(){return $(".guests_overlay")},get_defaultCheckinDate:function(){return this._defaultCheckinDate},set_defaultCheckinDate:function(n){this._defaultCheckinDate=n},get_defaultCheckoutDate:function(){return this._defaultCheckoutDate},set_defaultCheckoutDate:function(n){this._defaultCheckoutDate=n},get_moreBookingOptions:function(){return $(".more_booking_options")[0]},get_datesOnly:function(){return this._datesOnly},set_datesOnly:function(n){this._datesOnly=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.Header.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.Header",Sys.UI.Control);
if(AlertsManager===undefined||AlertsManager===null)var AlertsManager=function(){var t="/restapi/user/messages/",i="msgs",r=function(n,t){return function(n,i,r){t!==undefined&&t(n,i,r)}},u=function(n){return function(t){n!==undefined&&n(t)}},n=function(){var n=BestWestern.StorageManager.Get(i);return Object.prototype.toString.call(n)!=="[object Array]"&&(n=[]),n},f=function(n){Object.prototype.toString.call(n)!=="[object Array]"&&(n=[]);BestWestern.StorageManager.Put(i,n)};return{Initialize:function(){var u,t,e,f,i,n,r;$(".ha_message_icon").click(function(n){AlertsManager.MarkAsSeen(n)});$(".ha_alert_icon").click(function(n){AlertsManager.MarkAsSeen(n)});AlertsManager.RemoveRead();u=AlertsManager.GetMessageCount();$("#messageCount").html(u);u>0&&$(".msg_counter").show();$(".message_item_btn").each(function(n,t){$(t).text()==""&&$(t).hide()});t=!1;e=!1;$("li[data-utm-source]","#ha_messages").each(function(n,i){if($(i).data("utm-source")!==""){var r=$(f).attr("data-sf-id");AlertsManager.Add(r,1);e=!0;t=!0}});$("li[data-auto-load='True']","#ha_messages").length>0&&(f=$("li[data-auto-load='True']","#ha_messages")[0],i=$(f).attr("data-sf-id"),AlertsManager.Get(i)!=undefined&&AlertsManager.Get(i).status>0||(t=!0,AlertsManager.Add(i,1)));t&&(n=$("li[data-corporateID!='']","#ha_messages").first(),n&&(r=new Date,r.setDate(r.getDate()+30),$(n).data("corporateid")!=null&&$(n).data("corporateid")!=""&&$(n).data("corporateid")!=undefined&&(BestWestern.StorageManager.Put("alert-offer-id",$(n).data("corporateid")),BestWestern.StorageManager.Put("corpid-expires",r))),$("#alertViewAllLink").hide(),$(".header_overlay","#ha_messages").show())},CurrentMessageIDs:[],InitializeMobile:function(){var u,e,o,f,c,i,l,r,a;$(".menu-message-alerts").remove();this.CurrentMessageIDs=AlertsManager.GetAvailableMessageIDs();u=this.CurrentMessageIDs.length;u>0?(e=kendo.template($("#menu-message-alerts").html()),$("#menubtn").append($("#menu-message-alert-icon").html()),o=e(u),$("#message-menu-item").append(o)):$("#message-menu-item").hide();var s=AlertsManager.GetUTMMessage(),t=!1,n=null,h=!1;s!=null?(t=!0,n=s,h=!0):(f=AlertsManager.GetAutoLoad(),f!=null&&(t=!0,n=f));c=kendo.template($("#on-load-message").html());$("html").hasClass("sfPageEditorWrp")&&(t=!1);t&&(i=n.CorporateID,h==!1&&(l=n.MessageID,AlertsManager.MarkMessageByID(l,2)),i!=null&&i!=""&&(r=new Date,r.setDate(r.getDate()+30),BestWestern.StorageManager.Put("alert-offer-id",i),BestWestern.StorageManager.Put("corpid-expires",r)),a=c(n),setTimeout(function(){$.fancybox({content:a,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},autoSize:!1,width:600,height:"auto",margin:[125,20,20,20],beforeShow:function(){$(".fancybox-outer").append('<a title="Close" class="bw_fancybox_close" href="javascript:void(0);"><\/a>');$(".bw_fancybox_close, .bo_close").on("click",function(){$.fancybox.close()})}})},500))},GetUTMMessage:function(){var n=null,t=urlParams.utm_source,i=urlParams.utm_campaign;return $.ajax({url:"/restapi/user/getutmmessage/",type:"GET","async":!1,cache:!1,data:{utmsource:t,utmcampaign:i},dataType:"json",success:function(t){t&&(n=t)}}),n},GetAutoLoad:function(){var n=null;return $.ajax({url:"/restapi/user/getautoloadmessage/",type:"GET",cache:!1,"async":!1,dataType:"json",success:function(t){t&&(n=t)}}),n},GetOffer:function(){var t=BestWestern.StorageManager.Get("alert-offer-id"),i=BestWestern.StorageManager.Get("corpid-expires"),r=new Date,n=new Date(i);return i!==null&&n!=null&&r>=n?(BestWestern.StorageManager.Delete("alert-offer-id"),BestWestern.StorageManager.Delete("corpid-expires"),null):n!=null&&r<n&&t!==null&&t!==undefined&&n!==undefined?t:null},RemoveRead:function(){var t=$(".message_item","#ha_messages"),i=n();$(t).each(function(n,t){var r=$(t).attr("data-sf-id");result=$.grep(i,function(n){return n.id==r&&n.status==2});result.length==1&&$(t).remove()})},MarkAsSeen:function(){if($(".msg_counter").is(":visible")==!0){var t=$(".message_item",".message_list"),n=[];$(t).each(function(t,i){if(($(i).data("utm-source")===undefined||$(i).data("utm-source")==="")&&$(i).is(":visible")){var r=$(i).attr("data-sf-id");n.push(r)}});$(n).each(function(n,t){AlertsManager.Add(t,1)});$(".msg_counter").hide()}},ClearMobileMessages:function(){this.MarkCurrentMessages(1);$(".menu-message-alerts").remove()},MarkCurrentMessages:function(n){this.CurrentMessageIDs.length>0;$(this.CurrentMessageIDs).each(function(t,i){AlertsManager.Add(i,n)});this.CurrentMessageIDs=[]},MarkMessageByID:function(n,t){AlertsManager.Add(n,t)},GetMessageCount:function(){var n=0;return $.ajax({url:"/restapi/user/getavailablemessageid/",type:"GET",cache:!1,"async":!1,dataType:"json",success:function(t){return t?(n=t.length,t.length):0}}),n},GetAvailableMessageIDs:function(){var n=[];return $.ajax({url:"/restapi/user/getavailablemessageid/",type:"GET",cache:!1,"async":!1,dataType:"json",success:function(t){return t?(n=t,t):[]}}),n},Get:function(n,i,u){var f;return $.ajax({url:t,type:"GET",cache:!1,"async":!1,dataType:"json",data:{id:n},success:function(n){return n?f={id:n.Id,status:n.Status}:null},error:r("Get",u)}),f},Add:function(n,i,f,e){$.ajax({url:t,type:"PUT",dataType:"json",data:{id:n,status:i},success:u(f),error:r("Add",e)})},Delete:function(t,i){var r,u;BestWestern.IsAuthenticated()||(r=n(),t===null?r=[]:r.contains(t)&&(u=r.containsIndex(t),r.splice(u,1)),f(r),i!==undefined&&i(n()))}}}();
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.HomepageBanner=function(n){this._detailsPageUrl=null;this._mode=null;this._pause=null;this._speed=null;this._detailsLink=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.HomepageBanner.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.HomepageBanner.prototype={initialize:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.HomepageBanner.callBaseMethod(this,"initialize");this.initSlider()},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.HomepageBanner.callBaseMethod(this,"dispose")},initSlider:function(){var n=null,r=this,u=$("#hero"),f=$("#hero_items"),o=$(".hero_item img"),t=$(".hero_tmb"),s=o.height();t.eq(0).addClass("active");t.on("click",function(){var t=$(this),i=t.data("index");t.is(".active")||n.goToSlide(i)});var e=function(){r.get_detailsLink().href=[r.get_detailsPageUrl(),n.getCurrentSlideElement().data("url")].join("/")},i=!1,h={mode:this.get_mode(),auto:!0,pause:this.get_pause(),controls:!1,speed:this.get_speed(),onSlideBefore:function(n,r,u){if(t.removeClass("active"),t.eq(u).addClass("active"),$(".hero_info_box").hide(),$('.hero_info_box[data-index="'+u+'"]').fadeIn(400),!i&&verge.inViewport($("#hero"))){var f=n.data("hotel-name");typeof dataLayer!="undefined"&&dataLayer.push({event:"hero-carousel",category:"Hero: Carousel Interaction",action:"Impression",label:f});i=!1}},onSlideAfter:function(t){n.setPause&&t[0].dataset&&n.setPause(t[0].dataset.pause);e()},pagerSelector:"#hero_pager"};f.length>0&&(u.height(s),$("#hero_wrp").append('<div id="hero_pager"><\/div>'),n=f.bxSlider(h),e(),u.removeAttr("style"));$(".hero_tmb").on("click",function(){var n=$(this).data("hotel-name");i=!0;i&&dataLayer&&dataLayer.push({event:"hero-carousel",category:"Hero: Carousel Interaction",action:"Click",label:n})})},get_detailsPageUrl:function(){return this._detailsPageUrl},set_detailsPageUrl:function(n){this._detailsPageUrl=n},get_speed:function(){return this._speed},set_speed:function(n){this._speed=n},get_pause:function(){return this._pause},set_pause:function(n){this._pause=n},get_mode:function(){return this._mode},set_mode:function(n){this._mode=n},get_detailsLink:function(){return this._detailsLink},set_detailsLink:function(n){this._detailsLink=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.HomepageBanner.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.HomepageBanner",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.FavoriteHotels=function(n){this._hotelsElementSelector=null;this._resultsTemplate=null;this._detailsPageUrl=null;this._noFavoritesMessage=null;this._bindOnLoad=null;this._bindDataSourceDelegate=null;this._deleteAllItemsDelegate=null;this._deleteSingleHotelDelegate=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.FavoriteHotels.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.FavoriteHotels.prototype={initialize:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.FavoriteHotels.callBaseMethod(this,"initialize");this._deleteSingleHotelDelegate=Function.createDelegate(this,this.deleteFavoriteHotel);this._bindDataSourceDelegate=Function.createDelegate(this,this.bindDataSource);this.get_bindOnLoad()&&this.loadData()},dispose:function(){this._deleteAllItemsDelegate&&($removeHandler(this.get_deleteAllItemsElement(),"click",this._deleteAllItemsDelegate),delete this._deleteAllItemsDelegate);this._deleteSingleHotelDelegate&&delete this._deleteSingleHotelDelegate;this._bindDataSourceDelegate&&delete this._bindDataSourceDelegate;Spinbox.Clients.BestWestern.Frontend.Web.UI.FavoriteHotels.callBaseMethod(this,"dispose")},deleteAllItems:function(){FHManager.Delete(null,this.loadData)},deleteAnim:function(n){var i=$('div[data-id="'+n+'"]',this.get_element()),t=this;i.addClass("remove").animate({opacity:"hide",height:"hide"},{complete:function(){t.loadData.apply(t);t.moveFocus()}})},deleteFavoriteHotel:function(n){var t=this;FHManager.Delete(n,function(){t.deleteAnim(n);t.updateFavs()},function(n){BestWestern.ShowMessage(n)})},updateFavs:function(){FHManager.Get(function(n){$(".fav_qty").text("("+n.length+")")})},moveFocus:function(){$(".your_favourite").first().find(".yf_link").focus()},loadData:function(){FHManager.Get(this._bindDataSourceDelegate)},bindDataSource:function(n){var t=this,i=this.get_detailsPageUrl(),r=new kendo.data.DataSource({schema:{model:{id:"Id"},parse:function(n){return $.each(n,function(n,t){t.Url=[i,t.Url].join("/")}),n}},data:n}),u=function(){$(t.get_hotelsElementSelector()).html('<div class="no_items">'+t.get_noFavoritesMessage()+"<\/div>")};$(this.get_hotelsElementSelector()).kendoListView({dataSource:r,template:kendo.template(this.get_resultsTemplate()),dataBound:function(n){this.dataSource.data().length===0?u():$.each($('[data-linktype="delete"]',n.sender.element),function(){var n=$(this).data("id");$addHandler(this,"click",function(){t._deleteSingleHotelDelegate(n)})})},dataBinding:function(){}})},get_detailsPageUrl:function(){return this._detailsPageUrl},set_detailsPageUrl:function(n){this._detailsPageUrl=n},get_hotelsElementSelector:function(){return this._hotelsElementSelector},set_hotelsElementSelector:function(n){this._hotelsElementSelector=n},get_resultsTemplate:function(){return this._resultsTemplate},set_resultsTemplate:function(n){this._resultsTemplate=n},get_noFavoritesMessage:function(){return this._noFavoritesMessage},set_noFavoritesMessage:function(n){this._noFavoritesMessage=n},get_kendoListView:function(){return $(this.get_hotelsElementSelector()).getKendoListView()},get_bindOnLoad:function(){return this._bindOnLoad},set_bindOnLoad:function(n){this._bindOnLoad=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.FavoriteHotels.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.FavoriteHotels",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResults=function(n){this._basePath=null;this._resultsElementSelector=null;this._pagerElementSelector=null;this._relativeSearchServiceUrl=null;this._resultsTemplate=null;this._gridResultsTemplate=null;this._maxThumbnailImages=null;this._resultsList=null;this._pageSize=null;this._sortBySelect=null;this._sortDistance=null;this._sortRating=null;this._sortPriceLow=null;this._sortPriceHigh=null;this._dataSchema=null;this._dataSource=null;this._tabletResetFilter=null;this._filters=null;this._thumbnailName=null;this._fullImageName=null;this._searchResultsFilter=null;this._sortDistanceDelegate=null;this._sortRatingDelegate=null;this._sortPriceLowDelegate=null;this._sortPriceHighDelegate=null;this._resetTableFiltersDelegate=null;this._sortBySelectChangedDelegate=null;this._returnTopDelegate=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResults.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResults.prototype={initialize:function(){var t,i,n;for(Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResults.callBaseMethod(this,"initialize"),t=this,$.preLoadImages&&$.preLoadImages("/App_Themes/BestWestern/Images/sfLoadingData.gif"),this.set_sortBySelect($(".sortBySelect",this.get_element())[0]),this.get_sortBySelect()!==null&&this.get_sortBySelect()!==undefined&&(this._sortBySelectChangedDelegate=Function.createDelegate(this,this.sortBySelectChanged),$addHandler(this.get_sortBySelect(),"change",this._sortBySelectChangedDelegate)),this.get_sortDistance()!==null&&this.get_sortDistance()!==undefined&&(this._sortDistanceDelegate=Function.createDelegate(this,this.sortByDistanceClick),$addHandler(this.get_sortDistance(),"click",this._sortDistanceDelegate)),this.get_sortRating()!==null&&this.get_sortRating()!==undefined&&(this._sortRatingDelegate=Function.createDelegate(this,this.sortRatingClick),$addHandler(this.get_sortRating(),"click",this._sortRatingDelegate)),this.get_sortPriceHigh()!==null&&this.get_sortDistance()!==undefined&&(this._sortPriceHighDelegate=Function.createDelegate(this,this.sortPriceHighClick),$addHandler(this.get_sortPriceHigh(),"click",this._sortPriceHighDelegate)),this.get_sortPriceLow()!==null&&this.get_sortPriceLow()!==undefined&&(this._sortPriceLowDelegate=Function.createDelegate(this,this.sortPriceLowClick),$addHandler(this.get_sortPriceLow(),"click",this._sortPriceLowDelegate)),this.get_tabletResetFilter()!==null&&this.get_tabletResetFilter()!==undefined&&(this._resetTableFiltersDelegate=Function.createDelegate(this,this.resetTabletFilters),$addHandler(this.get_tabletResetFilter(),"click",this._resetTableFiltersDelegate)),isMobile&&$("#has_filtered").click(function(){setTimeout(function(){$("html, body").animate({scrollTop:0})},500,$("#list_view_tab").click())}),t.bindSearchResults(),this.get_searchResultsFilter().set_hotelSearchResults(this),this.set_mapControl(BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsMap)),this.get_searchResultsFilter().set_mapControl(this.get_mapControl()),$('.show-map-view, [data-tab="map_view_tab"]').click(function(){t.get_mapControl().showMapSearch({lat:$(this).data("lat"),lng:$(this).data("long")});isMobile&&($("#footer, .listing-stick--wrp").hide(),$("#header").addClass("searchmap-modifyer"))}),i=$("[data-returntop]"),this._returnTopDelegate=Function.createDelegate(this,this.returnTop),n=0;n<i.length;n++)$addHandler(i[n],"click",this._returnTopDelegate);this.set_filters({});$(".filter-options__show-filter",this.get_element()).on("click",function(){$("body").toggleClass("filter-active")});$(".search-results-filter-col",this.get_element()).on("clickoutside",function(n){$(n.target).is(".filter-options__show-filter")||$("body").removeClass("filter-active")});$(".filter-close",this.get_element()).on("click",function(){$("body").removeClass("filter-active")})},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResults.callBaseMethod(this,"dispose")},DataSchema:function(){return{MinPrice:0,MaxPrice:0,CurrencySymbol:"&pound;",Location:"",TotalIncludingUnavailable:null,TierCounts:null,AmenitiesCounts:null,AllAmenities:null,AvailabilitySearch:!1,IsInternationalSearch:!1}},dataSchemeData:function(n){var t=new this.DataSchema,r,u,f,e,o,s,h,c,l;n.DirectConnectDown!=undefined&&n.DirectConnectDown&&(n=n.Response,n.AvailabilitySearch=!1);t.TotalIncludingUnavailable=n.TotalPropertiesIncludingUnavailable;t.Location=n.Location;var i=n.Items.map(function(n){return n.TotalPrice}),a=Math.max.apply(Math,i),v=Math.min.apply(Math,i);return t.MaxPrice=a,t.MinPrice=v,n.Items.length>0&&(t.CurrencySymbol=n.Items[0].CurrencySymbol),t.IsInternationalSearch=n.IsInternationalSearch,r=n.Items.map(function(n){return n.TierId}),u=r.reduceToCount(),t.TierCounts=u,f=n.Items.map(function(n){return n.Amenities}).reduce(function(n,t){return n.concat(t)},[]),e=f.reduceToCount(),t.AmenitiesCounts=e,t.AllAmenities=n.Items.map(function(n){return n.Amenities}),o=n.Items.map(function(n){return n.Stars}),s=o.reduceToCount(),t.StarCounts=s,h=n.Items.map(function(n){return n.TripAdvisorRating}),c=h.reduceToCount(),t.TaRatingCounts=c,t.AvailabilitySearch=n.AvailabilitySearch,this.set_dataSchema(t),l=this,$(n.Items).each(function(){$.extend(this,{detailsUrl:function(){return this.Url+l.get_searchParms()}})}),n.Items},setPagerHeaderText:function(n){var t;n===undefined&&(n=this.get_dataSchema());t=n.AvailabilitySearch?"{2} out of {3} hotels are available {4}":"{3} hotels are available {4}";dataSource=this.get_dataSource();var u=dataSource.page()*dataSource.pageSize(),e=dataSource.page(),i=dataSource.total(),f=BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch),r="in";if(n.Location===null||n.Location==="")try{n.Location=f.get_targetEntityTitle();r="near"}catch(o){}f.get_searchViewModel().Type==="hotel-name"&&(r="named");t=String.format(t,u-e+1,Math.min(i,u),i,n.TotalIncludingUnavailable,n.Location===""||n.Location===null?"":String.format("{0} {1}",r,n.Location));isMobile||$("#sf_availability").text(t);isMobile&&$("#sf_availability").text(i)},getOccupancySummary:function(n){var i=function(n,t,i){return!n||n==0?"":n+" "+t+(n>1?i:"")},r=function(n,t){return n?n+", "+t:t},t="",u;return n.CheckIn&&n.CheckOut&&(u=Math.ceil(Math.abs(new Date(n.CheckOut)-new Date(n.CheckIn))/864e5),t=r(t,i(u,"night","s"))),n.Adults&&n.Adults>0&&(t=r(t,i(n.Adults,"adult","s"))),n.Children&&n.Children>0&&(t=r(t,i(n.Children,"child","ren"))),t},bindSearchResults:function(){var o=window.location.pathname.replace(this.get_basePath(),""),t=this,n=BestWestern.Search.GetSearchModel(o),s=n.Term.split("/")[n.Term.split("/").length-1],u,f,e,i,r;Object.prototype.toString.call(n.Ages)==="[object Array]"&&(n.Ages=JSON.stringify(n.Ages));delete n.People;delete n.EmptySearch;isMobile&&(n.CheckIn!==null&&n.CheckIn!==""&&n.CheckOut!==null&&n.CheckOut!==""&&(u=new Date(n.CheckIn),f=new Date(n.CheckOut),$("[data-date-overview]").html(String.format("{0} - {1} to {2}","<span>"+s+"<\/span>",u.format("dd/MM"),f.format("dd/MM")))),$("[data-date-booking-options]").html("("+t.getOccupancySummary(n)+")"));this.set_dataSource(new kendo.data.DataSource({transport:{read:{url:this.get_relativeSearchServiceUrl(),dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",data:n}},schema:{total:function(n){return n.DirectConnectDown!=undefined&&n.DirectConnectDown?n.Response.Count:n.Count},data:function(n){return n.DirectConnectDown!=undefined&&n.DirectConnectDown?n.Response.Items:n.Items}},requestEnd:function(i){if(i.response!==undefined&&(i.response.DirectConnectDown!=undefined&&i.response.DirectConnectDown&&($("[data-dc-down]",t.get_element()).show(),$("[data-dc-down] .sfMsgNegative span",t.get_element()).text(i.response.ResultsMessage)),t.dataSchemeData(i.response),i.response.Count!==undefined))if(i.response.Count===0)$("[data-no-results]",t.get_element()).show();else if($("[data-no-results]",t.get_element()).hide(),isMobile&&i.response.Location&&n.CheckIn!==null&&n.CheckIn!==""&&n.CheckOut!==null&&n.CheckOut!==""){var r=new Date(n.CheckIn),u=new Date(n.CheckOut);$("[data-date-overview]").html(String.format("{0} - {1} to {2}","<span>"+i.response.Location+"<\/span>",r.format("dd/MM"),u.format("dd/MM")))}},pageSize:this.get_pageSize(),serverPaging:!1,serverFiltering:!1,serverSorting:!1}));e=isMobile?{display:'<span id="sf_availability"><\/span> hotels available',empty:'<span id="sf_availability"><\/span> hotels available'}:{display:'<span id="sf_showing">Showing {0}-{1}<\/span><span id="sf_availability"><\/span>',empty:'<span id="sf_showing">Showing 0-0<\/span><span id="sf_availability"><\/span>'};$(this.get_pagerElementSelector()).kendoPager({dataSource:t.get_dataSource(),numeric:!1,previousNext:!1,selectTemplate:'<li><span style="color:red">#=text#<\/span><\/li>',messages:e});i=!0;r=0;$(this.get_resultsElementSelector()).kendoListView({dataSource:t.get_dataSource(),template:kendo.template(t.get_resultsTemplate()),dataBound:function(){var u=t.get_dataSchema(),e,o,s,h,l,a,v,f,c;if(t.setPagerHeaderText(u),i===!0&&(t.initializeSlideshow(),i=!1),t.resetFilters(u),r===0){$(".filter-item__list > li, .search-result-filterby--wrp .cbline").removeClass("filter-shown");$("[data-qty-type]").text("0");for(e in u.TierCounts)u.TierCounts.hasOwnProperty(e)&&($('[data-qty-type="'+e+'"]').text(u.TierCounts[e]).parent("li").addClass("filter-shown"),$('[data-qty-type="'+e+'"]').parents(".cbline").addClass("filter-shown"));for(o in u.AmenitiesCounts)u.AmenitiesCounts.hasOwnProperty(o)&&($('[data-qty-type="'+o+'"]').text(u.AmenitiesCounts[o]).parent("li").addClass("filter-shown"),$('[data-qty-type="'+o+'"]').parents(".cbline").addClass("filter-shown"));for(s in u.StarCounts)u.StarCounts.hasOwnProperty(s)&&($('[data-qty-star-type="'+s+'"]').text(u.StarCounts[s]).parent("li").addClass("filter-shown"),$('[data-qty-star-type="'+s+'"]').parents(".cbline").addClass("filter-shown"));for(h in u.TaRatingCounts)u.TaRatingCounts.hasOwnProperty(h)&&($('[data-qty-taRating-type="'+h+'"]').text(u.TaRatingCounts[h]).parent("li").addClass("filter-shown"),$('[data-qty-taRating-type="'+h+'"]').parents(".cbline").addClass("filter-shown"))}if(r++,$("[data-group]").each(function(){var n=$(this),t=n.data("group"),r,i;t!=undefined&&t!=null&&(r=t.split(","),i=u.AllAmenities.filter(function(n){return n.filter(function(n){return r.indexOf(n)!=-1}).length>0}),n.text(i.length),i.length>0&&(n.parent("li").addClass("filter-shown"),n.parents(".cbline").addClass("filter-shown")))}),u.IsInternationalSearch?$("[data-ukonly]:not(option)").hide():$("select.allSorts option[data-ukonly]").appendTo($("select.sortBySelect")),u.AvailabilitySearch?($("select.allSorts option[data-availability]").appendTo($("select.sortBySelect")),$("[data-availability]").show(),$("[data-not-availability]").hide()):($("select.sortBySelect option[data-availability]").remove(),$("[data-availability]").hide(),$("[data-not-availability]").show()),l=BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch),a=l.get_searchViewModel().Type=="hotel-name",a&&$('select.sortBySelect option[data-field="TargetDistance"]').remove(),$("select.sortBySelect option").length>0&&(v=$("select.sortBySelect option").first(),$(".ss_sort-by span").text(v.val())),FHManager.PostBind(),setTimeout(function(){var t=$(".sr_share"),n,i;if(typeof stLight!="undefined")for(n=0;n<t.length;n++)i=t[n].getAttribute("data-url"),stWidget.addEntry({service:"sharethis",element:t[n],url:i})},500),typeof dataLayer&&exception){if(f=t.get_resultsList().dataSource.data(),u.TotalIncludingUnavailable===0)dataLayer.push({event:"bw_location_closed_out",location:u.Location,checkin:n.CheckIn?n.CheckIn:"Not set",check_out:n.CheckOut?n.CheckOut:"Not set",rooms:n.RoomQuantity,adults:n.Adults,children:n.Children});else if(typeof f[0]=="undefined")dataLayer.push({event:"bw_property_closed_out",location:u.Location,checkin:n.CheckIn?n.CheckIn:"Not set",check_out:n.CheckOut?n.CheckOut:"Not set",rooms:n.RoomQuantity,adults:n.Adults,children:n.Children});else{var b=f.slice(0,3),y=[],p=new Date(n.CheckIn),w=new Date(n.CheckOut),k=p.format("yyyy-MM-dd"),d=w.format("yyyy-MM-dd"),g=f[0].Address.CountryName,nt=f[0].CurrencyCode,tt=f[0].CurrencySymbol,it=w.getTime()-p.getTime(),rt=Math.round(it/864e5);$(b).each(function(){y.push(this.PropertyId)});dataLayer.push({hotelIdList:y.join(","),searchTerm:n.Term,searchArrivalDay:new Date(n.CheckIn).format("ddd"),occupancy:n.Adults+" adults, "+n.Children+" child",duration:rt,checkInDate:k,checkOutDate:d,region:u.Location,city:u.Location,country:g,adults:n.Adults,children:n.Children,currency:nt,currencySymbol:tt})}typeof initGtm!="undefined"&&initGtm();typeof initFBE_GTM!="undefined"&&initFBE_GTM();dataLayer.push({event:"dataLayerUpdated"})}c=isMobile?$(".hotelitem"):$(".sr_item");t.catalogueImpressions(c);$(window).scroll(function(){clearTimeout($.data(this,"scrollTimer"));$.data(this,"scrollTimer",setTimeout(function(){t.catalogueImpressions(c)},250))});$(".pdp-link").on("click",function(){var i=$(this),n=i.parents("[data-gtm]").data("gtm"),t="",r;n.Street!=="undefined"?t+=n.Street:"";n.AddressLine2!=="undefined"?t+=", "+n.AddressLine2:"";n.City!=="undefined"?t+=", "+n.City:"";n.Zip!=="undefined"?t+=", "+n.Zip:"";r={event:"productClick",ecommerce:{click:{actionField:{list:"Search Results"},products:[{name:n.Name,id:n.Id,price:n.Price,brand:t,variant:n.Nights,position:i.parents("[data-gtm]").index()+1}]}},eventCallback:function(){document.location=i.attr("href")}};window.console&&console.log(r);typeof dataLayer&&dataLayer.push(r)});isMobile||(BestWestern.searchSummary={location:u.Location,dates:{checkIn:n.CheckIn!==null?new Date(n.CheckIn.replace(/-/g,"/")).format("ddd, dd/MM"):null,checkOut:n.CheckOut!==null?new Date(n.CheckOut.replace(/-/g,"/")).format("ddd, dd/MM"):null},guests:n.Adults!=null?n.Adults+" adult"+(n.Adults>1?"s":"")+(n.Children>0?", "+n.Children+" child"+(n.Children>1?"ren":""):"")+" ("+n.RoomQuantity+" room"+(n.RoomQuantity>1?"s":"")+")":null},t.constructSearchSummary(BestWestern.searchSummary));$.isEmptyObject(t.get_filters())||$(t.get_tabletResetFilter()).show()}});this.set_resultsList($(t.get_resultsElementSelector()).data("kendoListView"));this.get_searchResultsFilter().set_resultsList(t.get_resultsList())},catalogueImpressions:function(n){var f=[],u,i,t,r;if(typeof dataLayer&&n.length>0){for(u=0;u<n.length;u++)i=n[u],verge.inViewport(i)&&!$(i).data("viewed")&&(t=$(i).data("gtm"),r="",t.Street!=="undefined"?r+=t.Street:"",t.AddressLine2!=="undefined"?r+=", "+t.AddressLine2:"",t.City!=="undefined"?r+=", "+t.City:"",t.Zip!=="undefined"?r+=", "+t.Zip:"",f.push({name:t.Name,id:t.Id,price:t.Price,brand:r,variant:t.Nights,list:"Search Results",position:$(i).index()+1}),$(i).data("viewed",!0));f.length>0&&dataLayer.push({event:"productImpression",ecommerce:{impressions:f}})}},constructSearchSummary:function(n){var r;if(!window.hasSearchSummary){var u=$("body"),t=kendo.template($("#searchsummary").html()),i=t(n);$("#main-header").after(i);r=new Waypoint.Sticky({element:$(".search-summary")[0]});window.hasSearchSummary=!0}},changeActiveState:function(n){$(".sort-bar__item button",this.get_element()).removeClass("active").filter(n.rawEvent.currentTarget).addClass("active")},sortBySelectChanged:function(n){try{var t=$(n.target.options[n.target.selectedIndex]);this.get_resultsList().dataSource.sort({field:t.data("field"),dir:t.data("dir")});$(".ss_sort-by span").text(t.val());this.initializeSlideshow()}catch(i){}},sortByDistanceClick:function(n){try{this.get_resultsList().dataSource.sort({field:"TargetDistance",dir:"asc"});this.changeActiveState(n);this.initializeSlideshow()}catch(t){}},sortRatingClick:function(n){try{this.get_resultsList().dataSource.sort({field:"Stars",dir:"desc"});this.changeActiveState(n);this.initializeSlideshow()}catch(t){}},sortPriceHighClick:function(n){try{this.get_resultsList().dataSource.sort({field:"TotalPrice",dir:"desc"});this.changeActiveState(n);this.initializeSlideshow()}catch(t){}},sortPriceLowClick:function(n){try{this.get_resultsList().dataSource.sort({field:"TotalPrice",dir:"asc"});this.changeActiveState(n);this.initializeSlideshow()}catch(t){}},resetFilters:function(n){n===undefined&&(n=this.get_dataSchema());this.get_searchResultsFilter().setupRangeSlider(n.MinPrice,n.MaxPrice,n.AvailabilitySearch,n.CurrencySymbol);this.get_mapControl()!==undefined&&this.get_mapControl().get_searchFilters()&&this.get_mapControl().get_searchFilters().setupRangeSlider(n.MinPrice,n.MaxPrice,n.AvailabilitySearch,n.CurrencySymbol)},clearFilter:function(n){if(n!==undefined){var t=this.get_filters();t.hasOwnProperty(n)&&delete t[n];this.applyFilters()}else this.set_filters({}),this.applyFilters()},addFilter:function(n,t){var i=this.get_filters();i[n]=t;this.applyFilters()},applyFilters:function(){var i={},n,r,t,u;i.logic="and";i.filters=[];for(n in this.get_filters())if(this.get_filters().hasOwnProperty(n))if(r=this.get_filters()[n],t={},t.logic="and",(n==="TierId"||n==="Stars"||n==="TripAdvisorRating")&&(t.logic="or"),t.filters=[],Object.prototype.toString.call(r)==="[object Array]"){for(u=0;u<r.length;u++)t.filters.push(r[u]);i.filters.push(t)}else i.filters.push(this.get_filters()[n]);this.get_resultsList().dataSource.filter(i);this.get_mapControl()!==undefined&&this.get_mapControl().setHotelsFromDataSource();this.setPagerHeaderText();this.initializeSlideshow()},resetTabletFilters:function(){this.get_searchResultsFilter()!=null&&(this.get_searchResultsFilter().resetFilters(),this.clearFilter(),$(this.get_tabletResetFilter()).hide())},initializeSlideshow:function(){var t,i,n;isMobile?(n=$(".hotelitemslider .slides"),n.each(function(n,t){if(t=$(t),t.find("li").length>1)var i=t.show().bxSlider({pager:!1,oneToOneTouch:!1,prevText:"",nextText:""});else t.show()})):(t=".tmb-"+this.get_thumbnailName()+".",i=".tmb-"+this.get_fullImageName()+".",$(".sr_nav").click(function(){var e=$(this),f=e.parents(".sr_imgs").addClass("image-loading"),i=f.find("img"),n=i.data("images"),r=i.data("active-img")||0,t,u;e.is(".sr_next")?(t=new Image,u=n[r+1]||n[0],t.onload=function(){i.attr("src",u);i.data("active-img",r!==n.length-1?r+1:0);f.removeClass("image-loading")},t.src=u):(t=new Image,u=n[r-1]||n[n.length-1],t.onload=function(){i.attr("src",u);i.data("active-img",r!==0?r-1:n.length-1);f.removeClass("image-loading")},t.src=u);$(t).remove()}))},setTemplate:function(n){var t=this.get_resultsList();t.options.template=n;t.options.altTemplate=n;t.template=kendo.template(t.options.template);t.altTemplate=kendo.template(t.options.altTemplate);t.refresh();this.initializeSlideshow()},switchToListView:function(){var n=this.get_resultsTemplate();$(this.get_resultsElementSelector()).removeClass("grid").addClass("list");$("#grid").removeClass("active");$("#list").addClass("active");this.setTemplate(n);BestWestern.StorageManager.Delete("srlvg")},switchToGridView:function(){var n=this.get_gridResultsTemplate();$(this.get_resultsElementSelector()).removeClass("list").addClass("grid");$("#list").removeClass("active");$("#grid").addClass("active");this.setTemplate(n);BestWestern.StorageManager.Put("srlvg",!0)},returnTop:function(){$(window).scrollTop(0)},get_resultsList:function(){return this._resultsList},set_resultsList:function(n){this._resultsList=n},get_basePath:function(){return this._basePath},set_basePath:function(n){this._basePath=n},get_resultsElementSelector:function(){return this._resultsElementSelector},set_resultsElementSelector:function(n){this._resultsElementSelector=n},get_pagerElementSelector:function(){return this._pagerElementSelector},set_pagerElementSelector:function(n){this._pagerElementSelector=n},get_relativeSearchServiceUrl:function(){return this._relativeSearchServiceUrl},set_relativeSearchServiceUrl:function(n){this._relativeSearchServiceUrl=n},get_resultsTemplate:function(){return this._resultsTemplate},set_resultsTemplate:function(n){this._resultsTemplate=n},get_gridResultsTemplate:function(){return this._gridResultsTemplate},set_gridResultsTemplate:function(n){this._gridResultsTemplate=n},get_maxThumbnailImages:function(){return this._maxThumbnailImages},set_maxThumbnailImages:function(n){this._maxThumbnailImages=n},get_pageSize:function(){return this._pageSize},set_pageSize:function(n){this._pageSize=n},get_thumbnailName:function(){return this._thumbnailName},set_thumbnailName:function(n){this._thumbnailName=n},get_fullImageName:function(){return this._fullImageName},set_fullImageName:function(n){this._fullImageName=n},get_searchResultsFilter:function(){return this._searchResultsFilter},set_searchResultsFilter:function(n){this._searchResultsFilter=n},get_mapControl:function(){return this._mapControl},set_mapControl:function(n){this._mapControl=n},get_searchParms:function(){var n=window.location.pathname.replace(this.get_basePath(),""),t=BestWestern.Search.GetSearchModel(n);return BestWestern.Search.BuildSearchParams(t)},get_dataSchema:function(){return this._dataSchema},set_dataSchema:function(n){this._dataSchema=n},get_filters:function(){return this._filters},set_filters:function(n){this._filters=n},get_dataSource:function(){return this._dataSource},set_dataSource:function(n){this._dataSource=n},get_sortBySelect:function(){return this._sortBySelect},set_sortBySelect:function(n){this._sortBySelect=n},get_sortDistance:function(){return this._sortDistance},set_sortDistance:function(n){this._sortDistance=n},get_sortRating:function(){return this._sortRating},set_sortRating:function(n){this._sortRating=n},get_sortPriceLow:function(){return this._sortPriceLow},set_sortPriceLow:function(n){this._sortPriceLow=n},get_sortPriceHigh:function(){return this._sortPriceHigh},set_sortPriceHigh:function(n){this._sortPriceHigh=n},get_tabletResetFilter:function(){return this._tabletResetFilter},set_tabletResetFilter:function(n){this._tabletResetFilter=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResults.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResults",Sys.UI.Control);$(function(){if($(".three-tab-bar").length)var n=new Waypoint.Sticky({element:$(".three-tab-bar")[0],handler:function(){},wrapper:'<div class="listing-stick--wrp"><\/div>',offset:-80})});
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsMap=function(n){this._closeMapSearchDelegate=null;this._searchFilters=null;this._markers=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsMap.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsMap.prototype={initialize:function(){function t(){var n=$("#mvf_list_cont").data("jsp");n.reinitialise()}this.set_markers([]);document.getElementById("map_close")&&(this._closeMapSearchDelegate=Function.createDelegate(this,this.closeMapSearch),$addHandler(document.getElementById("map_close"),"click",this._closeMapSearchDelegate));var n=BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResults);this.set_hotelSearchResults(n);this.get_searchFilters()&&(this.get_searchFilters().set_hotelSearchResults(n),this.get_searchFilters().set_mapControl(this));$(document).on("click",".expandable .mvf_title",function(){var r=$(this),n=r.parents(".expandable"),i=n.find(".mvf_body");i.is(":hidden")?(n.addClass("expanded"),i.show()):(n.removeClass("expanded"),i.hide());t()});Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsMap.callBaseMethod(this,"initialize")},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsMap.callBaseMethod(this,"dispose")},icon:"/App_Themes/BestWesternX2/Images/x2marker.png",iconActive:"/App_Themes/BestWesternX2/Images/x2markerLight.png",showMapSearch:function(n){var t=this;$(this.get_element()).fadeIn(function(){document.getElementById("map_element")!==null&&t.initMap(n)});isMobile||$("html").addClass("noscroll")},closeMapSearch:function(){if($("html").is(".ie8, .ie9"))$(this.get_element()).fadeOut(function(){$(this).removeClass("state_closed state_loaded")});else $(this.get_element()).addClass("state_closed").on("webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend",function(n){n.target!==null&&$(n.target).hasClass("map_view_overlay")===!0&&$(this).css("display","none").removeClass("state_closed state_loaded")});$("html").removeClass("noscroll")},initMap:function(n){var r=this,t,u,i;isMobile&&(mobmapHeight=function(){var n=$(window).innerHeight(),t=n+116;$("#map_element").css("min-height",t+"px")},mobmapHeight(),$(window).resize(function(){mobmapHeight()}));t=new google.maps.LatLng(51.507351,-.127758);n&&n.lng&&(t=new google.maps.LatLng(n.lat,n.lng));$("#mvf_list_cont").jScrollPane();var f=new google.maps.StyledMapType([{featureType:"poi.business",stylers:[{visibility:"off"}]}],{name:"Styled Map"}),u={zoom:13,center:t,disableDefaultUI:!0,clickableIcons:!1};isMobile&&(u={disableDefaultUI:!0,zoom:14,center:t,gestureHandling:"greedy",zoomControl:!1,clickableIcons:!1});i=new google.maps.Map(document.getElementById("map_element"),u);i.mapTypes.set("map_style",f);i.setMapTypeId("map_style");this.set_map(i);this.setHotelsFromDataSource(n);isMobile&&$(r.get_element()).append('<span class="close-map"><\/span>');google.maps.event.addListenerOnce(this.get_map(),"idle",function(){$(r.get_element()).addClass("state_loaded")});$(".close-map").click(function(){$(".tabs a").removeClass("active");$("#list_view_tab").addClass("active");$(".sf_cols[data-tab]").hide();$('.sf_cols[data-tab="#tab_0"]').fadeIn();isMobile&&($("#footer, .listing-stick--wrp").show(),$("#header").removeClass("searchmap-modifyer"))})},getInfoBoxContent:function(n,t){var r=new kendo.template(this.get_markerTemplate()),i=r(n);return t!==!0&&(i=i.replace(/data-availability/g,"hidden")),i.replace(/<a /g,'<a target="_self" ')},clearOverlays:function(){for(var n=0;n<this.get_markers().length;n++)this.get_markers()[n].setMap(null);this.get_markers().length=0},setHotelsFromDataSource:function(n){var t=this,o=new google.maps.LatLngBounds,s,i,r,f,u,e,h;(t.get_hotelSearchResults()||t.set_hotelSearchResults(BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResults)),s=t.get_hotelSearchResults().get_dataSchema().AvailabilitySearch===!0,this.clearOverlays(),i=this.get_map(),i!==undefined)&&(r=[],f=[],BestWestern.infoBoxes=[],u=this.get_hotelSearchResults().get_dataSource().view(),e="",e=isMobile?"/App_Themes/BestWesternMobile/Images/icon-cross.png":"/App_Themes/BestWestern/Images/infobox-close.png",u===null||u.length===0?(n&&n.lng?i.setCenter(new google.maps.LatLng(n.lat,n.lng)):i.setCenter(new google.maps.LatLng(51.507351,-.127758)),i.setZoom(11)):($(u).each(function(n,u){var c=new InfoBox({content:t.getInfoBoxContent(u,s),alignBottom:!0,pixelOffset:new google.maps.Size(-150,-50),closeBoxURL:e,closeBoxMargin:"0px"}),l,h;c.opened=!1;r.push(c);BestWestern.infoBoxes.push(c);l=new google.maps.LatLng(u.Address.Latitude,u.Address.Longitude);o.extend(l);h=new google.maps.Marker({position:l,map:i,icon:t.icon});f.push(h);t.get_markers().push(h);google.maps.event.addListener(h,"click",function(){for(var n=0;n<r.length;n++)r[n].opened&&(r[n].close(),r[n].opened=!1,f[n].setIcon(t.icon));c.opened=!0;c.open(t.get_map(),h);setTimeout(FHManager.PostBind,100);h.setIcon(t.iconActive);setTimeout(function(){var t=$(".infoBox .sr_share"),n;if(typeof stLight!="undefined")for(n=0;n<t.length;n++)stWidget.addEntry({service:"sharethis",element:t[n],url:t[n].getAttribute("data-url")})},500)});google.maps.event.addListener(c,"closeclick",function(){h.setIcon(t.icon)})}),i.fitBounds(o)),h=i.getZoom(),i.setZoom(Math.min(15,h)))},get_map:function(){return this._map},set_map:function(n){this._map=n},get_searchFilters:function(){return this._searchFilters},set_searchFilters:function(n){this._searchFilters=n},get_hotelSearchResults:function(){return this._hotelSearchResults},set_hotelSearchResults:function(n){this._hotelSearchResults=n},get_markerTemplate:function(){return this._markerTemplate},set_markerTemplate:function(n){this._markerTemplate=n},get_markers:function(){return this._markers},set_markers:function(n){this._markers=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsMap.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsMap",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.RangeSliders=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsFilter=function(n){this._sortBySelect=null;this._sortBySelected=null;this._filters=null;this._showFilter=null;this._closeFilter=null;this._resetFilter=null;this._tabletResetFilter=null;this._searchFilters=null;this._rangeSlider=null;this._rangeSliderConfigured=!1;this._standAlone=null;this._forHotelMapListing=null;this._resultsList=null;this._hotelSearchResults=null;this._tiersFilterList=null;this._suitabilityFilterList=null;this._amenitiesFilterList=null;this._regionsFilterList=null;this._minPrice=null;this._maxPrice=null;this._sortBySelectChangedDelegate=null;this._starsChangedDelegate=null;this._taRatingChangedDelegate=null;this._tierChangedDelegate=null;this._amenitiesChangedDelegate=null;this._regionChangedDelegate=null;this._suitabilityChangedDelegate=null;this._resetFiltersDelegate=null;this._mapClickDelegate=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsFilter.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsFilter.prototype={initialize:function(){var t,i,n;Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsFilter.callBaseMethod(this,"initialize");this.set_sortBySelect($(".sortBySelect",this.get_element())[0]);this.get_resetFilter()!==null&&this.get_resetFilter()!==undefined&&(this._resetFiltersDelegate=Function.createDelegate(this,this.resetFilters),$addHandler(this.get_resetFilter(),"click",this._resetFiltersDelegate));this.get_sortBySelect()!==null&&this.get_sortBySelect()!==undefined&&this.get_standAlone()===!0&&(this._sortBySelectChangedDelegate=Function.createDelegate(this,this.sortBySelectChanged),$addHandler(this.get_sortBySelect(),"change",this._sortBySelectChangedDelegate));t=$(".map_view_close");t.length>0&&(n=this,t.each(function(t,i){n.get_mapControl()&&$addHandler(i,"click",n.get_mapControl()._closeMapSearchDelegate)}));$("#map",this.get_element())[0]!==undefined&&(this._mapClickDelegate=Function.createDelegate(this,this.mapClick),i=document.getElementById("map_search_btn"),i!==null&&$addHandler(i,"click",this._mapClickDelegate),$addHandler($("#map",this.get_element())[0],"click",this._mapClickDelegate));this._tierChangedDelegate=Function.createDelegate(this,this.tierChanged);this._suitabilityChangedDelegate=Function.createDelegate(this,this.suitabilityChanged);this._amenitiesChangedDelegate=Function.createDelegate(this,this.amenitiesChanged);this._regionChangedDelegate=Function.createDelegate(this,this.regionChanged);this._starsChangedDelegate=Function.createDelegate(this,this.starsChanged);this._taRatingChangedDelegate=Function.createDelegate(this,this.taRatingChanged);n=this;$('[data-filter-type="tier"]',this.get_element()).each(function(t,i){$addHandler(i,"change",n._tierChangedDelegate)});$('[data-filter-type="suitability"]',this.get_element()).each(function(t,i){$addHandler(i,"change",n._suitabilityChangedDelegate)});$('[data-filter-type="amenity"]',this.get_element()).each(function(t,i){$addHandler(i,"change",n._amenitiesChangedDelegate)});$('[data-filter-type="region"]',this.get_element()).each(function(t,i){$addHandler(i,"change",n._regionChangedDelegate)});$('[data-filter-type="stars"]',this.get_element()).each(function(t,i){$addHandler(i,"change",n._starsChangedDelegate)});$('[data-filter-type="taRating"]',this.get_element()).each(function(t,i){$addHandler(i,"change",n._taRatingChangedDelegate)});$(".sf_sort_flds").length>0&&$(".sf_sort_flds select").each(function(n,t){t=$(t);t.hasClass("hasCustomSelect")||t.customSelect()});$(".filter-item__title",this.get_element()).on("click",function(){$(this).parent().toggleClass("collapsed")})},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsFilter.callBaseMethod(this,"dispose")},setupRangeSlider:function(n,t,i,r){var o,u,e,f;if(this._rangeSliderConfigured!==!0){if(BestWestern.rangeSlider={},n===undefined&&(n=0),t===undefined&&(n=0,t=0),n=Math.abs(Math.round(n-.5)),t=Math.round(t+.5),BestWestern.rangeSlider.min=n,BestWestern.rangeSlider.max=t,(this.get_minPrice()===undefined||this.get_minPrice()===0||this.get_minPrice()===null)&&this.set_minPrice(n),(this.get_maxPrice()===undefined||this.get_maxPrice()===0||this.get_maxPrice()===null)&&this.set_maxPrice(t),o=$('[data-type="filter_range"]',this.get_element()).empty(),BestWestern.rangeSlider.elements=$('[data-type="filter_range"]'),u=this,r===null&&(r=""),e=wNumb({thousand:",",prefix:r,decimals:0}),BestWestern.rangeSlider.rangeFormat=e,u.get_minPrice()!==null&&isFinite(u.get_minPrice())&&u.get_maxPrice()!==null&&isFinite(u.get_maxPrice())&&i){o.length&&(f=o[0],$(".fr_min").text(e.to(n)),$(".fr_max").text(e.to(t)),noUiSlider.create(f,{start:[n,t],range:{min:[n],max:[t]}}),f=f.noUiSlider,BestWestern.rangeSlider.rangeSlider=f);this.set_rangeSlider(f);f.off("change");f.on("change",function(n){$(".fr_min").text(e.to(e.from(n[0])));$(".fr_max").text(e.to(e.from(n[1])));for(var t=0;t<BestWestern.rangeSlider.elements.length;t++)BestWestern.rangeSlider.elements[t].noUiSlider.set([n[0],n[1]])});f.on("set",function(n){function t(n){var t=n.getAttribute("data-dynamic-filter-qty");t++;n.setAttribute("data-dynamic-filter-qty",t)}var r;u.set_maxPrice(parseInt(n[1],10));u.set_minPrice(parseInt(n[0],10));u.get_hotelSearchResults().addFilter("TotalPrice",[{field:"TotalPrice",operator:"gte",value:u.get_minPrice()},{field:"TotalPrice",operator:"lte",value:u.get_maxPrice()}]);$(".filter-shown").attr("data-dynamic-filter-qty",0);var i=[],f=u.get_hotelSearchResults()._dataSource._data,e=u.get_minPrice(),o=u.get_maxPrice();f.forEach(function(n,t){var r=n.TotalPrice;r>=e&&r<=o&&(i[t]=n)});r=document.querySelectorAll(".filter-shown");Array.prototype.forEach.call(r,function(n){var u=n,e=n.querySelector("[data-filter-type]"),o=e.getAttribute("data-filter-type"),f=o.charAt(0).toUpperCase()+o.slice(1),r=e.getAttribute("data-id");i.forEach(function(n){f=="Amenity"?n.Amenities.forEach(function(n){n.indexOf(r.substring(1,r.length-1))!=-1&&t(u)}):f=="TaRating"?n.TripAdvisorRating==r&&t(u):f=="Tier"?n.TierId==r&&t(u):n[f]==r&&t(u)})});$(".filter-shown").each(function(){var n=$(this),t=n.attr("data-dynamic-filter-qty");t>0?(n.show(),n.find(".filter-item__qty").text(t)):n.hide()})})}this._rangeSliderConfigured=!0;i!==!0?o.attr("disabled","disabled"):o.removeAttr("disabled")}},sortBySelectChanged:function(n){try{var t=$(n.target.options[n.target.selectedIndex]);this.sortResults(t.data("field"),t.data("dir"))}catch(i){}},filterChanged:function(n,t,i,r){var u,f;if(BestWestern.infoBoxes&&BestWestern.infoBoxes.length>0)for(u=0;u<BestWestern.infoBoxes.length;u++)BestWestern.infoBoxes[u].close();var e=$(n.target),o=e.data("id"),s=e.data("filter-type");$("[data-id='"+o+"'][data-filter-type=\""+s+'"][id!="'+n.target.id+'"]').prop("checked",n.target.checked);f=$('[data-filter-type="'+t+'"]:checked',this.get_element()).toArray().map(function(n){return{field:i,operator:r,value:$(n).data("id")}});f.length===0?this.get_hotelSearchResults().clearFilter(i):this.get_hotelSearchResults().addFilter(i,f);$("#search-results").is(":empty")?$("#filter-msg").show():$("#filter-msg").hide()},arrayContainsOperator:function(n,t){for(var r=t.split(","),i=0;i<r.length;i++)if(n.indexOf(r[i])>=0)return!0},suitabilityChanged:function(n){this.filterChanged(n,"suitability","Suitabilities",this.arrayContainsOperator)},amenitiesChanged:function(n){var t=this;this.filterChanged(n,"amenity","Amenities",t.arrayContainsOperator)},tierChanged:function(n){this.filterChanged(n,"tier","TierId","eq")},regionChanged:function(n){this.filterChanged(n,"region","RegionId","eq")},starsChanged:function(n){this.filterChanged(n,"stars","Stars","eq")},taRatingChanged:function(n){this.filterChanged(n,"taRating","TripAdvisorRating","eq")},sortResults:function(n,t){var i={field:n,dir:t};this.get_resultsList().dataSource.sort(i);this.get_hotelSearchResults().initializeSlideshow()},resetFilters:function(){if(this.set_maxPrice(0),this.set_minPrice(0),$('[data-type="filter_range"]').val([0,99999]),$('[data-filter-type="tier"]').removeAttr("checked"),$('[data-filter-type="amenity"]').removeAttr("checked"),$('[data-filter-type="region"]').removeAttr("checked"),$('[data-filter-type="stars"]').removeAttr("checked"),$('[data-filter-type="taRating"]').removeAttr("checked"),this.get_hotelSearchResults().resetFilters(),this.get_hotelSearchResults().clearFilter(),BestWestern.rangeSlider!==undefined){for(var n=0;n<BestWestern.rangeSlider.elements.length;n++)BestWestern.rangeSlider.elements[n].noUiSlider.set([BestWestern.rangeSlider.min,BestWestern.rangeSlider.max]);$(".fr_min").text(BestWestern.rangeSlider.rangeFormat.to(BestWestern.rangeSlider.min));$(".fr_max").text(BestWestern.rangeSlider.rangeFormat.to(BestWestern.rangeSlider.max))}},mapClick:function(){this.get_mapControl()!==null&&this.get_mapControl()!==undefined&&this.get_mapControl().showMapSearch()},get_sortBySelect:function(){return this._sortBySelect},set_sortBySelect:function(n){this._sortBySelect=n},get_sortBySelected:function(){return this._sortBySelected},set_sortBySelected:function(n){this._sortBySelected=n},get_resultsList:function(){return this._resultsList},set_resultsList:function(n){this._resultsList=n},get_filters:function(){return this._filters},set_filters:function(n){this._filters=n},get_showFilter:function(){return this._showFilter},set_showFilter:function(n){this._showFilter=n},get_searchFilters:function(){return this._searchFilters},set_searchFilters:function(n){this._searchFilters=n},get_rangeSlider:function(){return this._rangeSlider},set_rangeSlider:function(n){this._rangeSlider=n},get_minPrice:function(){return this._minPrice},set_minPrice:function(n){this._minPrice=n},get_maxPrice:function(){return this._maxPrice},set_maxPrice:function(n){this._maxPrice=n},get_tiersFilterList:function(){return this._tiersFilterList},set_tiersFilterList:function(n){this._tiersFilterList=n},get_regionsFilterList:function(){return this._regionsFilterList},set_regionsFilterList:function(n){this._regionsFilterList=n},get_hotelSearchResults:function(){return this._hotelSearchResults},set_hotelSearchResults:function(n){this._hotelSearchResults=n},get_closeFilter:function(){return this._closeFilter},set_closeFilter:function(n){this._closeFilter=n},get_resetFilter:function(){return this._resetFilter},set_resetFilter:function(n){this._resetFilter=n},get_suitabilityFilterList:function(){return this._suitabilityFilterList},set_suitabilityFilterList:function(n){this._suitabilityFilterList=n},get_amenitiesFilterList:function(){return this._amenitiesFilterList},set_amenitiesFilterList:function(n){this._amenitiesFilterList=n},get_mapControl:function(){return this._mapControl},set_mapControl:function(n){this._mapControl=n},get_standAlone:function(){return this._standAlone},set_standAlone:function(n){this._standAlone=n},get_forHotelMapListing:function(){return this._forHotelMapListing},set_forHotelMapListing:function(n){this._forHotelMapListing=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsFilter.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelSearchResultsFilter",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelAutocomplete=function(n){Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelAutocomplete.initializeBase(this,[n]);this._searchInput=null;this._selectedItem=null;this._clearSearchDelegate=null;this._clearSelection=null};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelAutocomplete.prototype={initialize:function(){var n=this,t=$(".clear-selection",this.get_element()),i;t.length>0&&(this.set_clearSelection(t[0]),this._clearSearchDelegate=Function.createDelegate(this,this.clearSearch),$addHandler(this.get_clearSelection(),"click",this._clearSearchDelegate));i=kendo.observable({selectedPoint:null,onSelect:function(t){var i=t.sender.dataItem(t.item.index()),r;if(this.set("selectedPoint",i),n._selectedItem=i,n.onHotelSelected)n.onHotelSelected(i);i!==null&&($.ajax({url:"/restapi/autocomplete/log",data:{term:t.sender._prev,type:i.TypeName,entityId:i.id},type:"PUT",dataType:"json"}),r=["GB","EN","SF","WL"].indexOf(i.CountryCode)>=0)},points:new kendo.data.DataSource({serverFiltering:!0,transport:{cache:!0,parameterMap:function(){return{term:$(n.get_searchInput()).val().trim(),international:!1,hotelsOnly:!0}},read:{url:"/restapi/autocomplete/poi/",contentType:"application/json charset=utf-8",serverPaging:!0,type:"GET",dataType:"json"}}}),onChange:function(t){t&&t.data&&t.data.selectedPoint!==null?(t.data.selectedPoint===n.get_targetEntityTitle()&&(t.data.selectedPoint=n._searchPoint),$(n.get_clearSelection()).show()):$(n.get_clearSelection()).hide()},onDataBound:function(){},onClose:function(){isMobile&&setTimeout(function(){$("input.search_keyword").focus().blur()},50)}});kendo.bind($(this.get_element()),i);Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelAutocomplete.callBaseMethod(this,"initialize")},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelAutocomplete.callBaseMethod(this,"dispose")},clearSearch:function(){this._selectedItem=null;$(this.get_searchInput()).data("kendoAutoComplete").value("");$(this.get_clearSelection()).hide()},onHotelSelected:function(){},get_searchInput:function(){return this._searchInput},set_searchInput:function(n){this._searchInput=n},get_selectedPoint:function(){return this._selectedItem},get_clearSelection:function(){return this._clearSelection},set_clearSelection:function(n){this._clearSelection=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelAutocomplete.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelAutocomplete",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch=function(n){this._resultsBasePath=null;this._detailsBasePath=null;this._findHotel=null;this._searchInput=null;this._offerIdInput=null;this._moreBookingOptions=null;this._moreBookingOptionsMobile=null;this._checkInDate=null;this._checkInDatePicker=null;this._checkOutDate=null;this._checkOutDatePicker=null;this._mobileDatePicker=null;this._guestsControl=null;this._noSpecificDatesCheck=null;this._noSpecificDatesCheckMobile=null;this._kendoAutoComplete=null;this._viewModel=null;this._isOnResultsPage=null;this._isOnDestinationPage=null;this._isOnHotelDetailsPage=null;this._basePath=null;this._targetEntityTitle=null;this._targetEntityInternational=null;this._minLength=null;this._clientCache=null;this._doSearchDelegate=null;this._toggleBookingOptionsDelegate=null;this._offerTypeSelectedDelegate=null;this._onDateChangedDelegate=null;this._onDateCloseDelegate=null;this._noDatesCheckedDelegate=null;this._clearSearchDelegate=null;this._mobileFocusScrollDelegate=null;this._mobileBlurScrollDelegate=null;this._mobileSearchKeyupDelegate=null;this._offerId=null;this._offerType=null;this._defaultCheckinDate=null;this._defaultCheckoutDate=null;this._promo=null;this._checkInDateFld=null;this._checkOutDateFld=null;this._clearSelection=null;this._searchPoint=null;this._defaultSearchContext=null;this._searchContext=null;this._skipPopulateSearchFromCookie=null;this._mobileFirstDatePartFormat=null;this._mobileSecondDatePartFormat=null;this._mobileThirdDatePartFormat=null;this._mobileDatePartFormatString=null;this._auxiliaryControlName=null;this._auxillaryControlTrigger=null;this._executeAuxillaryControlTriggerDelegate=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.prototype={initialize:function(){var n,t,u,i,r;Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.callBaseMethod(this,"initialize");n=this;this._offerTypeSelectedDelegate=Function.createDelegate(this,this.offerTypeSelected);$('[data-filter-type="offer"]',this.get_element()).each(function(t,i){$addHandler(i,"change",n._offerTypeSelectedDelegate)});this._doSearchDelegate=Function.createDelegate(this,this.doSearch);$addHandler(this.get_findHotel(),"click",this._doSearchDelegate);t=$(".clear-selection",this.get_element());t.length>0&&(this.set_clearSelection(t[0]),this._clearSearchDelegate=Function.createDelegate(this,this.clearSearch),$addHandler(this.get_clearSelection(),"click",this._clearSearchDelegate));this.get_auxillaryControlTrigger()!==null&&(this._executeAuxillaryControlTriggerDelegate=Function.createDelegate(this,this.executeAuxillaryControlTrigger),$addHandler(this.get_auxillaryControlTrigger(),"click",this._executeAuxillaryControlTriggerDelegate));$(".country-filter-selection",this.get_element()).on("click",function(){var n=$(this).next("ul");n.is(":hidden")?n.show():n.hide()});$(".country-filter-options a",this.get_element()).on("click",function(){var t=$(this);$(".country-filter-options",n.get_element()).hide();Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.SearchContext.hasOwnProperty(t.text())&&n.set_searchContext(Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.SearchContext[t.text()]);$(".country-filter-selection",n.get_element()).text(t.text());n._searchInput.focus()});$(".country-filter",".search").on("clickoutside",function(){$(".country-filter-options",".search").hide()});if(isMobile)$(".country-filter").on("clickoutside",function(){$(".country-filter-options").hide()});this._toggleBookingOptionsDelegate=Function.createDelegate(this,this.toggleBookingOptions);this.get_moreBookingOptions()!==null&&$addHandler(this.get_moreBookingOptions(),"click",this._toggleBookingOptionsDelegate);this.get_moreBookingOptionsMobile()!==null&&$addHandler(this.get_moreBookingOptionsMobile(),"click",this._toggleBookingOptionsDelegate);this._noDatesCheckedDelegate=Function.createDelegate(this,this.noDateChecked);$addHandler(this.get_noSpecificDatesCheck(),"click",this._noDatesCheckedDelegate);this.get_noSpecificDatesCheckMobile()&&$addHandler(this.get_noSpecificDatesCheckMobile(),"click",this._noDatesCheckedDelegate);this._onDateChangedDelegate=Function.createDelegate(this,this.onDateChanged);this._onDateCloseDelegate=Function.createDelegate(this,this.onDateClosed);this._mobileFocusScrollDelegate=Function.createDelegate(this,this.mobileFocusScroll);this._mobileBlurScrollDelegate=Function.createDelegate(this,this.mobileBlurScroll);this._mobileSearchKeyupDelegate=Function.createDelegate(this,this.mobileSearchKeyup);this.configureDatepickers();this.configureAutocomplete();this.configureDefaultValuesFromSearchUrl();$(this.get_checkOutDate()).bsDatepicker("hide");$(this.get_checkInDate()).bsDatepicker("hide");this.get_isOnResultsPage()===!1&&this.populateSearchFromCookie();u=$(".advanced_search_wrp .advanced_search");$(".as_close",this.get_element()).on("click",function(){n.removeErrors();$(this).is(".close-icon")&&n.clearForm();n.performValidations(n)});if(i=n.get_offerIdInput(),i){r=$(i).closest(".advanced_search");$(r).on("clickoutside",function(t){$(t.target).is(".more_booking_options")&&$(t.delegateTarget).is(".advanced_search")||$(t.delegateTarget).is(":hidden")||($("#offer-id-txt-wrp").is(".form_error")?(n.removeErrors(),n.clearForm()):n.performValidations(n))})}$(".expanderlink",this.get_element()).click(function(){n.get_guestsControl().showOverlayOnly()});$(".search_wrp").click(function(){$(".search_wrp").removeClass("current");$(this).addClass("current")})},removeErrors:function(){$(".as_error").text("");$("#offer-id-txt-wrp").removeClass("form_error")},performValidations:function(n){var r=$(".advanced_search_wrp .advanced_search, .responsive-advanced-search"),t,i;if($("body").is(".variant-c")&&(r=$(".lowerwrap .advanced_search")),t=n.get_moreBookingOptions(),$(t).is(":hidden")&&this.get_moreBookingOptionsMobile()!==null&&(t=this.get_moreBookingOptionsMobile()),n.get_offerIdInput()==null||n.get_offerIdInput().value===null||n.get_offerIdInput().value==="")$('[data-filter-type="offer"]:checked').removeAttr("checked"),r.hide(),t.focus();else if(i=n.getOffer(),i.OfferType==="iata"){if(n.validateIataCode(i.OfferId)!==!0){$(".as_error").text("IATA invalid");$("#offer-id-txt-wrp").addClass("form_error");return}BestWestern.StorageManager.PutCookie("iata",'"'+i.OfferId+'"');r.hide();t.focus()}else i.OfferType==="ba"?n.validateCorpBusinessId(i.OfferId,"BWBUSINESS",function(n){if(n)r.hide(),t.focus();else{$(".as_error").text("Business account invalid");$("#offer-id-txt-wrp").addClass("form_error");return}}):i.OfferType==="ncp"?n.validateCorpBusinessId(i.OfferId,"NCP",function(n){n?(r.hide(),t.focus()):($(".as_error").text("NCP account invalid"),$("#offer-id-txt-wrp").addClass("form_error"))}):(r.hide(),t.focus())},clearForm:function(){var n=$(".advanced_search_wrp .advanced_search");n.fadeOut();n.find(":checkbox").prop("checked",!1);oldIE?n.find("#offer-id-txt-wrp .sfTxt").val("My number is..."):n.find("#offer-id-txt-wrp .sfTxt").val("");BestWestern.StorageManager.Delete("oi");BestWestern.StorageManager.Delete("ot");return},dispose:function(){this._doSearchDelegate&&($removeHandler(this.get_findHotel(),"click",this._doSearchDelegate),delete this._doSearchDelegate);this._toggleBookingOptionsDelegate&&($removeHandler(this.get_moreBookingOptions(),"click",this._toggleBookingOptionsDelegate),delete this._toggleBookingOptionsDelegate);Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.callBaseMethod(this,"dispose")},validateIataCode:function(n){return/^[0-9]{8}$/.test(n)},validateCorpBusinessId:function(n,t,i){var u=this,r=String.format("/restapi/booking/validate-business/{0}/{1}",t,n);$.ajax({url:r,type:"GET",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(n){if(i){if(n!==null&&n.Status==="OK"){i(!0);return}i(!1)}},error:function(n){BestWestern.ShowMessage(n)}})},configureMobileDatePickers:function(){var f=this,n=this.get_element(),t=new Date,r=t.addDays(1),u=t.addDays(2),e=t.addDays(348),o=t.addDays(349),h=this,s="#"+n.id+" .calendar-availability-range",i=$('[data-id="calendar-availability-input"]',n).dateRangePicker({inline:!0,singleMonth:!0,startDate:t,container:s,showTopbar:!0,alwaysOpen:!1,autoClose:!0,format:"DD MMM YYYY",updateExternalDataElements:!0,time:{enabled:!1},customTopBar:function(){var n="";return n+='<div class="normal-top">\t\t\t\t\t\t\t<span class="normal-top_a">Please select Check In date<\/span><span class="normal-top_b">Please select Check Out date<\/span>',n+="<\/div>",n+'<div class="error-top">error<\/div>\t\t\t\t\t\t<div class="default-top">default<\/div>'},getValue:function(){return $(".checkindate_fld",n).val()&&$(".checkoutdate_fld",n).val()?$(".checkindate_fld",n).val()+" to "+$(".checkoutdate_fld",n).val():""},setValue:function(t,i,r){$(".checkindate_fld",n).val(i);$(".checkoutdate_fld",n).val(r)},minDays:2,lookBehind:!1,selectBackward:!0,selectForward:!0,selectBackwardNewStart:!0,moveToNextMonthOnLastDay:!0,beforeShowDay:function(n,t){return t&&n<o||!t&&n<e?[!0,"date-available"]:[!1,"date-unavailable"]},hoveringTooltip:function(n){if(n>1)return n-1+" night"+(n>2?"s":"")},showDateFilter:function(n,t){return t}}).bind("datepicker-change",function(n){n.stopPropagation();f._onDateChangedDelegate(n)}).data("dateRangePicker");i.showMonth(t.format("yyyy-MM-dd"),"month1");this.set_checkInDateFld($(".checkindate_fld",n)[0]);this.set_checkOutDateFld($(".checkoutdate_fld",n)[0]);this.get_checkInDateFld()&&$(this.get_checkInDateFld()).text()===""&&this.setInField(r);this.get_checkOutDateFld()&&$(this.get_checkOutDateFld()).text()===""&&this.setOutField(u);i.setDateRange(r,u);this.set_mobileDatePicker(i);$(".date, .search_wrp .date",n).on("click",function(n){n.stopPropagation();i.open(null,$(this).data("type")==="checkoutdate")})},configureDatepickers:function(){var h=this,r=this.get_element(),n=new Date,f=n.addDays(1),e=n.addDays(2),o=n.addDays(348),s=n.addDays(349),u,t,i;if(isMobile||(u=this.get_checkInDate().getAttribute("data-orientation")==="right"?"dropdown-menu datepicker-orient-top datepicker-orient-"+this.get_checkInDate().getAttribute("data-orientation"):"dropdown-menu datepicker-orient-top datepicker-orient-"+this.get_checkInDate().getAttribute("data-orientation")),isMobile){this.configureMobileDatePickers();this.onDateChanged();return}t=$(this.get_checkInDate()).bsDatepicker({format:"D, dd/mm",startDate:n,endDate:o,multidateSeparator:"-",todayHighlight:!0,customClass:u});t.on("change",this._onDateChangedDelegate).on("blur",this._onDateChangedDelegate).on("hide",this._onDateCloseDelegate);this.set_checkInDatePicker(t.data("datepicker"));i=$(this.get_checkOutDate()).bsDatepicker({format:"D, dd/mm",startDate:f,endDate:s,multidateSeparator:"-",todayHighlight:!0,customClass:u});i.on("change",this._onDateChangedDelegate).on("blur",this._onDateChangedDelegate);this.set_checkOutDatePicker(i.data("datepicker"));isMobile||(this.set_checkInDateFld($(".checkindate_fld",this.get_element())[0]),this.set_checkOutDateFld($(".checkoutdate_fld",this.get_element())[0]),this.get_checkInDateFld()&&$(this.get_checkInDateFld()).text()===""&&this.setInField(f),this.get_checkInDateFld()&&$(this.get_checkInDateFld()).text()===""&&this.setOutField(e));t.on("changeDate",this._onDateChangedDelegate);i.on("changeDate",this._onDateChangedDelegate);if(!isMobile)$(".date, .search_wrp .date",r).on("click",function(){var n=$(this),i=n.data("type"),t=$("."+i,r);n.prop("disabled")||(setTimeout(function(){n.addClass("selecting-date")},200),$(".date").removeClass("active selecting-date"),n.addClass("active"),t.is(":hidden")?($(".dateselector",r).hide(),isMobile?t.fadeIn():t.show()):(n.removeClass("active selecting-date").find(".sfTxt").blur(),t.hide()))});$("html, body").on("click",function(n){var t=$(".dateselector");!$(".sfFieldWrp.date").is(".selecting-date")||$(n.target).is(".month")||$(n.target).is(".year")||$(n.target).is(".dateselector *")||($(".sfFieldWrp.date").removeClass("selecting-date"),t.hide())})},configureAutocomplete:function(){var n=this,t=this.get_searchInput(),i=$(t).parents(".sfFieldWrp, .inputwrapper"),r,u;isMobile&&($addHandler(t,"focus",this._mobileFocusScrollDelegate),$addHandler(t,"blur",this._mobileBlurScrollDelegate),$addHandler(t,"keyup",this._mobileSearchKeyupDelegate));$(t).on("keyup",function(t){i.hasClass("form_error")&&t.which!==13&&(i.removeClass("form_error"),$(".search-error").remove());$(this).val()||n.clearSearch(t)});r=kendo.observable({selectedPoint:null,promoCode:null,onSelect:function(t){var i=t.sender.dataItem(t.item.index()),r;if(this.set("selectedPoint",i),i!==null){$.ajax({url:"/restapi/autocomplete/log",data:{term:t.sender._prev,type:i.TypeName,entityId:i.id},type:"PUT",dataType:"json"});r=["GB","EN","SF","WL"].indexOf(i.CountryCode)>=0;try{}catch(t){}}$(n.get_noSpecificDatesCheck()).prop("checked")||(n.get_checkInDate().value===""?$(n.get_checkInDate()).data("datepicker").show():n.get_checkOutDate().value===""&&$(n.get_checkOutDate()).data("datepicker").show());$("html").is(".k-ie11, .k-ie10, .k-ie9")||$(n.get_clearSelection()).show();n.preEmptSearch(i)},points:new kendo.data.DataSource({serverFiltering:!0,transport:{cache:!0,parameterMap:function(){return{term:$(t).val().trim(),international:function(){return n.get_searchContext()?n.get_searchContext()===Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.SearchContext.INTL:n.get_defaultSearchContext()===Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.SearchContext.INTL}}},read:{url:"/restapi/autocomplete/poi/",contentType:"application/json charset=utf-8",serverPaging:!0,type:"GET",dataType:"json"}}}),onChange:function(t){t&&t.data&&t.data.selectedPoint!==null?(t.data.selectedPoint===n.get_targetEntityTitle()&&(t.data.selectedPoint=n._searchPoint),$(n.get_clearSelection()).show()):$(n.get_clearSelection()).hide()},onDataBound:function(){},onClose:function(){isMobile&&setTimeout(function(){$("input.search_keyword").focus().blur()},50)}});this.set_viewModel(r);kendo.bind($(this.get_searchInput()),this.get_viewModel());this.set_kendoAutoComplete($(this.get_searchInput()).data("kendoAutoComplete"));u=this.get_kendoAutoComplete();u!=undefined&&(this.get_kendoAutoComplete().options.minLength=this.get_minLength());$("input.search_keyword").on("focus",function(){if($("input.search_keyword").length>0&&isMobile){$("#autocomplete-position").remove();var n=$("input.search_keyword").offset().top+$("input.search_keyword").outerHeight();$("head").append('<style id="autocomplete-position">.k-animation-container { top: '+n+"px !important; }<\/style>")}})},configureDefaultValuesFromSearchUrl:function(){var t,n;if(this.get_targetEntityTitle()!==null&&this.get_targetEntityTitle()!==""&&$(this.get_searchInput()).val(this.get_targetEntityTitle()),t=window.location.pathname.replace(this.get_basePath(),""),this.get_basePath()==="/hotel"||this.get_basePath()==="/hotel-variant"||this.get_basePath()==="/hotels"||this.get_basePath()==="/room-select"||this.get_basePath()==="/stay-at"?t=this.get_basePath()+t:this.get_basePath()==="/checkout/guest"||this.get_basePath()==="/checkout/guest-details"||this.get_basePath()==="/checkout/guest-detailsx2"||this.get_basePath()==="/checkout/guest-detailsx4"?t="/hotels"+t:this.get_isOnDestinationPage()&&(t=t.substr(1).indexOf("/")>=0?"place"+t:"county"+t),n=BestWestern.Search.GetSearchModel(t),n.Adults===null&&(n.Adults=1),n.Children===null&&(n.Children=0),n.RoomQuantity===null&&(n.RoomQuantity=1),this.get_targetEntityInternational()&&($(".country-filter-options",this.get_element()).hide(),this.set_searchContext(Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.SearchContext.INTL),$(".country-filter-selection",this.get_element()).text("INTL")),n!==null){if(this.get_guestsControl().setValue(n.RoomQuantity,n.Adults,n.Children),n.Ages!==null&&this.get_guestsControl().setChildAges(n.Ages),n.Type==="term"?(this.get_viewModel().selectedPoint=decodeURIComponent(n.Term),$(this.get_clearSelection()).show()):n.Type!==null&&(this.get_viewModel().selectedPoint={Url:n.Term,TypeName:n.Type},$(this.get_clearSelection()).show()),this._searchPoint=this.get_viewModel().selectedPoint,this.get_viewModel().promoCode=n.PromoCode,isMobile?n.CheckIn!==null&&n.CheckOut!==null?(this.get_mobileDatePicker().setDateRange(n.CheckIn.toDateObject(),n.CheckOut.toDateObject()),this.setInField(n.CheckIn.toDateObject()),this.setOutField(n.CheckOut.toDateObject())):(this.get_mobileDatePicker().setDateRange(this.get_defaultCheckinDate().toDateObject(),this.get_defaultCheckoutDate().toDateObject()),this.setInField(this.get_defaultCheckinDate().toDateObject()),this.setOutField(this.get_defaultCheckoutDate().toDateObject())):(n.CheckIn!==null?this.get_checkInDatePicker().setDate(n.CheckIn.toDateObject()):this.get_checkInDatePicker().setDate(this.get_defaultCheckinDate().toDateObject()),n.CheckOut!==null?this.get_checkOutDatePicker().setDate(n.CheckOut.toDateObject()):this.get_checkOutDatePicker().setDate(this.get_defaultCheckoutDate().toDateObject())),$('[data-type="nights"]',this.get_element()).hide(),n.CheckIn!==null&&n.CheckOut!==null){var i=n.CheckIn.toDateObject(),r=n.CheckOut.toDateObject(),u=Math.ceil(Math.abs(r.getTime()-i.getTime())/864e5);$('[data-object="nights"]',this.get_element()).text(String.format(" for {0} nights",u));$('[data-object="checkin"]',this.get_element()).text(i.format("dd/MM/yyyy"));$('[data-object="checkout"]',this.get_element()).text(r.format("dd/MM/yyyy"));$('[data-type="nights"]').show()}$('[data-object="people"]',this.get_element()).text(n.People());n.OfferId!==null&&n.OfferId!==""&&n.OfferId!=="null"&&(this.get_offerIdInput()!=null&&(this.get_offerIdInput().value=n.OfferId),$('[data-key="'+n.OfferType+'"]',this.get_element()).prop("checked",!0));this.get_guestsControl().hideOverlayOnly();$(this.get_guestsControl().get_element()).data("set",1)}},offerTypeSelected:function(n){$('[data-filter-type="offer"]:checked').length>1&&($('[data-filter-type="offer"]:checked').prop("checked",!1),n.target.checked=!0)},doSearch:function(n){var t=this.get_searchViewModel(),r=!1,u,f,i,e;return(t.CheckIn===null&&t.CheckOut!==null&&($(this.get_checkInDate()).parents(".sfFieldWrp, .inputwrapper").addClass("form_error"),this.get_checkInDatePicker().show(),isMobile&&this.get_mobileDatePicker().open(),r=!0),t.CheckIn!==null&&t.CheckOut===null&&($(this.get_checkOutDate()).parents(".sfFieldWrp, .inputwrapper").addClass("form_error"),this.get_checkOutDatePicker().show(),r=!0),(t.Term===null||t.Term===$(this.get_searchInput()).attr("placeholder")||t.Type===null)&&($(this.get_searchInput()).parents(".sfFieldWrp, .inputwrapper").addClass("form_error"),this.get_searchInput().focus(),$(".search-error").remove(),u="<span class='search-error'>Enter a hotel, place, postcode or attraction<\/span>",$(".inputcontainer--hotel-search, .search-error-wrap").append(u).show(),$(".desk-search-field_wrp").after(u),r=!0),(t.Ages===null&&t.Children>0||t.Children>t.Ages.length)&&(f=this.get_guestsControl(),setTimeout(function(){f.showOverlayOnly()},50),r=!0),r)?!1:(t.Type==="term"&&$.ajax({url:"/restapi/autocomplete/log",data:{term:t.Term,type:"term",entityId:"00000000-0000-0000-0000-000000000000"},type:"PUT",dataType:"json"}),(this.get_isOnHotelDetailsPage()===!0||$("body").is(".home-variant"))&&(typeof dataLayer=="undefined"||$(n.target).is(".rr_button")||(i=[],t.Term!==null&&i.push(t.Term),t.CheckIn!==null&&i.push(t.CheckIn),t.CheckOut!==null&&i.push(t.CheckOut),t.Adults!==null&&t.Children!==null&&i.push(t.Adults+" adults, "+t.Children+" children"),dataLayer.push({event:"hotel-search",category:"Hotel Search",action:"Booking Options",label:i.join(", ")}),e=[],t.OfferType!==null&&dataLayer.push({event:"booking-extras",category:"Hotel Search",action:"More Booking Options",label:t.OfferType}))),this.storeSearchCookie(t),this.performDoSearchWithModel(t),!1)},storeSearchCookie:function(n){var t=this;BestWestern.StorageManager.PutCookie("searchTerm",$(t.get_searchInput()).val(),7);BestWestern.StorageManager.PutCookie("searchId",n.Term,7);BestWestern.StorageManager.PutCookie("searchCheckInDate",n.CheckIn,7);BestWestern.StorageManager.PutCookie("searchCheckOutDate",n.CheckOut,7);BestWestern.StorageManager.PutCookie("searchAdults",n.Adults,7);BestWestern.StorageManager.PutCookie("searchChildren",n.Children,7);BestWestern.StorageManager.PutCookie("searchType",n.Type,7);BestWestern.StorageManager.PutCookie("searchAges",JSON.stringify(n.Ages),7);setCookie("searchIsInternational",t.get_searchContext()===Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.SearchContext.INTL,7);setCookie("searchRoomQuantity",n.RoomQuantity,7)},getHotelPropertyFromTerm:function(n){var t=n.lastIndexOf("-");return n.substring(t+1)},populateSearchFromCookie:function(){var a,u,s;if(this.get_skipPopulateSearchFromCookie()!==!0){var n=this,h=BestWestern.StorageManager.GetCookie("searchCheckInDate"),c=BestWestern.StorageManager.GetCookie("searchCheckOutDate"),y=BestWestern.StorageManager.GetCookie("searchIsInternational"),p=BestWestern.StorageManager.GetCookie("searchAdults"),w=BestWestern.StorageManager.GetCookie("searchChildren"),l=BestWestern.StorageManager.GetCookie("searchAges"),o=BestWestern.StorageManager.GetCookie("searchType"),b=getCookieValue("searchRoomQuantity"),r=BestWestern.StorageManager.GetCookie("searchTerm"),i=BestWestern.StorageManager.GetCookie("searchId");if(r!==undefined&&r!==null){o==="hotel"&&(i!=""||i!==undefined)?(a=n.getHotelPropertyFromTerm(i),$.ajax({url:"/restapi/search/hotel-is-active/"+a,type:"GET",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(t){t===!0&&($(n.get_searchInput()).val(r),n.get_viewModel().selectedPoint={Url:i,TypeName:"hotel"},n.set_targetEntityTitle(r),$(n.get_clearSelection()).show(),n._searchPoint=n.get_viewModel().selectedPoint)}})):o!=="hotel"&&r!==undefined&&($(n.get_searchInput()).val(r),i!==undefined&&(o==="term"?(n.get_viewModel().selectedPoint=decodeURIComponent(i),$(n.get_clearSelection()).show(),n._searchPoint=n.get_viewModel().selectedPoint):o!==null&&(n.get_viewModel().selectedPoint={Url:i,TypeName:o},$(n.get_clearSelection()).show(),n._searchPoint=n.get_viewModel().selectedPoint)));y&&(n.set_searchContext(Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.SearchContext.INTL),$(".country-filter-selection",n.get_element()).text("INTL"));u=new Date;u.setHours(0,0,0,0);var f=u.addDays(1),e=u.addDays(2),v=!1,t=null;h!==undefined&&h!==null&&(t=h.toDateObject(),t<u?(isMobile?this.get_mobileDatePicker().setDateRange(f,e):(this.get_checkInDatePicker().setDate(f),this.get_checkOutDatePicker().setDate(e)),this.setInField(f),this.setOutField(e),v=!0):(isMobile?this.get_mobileDatePicker().setDateRange(t,t.addDays(1)):this.get_checkInDatePicker().setDate(t),this.setInField(t)));v===!1&&t!==null&&c!=undefined&&c!==null&&(s=c.toDateObject(),s<u?(isMobile?this.get_mobileDatePicker().setDateRange(f,e):(this.get_checkInDatePicker().setDate(f),this.get_checkOutDatePicker().setDate(e)),this.setInField(f),this.setOutField(e)):(isMobile?this.get_mobileDatePicker().setDateRange(t,s):this.get_checkOutDatePicker().setDate(s),this.setOutField(s)));n.get_guestsControl().setValue(b,p,w);l!==null&&n.get_guestsControl().setChildAges(l)}}},performDoSearchWithModel:function(n){window.document.location=n.Type==="hotel"?this.get_detailsBasePath()+BestWestern.Search.BuildSearchUrl(n):this.get_resultsBasePath()+BestWestern.Search.BuildSearchUrl(n)},clearSearch:function(){this.get_viewModel().selectedPoint=null;$(this.get_searchInput()).data("kendoAutoComplete").value("");$(this.get_clearSelection()).hide()},preEmptSearch:function(n){var i=this.get_searchViewModel(),r=BestWestern.Search.BuildSearchUrl(i),t=BestWestern.Search.GetSearchModel(r);n!==null&&(t.Term=n.Url,t.Type=n.TypeName);$.ajax({url:"/restapi/search/hotel/",data:t,type:"GET",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8"})},setInField:function(n){var t=this.get_checkInDateFld();if(t)if(n===null)$(t).text(""),$(t).val(null);else{if(cinFormat="",isMobile){var i="",r="",u="";this.get_mobileFirstDatePartFormat()&&(i=n.format(this.get_mobileFirstDatePartFormat()));this.get_mobileSecondDatePartFormat()&&(r=n.format(this.get_mobileSecondDatePartFormat()));this.get_mobileThirdDatePartFormat()&&(u=n.format(this.get_mobileThirdDatePartFormat()));cinFormat=String.format(this.get_mobileDatePartFormatString(),i,r,u)}else cinFormat=n.format("ddd, dd/MM");$(t).html(cinFormat);$(t).val(n)}},setOutField:function(n){var t=this.get_checkOutDateFld();if(t)if(n===null)$(t).text(""),$(t).val(null);else{if(coutFormat="",isMobile){var i="",r="",u="";this.get_mobileFirstDatePartFormat()&&(i=n.format(this.get_mobileFirstDatePartFormat()));this.get_mobileSecondDatePartFormat()&&(r=n.format(this.get_mobileSecondDatePartFormat()));this.get_mobileThirdDatePartFormat()&&(u=n.format(this.get_mobileThirdDatePartFormat()));coutFormat=String.format(this.get_mobileDatePartFormatString(),i,r,u)}else coutFormat=n.format("ddd, dd/MM");$(t).html(coutFormat);$(t).val(n)}},autoShowDates:!0,noDateChecked:function(n){var t=$(".date");$(n.target).prop("checked")?($(this.get_noSpecificDatesCheck())[0].checked=!0,this.get_noSpecificDatesCheckMobile()&&($(this.get_noSpecificDatesCheckMobile())[0].checked=!0),this.autoShowDates=!1,$(this.get_checkInDate()).val(""),$(this.get_checkOutDate()).val(""),t.attr("disabled","disabled").prop("disabled",!0),isMobile?(this.get_mobileDatePicker().clear(),$(".selected-nights-num").text(""),$(".selected-nights-text").text("")):(this.get_checkInDatePicker().setDate(null),this.get_checkOutDatePicker().setDate(null)),this.setInField(null),this.setOutField(null)):isMobile?(n.stopPropagation(),this.get_mobileDatePicker().open()):(t.removeAttr("disabled").prop("disabled",!1),$(this.get_noSpecificDatesCheck())[0].checked=!1,this.get_noSpecificDatesCheckMobile()&&($(this.get_noSpecificDatesCheckMobile())[0].checked=!1));this.autoShowDates=!0},onDateClosed:function(){var f=this.get_checkInDatePicker(),s,r;if(f.getDates().length!==0){var e=f.getDate(),n=this.get_checkOutDatePicker(),t=null;n.getDates().length>0&&(t=n.getDate());var u=e.addDays(1),i=e.addDays(30),o=(new Date).addDays(349);i=i<o?i:o;t!==null&&(t>i||t<u)&&(n.setDate(null),this.setOutField(null));s=n.dates.copy();r=!1;n.o.startDate.toDateString()!==u.toDateString()&&(n.setStartDate(u),r=!0);n.o.endDate.toDateString()!==i.toDateString()&&(n.setEndDate(i),r=!0);r&&n.setDates(s);t!==null&&n.getDate()!==null&&n.getDate().getTime()!==t.getTime()&&n.setDate(t)}},onDateChanged:function(){var i=$(".search_wrp.current"),n=this.get_checkInDatePicker(),t=this.get_checkOutDatePicker(),r=this.get_checkInDateFld(),u=this.get_checkOutDateFld(),f,e;if(n&&n.getDates().length>0?this.setInField(n.getDate()):r&&$(r).val()?this.setInField(new Date($(r).val())):this.setInField(null),t&&t.getDates().length>0?this.setOutField(t.getDate()):u&&$(u).val()?this.setOutField(new Date($(u).val())):this.setOutField(null),isMobile){$(this.get_noSpecificDatesCheck()).prop("checked",$(this.get_checkInDateFld()).val()===""||$(this.get_checkOutDateFld()).val().length==="");return}if($(this.get_noSpecificDatesCheck()).prop("checked",n.getDates().length===0&&t.getDates().length===0),t.getDates().length>0&&$(this.get_checkOutDate()).parents(".sfFieldWrp").removeClass("form_error"),n.getDates().length>0&&$(this.get_checkInDate()).parents(".sfFieldWrp").removeClass("form_error"),t.getDates().length===0&&n.getDates().length>0){this.autoShowDates&&(n.hide(),t.show());$(".checkindate",this.get_element()).hide();$("body").is(".variant-c")?$(".checkoutdate",this.get_element()).fadeIn(300):$(".checkoutdate",this.get_element()).show();f=$('.date[data-type="checkoutdate"]',this.get_element());$(".date").removeClass("active selecting-date");f.addClass("active");setTimeout(function(){f.addClass("selecting-date");isMobile||i.find(".checkoutdate_fld").text()===""&&BestWestern.LastKeyPressEnter===!0&&i.find(".checkoutdate_fld").focus()},200);this.onDateClosed(this);this.get_guestsControl().hideOverlayOnly()}else if(t.getDates().length>0&&n.getDates().length===0){this.autoShowDates&&(t.hide(),n.show());$(".checkoutdate",this.get_element()).hide();$(".checkindate",this.get_element()).show();e=$('.date[data-type="checkoutdate"]',this.get_element());$(".date").removeClass("active");e.addClass("active");setTimeout(function(){e.addClass("selecting-date")},200);this.onDateClosed(this);this.get_guestsControl().hideOverlayOnly()}else{$(this.get_guestsControl().get_element()).data("set")===undefined&&this.get_guestsControl().showOverlayOnly();$(".checkoutdate").hide();$(".checkindate").hide();$(".date").removeClass("active selecting-date");this.onDateClosed(this);setTimeout(function(){isMobile||i.find(".checkoutdate_fld").text()!==""&&BestWestern.LastKeyPressEnter===!0&&i.find(".guest_fld input").focus()},200)}},toggleBookingOptions:function(n){var r,u,t,i;isMobile&&(r=$(this.get_moreBookingOptions()),u=$(this.get_moreBookingOptions()).next(),u.is(":hidden")?(r.text("Less booking options"),r.addClass("active"),u.slideDown()):(r.text("More booking options"),r.removeClass("active"),u.slideUp()));var f=$(".advanced_search",this.get_element()),o=$("#mvf_list_cont"),e=$(".mvf_search_again");return f.is(":hidden")?(e.length>0&&e.hide(),t=null,$(n.target).is(".responsive-more-booking-options")?t=$(".responsive-search"):$(n.target).is(".hotel-search-booking-options")&&(t=$(n.target).closest(".hotel-search-container")),t!=null&&f.css({top:$(n.target).offset().top-($(t).offset().top-10),left:$(n.target).offset().left-$(t).offset().left}),f.show(),i=o.data("jsp"),i!==undefined&&i.reinitialise()):(e.length>0&&e.show(),f.fadeOut(),i=o.data("jsp"),i!==undefined&&i.reinitialise()),!1},getOffer:function(){var n,t;return this.get_offerId()!==null?{OfferId:this.get_offerId(),OfferType:this.get_offerType()}:this.get_offerIdInput()==null?null:(n=this.get_offerIdInput().value,n===null||n==="")?null:(t=$('[data-filter-type="offer"]:checked').data("key"),{OfferId:n,OfferType:t})},get_searchViewModel:function(){var n=new BestWestern.SearchModel,t=this.get_viewModel(),f,e,i,r,o,u;return t.selectedPoint!==null&&(typeof t.selectedPoint=="string"?(n.Term=t.selectedPoint,n.Type="term"):(n.Term=t.selectedPoint.Url,n.Type=t.selectedPoint.TypeName)),n.Term!==null&&(n.Term=n.Term.trim()),this.get_noSpecificDatesCheck().checked||(isMobile?$(this.get_checkInDateFld()).val()===""||$(this.get_checkOutDateFld()).val()===""?n.EmptySearch=!0:(f=new Date($(this.get_checkInDateFld()).val()).format("yyyy-MM-dd"),e=new Date($(this.get_checkOutDateFld()).val()).format("yyyy-MM-dd"),n.CheckIn=f,n.CheckOut=e):(i=this.get_checkInDatePicker(),r=this.get_checkOutDatePicker(),i.dates.length>0?(n.CheckIn=i.getDate().format("yyyy-MM-dd"),n.EmptySearch=!1):n.CheckIn=Date.Tomorrow().format("yyyy-MM-dd"),r.dates.length>0?n.CheckOut=r.getDate().format("yyyy-MM-dd"):i.dates.length>0?(o=new Date(i.getDate().getTime()+864e5),n.CheckOut=o.format("yyyy-MM-dd")):n.CheckOut=Date.DayAfterTomorrow().format("yyyy-MM-dd"))),n.RoomQuantity=this.get_guestsControl().getRooms(),n.Adults=this.get_guestsControl().getAdults(),n.Children=this.get_guestsControl().getChildren(),n.Ages=this.get_guestsControl().getChildAges(),n.PromoCode=this.get_promo(),!n.PromoCode&&t.promoCode&&(n.PromoCode=t.promoCode),this.get_queryCorpId()!=null?(n.OfferId=this.get_queryCorpId(),n.OfferType="corpid"):AlertsManager.GetOffer()!=null&&(n.OfferId=AlertsManager.GetOffer(),n.OfferType="corpid"),u=this.getOffer(),u!==null&&$.extend(n,u),n},mobileFocusScroll:function(n){$(".inputwrapper--hotel-search").addClass("search-state-focused");var t=$(n.target).offset().top;setTimeout(function(){$("body").hasClass("ux-test-page")||$("html, body").animate({scrollTop:t},500);14&&$(".three-tab-bar").addClass("pause-stuck")},300)},mobileBlurScroll:function(){$(".inputwrapper--hotel-search").removeClass("search-state-focused");14&&$(".three-tab-bar").removeClass("pause-stuck")},mobileSearchKeyup:function(n){var t=$(n.target).val().length;t>0?$(".clear-selection",this.get_element()).show():$(".clear-selection",this.get_element()).hide()},executeAuxillaryControlTrigger:function(){var n=$(String.format('[data-search-name="{0}"]',this.get_auxiliaryControlName()))},get_resultsBasePath:function(){return this._resultsBasePath},set_resultsBasePath:function(n){this._resultsBasePath=n},get_detailsBasePath:function(){return this._detailsBasePath},set_detailsBasePath:function(n){this._detailsBasePath=n},get_findHotel:function(){return this._findHotel},set_findHotel:function(n){this._findHotel=n},get_searchInput:function(){return this._searchInput},set_searchInput:function(n){this._searchInput=n},get_minLength:function(){return this._minLength},set_minLength:function(n){this._minLength=n},get_clientCache:function(){return this._clientCache},set_clientCache:function(n){this._clientCache=n},get_kendoAutoComplete:function(){return this._kendoAutoComplete},set_kendoAutoComplete:function(n){this._kendoAutoComplete=n},get_viewModel:function(){return this._viewModel},set_viewModel:function(n){this._viewModel=n},get_moreBookingOptions:function(){return this._moreBookingOptions},set_moreBookingOptions:function(n){this._moreBookingOptions=n},get_moreBookingOptionsMobile:function(){return this._moreBookingOptionsMobile},set_moreBookingOptionsMobile:function(n){this._moreBookingOptionsMobile=n},get_checkInDate:function(){return this._checkInDate},set_checkInDate:function(n){this._checkInDate=n},get_checkOutDate:function(){return this._checkOutDate},set_checkOutDate:function(n){this._checkOutDate=n},get_noSpecificDatesCheck:function(){return this._noSpecificDatesCheck},set_noSpecificDatesCheck:function(n){this._noSpecificDatesCheck=n},get_noSpecificDatesCheckMobile:function(){return this._noSpecificDatesCheckMobile},set_noSpecificDatesCheckMobile:function(n){this._noSpecificDatesCheckMobile=n},get_guestsControl:function(){return this._guestControl},set_guestsControl:function(n){this._guestControl=n},get_basePath:function(){return this._basePath},set_basePath:function(n){this._basePath=n},get_isOnResultsPage:function(){return this._isOnResultsPage},set_isOnResultsPage:function(n){this._isOnResultsPage=n},get_isOnDestinationPage:function(){return this._isOnDestinationPage},set_isOnDestinationPage:function(n){this._isOnDestinationPage=n},get_isOnHotelDetailsPage:function(){return this._isOnHotelDetailsPage},set_isOnHotelDetailsPage:function(n){this._isOnHotelDetailsPage=n},get_targetEntityTitle:function(){return this._targetEntityTitle},set_targetEntityTitle:function(n){this._targetEntityTitle=n},get_targetEntityInternational:function(){return this._targetEntityInternational},set_targetEntityInternational:function(n){this._targetEntityInternational=n},get_offerId:function(){return this._offerId},set_offerId:function(n){this._offerId=n},get_offerType:function(){return this._offerType},set_offerType:function(n){this._offerType=n},get_offerIdInput:function(){return this._offerIdInput},set_offerIdInput:function(n){this._offerIdInput=n},get_defaultCheckinDate:function(){return this._defaultCheckinDate},set_defaultCheckinDate:function(n){this._defaultCheckinDate=n},get_defaultCheckoutDate:function(){return this._defaultCheckoutDate},set_defaultCheckoutDate:function(n){this._defaultCheckoutDate=n},get_checkInDatePicker:function(){return this._checkInDatePicker},set_checkInDatePicker:function(n){this._checkInDatePicker=n},get_checkOutDatePicker:function(){return this._checkOutDatePicker},set_checkOutDatePicker:function(n){this._checkOutDatePicker=n},set_promo:function(n){this.isCorpId(n)||BestWestern.StorageManager.Put("promocode",n)},get_promo:function(){var n=BestWestern.StorageManager.Get("promocode");return this.isCorpId(n)?null:n},get_queryCorpId:function(){var n=BestWestern.StorageManager.Get("promocode");return this.isCorpId(n)?n:null},isCorpId:function(n){var t=new RegExp("([0-9*]{8})");return t.exec(n)!==null&&t.exec(n).length>0},get_checkInDateFld:function(){return this._checkInDateFld},set_checkInDateFld:function(n){this._checkInDateFld=n},get_checkOutDateFld:function(){return this._checkOutDateFld},set_checkOutDateFld:function(n){this._checkOutDateFld=n},get_clearSelection:function(){return this._clearSelection},set_clearSelection:function(n){this._clearSelection=n},get_mobileDatePicker:function(){return this._mobileDatePicker},set_mobileDatePicker:function(n){this._mobileDatePicker=n},get_defaultSearchContext:function(){return this._defaultSearchContext},set_defaultSearchContext:function(n){this._defaultSearchContext=n},get_searchContext:function(){return this._searchContext},set_searchContext:function(n){this._searchContext=n},get_skipPopulateSearchFromCookie:function(){return this.skipPopulateSearchFromCookie},set_skipPopulateSearchFromCookie:function(n){this.skipPopulateSearchFromCookie=n},get_mobileFirstDatePartFormat:function(){return this._mobileFirstDatePartFormat},set_mobileFirstDatePartFormat:function(n){this._mobileFirstDatePartFormat=n},get_mobileSecondDatePartFormat:function(){return this._mobileSecondDatePartFormat},set_mobileSecondDatePartFormat:function(n){this._mobileSecondDatePartFormat=n},get_mobileThirdDatePartFormat:function(){return this._mobileThirdDatePartFormat},set_mobileThirdDatePartFormat:function(n){this._mobileThirdDatePartFormat=n},get_mobileDatePartFormatString:function(){return this._mobileDatePartFormatString},set_mobileDatePartFormatString:function(n){this._mobileDatePartFormatString=n},get_auxiliaryControlName:function(){return this._auxiliaryControlName},set_auxiliaryControlName:function(n){this._auxiliaryControlName=n},get_auxillaryControlTrigger:function(){return this._auxillaryControlTrigger},set_auxillaryControlTrigger:function(n){this._auxillaryControlTrigger=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch",Sys.UI.Control);Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch.SearchContext={GB:0,INTL:1};
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.RecentlyViewedHotels=function(n){this._allowDeleteSingleItem=!1;Spinbox.Clients.BestWestern.Frontend.Web.UI.RecentlyViewedHotels.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.RecentlyViewedHotels.prototype={initialize:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.RecentlyViewedHotels.callBaseMethod(this,"initialize");this.get_deleteAllItemsElement()!==null&&this.get_deleteAllItemsElement()!==undefined&&(this._deleteAllItemsDelegate=Function.createDelegate(this,this.deleteAllItems),$addHandler(this.get_deleteAllItemsElement(),"click",this._deleteAllItemsDelegate));this._deleteSingleHotelDelegate=Function.createDelegate(this,this.deleteSingleItem);this._bindDataSourceDelegate=Function.createDelegate(this,this.bindDataSource);this.loadData()},dispose:function(){this._deleteAllItemsDelegate&&($removeHandler(this.get_deleteAllItemsElement(),"click",this._deleteAllItemsDelegate),delete this._deleteAllItemsDelegate);this._bindDataSourceDelegate&&delete this._bindDataSourceDelegate;Spinbox.Clients.BestWestern.Frontend.Web.UI.RecentlyViewedHotels.callBaseMethod(this,"dispose")},deleteAllItems:function(){var n=this;RVHManager.Delete(null,function(){n.loadData.apply(n)},function(n){BestWestern.ShowMessage(n)})},deleteSingleItem:function(n){var t=this;RVHManager.Delete(n,function(){t.loadData.apply(t)},function(n){BestWestern.ShowMessage(n)})},loadData:function(){RVHManager.Get(this._bindDataSourceDelegate)},bindDataSource:function(n){var t=this,i=this.get_detailsPageUrl(),r=new kendo.data.DataSource({schema:{model:{id:"Id"},parse:function(n){return $.each(n,function(n,t){t.Url=[i,t.Url].join("/")}),n}},data:n}),u=function(){$(t.get_element()).remove()};$(this.get_hotelsElementSelector()).kendoListView({dataSource:r,template:kendo.template(this.get_resultsTemplate()),dataBound:function(n){this.dataSource.data().length===0?u():t.get_allowDeleteSingleItem()===!0&&($('[data-linktype="delete"]').show(),$.each($('[data-linktype="delete"]',n.sender.element),function(){var n=$(this).data("id");$addHandler(this,"click",function(){t._deleteSingleHotelDelegate(n)})}));t.initMobileSlider()},dataBinding:function(){}})},initMobileSlider:function(){var n=$(".pulled-slider"),t=$("#hotelslider .hotel_list"),r=n.length?!1:!0,u=n.length?1e6:1e4,i;t.length>0&&(i=t.show().bxSlider({controls:!1,pager:!1,onSlideAfter:function(){i.startAuto()},oneToOneTouch:!1,auto:r,pause:u,onSliderLoad:function(){n.length&&t.find("article").length<4&&n.find(".mobile_recently_viewed_hotels").addClass("only-one-slide")}}),$(".home-tabs").show(),$(".recently-viewed-title").show())},get_detailsPageUrl:function(){return this._detailsPageUrl},set_detailsPageUrl:function(n){this._detailsPageUrl=n},get_deleteAllItemsElement:function(){return this._deleteAllItemsElement},set_deleteAllItemsElement:function(n){this._deleteAllItemsElement=n},get_hotelsElementSelector:function(){return this._hotelsElementSelector},set_hotelsElementSelector:function(n){this._hotelsElementSelector=n},get_resultsTemplate:function(){return this._resultsTemplate},set_resultsTemplate:function(n){this._resultsTemplate=n},get_allowDeleteSingleItem:function(){return this._allowDeleteSingleItem},set_allowDeleteSingleItem:function(n){this._allowDeleteSingleItem=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.RecentlyViewedHotels.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.RecentlyViewedHotels",Sys.UI.Control);
var childrenArray=[],adultsArray=[],roomsArray=[],domNotInteracted=!0;document.addEventListener("click",function(){domNotInteracted=!1});Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.GuestsSelectionControl=function(n){this._maxRooms=null;this._maxAdults=null;this._maxChildren=null;this._quickSelections=null;this._quickSelectionList=null;this._guestsFieldWrap=null;this._guestsInput=null;this._guestsOverlay=null;this._showMoreOptions=null;this._moreOptionsContainter=null;this._childAgeContainer=null;this._roomsSelect=null;this._adultsSelect=null;this._childrenSelect=null;this._guestsInputClickedDelegate=null;this._moreOptionsClickedDelegate=null;this._quickOptionSelectedDelegate=null;this._selectOptionChangedDelegate=null;this._childAgeOptionChangedDelegate=null;this._internationalHotel=null;this._childUnder3Message=null;this._childMessageShown=!1;Spinbox.Clients.BestWestern.Frontend.Web.UI.GuestsSelectionControl.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.GuestsSelectionControl.prototype={initialize:function(){var f,u,r,t,i,e,n;if(Spinbox.Clients.BestWestern.Frontend.Web.UI.GuestsSelectionControl.callBaseMethod(this,"initialize"),f=this,this._guestsInputClickedDelegate=Function.createDelegate(this,this.showOverlay),$addHandler(this.get_guestsInput(),"click",this._guestsInputClickedDelegate),this._moreOptionsClickedDelegate=Function.createDelegate(this,this.showMoreOptions),$addHandler(this.get_showMoreOptions(),"click",this._moreOptionsClickedDelegate),this._quickOptionSelectedDelegate=Function.createDelegate(this,this.quickOptionSelected),this._selectOptionChangedDelegate=Function.createDelegate(this,this.selectOptionChanged),this._childAgeOptionChangedDelegate=Function.createDelegate(this,this.childOptionChanged),u=BestWestern.Search.GetSearchModel(window.location.pathname),u.PromoCode!=null&&u.PromoCode!=undefined&&u.PromoCode==="fx"&&$("option[value!='1']",this._roomsSelect).remove(),r=this.get_quickSelections(),r!==null)for(n=0;n<r.length;n++)t=r[n],n===r.length-1&&this.setValue(t.Item1,t.Item2,t.Item3),i=$("<a/>"),i.attr("href","javascript:void(0)"),i.attr("data-guest-rooms",t.Item1),i.attr("data-guest-adults",t.Item2),i.attr("data-guest-children",t.Item3),i.attr("guest-selection",""),i.html(t.Item4),$(this.get_quickSelectionList()).prepend($('<li class="go_pre_itm">').append(i));$("[guest-selection]",this.get_element()).on("click",this._quickOptionSelectedDelegate);if($addHandler(this.get_childrenSelect(),"change",this._childAgeOptionChangedDelegate),isMobile)for(e=$('[data-guest-container="children"] a',this.get_element()),n=0;n<e.length;n++)$addHandler(e[n],"click",this._childAgeOptionChangedDelegate);$("select",this.get_element()).on("change",this._selectOptionChangedDelegate);$(".go_title, .go_ops_btn .button",this.get_element()).on("click",function(){var n=$(this),t=!1;$("[data-child] .sfDropdownList",f.get_element()).removeClass("form_error");$("[data-child] select",f.get_element()).each(function(n,i){var r=$(i).val();(r==="-"||r==="Age")&&(t=!0,$(i).parents(".sfDropdownList").addClass("form_error"))});t==!1&&(n.parents(".guests_overlay").hide(),setTimeout(function(){BestWestern.LastKeyPressEnter===!0&&n.parents(".guest_fld").find("input").focus()},200))});$(".guest-selection-container").on("clickoutside",function(n){$(".fancybox-overlay").is(":visible")||$(".guests_overlay",n.delegateTarget).hide()});isMobile&&this.setMobileComposition()},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.GuestsSelectionControl.callBaseMethod(this,"dispose")},setMobileComposition:function(){var t=this,n=this.get_element();$(".guestcount a",n).on("click",function(){var i=parseInt($('[data-guest-type="adults"]',n).val()),u=parseInt($('[data-guest-type="children"]',n).val()),r=parseInt($("[data-rooms-qty]",n).val());r<1&&(r=1);i<1&&(i=1);t.setValue(r,i,u)})},selectOptionChanged:function(){if(isMobile){var n=this.get_element();this.setValue(parseInt($("[data-rooms-qty]",n).val()),parseInt($('[data-guest-type="adults"]',n).val()),parseInt($('[data-guest-type="children"]',n).val()))}else this.setValue(parseInt($(this.get_roomsSelect()).val()),parseInt($(this.get_adultsSelect()).val()),parseInt($(this.get_childrenSelect()).val()))},getChildAges:function(){this.childOptionChanged();var n=$("[data-child-age-selector]",this.get_element()).map(function(n,t){return parseInt($(t).val())}).sort(function(n,t){return n-t}).toArray();return n.filter(function(n){return!isNaN(n)})},childOptionChanged:function(n){var i=isMobile?parseInt($('[data-guest-type="children"]').val()):parseInt($(this.get_childrenSelect()).val()),t=$(this.get_childAgeContainer()),r=t.data("children"),f=this,u;if(isNaN(r)&&(r=0),i>0){if(r<i)for(r=$("[data-child]",this.get_element()).length,u=r+1;u<=i;u++)this.addChildColumn(u);else r>i?$("[data-child]").filter(function(){return $(this).data("child")>i}).remove():($("[data-child] .sfDropdownList",f.get_element()).removeClass("form_error"),$("[data-child] select",f.get_element()).each(function(n,t){var i=$(t).val();(i==="-"||i==="Age")&&(errors=!0,$(t).parents(".sfDropdownList").addClass("form_error"),isMobile&&domNotInteracted===!1&&$(".guest-slider .expandercontent").slideDown(300))}));isMobile?t.is(":hidden")&&t.show():t.is(":hidden")&&!$(this.get_moreOptionsContainter()).is(":hidden")&&t.show()}else t.hide(),$(".ux-test-page").length?$("[data-child]").remove():$("[data-child]",this.get_element()).remove();t.data("children",i);this.selectOptionChanged(n)},quickOptionSelected:function(n){var t=$(n.target);this.setValue(parseInt(t.data("guest-rooms")),parseInt(t.data("guest-adults")),parseInt(t.data("guest-children")));this.showOverlay()},getRooms:function(){return parseInt($(this.get_guestsInput()).data("rooms"))},getAdults:function(){return parseInt($(this.get_guestsInput()).data("adults"))},getChildren:function(){return parseInt($(this.get_guestsInput()).data("children"))},getValue:function(){return[this.getRooms(),this.getAdults(),this.getChildren(),this.getChildAges()]},setChildAges:function(n){this.childOptionChanged();$("[data-child-age-selector]",this.get_element()).each(function(t,i){$(i).val(n[t]).trigger("render")})},setValue:function(n,t,i){var r,f,u;isNaN(n)&&isNaN(t)&&isNaN(i)||(n=="4"&&(showRoomsAlert("Group Booking","","OK"),n--),r=[],f=$(".ux-test-page").length,t>0&&r.push(t+(t>1?" adults":" adult")),i>0&&r.push(i+(i>1?" children":" child")),n>0&&r.push("("+n+(n>1?" rooms":" room")+")"),u=r.join(", "),$(this.get_guestsInput()).val(u),$(this.get_guestsInput()).text(u),$("[data-guests-selection]").text(u),$(this.get_roomsSelect()).val(n),$(this.get_adultsSelect()).val(t),$(this.get_childrenSelect()).val(i),$(this.get_guestsInput()).data("rooms",n),$("[data-rooms-qty]").val(n),$(this.get_guestsInput()).data("adults",t),$('[data-guest-type="adults"]').val(t),$(this.get_guestsInput()).data("children",i),$('[data-guest-type="children"]').val(i),$(this.get_element()).data("set",1),$(this.get_childrenSelect()).val()==="0"||$('[data-guest-type="children"]').val()==="0"?$(".child_age_lbl").hide():$(".child_age_lbl").show())},hideOverlayOnly:function(){$(this.get_guestsOverlay()).hide()},showOverlayOnly:function(){isMobile?$(".guest-slider .expandercontent").is(":hidden"):($(this.get_guestsOverlay()).show(),$(".rooms-adults-children-selects select:not(.hasCustomSelect)").customSelect())},showOverlay:function(){$(this.get_guestsOverlay()).is(":hidden")?this.showOverlayOnly():this.hideOverlayOnly();$(".dateselector").length>0&&$(".dateselector").hide()},showMoreOptions:function(){var n=$(this.get_moreOptionsContainter()),t=$(this._showMoreOptions),i=$(this.get_childAgeContainer());n.is(":hidden")?(n.show(),i.show(),t.find("a").text("less options..."),n.find("select").hasClass("hasCustomSelect")||n.find("select").customSelect()):(t.find("a").text("more options..."),n.hide(),i.hide())},addChildColumn:function(n){var t=this,i=$(t.getFormattedChildAgeColumn(n));$(t.get_childAgeContainer()).append(i);$("select").on("change",function(n){var u=$(n.target),i,r;u.parents(".sfDropdownList").removeClass("form_error");i=$(".country-filter",$(t.get_element()).closest(".search_flds"));r=i.data("value")==="INTL";t.get_childMessageShown()===!1&&r===!1&&(t.set_childMessageShown(!0),$.fancybox({content:String.format('<div class="bw_overlay"><div class="bo_header bo_large">Guests<\/div><div class="bo_body">{0}<\/div><div class="bo_footer group"><a class="button right_15 close_btn" style="width: 142px;" href="javascript:;">Close<\/a><\/div><\/div>',t.get_childUnder3Message()),tpl:{wrap:'<div class="fancybox-wrap fancybox-600" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},autoSize:!1,width:600,height:"auto",beforeShow:function(){$(".fancybox-outer").append('<a title="Close" class="bw_fancybox_close" href="javascript:void(0);"><\/a>');$(".bw_fancybox_close,.close_btn").on("click",function(){$.fancybox.close()})},helpers:{overlay:{locked:!1}}}))});$(".child_age_column select").on("change",function(){var n=$(this),t=n.val(),i=n.parents(".child_age_column").index();$(".child_age_column[data-child="+i+"] select").val(t);$(".child_age_column[data-child="+i+"] .customSelectInner").text(t)});$(this.get_childAgeContainer()).find("select:not(.hasCustomSelect)").customSelect()},getFormattedChildAgeColumn:function(n){var t=document.getElementById("child_age_column").innerHTML;return String.format(t,n)},get_maxRooms:function(){return this._maxRooms},set_maxRooms:function(n){this._maxRooms=n},get_maxAdults:function(){return this._maxAdults},set_maxAdults:function(n){this._maxAdults=n},get_maxChildren:function(){return this._maxChildren},set_maxChildren:function(n){this._maxChildren=n},get_quickSelections:function(){return this._quickSelections},set_quickSelections:function(n){this._quickSelections=n},get_quickSelectionList:function(){return this._quickSelectionList},set_quickSelectionList:function(n){this._quickSelectionList=n},get_guestsFieldWrap:function(){return this._guestsFieldWrap},set_guestsFieldWrap:function(n){this._guestsFieldWrap=n},get_guestsInput:function(){return this._guestsInput},set_guestsInput:function(n){this._guestsInput=n},get_guestsOverlay:function(){return this._guestsOverlay},set_guestsOverlay:function(n){this._guestsOverlay=n},get_showMoreOptions:function(){return this._showMoreOptions},set_showMoreOptions:function(n){this._showMoreOptions=n},get_moreOptionsContainter:function(){return this._moreOptionsContainter},set_moreOptionsContainter:function(n){this._moreOptionsContainter=n},get_roomsSelect:function(){return this._roomsSelect},set_roomsSelect:function(n){this._roomsSelect=n},get_adultsSelect:function(){return this._adultsSelect},set_adultsSelect:function(n){this._adultsSelect=n},get_childrenSelect:function(){return this._childrenSelect},set_childrenSelect:function(n){this._childrenSelect=n},get_childAgeContainer:function(){return $(".child-selection-container")},set_childAgeContainer:function(n){this._childAgeContainer=n},get_internationalHotel:function(){return this._internationalHotel},set_internationalHotel:function(n){this._internationalHotel=n;this.childOptionChanged()},get_childMessageShown:function(){return this._childMessageShown},set_childMessageShown:function(n){this._childMessageShown=n},get_childUnder3Message:function(){return this._childUnder3Message},set_childUnder3Message:function(n){this._childUnder3Message=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.GuestsSelectionControl.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.GuestsSelectionControl",Sys.UI.Control);
function moreInfoSlider(){setTimeout(function(){const n=document.querySelector(".mini-pdp-carousel");if(n!==null){var t=tns({container:".mini-pdp-carousel",items:1,slideBy:"page",speed:500,mode:"gallery",autoplay:!0,autoplayButtonOutput:!1,autoplayHoverPause:!0,autoplayTimeout:5e3,mouseDrag:!0,touch:!0,nav:!1,controls:!0,controlsContainer:".mini-pdp-carousel--wrp .sbx-slider-controls"});const n=document.querySelector(".mini-pdp-carousel--wrp");n!==null&&(n.style.height="auto",n.style.opacity="1")}},500)}function expandRoom(n){var n=$(n);n.next(".lrg_info").is(":hidden")?(n.parents(".lrg_room").addClass("active"),n.next(".lrg_info").show()):(n.parents(".lrg_room").removeClass("active"),n.next(".lrg_info").hide())}function AmendPriceDifference(n,t){var i,r;if(BestWestern.IsAuthenticated()||n.get("AgreeRewardsSignup")){for(i=0;i<t.RateOptions.length;i++)if(t.RateOptions[i].BookingCodes.length&&t.RateOptions[i].BookingCodes[0].Rate&&t.RateOptions[i].BookingCodes[0].Rate.GatedRateComparisonPrice&&t.RateOptions[i].BookingCodes[0].Rate.IsHiddenLinkedRate===!1){var u=t.RateOptions[i].BookingCodes[0].Rate,f=u.GatedRateComparisonPrice,e=u.LocalBaseAmountBeforeTax;for(r=0;r<t.RateOptions[i].BookingCodes.length;r++)t.RateOptions[i].BookingCodes[r].PriceDifference=t.RateOptions[i].BookingCodes[r].Rate.GatedRateComparisonPrice?t.RateOptions[i].BookingCodes[r].Rate.GatedRateComparisonPrice-f:t.RateOptions[i].BookingCodes[r].Rate.LocalBaseAmountBeforeTax-f}}else for(i=0;i<t.RateOptions.length;i++)if(t.RateOptions[i].BookingCodes.length&&t.RateOptions[i].BookingCodes[0].Rate&&t.RateOptions[i].BookingCodes[0].Rate.GatedRateComparisonPrice&&t.RateOptions[i].BookingCodes[0].Rate.IsHiddenLinkedRate===!1){var u=t.RateOptions[i].BookingCodes[0].Rate,f=u.GatedRateComparisonPrice,e=u.LocalBaseAmountBeforeTax;for(r=0;r<t.RateOptions[i].BookingCodes.length;r++)t.RateOptions[i].BookingCodes[r].PriceDifference=t.RateOptions[i].BookingCodes[r].Rate.LocalBaseAmountBeforeTax-e}}Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRates=function(n){Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRates.initializeBase(this,[n]);this._viewModel=null;this._internationalHotel=!1;this._hotelPropertyId=null;this._hotelTitle=null;this._basePath=null;this._variantMode=null;this._hotelIsPilot=null;this._simpleSearchSingle=null;this._simpleSearchMulti=null;this._siteKey=null;this._loginRequiresRecaptcha=null;this._hotelSearchParams={PropertyId:function(){return this.get("Hotel.PropertyId")},showChildrenOptions:function(){return this.Children>0},getCheckInDateFormatted:function(){var n=null;return n=this.get("CheckIn")==null?Date.Tomorrow():this.get("CheckIn").toDateObject(),n.format("ddd, dd/MM")},getCheckOutDateFormatted:function(){var n=null;return n=this.get("CheckOut")==null?Date.DayAfterTomorrow():this.get("CheckOut").toDateObject(),n.format("ddd, dd/MM")},Nights:function(){return(new Date(this.CheckOut)-new Date(this.CheckIn))/864e5}};this.RoomOptions=function(){return{Adults:0,Children:0,RoomRates:[],RateOptions:[],FilteredRoomRates:[],SelectedRate:null,SelectedRatePlan:null}};this.FloaterItem=function(){return{Name:null,Adults:null,Children:null,RatePlanName:null,Cancellable:null,Nights:null,BookingCode:null,Total:null,CurrencySymbol:null,Composition:function(){var n=String.format("{0} adult{1}",this.Adults,this.Adults>1?"s":"");return this.Children>0&&(n=String.format("{0} {1} {2}",n,this.Children,this.Children>1?"children":"child")),n},GetSubTotalHtml:function(){var n=this.Total.toFixed(2);return this.IsGated&&!BestWestern.IsAuthenticated()&&(n=this.GatedComparisonTotal.toFixed(2)),String.format('<span class="lrg_subtotal_lbl">Price for {0} night{2}<\/span><span class="lrg_subtotal_amnt">{3}{1}<\/span>',this.Nights,n,this.Nights>1?"s":"",this.CurrencySymbol)},GetGatedSubTotalHtml:function(){var n=this.Total.toFixed(2);return this.IsGated?n=this.Total.toFixed(2):this.IsRewardsDiscount&&(n=this.GatedComparisonTotal.toFixed(2)),String.format('<span class="lrg_subtotal_lbl">Price for {0} night{2}<\/span><span class="lrg_subtotal_amnt">{3}{1}<\/span>',this.Nights,n,this.Nights>1?"s":"",this.CurrencySymbol)},GetSubTotalTabletHtml:function(){var n=this.Total.toFixed(2);return this.IsGated&&!BestWestern.IsAuthenticated()&&(n=this.GatedComparisonTotal.toFixed(2)),String.format('<strong class="sticky-cart--room-price">{3} {1}<\/strong><div class="sticky-cart--duration">Price for {0} night{2}<\/div>',this.Nights,n,this.Nights>1?"s":"",this.CurrencySymbol)},Ruid:null}}};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRates.prototype={initialize:function(){var e,f;Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRates.callBaseMethod(this,"initialize");var i=function(){$(".rt-flex").each(function(){var n=$(this),t=$(n).find(".std-rt-tim-left").height();t<=207&&$(n).removeClass("rt-flex")})},r=null;BestWestern.ShowingMultiFloater=!1;e=$(".hotel-container");$(".variantc-float--wrap").on("clickoutside",function(){$(".variantc-floater").hide();n.set("VariantFloaterShow",!1)}).on("mouseenter",function(){clearTimeout(r)});$.extend(this._hotelSearchParams,this.get_searchParams());this._hotelSearchParams.Adults===null&&(this._hotelSearchParams.Adults=1);this._hotelSearchParams.Children===null&&(this._hotelSearchParams.Children=0);this._hotelSearchParams.RoomQuantity===null&&(this._hotelSearchParams.RoomQuantity=1);this._hotelSearchParams.CheckIn===null&&(this._hotelSearchParams.CheckIn=new Date((new Date).getTime()+864e5).format("yyyy-MM-dd"));this._hotelSearchParams.CheckOut===null&&(this._hotelSearchParams.CheckOut=new Date((new Date).getTime()+1728e5).format("yyyy-MM-dd"));$(document).on("click",".rt_close",function(){var n=$(this).parents(".rt_selections");n.is(":visible")&&n.hide()});$("html, body").on("click",function(n){var t=$("div.rt_selector");t.is(n.target)||t.has(n.target).length!==0||t.find("div.rt_selections").hide()});this.initializeFloaterDock();var t=this,u=BestWestern.StorageManager.GetCookie("RewardsRatesEmail"),o=u!=null&&u!=undefined&&u!="",n=kendo.observable({Loading:!0,AgreeRewardsSignup:o,RewardsCheckout:!1,RoomTypesLoadingClass:"loading-rates",Hotel:{PropertyId:t.get_hotelPropertyId(),Title:t.get_hotelTitle(),City:e.data("hotel-location"),CurrencySymbol:null,IsPilot:t.get_hotelIsPilot()},Availability:{Items:[],RoomTypes:[],FloaterItems:function(){return[]},FloaterMessages:function(){return[]}},AvailabilityCheckHandlers:[],GetRetrievingGroupRequest:function(){return n.get("RetrievingGroupRequest")},GetMealOptionDefaultText:function(){return this.get("GetRetrievingGroupRequest")===!0?"Loading meal options":"Select the best rate for you brother"},InitializeDataLayerObject:function(){var n=$("[data-gtm]").data("gtm"),t="";if(n)return n.Street!=="undefined"?t+=n.Street:"",n.AddressLine2!=="undefined"?t+=", "+n.AddressLine2:"",n.City!=="undefined"?t+=", "+n.City:"",n.Zip!=="undefined"?t+=", "+n.Zip:"",{ecommerce:{detail:{products:[{name:n.Name,id:n.Id,price:null,brand:t,variant:null}]}}}},PopulateDataLayer:function(n){if(typeof dataLayer!="undefined")if(BestWestern.HotelName=n.Hotel.Title,dataLayer.push({searchTerm:n.Hotel.Title,checkInDate:n.SearchParams.CheckIn,checkOutDate:n.SearchParams.CheckOut,occupancy:n.SearchParams.Adults+" adults, "+n.SearchParams.Children+" children",bookingExtras:n.SearchParams.OfferId!=="null"?n.SearchParams.OfferType+": "+n.SearchParams.OfferId:null,currency:n.Hotel.CurrencySymbol,currencySymbol:n.Hotel.Currency}),n.get("NoRoomsAvailable")===!0){dataLayer.push({event:"room-unavailable",action:n.Hotel.Title});var t=new Date(n.SearchParams.CheckIn).valueOf(),i=new Date((new Date).toISOString().split("T")[0]).valueOf();t>i&&dataLayer.push({event:"bw_property_closed_out",property_id:this.Hotel.PropertyId,checkin:n.SearchParams.CheckIn,check_out:n.SearchParams.CheckOut,rooms:n.SearchParams.RoomQuantity,adults:n.SearchParams.Adults,children:n.SearchParams.Children})}else n.get("MinimumLengthOfStayApplies")&&dataLayer.push({event:"minimum-stay",action:n.Hotel.Title})},AddComparableItemsToDataLayer:function(n,t,i){i&&(n&&(i.ecommerce.detail.products[0].price=n),t&&(i.ecommerce.detail.products[0].variant=t),typeof dataLayer!="undefined"&&dataLayer.push(i),typeof initGtm!="undefined"&&initGtm())},ProcessEmptySearchRequest:function(n,t){return n.SearchParams.EmptySearch===!0?(n.set("NoResults",!0),n.set("NoRoomsAvailable",!1),n.set("NoSearchRequest",!0),n.set("MainLoading",!1),n.set("RoomTypesLoadingClass","loading-rates"),isMobile||($(".rr_change_dates.search_wrp").show(),$(".rr_change_dates_lnk").text("Close")),isMobile&&($(".roomratesearch").show(),$(".changedate").text("Close")),t&&typeof dataLayer!="undefined"&&dataLayer.push(t),typeof initGtm!="undefined"&&initGtm(),BestWestern.RoomsAndRatesSuccess(undefined,!0),!0):!1},selectDatesPrompt:function(){var n=this;$(".select-dates-button").show().on("click",function(){n.initEnterDatesModal()});$(function(){n.initEnterDatesModal(1500)})},initEnterDatesModal:function(){BestWestern.SelectDates()},CheckAvailability:function(r,u){var f=this,e;if(f.set("MainLoading",!0),f.set("Availability",{Items:[],RoomTypes:[],FloaterItems:function(){return[]},FloaterMessages:function(){return[]}}),e=this.InitializeDataLayerObject(),r!==undefined&&r!==null&&$.extend(f.SearchParams,r),this.ProcessEmptySearchRequest(f,e)===!0){$(".pdp-home-float-message--wrp").show();$(".select-dates-button").show();this.selectDatesPrompt();return}f.set("NoSearchRequest",!1);f.set("MultiRoom",parseInt(f.SearchParams.RoomQuantity,10)>1||f.IsInternational());f.get("MultiRoom")?$("body").addClass("multiroom"):$("body").removeClass("multiroom");var s={PropertyId:this.Hotel.PropertyId,Adults:f.SearchParams.Adults,Children:f.SearchParams.Children,RoomQuantity:f.SearchParams.RoomQuantity,CheckIn:f.SearchParams.CheckIn,CheckOut:f.SearchParams.CheckOut,PromoCode:f.SearchParams.Promo,OfferId:f.SearchParams.OfferId,OfferType:f.SearchParams.OfferType,Ages:f.SearchParams.Ages,GroupId:1},h=function(n,r){$.ajax({url:"/restapi/hotel-details/availability",type:"POST",dataType:"json",accept:"application/json",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:r,error:function(n){var t=JSON.parse(n.responseText);BestWestern.ShowMessage(t.ResponseStatus.Message)},complete:function(){f.set("MainLoading",!1);isMobile&&i();t.addStateClassEvents();u&&u()}})},o=0,c=function(i){var u,s,c,r,h,l,a,v;if(o=o+1,f.set("DirectConnectDown",!1),i!=null&&i.DirectConnectDown==!0){f.HandleDirectConnectDown(i.Message);return}if(f.set("Hotel.CurrencySymbol",i.CurrencySymbol),f.set("RetrievingGroupRequest",!1),f.set("NoSearchRequest",!1),f.set("NoRoomsAvailable",!0),f.set("NoResults",!0),$(i.Items).each(function(n,i){$(i.RoomTypes).each(function(n,i){if(i.collapsed=!0,f.get("MultiRoom"))i.RoomOptions=new kendo.data.ObservableArray([]);else{var r=new t.RoomOptions;r.Adults=f.SearchParams.Adults;r.Children=f.SearchParams.Children;r.RateOptions=i.RateOptions;r.RoomRates=i.RoomRates;r.FilteredRoomRates=[];i.RoomOptions=new kendo.data.ObservableArray([r]);i.ChooseRateMode=!0;i.ChooseFoodMode=!1;i.RoomOptions.length>0&&i.RoomOptions[0].RateOptions.length>0&&(isMobile||f.Events.RateSelectionClicked(i.RoomOptions[0].RateOptions[0]))}})}),i.Items=i.Items||[],i.RoomTypes=i.RoomTypes||[],isMobile)for(u=0;u<i.Items.length;u++)for(s=0;s<i.Items[u].RoomTypes.length;s++)for(c=0;c<i.Items[u].RoomTypes[s].RoomOptions.length;c++)r=i.Items[u].RoomTypes[s].RoomOptions[c],r.RoomOptions=new kendo.data.ObservableArray([]),r.SelectedRate=r.RateOptions[0].BookingCodes[0].Rate,r.SelectedRatePlan=r.RateOptions[0].BookingCodes[0].Rate,h=[],l=r.RateOptions.filter(function(n){return n.BookingCodes.filter(function(n){return n.Code===r.SelectedRate.BookingCode}).length>0}),l.length&&(a=l[0],v=$(r.RoomRates).each(function(n,t){return $(a.BookingCodes).each(function(n,i){i.Code===t.BookingCode&&(t.PriceDifference=i.PriceDifference,h.push(t))})}),h=h.sort(function(n,t){return n.PriceDifference-t.PriceDifference}),r.FilteredRoomRates=new kendo.data.ObservableArray(h));$(i.RoomTypes).each(function(t,i){var r,u,f;for(i.Index=t,r=0;r<i.RateOptions.length;r++)i.RateOptions[r].RoomOptions=new kendo.data.ObservableArray([]),i.RateOptions[r].SelectedRatePlan=new kendo.data.ObservableObject(i.RateOptions[r].BookingCodes[0].Rate);if(AmendPriceDifference(n,i),isMobile&&n.MultiRoom&&!n.agreedOrAuthenticated())for(r=0;r<i.RateOptions.length;r++)i.RateOptions[r].SelectedRatePlan.IsHiddenLinkedRate&&(u=i.RateOptions.filter(function(n){return i.RateOptions[r].SelectedRatePlan.LinkedRates.GatedRate&&n.SelectedRatePlan.RatePlan.RatePlanCode==i.RateOptions[r].SelectedRatePlan.LinkedRates.GatedRate.RatePlan.RatePlanCode})[0],u==undefined?(u=i.RateOptions.filter(function(n){return n.SelectedRatePlan.LinkedRates.RewardsPromoTextRate&&i.RateOptions[r].SelectedRatePlan.RatePlan.RatePlanCode==n.SelectedRatePlan.LinkedRates.RewardsPromoTextRate.RatePlan.RatePlanCode})[0],f=i.RateOptions.indexOf(u),i.RateOptions.splice(r,0,i.RateOptions.splice(f,1)[0])):(f=i.RateOptions.indexOf(u),i.RateOptions.splice(r+1,0,i.RateOptions.splice(f,1)[0])));else i.RateOptions=i.RateOptions.filter(function(t){return!(isMobile&&n.MultiRoom&&t.SelectedRatePlan.IsPublic)&&(!t.SelectedRatePlan.IsHiddenLinkedRate||n.agreedOrAuthenticated()&&t.SelectedRatePlan.IsHiddenLinkedRate&&t.SelectedRatePlan.IsRewards)})});f.set("Availability",i);f.set("NoRoomsAvailable",(i.Items===null||i.Items.length===0)&&!i.MinimumLengthOfStayApplies);f.set("NoResults",i.Items===null||i.Items.length===0);f.get("NoResults")===!1&&BestWestern.ShowLockPrice&&BestWestern.ShowLockPrice(undefined,!0);f.PopulateDataLayer(f);document.getElementById("comparableNights")&&kendo.bind(document.getElementById("comparableNights"),f);f.set("RetrievingGroupRequest",!1);f.set("RoomTypesLoadingClass","loaded");BestWestern.RoomsAndRatesSuccess(undefined,!0);f.agreedOrAuthenticated()?f.AddComparableItemsToDataLayer(f.get("Availability.LowestOverallPrice"),f.get("Availability.ComparableNights"),e):f.AddComparableItemsToDataLayer(f.get("Availability.LowestComparablePrice"),f.get("Availability.ComparableNights"),e);f.get("NoRoomsAvailable")==!0&&f.PopulateNoAvailabilityCalendar()};h(s,c)},PopulateNoAvailabilityCalendar:function(){var n=this,i;n.set("HasNewDates",!1);i={RatePlanCode:"RAC",PropertyId:n.get("Hotel.PropertyId"),Adults:n.get("SearchParams.Adults"),Children:n.get("SearchParams.Children"),Ages:n.get("SearchParams.Ages"),RoomQuantity:n.get("SearchParams.RoomQuantity")};n.get("MultiRoom")?t.get_simpleSearchMulti()!=null&&t.get_simpleSearchMulti().populateCalendar(i,function(t){n.CalendarChangedCallback(t)}):t.get_simpleSearchSingle().populateCalendar(i,function(t){n.CalendarChangedCallback(t)})},CalendarChangedCallback:function(n){this.set("SearchParams.CheckIn",n.date1.format("yyyy-MM-dd"));this.set("SearchParams.CheckOut",n.date2.format("yyyy-MM-dd"));this.set("HasNewDates",!0)},ResearchCalendarAvailbility:function(){this.set("NoResults",!1);this.set("MainLoading",!0);this.set("NoRoomsAvailable",!1);this.CheckAvailability(this.get("SearchParams"),function(){})},ClearSelectedDates:function(){this.set("HasNewDates",!1);this.get("MultiRoom")?t.get_simpleSearchMulti().clearCalendar():t.get_simpleSearchSingle().clearCalendar()},FloaterItems:[],FloaterMessages:[],GetFloaterItemsVariant:function(){var l=[],e=!1,f,o,v,h,i,r,c,y;for(items=this.get("Availability.RoomTypes"),f=0;f<items.length;f++)for(o=0;o<items[f].RateOptions.length;o++)for(v=items[f].Title,h=0;h<items[f].RateOptions[o].RoomOptions.length;h++)i=items[f].RateOptions[o].RoomOptions[h],r=new t.FloaterItem,r.Adults=i.Adults,r.Children=i.Children,r.Name=v,r.CurrencySymbol=this.get("Hotel.CurrencySymbol"),r.Nights=this.SearchParams.Nights(),i.SelectedRatePlan!==null&&(r.RatePlanName=i.SelectedRatePlan.RatePlan.RatePlanTitle,r.BookingCode=this.getRewardsLinkedRate(i)&&(n.get("AgreeRewardsSignup")||n.get("RewardsCheckout")||BestWestern.IsAuthenticated())?this.getRewardsLinkedRate(i).BookingCode:i.SelectedRatePlan.BookingCode,r.Cancellable=i.SelectedRatePlan.RatePlan.IsCancellable?"Cancellable":"Non-Cancellable",r.Total=i.SelectedRatePlan.BaseAmountBeforeTax,r.IsGated=i.SelectedRatePlan.RatePlan.IsGated&&i.SelectedRatePlan.LinkedRates.GatedRate&&i.SelectedRatePlan.LinkedRates.GatedRate.Active,r.IsRewardsDiscount=i.SelectedRatePlan.LinkedRates.RewardsDiscountRate&&i.SelectedRatePlan.LinkedRates.RewardsDiscountRate.Active&&i.SelectedRatePlan.RatePlan.IsRewardsDiscountRate,r.IsRewardsPromoTextRate=i.SelectedRatePlan.LinkedRates.RewardsPromoTextRate&&i.SelectedRatePlan.LinkedRates.RewardsPromoTextRate.Active,r.PromoText=r.IsRewardsPromoTextRate?i.SelectedRatePlan.RatePlan.PromoText:"",c=0,i.SelectedRatePlan.LinkedRates.GatedRate?c=i.SelectedRatePlan.LinkedRates.GatedRate.ComparisonPrice:i.SelectedRatePlan.LinkedRates.RewardsDiscountRate&&(c=i.SelectedRatePlan.LinkedRates.RewardsDiscountRate.ComparisonPrice),r.GatedComparisonTotal=c,r.Ruid=String.format("{0}-{1}-{2}-{3}",i.uid,i.Adults,i.Children,i.SelectedRatePlan.BookingCode),l.push(r));var s=0,u=0,a=[];return $(l).each(function(n,t){isNaN(t.Total)||((t.IsGated||t.IsRewardsDiscount||t.IsRewardsPromoTextRate)&&!isNaN(t.GatedComparisonTotal)?(t.IsGated?(s+=t.GatedComparisonTotal-t.Total,u=u+t.Total):t.IsRewardsDiscount?(s+=t.Total-t.GatedComparisonTotal,u=u+t.GatedComparisonTotal):t.IsRewardsPromoTextRate&&($.inArray(t.PromoText,a)===-1&&a.push(t.PromoText),u=u+t.Total),e=!0):u=u+t.Total)}),e=e&&!BestWestern.IsAuthenticated(),this.set("FloaterTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),u.toFixed(2))),this.set("FloaterGated",e),this.set("FloaterMessages",a),e&&(y=s/(u+s)*100,this.set("FloaterGatedPercent",y.toFixed(0)),this.set("FloaterGatedTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),(u+s).toFixed(2)))),new kendo.data.ObservableArray(l)},BasketText:function(){var n=this.get("FloaterItems"),t=0;return n&&n.length&&(t=n.length),String.format("{0} room{1} selected",t,t===1?"":"s")},VariantFloaterShow:!1,HasImage:function(n){return n.ImageUrl!==null},HasTruncatedRoomDescriptionMobile:function(n){if(n.get("RoomDescription")===undefined)return null;var t=n.get("RoomDescription").indexOf(" ",200);return t>=0},TruncatedClickText:function(n){return n.get("truncated")===undefined||n.get("truncated")===!0?"more":"less"},ToggleTruncateMode:function(n){n.data.get("truncated")===undefined&&n.data.set("truncated",!0);n.data.get("truncated")===!0?n.data.set("truncated",!1):n.data.set("truncated",!0)},GetTruncatedRoomDescriptionMobile:function(n){var i,t;return n.get("RoomDescription")===undefined?null:(i=n.get("truncated")===undefined||n.get("truncated")===!0,this.HasTruncatedRoomDescriptionMobile(n)&&i?(t=n.get("RoomDescription").indexOf(" ",200),t<0)?n.get("RoomDescription"):n.get("RoomDescription").substr(0,t)+"â¦":n.get("RoomDescription"))},GetTruncatedRoomDescription:function(n){return n.RoomDescriptionShort===undefined?null:n.RoomDescriptionShort},attachStickyEvents:function(){},TabletFloater:{toggleFloaterRoom:function(n){$(n.target).parent(".sticky-cart--room-left").toggleClass("active");n.stopPropagation()},toggleTabletFloater:function(n){var t=$(".sticky-cart--preview-block");t.on("clickoutside",function(){$(".sticky-cart--preview").removeClass("active")});$(".sticky-cart--preview").toggleClass("active");n.stopPropagation()},showFloater:function(n){var t=n.get("FloaterItems");return t?(BestWestern.ShowingMultiFloater=t.length>0,t.length>0):!1},GetSummary:function(n){var r=n.get("FloaterItems"),t=n.get("FloaterTotal"),i=0;return!r||!t?"":(t=t,i=r.length,!n.get("FloaterGated")||BestWestern.IsAuthenticated()||n.get("AgreeRewardsSignup")||(t=n.get("FloaterGatedTotal")),String.format('<span class="short-preview-selection">{0} room{2} selected:<\/span><span class="short-preview-price">&nbsp;{1}<\/span>',i,t,i>1?"s":""))}},GetFloaterItems:function(){var d,l,v,g,b,i,u,p,s,w,o;if(clearTimeout(r),t.get_variantMode()===!0){var nt=this.get("FloaterItems").length,s=this.GetFloaterItemsVariant(),k=s.length;k!==nt&&k>0&&(d=this);var e=!1,f=0,h=0,c=s,a=[];if($(c).each(function(n,t){isNaN(t.Total)||((t.IsGated||t.IsRewardsDiscount&&!isMobile&&!this.MultiRoom||t.IsRewardsPromoTextRate)&&!isNaN(t.GatedComparisonTotal)?(t.IsGated&&!isNaN(t.GatedComparisonTotal)?(f=f+t.Total,h+=t.GatedComparisonTotal-t.Total):t.IsRewardsDiscount&&!isNaN(t.GatedComparisonTotal)?(f=f+t.GatedComparisonTotal,h+=t.Total-t.GatedComparisonTotal):t.IsRewardsPromoTextRate&&($.inArray(t.PromoText,a)===-1&&a.push(t.PromoText),f=f+t.Total),e=!0):f=f+t.Total)}),e=e&&!BestWestern.IsAuthenticated()&&!n.AgreeRewardsSignup,this.set("FloaterRooms",String.format("{0} room{1}:",c.length,c.length!==1?"s":null)),this.set("FloaterTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),f.toFixed(2))),this.set("FloaterGated",e),this.set("FloaterMessages",a),e&&(p=h/(f+h)*100,this.set("FloaterGatedPercent",p.toFixed(0)),this.set("FloaterGatedTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),(f+h).toFixed(2)))),isMobile&&this.MultiRoom){w=kendo.template($("#sticky-cart").html());o=$(w(this));s.length<1&&o.hide();$(o).on("click",".sticky-book a",function(t){n.Events.BookNowMobileMultiClicked.apply(n,[t])});$(".sticky-cart").length===0?$("body").append(o):$(".sticky-cart").replaceWith(o);BestWestern.ShowingMultiFloater=s.length>0}return this.set("VariantFloaterShow",!0),r=setTimeout(function(){$(".variantc-floater").fadeOut(150,function(){d.set("VariantFloaterShow",!1)})},3e3),s}var c=[],e=!1,y=this.get("Availability.Items");for(l=0;l<y.length;l++)for(v=0;v<y[l].RoomTypes.length;v++)for(g=y[l].RoomTypes[v].Title,b=0;b<y[l].RoomTypes[v].RoomOptions.length;b++)i=y[l].RoomTypes[v].RoomOptions[b],u=new t.FloaterItem,u.Adults=i.Adults,u.Children=i.Children,u.Name=g,u.CurrencySymbol=this.get("Hotel.CurrencySymbol"),u.Nights=this.SearchParams.Nights(),i.SelectedRatePlan!==null&&(u.RatePlanName=i.SelectedRatePlan.RatePlan.RatePlanTitle,u.BookingCode=i.SelectedRatePlan.BookingCode,u.Cancellable=i.SelectedRatePlan.RatePlan.IsCancellable?"Cancellable":"Non-Cancellable",u.Total=i.SelectedRatePlan.BaseAmountBeforeTax,u.IsGated=i.SelectedRatePlan.RatePlan.IsGated&&i.SelectedRatePlan.LinkedRates.GatedRate&&i.SelectedRatePlan.LinkedRates.GatedRate.Active,u.IsRewardsPromoTextRate=i.SelectedRatePlan.LinkedRates.RewardsPromoTextRate&&i.SelectedRatePlan.LinkedRates.RewardsPromoTextRate.Active,u.PromoText=u.IsRewardsPromoTextRate?i.SelectedRatePlan.RatePlan.PromoText:"",i.SelectedRatePlan.LinkedRates.GatedRate?u.GatedComparisonTotal=i.SelectedRatePlan.LinkedRates.GatedRate.ComparisonPrice:i.SelectedRatePlan.LinkedRates.RewardsDiscount&&(u.GatedComparisonTotal=i.SelectedRatePlan.LinkedRates.RewardsDiscount.ComparisonPrice),c.push(u));var f=0,h=0,a=[];if($(c).each(function(n,t){isNaN(t.Total)||(f=f+t.Total,t.IsGated&&!isNaN(t.GatedComparisonTotal)?(h+=t.GatedComparisonTotal-t.Total,e=!0):t.IsRewardsPromoTextRate&&($.inArray(t.PromoText,a)===-1&&a.push(t.PromoText),e=!0))}),e=e&&!BestWestern.IsAuthenticated()&&!n.AgreeRewardsSignup,this.set("FloaterRooms",String.format("{0} room{1}:",c.length,c.length!==1?"s":null)),this.set("FloaterTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),f.toFixed(2))),this.set("FloaterGated",e),this.set("FloaterMessages",a),e&&(p=h/(f+h)*100,this.set("FloaterGatedPercent",p.toFixed(0)),this.set("FloaterGatedTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),(f+h).toFixed(2)))),s=new kendo.data.ObservableArray(c),isMobile&&this.MultiRoom){w=kendo.template($("#sticky-cart").html());o=$(w(this));s.length<1&&o.hide();$(o).on("click",".sticky-book a",function(t){n.Events.BookNowMobileMultiClicked.apply(n,[t])});$(".sticky-cart").length===0?$("body").append(o):$(".sticky-cart").replaceWith(o);BestWestern.ShowingMultiFloater=s.length>0}return s},removeFloaterRoom:function(t){var i=this;$(t.target).parents(".lrg_room, .sticky-cart--room").fadeOut(function(){var e=t.data.Ruid,i,r,s;for(items=n.get("Availability.RoomTypes"),i=0;i<items.length;i++)for(r=0;r<items[i].RateOptions.length;r++){var u=items[i].RateOptions[r],o=u.RoomOptions,f=o.filter(function(n){return String.format("{0}-{1}-{2}-{3}",n.uid,n.Adults,n.Children,n.SelectedRatePlan?n.SelectedRatePlan.BookingCode:"")===e});if(f.length){s=u.RoomOptions.indexOf(f[0]);u.RoomOptions.remove(u.RoomOptions[0]);n.set("FloaterItems",n.GetFloaterItems());n.Events.ToggleVariantFloaterShow(null,!0);return}}BestWestern.MatchVariantCols()})},cartInteraction:function(){},SearchParams:t.get_hotelSearchParams(),MultiRoom:!1,IsInternational:function(){return this.get("Hotel.PropertyId")!==null&&!(this.get("Hotel.PropertyId").startsWith("83")||this.get("Hotel.PropertyId").startsWith("561")||this.get("Hotel.PropertyId").startsWith("84")&&!this.get("Hotel.PropertyId").startsWith("840")&&!this.get("Hotel.PropertyId").startsWith("841")||this.get("Hotel.PropertyId").startsWith("86"))},IsPilot:function(){return this.get("Hotel.IsPilot")},IsPilotHaveRoomTypeImage:function(n){return this.get("Hotel.IsPilot")&&n.ImageUrl!==undefined&&n.ImageUrl!==null&&n.ImageUrl!==""},DelayShowNativeChoicesWhileRetrievingGroupRequest:function(n,i,r,u){var e,f;n.get("RetrievingGroupRequest")===!0?(e=String.format('<ul class="native-choices">{1}<li class="loading" style="text-align: center; padding: 20px;">{0}<\/li><\/ul>',r,u),$("body").addClass("noscroll").append(e),f=function(){n.get("RetrievingGroupRequest")===!0?setTimeout(f,100):(t.removeNativeChoices(),i())},f()):i()},ShowRate:function(n){var t=n;return n.data!=undefined&&(t=n.data),t.parent().parent().get("ShowMoreRates")!=undefined&&t.parent().parent().get("ShowMoreRates")||t.parent().indexOf(t)<3},ShowMoreRatesVisible:function(n){return n.get("RateOptions").length>3&&(n.get("ShowMoreRates")===undefined||!n.get("ShowMoreRates"))},Events:{AddRooms:function(i){var o=$(i.target),h=null,r,f,s,e;h=o.hasClass("btn-less")?"subtract":"add";var l=o.parents(".roomsummarybook"),c=o.parent().find("input"),u=c.val();if(h==="add"?u++:u--,u<=4&&u>=0){if(i.data.set("ChooseRateMode",!0),c.val(u),r=parseInt(u,10),r===undefined||isNaN(r))return i.RoomOptions.length.toString();if(f=i.data.get("RoomOptions"),s=!1,f.length<r)while(f.length<r)f.push(new t.RoomOptions);else if(f.length>r){for(e=new kendo.data.ObservableArray([]);e.length<r;)e.push(f[e.length]);i.data.RoomOptions=e;s=!0}return i.data.set("RoomOptions",new kendo.data.ObservableArray(i.data.RoomOptions.toJSON())),i.data.get("hasRooms"),s&&n.updateMobileFloater(),i.data.RoomOptions.length.toString()}i.data.set("ChooseRateMode",!1)},SwitchToRateMode:function(n){n.data.set("ChooseFoodMode",!1);n.data.set("ChooseRateMode",!0);var t=$(n.target).parents(".roomsummarywrp");t.removeClass("on-food-mode");$("html, body").animate({scrollTop:t.find(".room-options-selector-wrp").offset().top})},SwitchToFoodMode:function(n){var i=$('.roomsummarywrp[data-id="1"]'),t;n.data.set("ChooseRateMode",!1);n.data.set("ChooseFoodMode",!0);t=$(n.target).parents(".roomsummarywrp");t.addClass("on-food-mode");$("html, body").animate({scrollTop:t.find(".room-options-selector-wrp").offset().top})},AdultChange:function(n){var i=$(n.target),u=i.hasClass("btn-less")?"subtract":"add";var f=i.parents(".countercontrol"),r=i.parent().find("input"),t=r.val();u==="add"?t++:t--;t<=4&&t>=0&&(r.val(t),r.change())},BookNowMobileMultiClicked:function(n){var i=this.GetFloaterItems(),f=i.map(function(n){return parseInt(n.Adults,10)}),e=i.map(function(n){return parseInt(n.Children,10)}),r=i.map(function(n){return n.BookingCode}),t,u;r.length>0&&(t=new BestWestern.SearchModel,t.Adults=f,t.Children=e,t.Plan=r,t.RoomQuantity=r.length,t.CheckIn=this.SearchParams.CheckIn,t.CheckOut=this.SearchParams.CheckOut,t.Term=this.SearchParams.Term,this.SearchParams.Ages!=null&&(t.Ages=this.SearchParams.Ages.toJSON?this.SearchParams.Ages.toJSON().toString():this.SearchParams.Ages),u=BestWestern.Search.BuildBookingUrl(t),n.preventDefault(!0),window.location=u)},MoreInfoClicked:function(n){var t,i;GoalTracking.TrackViewRoomFacilitiesInfoGoal();t=$($("#roomMoreInfoTemplate").html()).clone();kendo.bind(t,n.data);i=this.get("Hotel.Title");$.fancybox({content:t,autoSize:!1,width:900,height:"auto",maxWidth:"95%",maxHeight:"95%",tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox" style="box-shadow: 0 0 7px rgba(0, 0, 0, 0.35);"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},beforeShow:function(){var n=$(this.content);$(".bo_header").append(i);$(".fancybox-outer").append('<a title="Close" class="bw_fancybox_close" href="javascript:void(0);"><\/a>');$(".bw_fancybox_close").on("click",function(){$.fancybox.close()})},afterShow:function(){moreInfoSlider()}})},SelectionOpened:function(n){var r=$(n.target),i=r.parents(".rt_selector"),t;i.attr("data-disabled")!="disabled"&&(t=i.find(".rt_selections"),t.is(":hidden")?($("div.rt_selections").hide(),t.fadeIn(200).addClass("active")):t.hide().removeClass("active"))},ShowMoreRatesClicked:function(n){n.data.set("ShowMoreRates",!0);var t=n.data.get("RateOptions");n.data.set("RateOptions",new kendo.data.ObservableArray([]));n.data.set("RateOptions",t);i()},BookNowClicked:function(n){var t=n.data.get("SelectedRatePlan");this.Book(n,t);typeof dataLayer!="undefined"&&this.Hotel!==undefined&&dataLayer.push({event:"book-now-cta",category:"Book Now CTA",action:"Clicked CTA",label:this.Hotel.Title})},RewardsBookNowClicked:function(n){var t=n.data.get("SelectedRatePlan");this.Book(n,t,!0);typeof dataLayer!="undefined"&&this.Hotel!==undefined&&dataLayer.push({event:"book-now-cta",category:"Book Now CTA",action:"Clicked CTA",label:this.Hotel.Title})},BookNowMultiClicked:function(n){var i=n.data.get("FloaterItems"),f=i.map(function(n){return parseInt(n.Adults,10)}),e=i.map(function(n){return parseInt(n.Children,10)}),r=i.map(function(n){return n.BookingCode}),t,u;r.length>0&&(t=new BestWestern.SearchModel,t.Adults=f,t.Children=e,t.Plan=r,t.RoomQuantity=r.length,t.CheckIn=this.SearchParams.CheckIn,t.CheckOut=this.SearchParams.CheckOut,t.Term=this.SearchParams.Term,this.SearchParams.Ages!=null&&(t.Ages=this.SearchParams.Ages.toJSON?this.SearchParams.Ages.toJSON().toString():this.SearchParams.Ages),u=BestWestern.Search.BuildBookingUrl(t),n.preventDefault(!0),window.location=u)},RateSelectionClicked:function(n){var t=n.data||n,i,e,r,u,f;t.parent().parent().RoomRates!==undefined&&(i=[],e=$(t.parent().parent().RoomRates).each(function(n,r){return $(t.BookingCodes).each(function(n,t){t.Code===r.BookingCode&&(r.PriceDifference=t.PriceDifference,i.push(r))})}),i=i.sort(function(n,t){return n.PriceDifference-t.PriceDifference}),t.parent().parent().set("FilteredRoomRates",i));n.target&&(r=$(n.target),r=r.parents(".rt_selection"),r.find(".rt_radio input").prop("checked",!0),r.siblings().removeClass("selected"),r.addClass("selected"),r.parents(".rt_selections").hide(),u=$(n.target).parents(".os_row"),u&&(u.parents("[data-selector]").find(".os_row").removeClass("active"),u.addClass("active").find("input").prop("checked",!0)));f=t.parent().parent().get("SelectedRate");(f==null||f.Price!==t.Price||f.Title!==t.Title)&&(t.parent().parent().set("SelectedRate",t.toJSON()),t.parent().parent().set("SelectedRatePlan",null));i&&i.length&&t.parent().parent().get("SelectedRatePlan")===null&&(this.FoodSelectionClicked?this.FoodSelectionClicked(i[0]):this.Events.FoodSelectionClicked(i[0]))},doFoodSelectedClicked:function(n){var t=$(n.target),i;t=t.parents(".rt_selection");t.hasClass("selected")||GoalTracking.TrackPDPFoodOptionAddedGoal();t.find(".rt_radio input").prop("checked",!0);t.siblings().removeClass("selected");t.addClass("selected");t.parents(".rt_selections").hide();i=$(n.target).parents(".os_row");i.length>0&&(i.parents("[data-selector]").find(".os_row").removeClass("active"),i.addClass("active").find("input").prop("checked",!0))},FoodSelectionClicked:function(r){var u=r.data||r;u!==null&&u.parent&&u.parent().parent&&u.parent().parent().set&&(u.parent().parent().set("SelectedRatePlan",u.toJSON()),n.set("FloaterItems",n.GetFloaterItems()),t.get_viewModel().Events.doFoodSelectedClicked(r),i())},FoodSelectionClickedNew:function(n){var r=n.data||n;r!==null&&r.parent&&r.parent().parent&&r.parent().parent().set&&(r.parent().parent().set("SelectedRatePlan",r.Rate.toJSON()),t.get_viewModel().Events.doFoodSelectedClicked(n),i())},RateSelectedMobile:function(i){var o=i.data||i,u=$(i.target).data("rateoption")||$(i.target).parent("li").data("rateoption"),f=this.get("RateOptions").filter(function(n){return n.Title===u})[0],r,e;this.set("SelectedRatePlan",null);this.set("SelectedRate",null);this.get("RoomRates")!==undefined&&(r=[],e=$(this.get("RoomRates")).each(function(n,t){return $(f.BookingCodes).each(function(n,i){i.Code===t.BookingCode&&(t.PriceDifference=i.PriceDifference,r.push(t))})}),r=r.sort(function(n,t){return n.PriceDifference-t.PriceDifference}),this.set("FilteredRoomRates",r),this.set("SelectedRate",r[0]),this.set("SelectedRatePlan",r[0]));t.removeNativeChoices();n.updateMobileFloater()},RateSelectionMobileClicked:function(t){for(var r=function(){var u=t.data||t,f=kendo.template($("#choices-overlay-rate").html()),i=u.RateOptions.toJSON(),r;$(i).each(function(t,i){var r,u,f;i.formattedPrice=n.formatPrice(i);i!=undefined&&i.BookingCodes!=undefined&&i.BookingCodes!=null&&i.BookingCodes.length>0&&(r=i.BookingCodes[0].Rate.RatePlan.IsGated,u=r&&(BestWestern.IsAuthenticated()||n.get("AgreeRewardsSignup")),i.isGated=r,i.isGatedAgreed=u,i.gatedActive=i.BookingCodes[0].Rate.LinkedRates.GatedRate&&i.BookingCodes[0].Rate.LinkedRates.GatedRate.Active,f=i.BookingCodes[0].Rate,i.gatedRateDiscount=String.format("{0}%",f.GatedRateDiscount.toFixed(0)))});i.SelectedRateOption=t.data.get("SelectedRate.RatePlan.RatePlanTitleSub");r=$(f(i));$(r).on("click","li.native-choice",function(t){n.Events.RateSelectedMobile.apply(u,[t])});return r},e=function(){result=r();$("body").addClass("noscroll").append(result)},u=r(),f="",i=0;i<u.length;i++)f=$(u[i]).html();n.DelayShowNativeChoicesWhileRetrievingGroupRequest(this,e,"Loading rates",f)},FoodSelectedMobile:function(t){$("body").removeClass("noscroll");var i=$(t.target).data("bookingcode")||$(t.target).parent("li").data("bookingcode");this.set("SelectedRatePlan",this.FilteredRoomRates.filter(function(n){return n.BookingCode===i})[0]);$(".native-choices").remove();n.updateMobileFloater()},FoodSelectionMobileClicked:function(t){for(var r=function(){var i=t.data||t,e=$(t.target).data("selected"),f=kendo.template($("#choices-overlay-food").html()),r,u;$(i.FilteredRoomRates).each(function(t,i){i.formattedPriceDifference=n.formatPriceDifference(i)});r=i.FilteredRoomRates.toJSON();r.SelectedBookingCode=t.data.get("SelectedRatePlan.BookingCode");u=$(f(r));$(u).on("click","li",function(t){$(t.target).index()!==0&&n.Events.FoodSelectedMobile.apply(i,[t])});return u},e=function(){result=r();$("body").addClass("noscroll").append(result);isMobile&&$(".mealSelect").addClass("mealSelectNow")},u=r(),f="",i=0;i<u.length;i++)f=$(u[i]).html();n.DelayShowNativeChoicesWhileRetrievingGroupRequest(this,e,"Loading meal options",f)},SelectOptionsClicked:function(n){var i=n.data||n,t=$(n.target).parents(".roomsummarywrp");t.find(".roomsummaryexpand").is(":hidden")?t.find(".roomsummaryexpand").slideDown(function(){var n=$(this);n.parents(".roomsummarywrp").addClass("active");i.set("collapsed",!1)}):(t.removeClass("active"),i.set("collapsed",!0),t.find(".roomsummaryexpand").slideUp())},BookNowMobileClicked:function(n){var t;this.MultiRoom?(t=n.data.get("SelectedRatePlan"),t&&t!=null&&this.Book(n,t)):(t=n.data.get("RoomOptions[0].SelectedRatePlan"),this.Book(n,t))},AdultChildChangeAvailabilitySuccess:function(t,i){var r=[],u=$(t.data.RoomRates).each(function(t,u){return $(i).each(function(t,i){(i.Code===u.BookingCode||n.IsInternational()&&isMobile)&&(u.PriceDifference=i.PriceDifference,r.push(u))})});r.length>0&&(t.data.set("SelectedRate",r[0].toJSON()),t.data.set("SelectedRatePlan",r[0].toJSON()),t.data.parent().parent().set("SelectedRatePlan",r[0].toJSON()));t.data.set("FilteredRoomRates",new kendo.data.ObservableArray(r))},AdultChildChangeMobile:function(i){var f=this.get("AvailabilityCheckHandlers"),r,e,o;f.forEach(clearTimeout);f.length=0;var u=i.data.parent().parent(),s=u.RoomTypeCode,h=u.Standard;u.SelectedRatePlan!==undefined&&(h=u.parent().parent().Standard);r=t.get_searchParams();e={PropertyId:this.Hotel.PropertyId,Adults:i.data.Adults,Children:i.data.Children,RoomsQuantity:1,CheckIn:r.CheckIn,CheckOut:r.CheckOut,Promo:r.Promo,OfferId:r.OfferId,OfferType:r.OfferType,RoomTypeCode:s,Standard:u.Standard,Ages:r.Ages===null?[]:JSON.stringify(r.Ages)};i.data.set("FilteredRoomRates",new kendo.data.ObservableArray([]));i.data.set("RateOptions",new kendo.data.ObservableArray([]));i.data.set("RoomRates",new kendo.data.ObservableArray([]));i.data.set("SelectedRate",null);i.data.parent().parent().set("SelectedRatePlan",null);i.data.set("SelectedRatePlan",null);e.Adults>0?(o=function(){i.data.set("LoadingRR",!0);$.ajax({url:"/restapi/hotel-details/booking-availability",type:"GET",dataType:"json",accept:"application/json",data:e,success:function(t){var r,u,f,e;(i.data.set("RateOptions",new kendo.data.ObservableArray(t.RateOptions)),i.data.set("RoomRates",new kendo.data.ObservableArray(t.RoomRates)),r=i.data.RateOptions[0],r.length<1)||(u=t,u.Index=0,AmendPriceDifference(n,u),f=r.BookingCodes,e=r.Price,n.Events.AdultChildChangeAvailabilitySuccess(i,f,e))},error:function(n){var t=JSON.parse(n.responseText);BestWestern.ShowMessage(t.ResponseStatus.Message)},complete:function(){i.data.set("LoadingRR",!1);n.set("FloaterItems",n.GetFloaterItems())}})},f.push(setTimeout(o,400))):(i.data.set("LoadingRR",!1),n.set("FloaterItems",n.GetFloaterItems()))},AdultChildChange:function(i){var r=i.data.parent().parent(),s=r.Title,f=r.RoomTypeCode,u,e,o;r.SelectedRatePlan!==undefined&&(r=r.parent().parent(),f===undefined&&(f=r.RoomTypeCode));u=t.get_searchParams();e={PropertyId:this.Hotel.PropertyId,Adults:i.data.Adults,Children:i.data.Children,RoomsQuantity:1,CheckIn:this.get("SearchParams.CheckIn"),CheckOut:this.get("SearchParams.CheckOut"),Promo:u.Promo,OfferId:u.OfferId,OfferType:u.OfferType,RoomTypeCode:f,Standard:r.Standard,Ages:u.Ages===null?[]:JSON.stringify(u.Ages),RatePlanCode:r.Standard};i.data.set("FilteredRoomRates",new kendo.data.ObservableArray([]));i.data.set("RateOptions",new kendo.data.ObservableArray([]));i.data.set("RoomRates",new kendo.data.ObservableArray([]));i.data.set("SelectedRate",null);i.data.set("SelectedRatePlan",null);i.data.set("LoadingRR",!1);e.Adults>0?(i.data.set("LoadingRR",!0),o=function(t){return function(r){var u,f,e,o;(i.data.parent().parent().set("SelectedRatePlan",null),t.data.set("RateOptions",new kendo.data.ObservableArray(r.RateOptions)),t.data.set("RoomRates",new kendo.data.ObservableArray(r.RoomRates)),u=t.data.RateOptions.filter(function(n){return n.Title===s}),u.length<1)||(f=t.data,f.Index=0,AmendPriceDifference(n,f),e=u[0].BookingCodes,o=u[0].Price,n.Events.AdultChildChangeAvailabilitySuccess(t,e,o))}},$.ajax({url:"/restapi/hotel-details/booking-availability",type:"GET",dataType:"json",accept:"application/json",data:e,success:o(i),error:function(n){var t=JSON.parse(n.responseText);BestWestern.ShowMessage(t.ResponseStatus.Message)},complete:function(){i.data.set("LoadingRR",!1);n.set("FloaterItems",n.GetFloaterItems())}})):n.set("FloaterItems",n.GetFloaterItems())},DeleteRoom:function(t){var r=t.data.parent().parent(),i=r.get("RoomOptions"),u=i.indexOf(t.data);u>=0&&(i.splice(u,1),r.set("RoomOptions",i),n.updateMobileFloater())},ToggleVariantFloaterShow:function(t,i){i=i||!1;var r=!n.get("VariantFloaterShow");n.get("FloaterItems")&&n.get("FloaterItems").length?i&&(r=!0):r=!1;n.set("VariantFloaterShow",r)},RewardsSignupActions:function(i){var u=t,r,e,f;r=n.MultiRoom?$("#rr_wrp_multi"):$("#rr_wrp");r.height(r.height());n.get("AgreeRewardsSignup")?(n.set("AgreeRewardsSignup",!1),e=BestWestern.StorageManager.GetCookie("RewardsRatesEmail"),BestWestern.StorageManager.PutCookie("RewardsRatesEmail",null),BestWestern.StorageManager.DeleteCookie("RewardsRatesEmail"),f=new Date,f.setTime(f.getTime()+2592e6),BestWestern.StorageManager.PutCookie("RewardsRatesEmailReEnter",e,f),i&&i(),r.removeAttr("style")):$.fancybox!==undefined&&$.fancybox({content:$("#show-rewards-rates-modal").html(),tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},helpers:{overlay:{locked:!1}},autoSize:!1,width:600,height:"auto",afterShow:function(){u.get_loginRequiresRecaptcha()&&(window.attempt=window.attempt||0,typeof grecaptcha!="undefined"&&(window.attempt=grecaptcha.render("gated-captcha",{sitekey:u.get_siteKey()})))},beforeShow:function(){var f=BestWestern.StorageManager.GetCookie("RewardsRatesEmailReEnter"),e=$('<a title="Close" class="bw_fancybox_close" href="javascript:void(0);"><\/a>'),t;$(".fancybox-outer").append(e);$(".bw_fancybox_close").on("click",function(){$.fancybox.close()});t=kendo.observable({RewardsEmail:f,rewardsLogin:!1,swapToLogin:function(){this.set("rewardsLogin",!0);$.fancybox.reposition()},swapToEmailEntry:function(){this.set("rewardsLogin",!1);$.fancybox.reposition()},keypressEmailSubmit:function(n){n.keyCode==13&&this.validateEmailSubmit(n)},validateEmailSubmit:function(){$.fancybox.close();var u=this.get("RewardsEmail"),t=new Date;t.setTime(t.getTime()+2592e6);BestWestern.StorageManager.PutCookie("RewardsRatesEmail",u,t);n.set("AgreeRewardsSignup",u!="");i&&i();r.removeAttr("style")},modalLoading:!1,doUserNamePasswordLogin:function(){var n=this,t,i,r;if(n.set("modalLoading",!0),t=this.get("Username"),i=this.get("Password"),$("#show-rewards-rates-content .sfError").remove(),t===""||t===null||t==undefined){$('#show-rewards-rates-content [type="password"]').parent().after('<span class="sfError">Please enter a username<\/span>');n.set("modalLoading",!1);return}if(i===""||i===null||i==undefined){$('#show-rewards-rates-content [type="password"]').parent().after('<span class="sfError">Please enter a password<\/span>');n.set("modalLoading",!1);return}if(r=null,u.get_loginRequiresRecaptcha()===!0&&(r=grecaptcha.getResponse(window.attempt),r===null||r==="")){$(".invalid-captcha").remove();$('#show-rewards-rates-content [type="password"]').parent().after('<span class="sfError invalid-captcha">error: Invalid captcha<\/span>');n.set("modalLoading",!1);return}BestWestern.Authenticate(t,i,"BestWestern",function(){window.location=window.location},function(){$('#show-rewards-rates-content [type="password"]').parent().after('<span class="sfError invalid-captcha">Invalid username or password.<\/span>');n.set("modalLoading",!1)},window.attempt,u.get_loginRequiresRecaptcha())}});kendo.bind($("#show-rewards-rates-content"),t)}})},RewardsSignUpClick:function(){var t=this;t.Events.RewardsSignupActions(function(){t.CheckAvailability(t.get("SearchParams"),function(){isMobile&&(n.MultiRoom&&(n.FloaterItems.empty(),n.set("FloaterItems",n.GetFloaterItems())),i())})})},RewardsCheckoutClick:function(){n.set("RewardsCheckout",!n.get("RewardsCheckout"));n.set("FloaterItems",n.GetFloaterItems())},ShowRatedTooltip:function(n){infoTipClickBound("#rewardsStdBound",n.data)},ShowNonRewardsRatedTooltip:function(n){infoTipClickBound("#nonRewardsStdBound",n.data)}},VariantFloaterClass:function(){return this.get("FloaterItems").length>0?"nav-tracker-button contents":"nav-tracker-button"},ShowVariantFloaterWrap:function(){return this.get("SearchParams.RoomQuantity")>1},ShowFullTracker:function(){var n=this.get("FloaterItems").length;return n>0},HideFullTracker:function(){var n=this.get("FloaterItems").length;return n===0},updateMobileFloater:function(){isMobile&&(this.GetFloaterItems(),n.set("FloaterItems",n.GetFloaterItems()))},showRoomsAlert:function(n,t,i){$.fancybox({content:String.format('<div class="bw_overlay"><div class="bo_header bo_large">{0}<\/div><div class="bo_body">{1}<\/div><div class="bo_footer group"><a class="button right_15 close_btn" style="width: 142px;" href="javascript:;">{2}<\/a><\/div><\/div>',n,t,i),tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},autoSize:!1,width:600,height:"auto",beforeShow:function(){$(".fancybox-outer").append(String.format('<a title="{0}" class="bw_fancybox_close" href="javascript:void(0);"><\/a>',i));$(".bw_fancybox_close,.close_btn").on("click",function(){$.fancybox.close()})},helpers:{overlay:{locked:!1}}})},setNumberOfRooms:function(n,i){var r=parseInt(i,10),c,s,l,u,f,h,o,e;if(i=="four"){u='<p>To book 4 or more rooms please contact our Specialist Group Advisors who will be able to assist you.<\/p><p><strong>For less than 6 rooms:<\/strong><br>Call 0800 393 130*<br><\/p><p><strong>For 6 rooms or more:<\/strong><br>Call 0844 387 6400*<br>Email <a href="mailto:groups@bestwestern.co.uk">groups@bestwestern.co.uk<\/a><\/p><p><strong>For corporate stays:<\/strong><br>Agents call 0844 387 6410*<br>Direct call 0844 387 6240*<\/p><p>Child rates are available upon request.<br><i>*Calls cost 7ppm plus your company&apos;s access charge<\/i><\/p>';this.showRoomsAlert("Group Booking",u,"OK");return}if(this.MultiRoom){if(c=this.SearchParams.get("RoomQuantity"),s=parseInt(c,10),r>s){this.SearchParams.set("RoomQuantity",i);l=this;this.CheckAvailability(this.SearchParams);this.FloaterItems.empty();this.set("FloaterTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),0));u=String.format("<p>As you originally looked for {0} rooms, we've updated your search to include {1} rooms.<\/p> <p>Please re-select your quantity.<\/p>",s,i);this.showRoomsAlert("Search Updated",u,"OK");return}if(r>this.Availability.MaxRoomsAllowed){u=String.format("<p>Due to limited availability at this hotel you can only book {0} of these rooms.<\/p>",this.Availability.MaxRoomsAllowed);this.showRoomsAlert("Rooms unavailable",u,"OK");return}}if(n.get("RoomOptions")!==undefined){if(i===undefined||isNaN(r))return n.RoomOptions.length.toString();if(f=n.get("RoomOptions"),f.length<r)while(f.length<r)h=new t.RoomOptions,h.Loading=!1,f.push(h);else if(f.length>r){for(o=new kendo.data.ObservableArray([]);o.length<r;)o.push(f[o.length]);n.RoomOptions=o}return n.set("RoomOptions",new kendo.data.ObservableArray(n.RoomOptions.toJSON())),n.get("hasRooms"),this.set("FloaterItems",this.GetFloaterItems()),this.SearchParams.RoomQuantity===r.toString()&&r===1&&(e=n.get("RoomOptions[0]"),e.Adults===0&&e.Children===0&&(e.set("Adults",this.SearchParams.Adults),e.set("Children",this.SearchParams.Children),this.Events.AdultChildChange.apply(this,[{data:e}]))),t.addStateClassEvents(),n.RoomOptions.length.toString()}},GetRoomTypeImage:function(n){return n.ImageUrl===null?"/App_Themes/BestWestern/Images/no-image-270-270.jpg":n.ImageUrl},GetRoomTypeImageAlt:function(n){return n.ImageAlt&&n.ImageAlt!=null?n.ImageAlt:n.Title+" room image"},GetRoomTypeImageLarge:function(n){return n.ImageUrlLarge===null?"/App_Themes/BestWestern/Images/no-image-270-180.jpg":n.ImageUrlLarge},HaveMultipleRoomTypeImages:function(n){return this.GetRoomTypeImages(n).length>1},GetRoomTypeImages:function(n){return n.get("Images")&&n.get("Images").length>0?n.get("Images").map(function(n){return{ImageUrl:n.Thumbnails["160x160"].Url,Alt:n.Alt||"Room image",ImageUrlLarge:n.Thumbnails["270x180"].Url,ImageUrlVeryLarge:n.Thumbnails["600x450"].Url}}):{ImageUrl:"",Alt:"",ImageUrlLarge:"",ImageUrlVeryLarge:""}},GetRoomTypeClassMultiRoom:function(){return t.get_hotelIsPilot()===!0?"rt_info group":"group"},GetRoomTypeClassSingleRoom:function(){return t.get_hotelIsPilot()===!0?"rt_info":""},getPriceForRoomType:function(n){for(var t=-1,i=0;i<n.length;i++)n[i].SelectedRatePlan!==null?t=t+n[i].SelectedRatePlan.BaseAmountBeforeTax:n[i].SelectedRate!==null&&(t=t+n[i].SelectedRate.Price);return t>=0?(t+1).toFixed(2):t},getGatedPercentageForRoomType:function(n){var i=n.get("RoomOptions"),r=0,f=0,u=0,s=n.get("BookingCodes"),c,o,h,t,e;if(i.length==0&&s!=null&&s.length>0)return c=n.BookingCodes[0].Rate,u=c.GatedRateDiscount,u.toFixed(0);for(o=!1,t=0;t<i.length;t++)if(i[t].SelectedRatePlan!=null||i[t].SelectedRate!=null){o=!0;break}if(i.length==0&&!o&&isMobile&&(h=n.get("SelectedRatePlan"),h!=null))return u=h.GatedRateDiscount,u.toFixed(0);for(t=0;t<i.length;t++)i[t].SelectedRatePlan!==null?(r=r+i[t].SelectedRatePlan.BaseAmountBeforeTax,i[t].SelectedRatePlan.RatePlan.IsGated&&(f=f+(i[t].SelectedRatePlan.GatedRateComparisonPrice-i[t].SelectedRatePlan.BaseAmountBeforeTax))):i[t].SelectedRate!==null?r=r+i[t].SelectedRate.Price:isMobile||o||i[t].SelectedRatePlan!=null||i[t].SelectedRate!=null||(e=s[0].Rate,r=r+e.BaseAmountBeforeTax,e.RatePlan.IsGated&&(f=f+(e.GatedRateComparisonPrice-e.BaseAmountBeforeTax)));return(u=f/(r+f)*100,isNaN(u))?"??":u.toFixed(0)},itemNumber:function(n){return n.parent().indexOf(n)+1},roomNumber:function(n){return String.format("Room {0}",this.itemNumber(n))},roomNumberDisplay:function(n){return this.itemNumber(n)===1?"display: block;":"display: none;"},roomNumberState:function(n){return this.itemNumber(n)===1?"lrg_room active":"lrg_room"},formatPrice:function(n){return String.format("{0}{1}",this.Hotel.CurrencySymbol,n.Price.toFixed(2))},formatSelectedPrice:function(n){var i=n.get("RoomOptions"),t=this.getPriceForRoomType(i);return t>=0?String.format("{0}{1}",this.Hotel.CurrencySymbol,t):String.format('<span class="per_room_lbl">from <\/span> {0}{1}',this.Hotel.CurrencySymbol,n.LowestPricePerRoom.toFixed(2))},getLowestPricePerRoomMulti:function(n){var r=n.get("Price"),t=n.get("RoomOptions"),i,u;return t===undefined&&(t=n.get("RateOptions")),t!==null&&t.length&&(i=t.filter(function(n){return n.get("SelectedRatePlan")!==null}),i.length&&(u=i.map(function(n){return n.SelectedRatePlan.BaseAmountBeforeTax}),r=u.reduce(function(n,t){return n+t}))),r.toFixed(2)},formatLowestPricePerRoomMulti:function(n){return String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),this.getLowestPricePerRoomMulti(n))},getSelectedRateComparisonPriceMulti:function(n){var i=n.get("Price"),f=!1,r=n.get("RoomOptions"),u,e,t;return r!==null&&r.length&&(u=r.filter(function(n){return n.get("SelectedRatePlan")!==null}),u.length&&(e=u.map(function(n){var t=0,i=n.get("SelectedRatePlan.LinkedRates.RewardsDiscountRate");return i==undefined&&(i=n.get("SelectedRatePlan.LinkedRates.GatedRate")),i!=undefined&&(t=i.ComparisonPrice),t&&t!==0||(t=n.get("SelectedRatePlan.LocalBaseAmountBeforeTax")),t}),i=e.reduce(function(n,t){return n+t}),f=!0)),n.get("SelectedRatePlan")==null||f||(t=n.get("SelectedRatePlan.LinkedRates.RewardsDiscountRate"),t==undefined&&(t=n.get("SelectedRatePlan.LinkedRates.GatedRate")),t==undefined&&(t=n.get("SelectedRatePlan.LinkedRates.RewardsPromoTextRate")),t!=undefined&&(i=t.ComparisonPrice),i&&i!==0||(i=n.SelectedRatePlan.LocalBaseAmountBeforeTax)),i.toFixed(2)},formatSelectedRateComparisonPriceMulti:function(n){return String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),this.getSelectedRateComparisonPriceMulti(n))},formatLowestPricePerRoom:function(n){var t=null;return t=n.LowestPricePerRoom!==undefined?n.get("LowestPricePerRoom"):n.parent().parent().get("LowestPricePerRoom"),String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),t.toFixed(2))},formatGatedLowestPricePerRoom:function(n){var i=this.agreedOrAuthenticated(n),t=null;return n.LowestPricePerRoom!==undefined?i?(t=n.get("LowestAnyPricePerRoom"),t<=0&&(t=n.get("LowestPricePerRoom"))):t=n.get("LowestPricePerRoom"):i?(t=n.parent().parent().get("LowestAnyPricePerRoom"),t<=0&&(t=n.parent().parent().get("LowestPricePerRoom"))):t=n.parent().parent().get("LowestPricePerRoom"),String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),t.toFixed(2))},formatSelectedRateTotalAmount:function(n){return n.get("SelectedRatePlan")===null?null:String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),n.get("SelectedRatePlan.BaseAmountBeforeTax").toFixed(2))},formatSelectedRateComparisonPrice:function(n){if(n.get("SelectedRatePlan")===null||n.get("SelectedRatePlan")===undefined)return null;var t=this.getLinkedRateComparisonPrice(n);return String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),t.toFixed(2))},getLinkedRateComparisonPrice:function(n){var t=n.get("SelectedRatePlan.LinkedRates.GatedRate");return(t==undefined&&(t=n.get("SelectedRatePlan.LinkedRates.RewardsDiscountRate")),t==undefined&&(t=n.get("SelectedRatePlan.LinkedRates.RewardsPromoTextRate")),t==undefined)?0:t.ComparisonPrice},formatSelectedRateGatedRateComparisonPrice:function(n){return n.get("SelectedRatePlan")===null||n.get("SelectedRatePlan")===undefined?null:String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),n.get("SelectedRatePlan.GatedRateComparisonPrice").toFixed(2))},formatGatedRateDiscount:function(n){if(n.get("SelectedRatePlan")===null)return null;var t=n.get("SelectedRatePlan.LinkedRates");return this.showRewardsDiscountRate(n)?String.format("{0}%",t.get("RewardsDiscountRate.Discount").toFixed(0)):this.showGatedRates(n)?String.format("{0}%",t.get("GatedRate.Discount").toFixed(0)):void 0},genericRewardsDeskTip:function(n){var t;elem=$(n.target);var r=$("#generic-rewards-tooltip").html(),u=kendo.template(r),f={Title:n.data.Title,Plan:""},i=u(f);if(isMobile)$(".tool_overlay_alt").html(i),infoToolTip();else{t=$(i).appendTo("body");t.show().css({top:elem.offset().top-t.height()-20,left:elem.offset().left-t.outerWidth()/2+elem.outerWidth()/2});elem.on("mouseleave",function(){t.remove()})}},standardDeskTip:function(n){var i,u,r;elem=$(n.target);var f=$("#standard-info-tip").html(),e=kendo.template(f),t={Title:n.data.Title,Plan:""};if(n.data.SelectedRatePlan!=undefined&&n.data.SelectedRatePlan.RatePlan!=undefined?(t.Plan=n.data.SelectedRatePlan.RatePlan.RatePlanTitle,n.data.SelectedRatePlan.LinkedRates.RewardsPromoTextRate&&(t.Title=n.data.SelectedRatePlan.LinkedRates.RewardsPromoTextRate.ComparisonText,t.Plan=""),n.data.SelectedRatePlan.RatePlan.IsGated&&(t.Title=n.data.SelectedRatePlan.GatedRateComparisonTitle,t.Plan=n.data.SelectedRatePlan.GatedRateComparisonRatePlanTitle)):n.data.RoomOptions.length>0&&(i=n.data.RoomOptions[0].SelectedRatePlan,i!=null&&(t.Plan=i.RatePlan.RatePlanTitle,i.RatePlan.IsGated&&i.RatePlan.IsGated&&(t.Title=i.GatedRateComparisonTitle,t.Plan=i.GatedRateComparisonRatePlanTitle))),u=e(t),isMobile)$(".tool_overlay_alt").html(u),infoToolTip();else{r=$(u).appendTo("body");r.show().css({top:elem.offset().top-r.height()-20,left:elem.offset().left-r.outerWidth()/2+elem.outerWidth()/2});elem.on("mouseleave",function(){r.remove()})}},rewardsDeskTip:function(n){var i,u,r;elem=$(n.target);var f=$("#rewards-info-tip").html(),e=kendo.template(f),t={Title:n.data.Title,Plan:""};if(n.data.SelectedRatePlan!=undefined&&n.data.SelectedRatePlan.RatePlan!=undefined?(t.Plan=n.data.SelectedRatePlan.RatePlan.RatePlanTitle,n.data.SelectedRatePlan.LinkedRates.RewardsPromoTextRate&&(t.Title=n.data.SelectedRatePlan.LinkedRates.RewardsPromoTextRate.ComparisonText,t.Plan=""),n.data.SelectedRatePlan.RatePlan.IsGated&&(n.data.SelectedRatePlan.GatedRateComparisonTitle==null||n.data.SelectedRatePlan.GatedRateComparisonTitle==null?(t.Title=n.data.SelectedRatePlan.LinkedRates.GatedRate.RatePlan.RatePlanTitle,t.Plan=n.data.SelectedRatePlan.LinkedRates.GatedRate.RatePlan.RatePlanTitleSub):(t.Title=n.data.SelectedRatePlan.GatedRateComparisonTitle,t.Plan=n.data.SelectedRatePlan.GatedRateComparisonRatePlanTitle))):n.data.RoomOptions.length>0&&(i=n.data.RoomOptions[0].SelectedRatePlan,i!=null&&(t.Plan=i.RatePlan.RatePlanTitle,i.RatePlan.IsGated&&i.RatePlan.IsGated&&(t.Title=i.GatedRateComparisonTitle,t.Plan=i.GatedRateComparisonRatePlanTitle))),u=e(t),isMobile)$(".tool_overlay_alt").html(u),infoToolTip();else{r=$(u).appendTo("body");r.show().css({top:elem.offset().top-r.height()-20,left:elem.offset().left-r.outerWidth()/2+elem.outerWidth()/2});elem.on("mouseleave",function(){r.remove()})}},trimRatePlanTitle:function(n){var t=n.Title,i=n.get("SelectedRatePlan.LinkedRates.RewardsPromoTextRate"),r;return i!==undefined&&(r=String.format("{0}%",i.Discount.toFixed(0)),t=n.Title+" - Save  "+r),t.length>120&&this.IsInternational()&&(t=t.substring(0,120)+"..."),t},trimGatedRatePlanTitle:function(n){var i=this.getLinkedRate(n),t;return n.SelectedRatePlan==null||i==undefined?this.trimRatePlanTitle(n):(t=i.Title,t.length>120&&this.IsInternational()&&(t=t.substring(0,120)+"..."),t)},getLinkedRate:function(n){var i=n.get("SelectedRatePlan"),t=n.get("SelectedRatePlan.LinkedRates.RewardsDiscountRate");return t==undefined&&(t=n.get("SelectedRatePlan.LinkedRates.RewardsPromoTextRate")),t==undefined&&(t=n.get("SelectedRatePlan.LinkedRates.GatedRate")),t},getRewardsLinkedRate:function(n){var i=n.get("SelectedRatePlan"),t=n.get("SelectedRatePlan.LinkedRates.RewardsDiscountRate");return t==undefined&&(t=n.get("SelectedRatePlan.LinkedRates.RewardsPromoTextRate")),t},trimRatePlanDescription:function(n){var t=n.get("Description");return this.IsInternational()&&(n.get("Title").length>120?t="":n.get("Description").length>120&&(t=n.get("Description").substring(0,120)+"...")),t},trimGatedRatePlanDescription:function(n){if(n.SelectedRatePlan==null)return"";return n.get("SelectedRatePlan.LinkedRates.GatedRate.Description")},showFullRatePlanLink:function(n){return this.IsInternational()&&(n.get("Description").length>120||n.get("Title").length>120)?!0:!1},showFullRatePlanDescription:function(n){var u=n.target,t=$(n.target).parent().parent(),f=$(".trimmedDescription",t),i=$(".fullDescription",t),e=$(".trimmedTitle",t),r=$(".fullTitle",t),o=$(i).is(":visible")&&$(r).is(":visible");o?(i.hide(),f.show(),r.hide(),e.show(),$(u).text("Read more")):(i.show(),f.hide(),r.show(),e.hide(),$(u).text("Read less"))},templateDisplayType:function(n,t){switch(t){case"GatedRate":return this.showGatedRates(n);case"RewardsDiscount":return this.showRewardsDiscountRate(n);case"RewardsPromoTextRate":return this.showRewardsPromoTextRate(n);case"Standard":return!this.showRewardsDiscountRate(n)&&!this.showRewardsPromoTextRate(n)}return!1},showGatedRates:function(n){var i,r,t;if(n.get("RoomOptions")!=undefined){if(i=n.get("RoomOptions"),i.length>0&&i[0].SelectedRatePlan!=null&&i[0].SelectedRatePlan!=undefined)return r=i[0].SelectedRatePlan,r.LinkedRates.GatedRate&&r.LinkedRates.GatedRate&&r.LinkedRates.GatedRate.Active&&!BestWestern.IsAuthenticated()&&!this.get("AgreeRewardsSignup");if(n.get("BookingCodes")!=null&&n.get("BookingCodes")!=undefined&&(t=n.get("BookingCodes"),t.length>0&&t[0].Rate!=null&&t[0].Rate.RatePlan!=null&&t[0].Rate.LinkedRates))return t[0].Rate.LinkedRates.GatedRate&&t[0].Rate.LinkedRates.GatedRate.Active&&!BestWestern.IsAuthenticated()&&!this.get("AgreeRewardsSignup")}else if(n.get("SelectedRatePlan")!=null&&n.get("SelectedRatePlan")!=undefined)return n.get("SelectedRatePlan.LinkedRates.GatedRate.Active")&&!BestWestern.IsAuthenticated()&&!this.get("AgreeRewardsSignup");return!1},gatedNoComparison:function(n){var i,r,t;if(n.get("RoomOptions")!=undefined){if(i=n.get("RoomOptions"),i.length>0&&i[0].SelectedRatePlan!=null&&i[0].SelectedRatePlan!=undefined)return r=i[0].SelectedRatePlan,r.RatePlan.IsGated&&!(r.LinkedRates.GatedRate&&r.LinkedRates.GatedRate.Active);if(n.get("BookingCodes")!=null&&n.get("BookingCodes")!=undefined&&(t=n.get("BookingCodes"),t.length>0&&t[0].Rate!=null&&t[0].Rate.RatePlan!=null&&t[0].Rate.LinkedRates))return t[0].Rate.RatePlan.IsGated&&!(t[0].Rate.LinkedRates.GatedRate&&t[0].Rate.LinkedRates.GatedRate.Active)}else if(n.get("SelectedRatePlan")!=null&&n.get("SelectedRatePlan")!=undefined)return!n.get("SelectedRatePlan.LinkedRates.GatedRate.Active")&&n.get("SelectedRatePlan.RatePlan.IsGated");return!1},showRewardsDiscountRate:function(n){var i=n.get("RoomOptions"),u=n.get("SelectedRatePlan"),r=!this.MultiRoom||this.MultiRoom&&this.getLowestPricePerRoomMulti(n)!==this.getSelectedRateComparisonPriceMulti(n),t;if(u!=null&&u!=undefined)return r&&n.get("SelectedRatePlan.LinkedRates.RewardsDiscountRate.Active")&&!n.get("SelectedRatePlan.HasComparisonPrice");if(n.get("RoomOptions")!=undefined){if(i.length>0&&i[0].SelectedRatePlan!=null&&i[0].SelectedRatePlan!=undefined)return r&&i[0].SelectedRatePlan.LinkedRates.RewardsDiscountRate&&i[0].SelectedRatePlan.LinkedRates.RewardsDiscountRate.Active;if(n.get("BookingCodes")!=null&&n.get("BookingCodes")!=undefined&&(t=n.get("BookingCodes"),t.length>0&&t[0].Rate!=null&&t[0].Rate.RatePlan!=null))return r&&t[0].Rate.LinkedRates.RewardsDiscountRate&&t[0].Rate.LinkedRates.RewardsDiscountRate.Active&&!t[0].Rate.HasComparisonPrice}return!1},showRewardsPromoTextRate:function(n){var i=n.get("RoomOptions"),r=n.get("SelectedRatePlan"),u=!this.MultiRoom||this.MultiRoom&&this.getLowestPricePerRoomMulti(n)!==this.getSelectedRateComparisonPriceMulti(n),t;if(r!=null&&r!=undefined)return n.get("SelectedRatePlan.LinkedRates.RewardsPromoTextRate")!=undefined;if(n.get("RoomOptions")!=undefined){if(i.length>0&&i[0].SelectedRatePlan!=null&&i[0].SelectedRatePlan!=undefined)return u&&i[0].SelectedRatePlan.LinkedRates.RewardsDiscountRate&&i[0].SelectedRatePlan.LinkedRates.RewardsDiscountRate.Active;if(n.get("BookingCodes")!=null&&n.get("BookingCodes")!=undefined&&(t=n.get("BookingCodes"),t.length>0&&t[0].Rate!=null&&t[0].Rate.RatePlan!=null))return u&&t[0].Rate.LinkedRates.RewardsPromoTextRate&&t[0].Rate.LinkedRates.RewardsPromoTextRate.Active}return!1},agreedOrAuthenticated:function(){return n.get("AgreeRewardsSignup")||BestWestern.IsAuthenticated()},isGatedAgreeRewards:function(n){return n.get("SelectedRatePlan.LinkedRates.GatedRate.Active")&&n.get("SelectedRatePlan.RatePlan.IsGated")&&!this.get("AgreeRewardsSignup")&&!BestWestern.IsAuthenticated()},isRewardsRateAgree:function(n){var t=n.get("SelectedRatePlan.LinkedRates.RewardsDiscountRate");return t&&t.get("Active")&&(this.get("AgreeRewardsSignup")||BestWestern.IsAuthenticated())},isFloaterAgreeRewards:function(){return this.get("FloaterGated")&&!this.get("AgreeRewardsSignup")},hasFloaterPercentage:function(){var n=this.get("FloaterGatedPercent");return n!=null&&n!=undefined&&!isNaN(n)&&n>0},displayUsps:function(n){var t=n.get("SelectedRatePlan"),r=n.get("RoomOptions"),i;return t==null&&r.length>0?!0:t==null?!1:(i=n.get("SelectedRatePlan.RatePlan.RatePlanUsps"),i!=undefined)?n.get("SelectedRatePlan.RatePlan.RatePlanUsps").length>0:!1},getUsps:function(n){var t=n.get("SelectedRatePlan");return t==null?[]:n.get("SelectedRatePlan.RatePlan.RatePlanUsps")},getUspsForRewardsDiscount:function(n){var i=n.get("SelectedRatePlan"),t;return i==null?[]:(t=this.getLinkedRate(n),t!=undefined)?t.get("RatePlan.RatePlanUsps"):n.get("SelectedRatePlan.RatePlan.RatePlanUsps")},displayUspsForRewardsDiscount:function(n){var r=n.get("SelectedRatePlan"),t=this.getLinkedRate(n),u=n.get("RoomOptions"),i;return r==null&&u.length>0?!0:r==null||t==null||t==undefined?!1:(i=t.get("RatePlan.RatePlanUsps"),i!=undefined)?i.length>0&&t.LinkedRateType=="RewardsDiscountRate":!1},displayUspsForPromoTextDiscount:function(n){var r=n.get("SelectedRatePlan"),t=this.getLinkedRate(n),u=n.get("RoomOptions"),i;return r==null&&u.length>0?!0:r==null||t==null||t==undefined?!1:(i=t.get("RatePlan.RatePlanUsps"),i!=undefined)?i.length>0:!1},lowestPriceFormatted:function(t){var u=t.get("RoomOptions"),i,f,r;for(u===undefined&&(u=t.get("RateOptions")),i=0,f=0;f<u.length;f++)r=u[f],r.SelectedRatePlan!==null?i=i+r.SelectedRatePlan.BaseAmountBeforeTax:r.SelectedRate!==null&&r.SelectedRate!==undefined&&(i=i+r.SelectedRate.Price);return isMobile?i>0?String.format('<span class="from_lbl">Price <\/span> {1}{0}',i.toFixed(2),this.Hotel.CurrencySymbol):n.agreedOrAuthenticated(t)&&t.LowestGatedPricePerRoom>0?String.format('<span class="from_lbl">From (per room) <\/span> {1}{0}',t.LowestGatedPricePerRoom.toFixed(2),this.Hotel.CurrencySymbol):String.format('<span class="from_lbl">From (per room) <\/span> {1}{0}',t.LowestPricePerRoom.toFixed(2),this.Hotel.CurrencySymbol):i>0?String.format('<span class="from_lbl">Price <\/span> {1}{0}',i.toFixed(2),this.Hotel.CurrencySymbol):String.format('<span class="from_lbl">From <\/span> {1}{0} <span class="per_room_lbl">per room<\/span>',t.LowestPricePerRoom.toFixed(2),this.Hotel.CurrencySymbol)},isLowestRate:function(n){return n.SelectedRatePlan==null?!1:[n.SelectedRatePlan.BaseAmountBeforeTax,n.SelectedRatePlan.GatedRateComparisonPrice].filter(function(n){return n>0}).sort(function(n,t){return n-t})[0]<=[this.Availability.LowestOverallRate,this.Availability.LowestRewardsRate,this.Availability.LowestComparablePrice].filter(function(n){return n>0}).sort(function(n,t){return n-t})[0]},isLowestOrCampaign:function(n){return this.isLowestRate(n)},formatPriceDifference:function(n){return typeof n.PriceDifference=="undefined"?String.format("{0}{1}",this.Hotel.CurrencySymbol,n.get("LocalBaseAmountBeforeTax").toFixed(2)):String.format("+{0}{1}",this.Hotel.CurrencySymbol,n.get("PriceDifference").toFixed(2))},formatUpsellPriceDifference:function(n){var t=this.getSelectedRate(n),i=n.RewardsDiscountRate;return t&&i&&i.ComparisonPrice>0&&(this.AgreeRewardsSignup||BestWestern.IsAuthenticated())&&t.RewardsDiscountRate&&t.RewardsDiscountRate.ComparisonPrice>0?String.format("{0}{1}",this.Hotel.CurrencySymbol,(i.ComparisonPrice-t.RewardsDiscountRate.ComparisonPrice).toFixed(2)):this.formatPriceDifference(n)},getSelectedRate:function(n){return n.parent().parent().SelectedRatePlan?n.parent().parent().SelectedRatePlan:null},slugify:function(n){return n.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},RoomTypeClass:function(n){return String.format("rt_title rt_{0} dc rs_{1}",n.RoomTypeClassName,n.Standard==null?"":this.slugify(n.Standard))},RoomTypeSidebarClass:function(n){return String.format("room-type-block--side-bar sidebar-{0} sidebar-{1}",n.RoomTypeClassName,n.Standard==null?"":this.slugify(n.Standard))},rtGetSelectionClassFood:function(n,t){var i="rt_selection";return n!==undefined&&n===t&&(i=i+" selected"),i},rtSelectionClassFood:function(n){var t=n.parent().parent(),i=t.SelectedRatePlan!==null&&t.SelectedRatePlan!==undefined?t.SelectedRatePlan.BookingCode:null,r=n.BookingCode===undefined?n.Code:n.BookingCode;return this.rtGetSelectionClassFood(i,r)},rtSelectionClass:function(n){var t="rt_selection",r=(n.parent().parent().SelectedRate!==null?n.parent().parent().SelectedRate.BookingCodes:[]).map(function(n){return n.Code}),u=n.BookingCodes.map(function(n){return n.Code}),i;if(r.length<=0)return t;for(i=0;i<r.length;i++)if(u.indexOf(r[i])>=0){t=t+" selected";break}return t},FloaterBookNowClassVariant:function(){for(var t,f,r,u,i=this.get("Availability.RoomTypes"),n=0;n<i.length;n++)for(t=0;t<i[n].RateOptions.length;t++)for(f=i[n].RateOptions[t].Title,r=0;r<i[n].RateOptions[t].RoomOptions.length;r++)if(u=i[n].RateOptions[t].RoomOptions[r],u.SelectedRatePlan!==null)return"button no-chevron tertiary";return"button no-chevron disabled"},FloaterBookNowClass:function(){for(var t,f,r,u,i=this.get("Availability.Items"),n=0;n<i.length;n++)for(t=0;t<i[n].RoomTypes.length;t++)for(f=i[n].RoomTypes[t].Title,r=0;r<i[n].RoomTypes[t].RoomOptions.length;r++)if(u=i[n].RoomTypes[t].RoomOptions[r],u.SelectedRatePlan!==null)return"button no-chevron tertiary";return"button no-chevron disabled"},Book:function(n,t,i){var u,r,f,e;if(t!==null&&t!==undefined){try{GoalTracking.TrackPDPBookNowClickedGoal()}catch{}u=this.SearchParams||this.parent().SearchParams;r=new BestWestern.SearchModel;r.Adults=u.Adults;r.Children=u.Children;f=t.LinkedRates.RewardsDiscountRate;f==undefined&&(f=t.LinkedRates.RewardsPromoTextRate);r.Plan=i&&f!=undefined?f.BookingCode:t.BookingCode;r.RoomQuantity=1;r.CheckIn=u.CheckIn;r.CheckOut=u.CheckOut;r.Term=u.Term;r.PromoCode=u.PromoCode;r.Ages=u.Ages;e=BestWestern.Search.BuildBookingUrl(r);n.preventDefault(!0);window.location=e}},BannerLowRateClass:function(){var n="price",t=this.get("Availability.LowestComparablePrice"),i;return t==null?n:(i=this.get("Hotel.CurrencySymbol"),(t.toFixed(2)+i).length>10&&(n=n+" price-long"),n)},BannerHighRate:function(){var n=this.get("Availability.HighestComparablePrice");return n==null?"":String.format("{0}<span>{1}<\/span>",this.get("Hotel.CurrencySymbol"),n.toFixed(2))},BannerLowRate:function(){var n=this.get("Availability.LowestComparablePrice");return(this.agreedOrAuthenticated()&&(n=[this.get("Availability.LowestOverallPrice"),this.get("Availability.LowestComparablePrice"),this.get("Availability.LowestRewardsRate")].filter(function(n){return n>0}).sort(function(n,t){return n-t})[0]),n==null)?"":String.format("{0}<span>{1}<\/span>",this.get("Hotel.CurrencySymbol"),n.toFixed(2))},BannerTotalNights:function(){try{var n=parseInt(this.get("Availability.ComparableNights"),10);return String.format("Price for <span>{0}<span> night{1}",n,n>1?"s":null)}catch(t){}return},BannerTotalNightsMobile:function(){try{var n=parseInt(this.get("Availability.ComparableNights"),10);if(!isNaN(n))return String.format("Price for<br> <span>{0}<span> night{1}",n,n>1?"s":null)}catch(t){}return},HandleDirectConnectDown:function(n){this.set("DirectConnectDown",!0);this.set("DirectConnectDownMessage",n)},DirectConnectDown:!1,DirectConnectDownMessage:"",SendToBwCom:function(){var t="http://book.bestwestern.com/bestwestern/priceAvail.do?sob=A163&propertyCode=",n,i,r;t+=this.Hotel.PropertyId;n=getCookieValue("iata");n!==""&&n!==undefined&&n!==null&&(t+="&iata="+n);this.SearchParams.OfferType==="corpid"&&this.SearchParams.OfferId!==""&&(t+="&corpid="+this.SearchParams.OfferId);i=kendo.toString(kendo.parseDate(this.SearchParams.CheckIn,"yyyy-MM-dd"),"MM/dd/yyyy");r=kendo.toString(kendo.parseDate(this.SearchParams.CheckOut,"yyyy-MM-dd"),"MM/dd/yyyy");redirectPost(t,{arrDate:i,depDate:r,totalRooms:this.SearchParams.RoomQuantity,totalAdultsForAllRoom:0,totalAdultsForAllRoom:0})},getRoomTitle:function(n){return this.IsInternational()?n.get("Standard"):n.get("Title")},isLoggedIn:function(){return BestWestern.IsAuthenticated()}});t.get_variantMode()===!0&&(f=$(".variantc-float--wrap"),f&&kendo.bind(f,n));this.dataBind(n)},addStateClassEvents:function(){$(".fakeCustomSelect").click(function(){$(this).next(".customSelect").addClass("customSelectOpen")});$(".fakeCustomSelect").focus(function(){$(this).next(".customSelect").addClass("customSelectFocus")}).on("blur",function(){var n=$(this).next(".customSelect");n.removeClass("customSelectOpen");n.removeClass("customSelectFocus")})},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRates.callBaseMethod(this,"dispose")},dataBind:function(n){this.set_viewModel(n);kendo.bind(this.get_element(),this.get_viewModel());this.get_viewModel().CheckAvailability()},get_searchParams:function(){var n=window.location.pathname.replace(this.get_basePath(),"");return BestWestern.Search.GetSearchModel(n)},initializeFloaterDock:function(){function c(n,t){var i=(new Date).getTime();return function(){var r=(new Date).getTime();r-i>=n&&(i=r,t.apply(null,arguments))}}var s=function(){var n=$(".gen_overlay"),i=$(window).scrollTop()+$(window).height(),t=n.offset().top+n.height();t>i&&$("html, body").animate({scrollTop:t-$(window).height()})},h=function(){var n=$(".gen_overlay"),t=$(window).scrollTop(),i=n.offset().top;i-t<0&&$("html, body").animate({scrollTop:n.offset().top})},i=350;typeof WURFL!="undefined"&&WURFL.form_factor!=="Desktop"&&(i=0);$(document).on("mouseenter",".lrg_wrp",function(){var n=$(this),t=$("#lrg_overlay").html();n.is(".pos-top-left")?$(t).appendTo(n).css({bottom:"100%",right:"50%",marginRight:"-"+n.width()/2+"px"}).delay(i).fadeIn(150,function(){h()}):n.is(".pos-top")?$(t).appendTo(n).css({bottom:"100%",left:"50%",marginLeft:"-"+$(".gen_overlay").width()/2+"px"}).delay(i).fadeIn(150,function(){h()}):n.is(".pos-bottom-left")?$(t).appendTo(n).css({top:"100%",right:"50%",marginRight:"-"+n.width()/2+"px"}).delay(i).fadeIn(150,function(){s()}):$(t).appendTo(n).css({top:"100%",left:"50%",marginLeft:"-"+$(".gen_overlay").width()/2+"px"}).delay(i).fadeIn(150,function(){s()})}).on("mouseleave",".lrg_wrp",function(){$(".gen_overlay").stop(!0,!0).fadeOut(150,function(){$(this).remove()})});var r=$(window),u=$("#low_rate_track"),n=$("#low_rate_dock"),f=$("#hd_header_wrp"),t=$(".rate-wrap"),e,o=!0;$(window).on("scroll",c(25,function(){u.length>0&&t.length>0&&(e={top:r.scrollTop()-u.offset().top+(f.height()+10)+"px"},r.scrollTop()>=u.offset().top&&r.scrollTop()+n.height()+(f.height()+10)<=t.offset().top+t.height()?o?n.css(e):n.stop(!0,!1).animate(e):r.scrollTop()<u.offset().top?o?n.css({top:0}):n.stop(!0,!1).animate({top:0}):r.scrollTop()+n.height()+(f.height()+10)>t.offset().top+t.height()&&(o?n.css({top:t.height()-n.height()}):n.stop(!0,!1).animate({top:t.height()-n.height()})))}))},initHotelMap:function(n){var t,i,e=$("[data-hotel-lat]").attr("data-hotel-lat"),o=$("[data-hotel-long]").attr("data-hotel-long"),r=new google.maps.LatLng(e,o),u,f,s;i=n?!0:!1;u={zoom:17,center:r,scrollwheel:i};t=new google.maps.Map(document.getElementById("hotel_map_element"),u);f="/App_Themes/BestWesternX2/Images/x2marker.png";s=new google.maps.Marker({position:r,map:t,icon:f});google.maps.event.addListenerOnce(t,"idle",function(){$("#hd_map").addClass("state_loaded")})},removeNativeChoices:function(){$(".native-choices").fadeOut(function(){$(this).remove();$("body").removeClass("noscroll")})},get_viewModel:function(){return this._viewModel},set_viewModel:function(n){this._viewModel=n},get_internationalHotel:function(){return this._internationalHotel},set_internationalHotel:function(n){this._internationalHotel=n},get_hotelPropertyId:function(){return this._hotelPropertyId},set_hotelPropertyId:function(n){this._hotelPropertyId=n},get_hotelTitle:function(){return this._hotelTitle},set_hotelTitle:function(n){this._hotelTitle=n},get_hotelIsPilot:function(){return this._hotelIsPilot},set_hotelIsPilot:function(n){this._hotelIsPilot=n},get_basePath:function(){return this._basePath},set_basePath:function(n){this._basePath=n},get_hotelSearchParams:function(){return this._hotelSearchParams},get_variantMode:function(){return this._variantMode},set_variantMode:function(n){this._variantMode=n},get_simpleSearchSingle:function(){return this._simpleSearchSingle},set_simpleSearchSingle:function(n){this._simpleSearchSingle=n},get_simpleSearchMulti:function(){return this._simpleSearchMulti},set_simpleSearchMulti:function(n){this._simpleSearchMulti=n},get_siteKey:function(){return this._siteKey},set_siteKey:function(n){this._siteKey=n},get_loginRequiresRecaptcha:function(){return this._loginRequiresRecaptcha},set_loginRequiresRecaptcha:function(n){this._loginRequiresRecaptcha=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRates.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRates",Sys.UI.Control);var closeRateSelector=function(){},closeRateSelector=function(){var n=$(".native-choice").length;isMobile&&$(".native-choice").hasClass("selected")&&$(".mealSelect").hasClass("mealSelectNow")&&n==1&&$(".close-native-select + .native-choice").click();$(".native-choices").fadeOut(function(){$(this).remove();$("body").removeClass("noscroll")});isMobile&&$(".sro-one").css("display")=="block"&&$(".sro-one + div").css("display")=="block"&&$(".sro-one").css("display","none");setTimeout(function(){$(".mealSelect").removeClass("mealSelectNow")},500)};(function(){"use strict";var t=!1,n=[],i=function(){for(var t=0;t<n.length;t++)n[t]()};BestWestern.RoomsAndRatesSuccess=function(r,u){u?(i(),t=!0):t===!0?r():n.push(r)};BestWestern.MatchVariantCols=function(){var n=$(".varient-match-height-left");n.removeAttr("style").height($(".varient-match-height-right").height())}})();
function expandRoom(n){var n=$(n);n.next(".lrg_info").is(":hidden")?(n.parents(".lrg_room").addClass("active"),n.next(".lrg_info").show()):(n.parents(".lrg_room").removeClass("active"),n.next(".lrg_info").hide())}function BookingOptionBuilder(n,t,i,r,u){var o="Rewards Exclusive Rate",s="<p>To book this rate you just need to become a Rewards member or enter your Rewards number. Joining is free and easy - just one click during your booking.<\/p>",h="<p>Discount applied off the hotel's {0}<\/p>",n=n,t=t,a=n.get("Hotel.CurrencySymbol"),nt=n.IsInternational(),i=i,r=r,u=u;this.getBookingOptions=function(){var i=r.SelectedRatePlan,t,f,u,e;switch(i.RateKind){case"Standard":t=c(r,i);break;case"Gated":t=p(r,i);break;case"RewardsDiscount":t=w(r,i);break;case"PromoTextRate":t=b(r,i);break;case"GatedStandard":t=k(r,i);break;case"SundayStopover":t=y(r,i,n);break;case"PayWithPoints":t=v(r,i,n);break;default:t=c(r,i)}for(f=[],u=0;u<t.length;u++)g(r,t[u]),e=kendo.observable(t[u]),f.push(e);return f};var v=function(n,i,r){var s=i.PayWithPointsPoints.toLocaleString(),h=i.PayWithPointsPrice,u=null,o,e;return h>0&&(u="+ "+f(i.PayWithPointsPrice)),o=i.Usps.filter(function(n){return n.Type=="Standard"}),e=i.RatePlanCode=="FX2",[{bookingCode:i.BookingCode,ratePlanTitle:n.Title,ratePlanDesc:r.trimRatePlanDescription(n),priceText:u,pointsText:s,subText:u,usps:o,ssusps:[],points:10,toolTipTitle:e?"Pay with Points":null,toolTipBody:e?"You can use up to the maximum points shown towards this booking for a discount":null,showRateSelector:!0,showLowestRateLabel:i.Price<=t,rateKind:i.RateKind}]},c=function(i,r){var e=n.MultiRoom?f(n.getLowestPricePerRoomMulti(u||i)):f(r.Price),o=r.Usps.filter(function(n){return n.Type=="Standard"});return[{bookingCode:r.BookingCode,ratePlanTitle:i.Title,ratePlanDesc:n.trimRatePlanDescription(i),priceText:e,usps:o,ssusps:[],showRateSelector:!0,showLowestRateLabel:r.Price<=t,rateKind:r.RateKind}]},y=function(n,i,r){var s=r.MultiRoom?r.getLowestPricePerRoomMulti(u||n):i.Price,o=20,h,c,e,l,a;if(r.Hotel.IsCoreBrand&&(o=15),h=s-o,c=String.format("{0}",f(s)),i.Usps)for(e=0;e<i.Usps.length;e++)i.Usps[e].Type=="SundayStopover"&&(i.Usps[e].Title=String.format(i.Usps[e].Title,f(o),f(h)));return l=i.Usps.filter(function(n){return n.Type=="Standard"}),a=i.Usps.filter(function(n){return n.Type=="SundayStopover"}),[{bookingCode:i.BookingCode,ratePlanTitle:n.Title,ratePlanDesc:r.trimRatePlanDescription(n),priceText:c,usps:l,ssusps:a,showRateSelector:!0,showLowestRateLabel:i.Price<=t,rateKind:i.RateKind}]},p=function(i,r){var a=n.agreedOrAuthenticated(r)?n.MultiRoom?f(n.getLowestPricePerRoomMulti(i)):f(r.Price):l(r.GatedRate.Discount),u=!n.agreedOrAuthenticated(r),c=[r.Price,r.GatedRateComparisonPrice].filter(function(n){return n>0}).sort(function(n,t){return n-t})[0],v=r.Usps.filter(function(n){return n.Type=="Standard"});return[{bookingCode:r.BookingCode,ratePlanTitle:i.Title,ratePlanDesc:n.trimRatePlanDescription(i),priceText:a,subText:n.agreedOrAuthenticated(r)?"":e(f(r.GatedRate.ComparisonPrice)),showLowestRateLabel:c<=t,isDiscount:!n.agreedOrAuthenticated(r),usps:v,ssusps:[],toolTipTitle:u?o:null,toolTipBody:u?String.format(h,r.GatedRate.Title+" "+r.Title)+s:null,showHighlight:c<=t,showRateSelector:!0,rateKind:r.RateKind}]},w=function(t,i){var k=isMobile&&n.MultiRoom,b=!n.agreedOrAuthenticated(i)&&(!n.MultiRoom||isMobile),c=!n.agreedOrAuthenticated(i)&&(!n.MultiRoom||isMobile),y=!n.MultiRoom||isMobile||n.agreedOrAuthenticated(i),r,a,p,v,w;if(n.showLoyaltyRates()===!0)if(n.MultiRoom){let i=f(n.getSelectedRateComparisonPriceMulti(t));r=i}else{let n=f(i.RewardsDiscountRate.ComparisonPrice);r=n}else r=c?l(i.RewardsDiscountRate.Discount):n.MultiRoom?n.agreedOrAuthenticated(i)?f(n.getSelectedRateComparisonPriceMulti(t)):f(n.getLowestPricePerRoomMulti(t)):f(i.RewardsDiscountRate.ComparisonPrice);return a="",a=n.showLoyaltyRates()===!0?n.MultiRoom?e(f(n.getLowestPricePerRoomMulti(t))):e(f(i.Price)):n.MultiRoom?n.agreedOrAuthenticated(i)||c?e(f(n.getLowestPricePerRoomMulti(t))):"":e(f(i.Price)),p=i.RewardsDiscountRate.Usps.filter(function(n){return n.Type=="Standard"}),v=[{bookingCode:i.RewardsDiscountRate.BookingCode,ratePlanTitle:t.Title,ratePlanDesc:n.trimRatePlanDescription(t),showLowestRateLabel:n.isLowestRate(i),isDiscount:c&&n.showLoyaltyRates()===!1,showLoyaltyRate:n.showLoyaltyRates(),priceText:r,toolTipTitle:y?o:null,toolTipBody:y?String.format(h,t.Title+" "+i.Title)+s:null,subText:a,isRewards:!0,showDivider:!0,usps:p,ssusps:[],showRateSelector:!0,headerText:isMobile?t.Title+" - Rewards Members":null,rateKind:i.RateKind}],b&&(w=n.MultiRoom?f(n.getLowestPricePerRoomMulti(u||i)):f(i.Price),v.push({bookingCode:i.BookingCode,ratePlanTitle:t.Title,ratePlanDesc:n.trimRatePlanDescription(t),priceText:w,usps:i.Usps,showRateSelector:!0,isDiscount:!1,isRewards:!1,rateKind:i.RateKind})),v},b=function(i,r){var u=isMobile&&n.MultiRoom,c=!n.MultiRoom||isMobile,y=!n.MultiRoom||n.agreedOrAuthenticated()||isMobile,l=!n.agreedOrAuthenticated(r)&&(!n.MultiRoom||isMobile),a=d(String.format("{0} - Save  {1}%",i.Title,r.RewardsPromoTextRate.Discount.toFixed(0))),p=n.MultiRoom?f(n.getLowestPricePerRoomMulti(i)):f(r.Price),w=[r.Price,r.GatedRateComparisonPrice].filter(function(n){return n>0}).sort(function(n,t){return n-t})[0],v=[{bookingCode:r.RewardsPromoTextRate.BookingCode,headerText:u?i.Description+" - Rewards Members":a+" - Rewards Members",ratePlanDesc:n.trimRatePlanDescription(i)+(u?" "+r.Title:""),showLowestRateLabel:w<=t,priceText:p,subText:y?r.PromoText:null,toolTipTitle:c?o:null,toolTipBody:c?s:null,isRewards:!0,showDivider:l,usps:r.Usps,rateKind:r.RateKind}];return l&&v.push({bookingCode:r.BookingCode,ratePlanTitle:a,ratePlanDesc:n.trimRatePlanDescription(i),priceText:f(r.Price),subText:e(f(r.RewardsPromoTextRate.ComparisonPrice)),toolTipTitle:"Exclusive Rate",toolTipBody:String.format(h,r.RewardsPromoTextRate.ComparisonText),usps:r.Usps,showHighlight:isMobile&&n.MultiRoom?n.isLowestRate(r):null,rateKind:r.RateKind}),v},k=function(t,i){var r=n.MultiRoom?f(n.getLowestPricePerRoomMulti(u||t)):f(i.Price);return[{bookingCode:i.BookingCode,ratePlanTitle:t.Title,ratePlanDesc:n.trimRatePlanDescription(t),priceText:r,isRewards:!0,usps:i.Usps,showRateSelector:!0,rateKind:i.RateKind}]},f=function(n){return n?String.format("{0}{1}",a,n.toFixed(2)):""},l=function(n){return String.format("{0}%",n.toFixed(0))},e=function(n){return"<s>"+n+"<\/s>"},d=function(t){return t.length>120&&n.IsInternational()?t.substring(0,120)+"...":t},g=function(t,r){var u={showToolTip:function(t){var i={toolTipTitle:t.data.toolTipTitle,toolTipBody:t.data.toolTipBody};isMobile?infoTipClickBound("#tooltip",i):n.initTooltip(t,$("#tooltip").html(),i)},bookNowClicked:function(t){n.Events.BookNowClicked(t)},haveUsps:function(){return this.usps!=null&&this.usps.length>0},hasHeader:function(){return this.headerText!=null},RoomOptions:new kendo.data.ObservableArray([]),RoomTypeCode:i.RoomTypeCode,Standard:i.Standard,Title:t.Title};$.extend(r,u)}}function moreInfoSlider(){setTimeout(function(){const n=document.querySelector(".mini-pdp-carousel");if(n!==null){var t=tns({container:".mini-pdp-carousel",items:1,slideBy:"page",speed:500,mode:"gallery",autoplay:!0,autoplayButtonOutput:!1,autoplayHoverPause:!0,autoplayTimeout:5e3,mouseDrag:!0,touch:!0,nav:!1,controls:!0,controlsContainer:".mini-pdp-carousel--wrp .sbx-slider-controls"});const n=document.querySelector(".mini-pdp-carousel--wrp");n!==null&&(n.style.height="auto",n.style.opacity="1")}},500)}Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRatesV2=function(n){Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRatesV2.initializeBase(this,[n]);this._viewModel=null;this._internationalHotel=!1;this._hotelPropertyId=null;this._hotelTitle=null;this._hotelIsCoreBranded=null;this._qitImageUrl=null;this._qitImageAlt=null;this._basePath=null;this._hotelIsPilot=null;this._simpleSearchSingle=null;this._simpleSearchMulti=null;this._siteKey=null;this._loginRequiresRecaptcha=null;this._affiliate=null;this._disableRewards=!1;this._trafficSourceShowRewards=!1;this._hotelSearchParams={PropertyId:function(){return this.get("Hotel.PropertyId")},showChildrenOptions:function(){return this.Children>0},getCheckInDateFormatted:function(){var n=null;return n=this.get("CheckIn")==null?Date.Tomorrow():this.get("CheckIn").toDateObject(),n.format("ddd, dd/MM")},getCheckOutDateFormatted:function(){var n=null;return n=this.get("CheckOut")==null?Date.DayAfterTomorrow():this.get("CheckOut").toDateObject(),n.format("ddd, dd/MM")},Nights:function(){return(new Date(this.CheckOut)-new Date(this.CheckIn))/864e5}};this.RoomOptions=function(){return{Adults:0,Children:0,RateOptions:[],SelectedRate:null,SelectedRatePlan:null,FoodOptions:[]}};this.PackageItem=function(){return{}};this.PackagesClass=function(){return{Items:[],AvailabileForExtendedStay:!1,Available:!1,AvailabileForExtendedStayOnly:function(){return this.get("AvailabileForExtendedStay")===!0&&this.get("Available")!==!0},ShowPackages:function(){return this.get("Available")===!0||this.get("AvailabileForExtendedStay")===!0},ExtendedDatesText:function(){return String.format("{0} - {1}",new Date(this.get("ExtendedStayCheckInDate")).format("ddd, dd MMM"),new Date(this.get("ExtendedStayCheckOutDate")).format("ddd, dd MMM"))}}};var t=this;this.Availability=function(){return{Items:[],RoomTypes:[],Packages:new t.PackagesClass,FloaterItems:function(){return[]},FloaterMessages:function(){return[]}}};this.FloaterItem=function(){return{Name:null,Adults:null,Children:null,RatePlanName:null,Cancellable:null,Nights:null,BookingCode:null,Total:null,CurrencySymbol:null,Composition:function(){var n=String.format("{0} adult{1}",this.Adults,this.Adults>1?"s":"");return this.Children>0&&(n=String.format("{0} {1} {2}",n,this.Children,this.Children>1?"children":"child")),n},GetSubTotalHtml:function(){var n=this.Total.toFixed(2);return this.IsGated&&!BestWestern.IsAuthenticated()&&(n=this.GatedComparisonTotal.toFixed(2)),String.format('<span class="lrg_subtotal_lbl">Price for {0} night{2}<\/span><span class="lrg_subtotal_amnt">{3}{1}<\/span>',this.Nights,n,this.Nights>1?"s":"",this.CurrencySymbol)},GetGatedSubTotalHtml:function(){var n=this.Total.toFixed(2);return this.IsGated?n=this.Total.toFixed(2):this.IsRewardsDiscount&&(n=this.GatedComparisonTotal.toFixed(2)),String.format('<span class="lrg_subtotal_lbl">Price for {0} night{2}<\/span><span class="lrg_subtotal_amnt">{3}{1}<\/span>',this.Nights,n,this.Nights>1?"s":"",this.CurrencySymbol)},GetSubTotalTabletHtml:function(){var n=this.Total.toFixed(2);return this.IsGated&&!BestWestern.IsAuthenticated()&&(n=this.GatedComparisonTotal.toFixed(2)),String.format('<strong class="sticky-cart--room-price">{3} {1}<\/strong><div class="sticky-cart--duration">Price for {0} night{2}<\/div>',this.Nights,n,this.Nights>1?"s":"",this.CurrencySymbol)},Ruid:null}}};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRatesV2.prototype={initialize:function(){var u;Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRatesV2.callBaseMethod(this,"initialize");var i=function(){$(".rt-flex").each(function(){var n=$(this),t=$(n).find(".std-rt-tim-left").height();t<=207&&$(n).removeClass("rt-flex")})},r=null;BestWestern.ShowingMultiFloater=!1;u=$(".hotel-container");$(".variantc-float--wrap").on("clickoutside",function(){$(".variantc-floater").hide();n.set("VariantFloaterShow",!1)}).on("mouseenter",function(){clearTimeout(r)});$.extend(this._hotelSearchParams,this.get_searchParams());this._hotelSearchParams.Adults===null&&(this._hotelSearchParams.Adults=1);this._hotelSearchParams.Children===null&&(this._hotelSearchParams.Children=0);this._hotelSearchParams.RoomQuantity===null&&(this._hotelSearchParams.RoomQuantity=1);this._hotelSearchParams.CheckIn===null&&(this._hotelSearchParams.CheckIn=new Date((new Date).getTime()+864e5).format("yyyy-MM-dd"));this._hotelSearchParams.CheckOut===null&&(this._hotelSearchParams.CheckOut=new Date((new Date).getTime()+1728e5).format("yyyy-MM-dd"));$(document).on("click",".rt_close",function(){var n=$(this).parents(".rt_selections");n.is(":visible")&&n.hide()});$("html, body").on("click",function(n){var t=$("div.rt_selector");t.is(n.target)||t.has(n.target).length!==0||t.find("div.rt_selections").hide()});this.initializeFloaterDock();var t=this,f=BestWestern.StorageManager.GetCookie("RewardsRatesEmail"),o=f!=null&&f!=undefined,n=kendo.observable({Loading:!0,firstLoad:!0,AgreeRewardsSignup:o,ShowLoyaltyRates:!0,RewardsCheckout:!1,RoomTypesLoadingClass:"loading-rates",RoomTypesCountAvailableMessage:function(){var n=this.get("Availability.RoomTypes.length");return n===1?"There is 1 room type available for your dates":n===0?"There are no room types available for your dates":String.format("There are {0} room types available for your dates",n)},Hotel:{PropertyId:t.get_hotelPropertyId(),Title:t.get_hotelTitle(),City:u.data("hotel-location"),IsCoreBrand:t.get_hotelIsCoreBranded(),QitImageUrl:t.get_qitImageUrl(),QitImageAlt:t.get_qitImageAlt(),CurrencySymbol:null,IsPilot:t.get_hotelIsPilot()},Availability:new t.Availability,AvailabilityCheckHandlers:[],GetRetrievingGroupRequest:function(){return n.get("RetrievingGroupRequest")},InitializeDataLayerObject:function(){var n=$("[data-gtm]").data("gtm"),t="";if(n)return n.Street!=="undefined"?t+=n.Street:"",n.AddressLine2!=="undefined"?t+=", "+n.AddressLine2:"",n.City!=="undefined"?t+=", "+n.City:"",n.Zip!=="undefined"?t+=", "+n.Zip:"",{ecommerce:{detail:{products:[{name:n.Name,id:n.Id,price:null,brand:t,variant:null}]}}}},PopulateDataLayer:function(n){if(typeof dataLayer!="undefined"){if(BestWestern.HotelName=n.Hotel.Title,dataLayer.push({searchTerm:n.Hotel.Title,checkInDate:n.SearchParams.CheckIn,checkOutDate:n.SearchParams.CheckOut,occupancy:n.SearchParams.Adults+" adults, "+n.SearchParams.Children+" children",bookingExtras:n.SearchParams.OfferId!=="null"?n.SearchParams.OfferType+": "+n.SearchParams.OfferId:null,hotelIdList:n.Hotel.PropertyId,region:n.Hotel.City,city:n.Hotel.City,country:u.data("hotel-country"),adults:n.SearchParams.Adults,children:n.SearchParams.Children,currencyCode:n.Hotel.CurrencyCode,currencySymbol:n.Hotel.CurrencySymbol}),n.get("NoRoomsAvailable")===!0){dataLayer.push({event:"room-unavailable",action:n.Hotel.Title});var t=new Date(n.SearchParams.CheckIn).valueOf(),i=new Date((new Date).toISOString().split("T")[0]).valueOf();t>i&&dataLayer.push({event:"bw_property_closed_out",property_id:this.Hotel.PropertyId,checkin:n.SearchParams.CheckIn,check_out:n.SearchParams.CheckOut,rooms:n.SearchParams.RoomQuantity,adults:n.SearchParams.Adults,children:n.SearchParams.Children})}else n.get("MinimumLengthOfStayApplies")&&dataLayer.push({event:"minimum-stay",action:n.Hotel.Title});typeof initGtm!="undefined"&&typeof gtmFiredOnPdp==typeof undefined&&(initGtm(),window.gtmFiredOnPdp=!0);typeof initFBE_GTM!="undefined"&&initFBE_GTM();dataLayer.push({event:"dataLayerUpdated"})}},AddComparableItemsToDataLayer:function(n,t,i){i&&(n&&(i.ecommerce.detail.products[0].price=n),t&&(i.ecommerce.detail.products[0].variant=t),typeof dataLayer!="undefined"&&dataLayer.push(i),typeof initGtm!="undefined"&&typeof gtmFiredOnPdp==typeof undefined&&(initGtm(),window.gtmFiredOnPdp=!0))},ProcessEmptySearchRequest:function(n,t){return n.SearchParams.EmptySearch===!0?(n.set("NoResults",!0),n.set("NoRoomsAvailable",!1),n.set("NoSearchRequest",!0),n.set("MainLoading",!1),n.set("RoomTypesLoadingClass","loading-rates"),isMobile||($(".rr_change_dates.search_wrp").show(),$(".rr_change_dates_lnk").text("Close")),isMobile&&($(".roomratesearch").show(),$(".changedate").text("Close")),t&&typeof dataLayer!="undefined"&&dataLayer.push(t),typeof initGtm!="undefined"&&typeof gtmFiredOnPdp==typeof undefined&&(initGtm(),window.gtmFiredOnPdp=!0),BestWestern.RoomsAndRatesSuccess(undefined,!0),!0):!1},selectDatesPrompt:function(){var n=this;$(".select-dates-button").show().on("click",function(){n.initEnterDatesModal()});$(function(){n.initEnterDatesModal(1500)})},initEnterDatesModal:function(){BestWestern.SelectDates()},CheckPackageAvailability:function(n,t){var i=this,f={PropertyId:this.Hotel.PropertyId,Adults:i.SearchParams.Adults,Children:i.SearchParams.Children,RoomQuantity:i.SearchParams.RoomQuantity,CheckIn:i.SearchParams.CheckIn,CheckOut:i.SearchParams.CheckOut,PromoCode:i.SearchParams.Promo?i.SearchParams.Promo:i.SearchParams.PromoCode,OfferId:i.SearchParams.OfferId,OfferType:i.SearchParams.OfferType,Ages:i.SearchParams.Ages,GroupId:1},r,u;n!==undefined&&n!==null&&$.extend(i.SearchParams,n);r=function(n,i){$.ajax({url:"/restapi/hotel-details/availability/packages",type:"POST",dataType:"json",accept:"application/json",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:i,error:function(n){var t=JSON.parse(n.responseText);BestWestern.ShowMessage(t.ResponseStatus.Message)},complete:function(){t&&t()}})};u=function(n){console.log(n)};r(f,u)},CheckAvailability:function(r,u){var f=this,e;if(f.set("MainLoading",!0),f.set("Availability",new t.Availability),e=this.InitializeDataLayerObject(),r!==undefined&&r!==null&&$.extend(f.SearchParams,r),this.ProcessEmptySearchRequest(f,e)===!0){$(".pdp-home-float-message--wrp").show();$(".select-dates-button").show();t.hasAutoScroll()||this.selectDatesPrompt();return}f.set("NoSearchRequest",!1);f.set("MultiRoom",parseInt(f.SearchParams.RoomQuantity,10)>1||f.IsInternational());f.get("MultiRoom")?$("body").addClass("multiroom"):$("body").removeClass("multiroom");var s={PropertyId:this.Hotel.PropertyId,Adults:f.SearchParams.Adults,Children:f.SearchParams.Children,RoomQuantity:f.SearchParams.RoomQuantity,CheckIn:f.SearchParams.CheckIn,CheckOut:f.SearchParams.CheckOut,PromoCode:f.SearchParams.Promo?f.SearchParams.Promo:f.SearchParams.PromoCode,OfferId:f.SearchParams.OfferId,OfferType:f.SearchParams.OfferType,Ages:f.SearchParams.Ages,DisableRewards:t.get_disableRewards(),GroupId:1,Voucher:BestWestern.StorageManager.Get("voucher")},h=function(n,r){$.ajax({url:"/restapi/hotel-details/availability/V2",type:"POST",dataType:"json",accept:"application/json",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",success:r,error:function(n){var t=JSON.parse(n.responseText);BestWestern.ShowMessage(t.ResponseStatus.Message);typeof initGtm!="undefined"&&typeof gtmFiredOnPdp==typeof undefined&&(initGtm(),window.gtmFiredOnPdp=!0)},complete:function(){f.set("MainLoading",!1);isMobile&&i();t.addStateClassEvents();u&&u();typeof initGtm!="undefined"&&typeof gtmFiredOnPdp==typeof undefined&&(initGtm(),console.log("GTM fallback fired"),window.gtmFiredOnPdp=!0);const r=window.location.href.indexOf("#d4bwlink-")!=-1?'[data-deep="'+window.location.href.split("d4bwlink-")[1].toString()+'"]':null;if(r!==null){const u=$("body");u.addClass("packages-scrolling");const t=$("html, body"),i='[data-deep="'+r.slice(-4).toString();t.animate({scrollTop:$(".hd_rooms_rates").offset().top-100},500);var n=null;setTimeout(function(){$(".rooms-header-tab-b").trigger("click")},700);setTimeout(function(){if($(i).each(function(){const t=$(this);t.parents(".packages-parent").is(":visible")&&(n=t)}),n.hasClass("room-type--title")){const t=n.parent(".pdp-accordion-title");t.trigger("click")}else if(n.hasClass("rt-package-row")){const t=n.parent(".room-type-block-inner");t.prev(".pdp-accordion-title").trigger("click")}},1600);setTimeout(function(){if(r==i)isMobile?t.animate({scrollTop:n.offset().top-10},500):t.animate({scrollTop:n.offset().top-100},500);else{var f=null;$(i).each(function(){const n=$(this);n.parent(".pdp-accordion-title").hasClass("active")&&n.parents(".packages-parent").is(":visible")&&(f=n.parents(".room-type-block").find(r))});isMobile?t.animate({scrollTop:f.offset().top-10},500):t.animate({scrollTop:f.offset().top-100},500)}u.removeClass("packages-scrolling")},2400)}}})},o=0,c=function(i){var u,s,r;if(i.BookingEngineError){BestWestern.ShowMessage(i.Message);return}if(o=o+1,f.set("DirectConnectDown",!1),i!=null&&i.DirectConnectDown==!0){f.HandleDirectConnectDown(i.Message);return}if(f.set("Hotel.CurrencySymbol",i.CurrencySymbol),f.set("Hotel.CurrencyCode",i.CurrencyCode),f.set("RetrievingGroupRequest",!1),f.set("NoSearchRequest",!1),f.set("NoRoomsAvailable",!0),f.set("NoResults",!0),f.set("ShowLoyaltyRates",i.ShowLoyaltyRates),f.get("firstLoad")&&(i.TrafficSourceRewards&&f.set("AgreeRewardsSignup",!0),f.set("firstLoad",!1)),i.Packages.Items=i.Packages.Items||[],$(i.Packages.Items).each(function(n,i){$(i.RoomTypes).each(function(n,r){var u=new t.RoomOptions;u.Index=n;u.Adults=f.SearchParams.Adults;u.Children=f.SearchParams.Children;r.ChooseRateMode=!1;r.ChooseFoodMode=!1;r.RoomOptions=new kendo.data.ObservableArray([]);r.LowestPricePerRoom=r.Price;i.RoomTypes[n]=$.extend({},new t.PackageItem,r)})}),i.Packages=$.extend({},new t.PackagesClass,i.Packages),$(i.RoomTypes).each(function(n,i){if(i.collapsed=!0,f.get("MultiRoom"))i.RoomOptions=new kendo.data.ObservableArray([]);else{var r=new t.RoomOptions;r.Adults=f.SearchParams.Adults;r.Children=f.SearchParams.Children;r.RateOptions=i.RateOptions;i.RoomOptions=new kendo.data.ObservableArray([r]);i.ChooseRateMode=!0;i.ChooseFoodMode=!1;i.RoomOptions.length>0&&i.RoomOptions[0].RateOptions.length>0&&!isMobile}}),i.RoomTypes=i.RoomTypes||[],isMobile)for(u=0;u<i.RoomTypes.length;u++)for(s=0;s<i.RoomTypes[u].RoomOptions.length;s++)r=i.RoomTypes[u].RoomOptions[s],r.RoomOptions=new kendo.data.ObservableArray([]),r.SelectedRate=r.RateOptions[0].BookingCodes[0],r.SelectedRatePlan=r.RateOptions[0].BookingCodes[0];$(i.RoomTypes).each(function(t,r){r.Index=t;for(var u=0;u<r.RateOptions.length;u++)r.RateOptions[u].RoomOptions=new kendo.data.ObservableArray([]),r.RateOptions[u].SelectedRatePlan=new kendo.data.ObservableObject(r.RateOptions[u].BookingCodes[0]),r.RateOptions[u].BookingOptions=new kendo.data.ObservableArray(n.buildBookingOptions(i,r,r.RateOptions[u]))});f.set("Availability",i);f.set("NoRoomsAvailable",(i.RoomTypes===null||i.RoomTypes.length===0)&&!i.MinimumLengthOfStayApplies);f.set("NoResults",(i.RoomTypes===null||i.RoomTypes.length===0)&&i.ShowNoPayWithPointsRatesAvailableMessage!=!0);f.get("NoResults")===!1&&BestWestern.ShowLockPrice&&BestWestern.ShowLockPrice(undefined,!0);f.PopulateDataLayer(f);document.getElementById("comparableNights")&&kendo.bind(document.getElementById("comparableNights"),f);f.set("RetrievingGroupRequest",!1);f.set("RoomTypesLoadingClass","loaded");BestWestern.RoomsAndRatesSuccess(undefined,!0);f.agreedOrAuthenticated()?f.AddComparableItemsToDataLayer(f.get("Availability.LowestOverallPrice"),f.get("Availability.ComparableNights"),e):f.AddComparableItemsToDataLayer(f.get("Availability.LowestComparablePrice"),f.get("Availability.ComparableNights"),e);f.get("NoRoomsAvailable")==!0&&f.get("Availability.ShowNoPayWithPointsRatesAvailableMessage")!==!0&&f.PopulateNoAvailabilityCalendar()};h(s,c)},PopulateNoAvailabilityCalendar:function(){var n=this,i,r,t,u;n.set("HasNewDates",!1);i="RAC";n.Availability.ExclusiveRateConfig!=undefined&&n.Availability.ExclusiveRateConfig.HasExclusiveRate&&(i=n.Availability.ExclusiveRateConfig.RatePlanCode);r={RatePlanCode:i,PropertyId:n.get("Hotel.PropertyId"),Adults:n.get("SearchParams.Adults"),Children:n.get("SearchParams.Children"),Ages:n.get("SearchParams.Ages"),RoomQuantity:n.get("SearchParams.RoomQuantity")};t=this.GetSearchControl();t.populateCalendar(r,function(t){n.CalendarChangedCallback(t)});typeof HotelsX2!="undefined"&&(t=this.GetSearchControl(),u=t.get_detailsBasePath(),HotelsX2.NoAvailabilityCalendar.Populate(r,function(t){n.CalendarChangedCallback(t)},n.get("SearchParams"),u))},GetSearchControl:function(){return this.get("MultiRoom")&&t.get_simpleSearchMulti()!=null?t.get_simpleSearchMulti():t.get_simpleSearchSingle()},CalendarChangedCallback:function(n){this.set("SearchParams.CheckIn",n.date1.format("yyyy-MM-dd"));this.set("SearchParams.CheckOut",n.date2.format("yyyy-MM-dd"));this.set("HasNewDates",!0)},ResearchCalendarAvailbility:function(){var n=this.GetSearchControl();n.performDoSearchWithModel(this.get("SearchParams"))},ClearSelectedDates:function(){this.set("HasNewDates",!1);var n=this.GetSearchControl();n.clearCalendar()},FloaterItems:[],FloaterMessages:[],buildPackageFloaterItems:function(n){for(var e,u,i,r,o=[],f=0;f<n.RoomTypes.length;f++)for(e=n.RoomTypes[f],u=0;u<e.RoomOptions.length;u++)i=e.RoomOptions[u],i.SelectedRatePlan!==null&&(r=new t.FloaterItem,r.Adults=i.Adults,r.Children=i.Children,r.Name=n.Title,r.CurrencySymbol=this.get("Hotel.CurrencySymbol"),r.Nights=i.SelectedRatePlan.MLOS,r.RatePlanName=i.SelectedRatePlan.Title,r.BookingCode=i.SelectedRatePlan.BookingCode,r.Cancellable=i.SelectedRatePlan.IsCancellable?"Cancellable":"Non-Cancellable",r.Total=i.SelectedRatePlan.Price,r.IsGated=!1,r.Ruid=String.format("{0}-{1}-{2}-{3}",i.uid,i.Adults,i.Children,i.SelectedRatePlan.BookingCode),o.push(r));return o},buildFloaterItem:function(i,r){var u=new t.FloaterItem,f;return(u.Adults=r.Adults,u.Children=r.Children,u.Name=i,u.CurrencySymbol=this.get("Hotel.CurrencySymbol"),u.Nights=this.SearchParams.Nights(),r.SelectedRatePlan!==null)?(u.RatePlanName=r.SelectedRatePlan.Title,u.BookingCode=this.getRewardsLinkedRate(r)&&(n.agreedOrAuthenticated()||n.get("RewardsCheckout"))?this.getRewardsLinkedRate(r).BookingCode:r.SelectedRatePlan.BookingCode,u.Cancellable=r.SelectedRatePlan.IsCancellable?"Cancellable":"Non-Cancellable",u.Total=r.SelectedRatePlan.Price,u.IsGated=r.SelectedRatePlan.IsGated&&r.SelectedRatePlan.GatedRate&&r.SelectedRatePlan.GatedRate.Active,u.IsRewardsDiscount=r.SelectedRatePlan.RewardsDiscountRate&&r.SelectedRatePlan.RewardsDiscountRate.Active,u.IsRewardsPromoTextRate=r.SelectedRatePlan.RewardsPromoTextRate&&r.SelectedRatePlan.RewardsPromoTextRate.Active,u.PromoText=u.IsRewardsPromoTextRate?r.SelectedRatePlan.PromoText:"",f=0,r.SelectedRatePlan.GatedRate?f=r.SelectedRatePlan.GatedRate.ComparisonPrice:r.SelectedRatePlan.RewardsDiscountRate&&(f=r.SelectedRatePlan.RewardsDiscountRate.ComparisonPrice),u.GatedComparisonTotal=f,u.Ruid=String.format("{0}-{1}-{2}-{3}",r.uid,r.Adults,r.Children,r.SelectedRatePlan.BookingCode),u):null},GetFloaterItemsRooms:function(){for(var w,f,e,o,a,i,s,b,h,r,c,k,t,l,u=[],v=null,y=null,p=this.get("Availability.Packages.Items"),n=0;n<p.length;n++)if(w=p[n],f=this.buildPackageFloaterItems(w),f.length)for(e=0;e<f.length;e++)u.push(f[e]);for(items=this.get("Availability.RoomTypes"),n=0;n<items.length;n++)for(o=0;o<items[n].RateOptions.length;o++){for(a=items[n].Title,i=items[n].RateOptions[o],s=0;s<i.RoomOptions.length;s++)b=i.RoomOptions[s],t=this.buildFloaterItem(a,b),t!=null&&u.push(t);for(h=0;h<i.BookingOptions.length;h++)for(r=i.BookingOptions[h],c=0;c<r.RoomOptions.length;c++)k=r.RoomOptions[c],t=this.buildFloaterItem(a,k),t!=null&&(u.push(t),r.isDiscount||r.isRewards||(t.IsRewardsDiscount=!1),l=i.BookingOptions.filter(function(n){return n.toolTipTitle}),l.length>0&&(v=l[0].toolTipTitle,y=l[0].toolTipBody))}return this.set("FloaterToolTipTitle",v),this.set("FloaterToolTipBody",y),new kendo.data.ObservableArray(u)},VariantFloaterShow:!1,HasTruncatedRoomDescriptionMobile:function(n){if(n.get("RoomDescription")===undefined)return null;var t=n.get("RoomDescription").indexOf(" ",200);return t>=0},ToggleTruncateMode:function(n){n.data.get("truncated")===undefined&&n.data.set("truncated",!0);n.data.get("truncated")===!0?n.data.set("truncated",!1):n.data.set("truncated",!0)},GetTruncatedRoomDescription:function(n){return n.RoomDescriptionShort===undefined?null:n.RoomDescriptionShort},TabletFloater:{toggleFloaterRoom:function(n){$(n.target).parent(".sticky-cart--room-left").toggleClass("active");n.stopPropagation()},toggleTabletFloater:function(n){var t=$(".sticky-cart--preview-block");t.on("clickoutside",function(){$(".sticky-cart--preview").removeClass("active")});$(".sticky-cart--preview").toggleClass("active");n.stopPropagation()},showFloater:function(n){var t=n.get("FloaterItems");return t?(BestWestern.ShowingMultiFloater=t.length>0,t.length>0):!1},GetSummary:function(n){var r=n.get("FloaterItems"),t=n.get("FloaterTotal"),i=0;return!r||!t?"":(t=t,i=r.length,n.get("FloaterGated")&&!n.agreedOrAuthenticated()&&(t=n.get("FloaterGatedTotal")),String.format('<span class="short-preview-selection">{0} room{2} selected:<\/span><span class="short-preview-price">&nbsp;{1}<\/span>',i,t,i>1?"s":""))}},GetFloaterItems:function(){var c,l,a,i;clearTimeout(r);var v=this.get("FloaterItems").length,u=this.GetFloaterItemsRooms(),h=u.length;h!==v&&h>0&&(c=this);var f=!1,t=0,e=0,o=u,s=[];if($(o).each(function(n,i){isNaN(i.Total)||((i.IsGated||i.IsRewardsDiscount||i.IsRewardsPromoTextRate)&&!isNaN(i.GatedComparisonTotal)?(i.IsGated&&!isNaN(i.GatedComparisonTotal)?(t=t+i.Total,e+=i.GatedComparisonTotal-i.Total):i.IsRewardsDiscount&&!isNaN(i.GatedComparisonTotal)?(t=t+i.GatedComparisonTotal,e+=i.Total-i.GatedComparisonTotal):i.IsRewardsPromoTextRate&&($.inArray(i.PromoText,s)===-1&&s.push(i.PromoText),t=t+i.Total),f=!0):t=t+i.Total)}),f=f&&!n.agreedOrAuthenticated(),this.set("FloaterRooms",String.format("{0} room{1}:",o.length,o.length!==1?"s":null)),this.set("FloaterTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),t.toFixed(2))),this.set("FloaterGated",f),this.set("FloaterMessages",s),f&&(l=e/(t+e)*100,this.set("FloaterGatedPercent",l.toFixed(0)),this.set("FloaterGatedTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),(t+e).toFixed(2)))),isMobile&&this.MultiRoom){a=kendo.template($("#sticky-cart").html());i=$(a(this));u.length<1&&i.hide();$(i).on("click",".sticky-book a",function(t){n.Events.BookNowMobileMultiClicked.apply(n,[t])});if(this.get("FloaterToolTipTitle"))$(i).on("click",".sticky-gated-msg",function(){infoTipClickBound("#tooltip",{toolTipTitle:n.get("FloaterToolTipTitle"),toolTipBody:n.get("FloaterToolTipBody")})});$(".sticky-cart").length===0?$("body").append(i):$(".sticky-cart").replaceWith(i);BestWestern.ShowingMultiFloater=u.length>0}return this.set("VariantFloaterShow",!0),r=setTimeout(function(){$(".variantc-floater").fadeOut(150,function(){c.set("VariantFloaterShow",!1)})},3e3),u},removeFloaterRoom:function(t){var i=this;$(t.target).parents(".lrg_room, .sticky-cart--room").fadeOut(function(){var h=t.data.Ruid,e,r,i,u,s,o;for(items=n.get("Availability.RoomTypes"),i=0;i<items.length;i++)for(e=0;e<items[i].RateOptions.length;e++){var f=items[i].RateOptions[e],l=f.RoomOptions,c=l.filter(function(n){return String.format("{0}-{1}-{2}-{3}",n.uid,n.Adults,n.Children,n.SelectedRatePlan?n.SelectedRatePlan.BookingCode:"")===h});if(c.length){o=f.RoomOptions.indexOf(c[0]);f.RoomOptions.remove(f.RoomOptions[0]);n.set("FloaterItems",n.GetFloaterItems());n.Events.ToggleVariantFloaterShow(null,!0);n.Events.RebuildBookingOptions(f);return}}if(r=n.get("Availability.Packages.Items"),r&&r.length)for(i=0;i<r.length;i++)for(u=0;u<r[i].RoomTypes.length;u++)s=r[i].RoomTypes[u].RoomOptions.filter(function(n){return String.format("{0}-{1}-{2}-{3}",n.uid,n.Adults,n.Children,r[i].RoomTypes[u].BookingCode)===h}),s.length&&(o=r[i].RoomTypes[u].RoomOptions.indexOf(s[0]),r[i].RoomTypes[u].RoomOptions.remove(r[i].RoomTypes[u].RoomOptions[o]),n.set("FloaterItems",n.GetFloaterItems()),n.Events.ToggleVariantFloaterShow(null,!0),n.Events.RebuildBookingOptions(f));BestWestern.MatchVariantCols()})},SearchParams:t.get_hotelSearchParams(),MultiRoom:!1,IsInternational:function(){return this.get("Hotel.PropertyId")!==null&&!(this.get("Hotel.PropertyId").startsWith("83")||this.get("Hotel.PropertyId").startsWith("561")||this.get("Hotel.PropertyId").startsWith("84")&&!this.get("Hotel.PropertyId").startsWith("840")&&!this.get("Hotel.PropertyId").startsWith("841")||this.get("Hotel.PropertyId").startsWith("86"))},IsPilot:function(){return this.get("Hotel.IsPilot")},IsPilotHaveRoomTypeImage:function(n){return this.get("Hotel.IsPilot")&&n.ImageUrl!==undefined&&n.ImageUrl!==null&&n.ImageUrl!==""},HaveRoomTypeImage:function(n){return n.ImageUrl!==undefined&&n.ImageUrl!==null&&n.ImageUrl!==""},RoomTypeImageClass:function(){return this.get("Hotel.IsPilot")?"room-type-block--image":"room-type-block--image-noclick"},DelayShowNativeChoicesWhileRetrievingGroupRequest:function(n,i,r,u){var e,f;n.get("RetrievingGroupRequest")===!0?(e=String.format('<ul class="native-choices">{1}<li class="loading" style="text-align: center; padding: 20px;">{0}<\/li><\/ul>',r,u),$("body").addClass("noscroll").append(e),f=function(){n.get("RetrievingGroupRequest")===!0?setTimeout(f,100):(t.removeNativeChoices(),i())},f()):i()},ShowRate:function(n){var t=n;n.data!=undefined&&(t=n.data);var r=t.parent().parent(),u=t.parent().parent().parent(),f=u.indexOf(r),i=t.parent().parent().parent().parent();return i.get("ShowMoreRates")!=undefined&&i.get("ShowMoreRates")||f<3},ShowMoreRatesVisible:function(n){return n.get("RateOptions").length>3&&(n.get("ShowMoreRates")===undefined||!n.get("ShowMoreRates"))},Events:{AdultChange:function(n){var i=$(n.target),u=i.hasClass("btn-less")?"subtract":"add";var f=i.parents(".countercontrol"),r=i.parent().find("input"),t=r.val();u==="add"?t++:t--;t<=4&&t>=0&&(r.val(t),r.change())},MoreInfoClicked:function(t){var i,r;(GoalTracking.TrackViewRoomFacilitiesInfoGoal(),n.IsPilot())&&(i=$($("#roomMoreInfoTemplate").html()).clone(),kendo.bind(i,t.data),r=this.get("Hotel.Title"),this.showAlert(i,900,"95%","95%",null,"Close",null,"moreInfoSlider",function(){var n=$(this.content);$(".bo_header").append(r)},null))},SelectionOpened:function(n){var r=$(n.target),i=r.parents(".rt_selector"),t;i.attr("data-disabled")!="disabled"&&(t=i.find(".rt_selections"),t.is(":hidden")?($("div.rt_selections").hide(),t.fadeIn(200).addClass("active")):t.hide().removeClass("active"))},ShowMoreRatesClicked:function(n){n.data.set("ShowMoreRates",!0);var t=n.data.get("RateOptions");n.data.set("RateOptions",new kendo.data.ObservableArray([]));n.data.set("RateOptions",t);i()},BookNowClickedPackage:function(t){var r=t.data.bookingCode||t.data.BookingCode,i=n.get("Availability.Packages"),u,f;i.get("AvailabileForExtendedStay")?(u=i.get("ExtendedStayCheckInDate"),f=i.get("ExtendedStayCheckOutDate"),n.Book(t,r,u,f)):n.Book(t,r);typeof dataLayer!="undefined"&&this.Hotel!==undefined&&dataLayer.push({event:"book-now-cta",category:"Book Now CTA",action:"Clicked CTA",label:this.Hotel.Title})},BookNowClicked:function(t){t.data.isRewards?BestWestern.StorageManager.Put("convertRewardsRateSelectedOnPdp",!0):BestWestern.StorageManager.Put("convertRewardsRateSelectedOnPdp",!1);var i=t.data.bookingCode||t.data.BookingCode;n.Book(t,i);typeof dataLayer!="undefined"&&this.Hotel!==undefined&&dataLayer.push({event:"book-now-cta",category:"Book Now CTA",action:"Clicked CTA",label:this.Hotel.Title})},BookNowMobileMultiClicked:function(t){n.set("RewardsCheckout",n.FloaterGated);var i=this.GetFloaterItems();this.Events.BookNowMulti(t,i)},BookNowMultiClicked:function(n){var t=n.data.get("FloaterItems");this.Events.BookNowMulti(n,t)},BookNowMulti:function(i,r){for(var h,c,f,u,l,a=r.map(function(n){return parseInt(n.Adults,10)}),v=r.map(function(n){return parseInt(n.Children,10)}),e=!1,o=r.map(function(n){return e=e||n.BookingCode.startsWith("PACKAGE"),n.BookingCode}),y=r[0].Nights,s=0;s<r.length;s++)if(y!==r[s].Nights){BestWestern.ShowMessage("Unable to accommodate conflicting length of stays",15e3);return}h=n.SearchParams.CheckIn;c=n.SearchParams.CheckOut;e&&(f=n.get("Availability.Packages"),f.get("AvailabileForExtendedStay")&&(h=f.get("ExtendedStayCheckInDate"),c=f.get("ExtendedStayCheckOutDate")));o.length>0&&(u=new BestWestern.SearchModel,u.Adults=a,u.Children=v,u.Plan=o,u.RoomQuantity=o.length,u.CheckIn=h,u.CheckOut=c,u.Term=n.SearchParams.Term,u.Affiliate=t.get_affiliate(),n.SearchParams.Ages!=null&&(u.Ages=n.SearchParams.Ages.toJSON?n.SearchParams.Ages.toJSON().toString():n.SearchParams.Ages),l=BestWestern.Search.BuildBookingUrl(u),i.preventDefault(!0),window.location=l)},RateSelectionClicked:function(n){var t=n.data||n,i,r,u;n.target&&(i=$(n.target),i=i.parents(".rt_selection"),i.find(".rt_radio input").prop("checked",!0),i.siblings().removeClass("selected"),i.addClass("selected"),i.parents(".rt_selections").hide(),r=$(n.target).parents(".os_row"),r&&(r.parents("[data-selector]").find(".os_row").removeClass("active"),r.addClass("active").find("input").prop("checked",!0)));u=t.parent().parent().get("SelectedRate");(u==null||u.Price!==t.Price||u.Title!==t.Title)&&(t.parent().parent().set("SelectedRate",t.toJSON()),t.parent().parent().set("SelectedRatePlan",null));t.BookingCodes.length&&t.parent().parent().get("SelectedRatePlan")===null&&(this.FoodSelectionClicked?this.FoodSelectionClicked(t.BookingCodes[0]):this.Events.FoodSelectionClicked(t.BookingCodes[0]))},doFoodSelectedClicked:function(n){var t=$(n.target),i;t=t.parents(".rt_selection");t.hasClass("selected")||GoalTracking.TrackPDPFoodOptionAddedGoal();t.find(".rt_radio input").prop("checked",!0);t.siblings().removeClass("selected");t.addClass("selected");t.parents(".rt_selections").hide();i=$(n.target).parents(".os_row");i.length>0&&(i.parents("[data-selector]").find(".os_row").removeClass("active"),i.addClass("active").find("input").prop("checked",!0))},FoodSelectionClicked:function(n){var r=n.data||n;if(r!==null&&r.parent&&r.parent().parent&&r.parent().parent().set){r.parent().parent().set("SelectedRatePlan",r.toJSON());var f=t.get_viewModel(),e=r.parent().parent().parent().parent().parent().parent(),u=r.parent().parent().parent().parent(),o=f.buildBookingOptions(f.Availability,e,u);u.BookingOptions.splice(0,u.BookingOptions.length);u.BookingOptions.push.apply(u.BookingOptions,o);f.set("FloaterItems",f.GetFloaterItems());t.get_viewModel().Events.doFoodSelectedClicked(n);i()}},FoodSelectionClickedNew:function(n){var r=n.data||n;if(r!==null&&r.parent&&r.parent().parent&&r.parent().parent().set){r.parent().parent().set("SelectedRatePlan",r.toJSON());var f=t.get_viewModel(),e=r.parent().parent().parent().parent(),u=r.parent().parent(),o=f.buildBookingOptions(f.Availability,e,u);u.BookingOptions.splice(0,u.BookingOptions.length);u.BookingOptions.push.apply(u.BookingOptions,o);t.get_viewModel().Events.doFoodSelectedClicked(n);i()}},FoodSelectedMobile:function(t){var r,i,u;$("body").removeClass("noscroll");r=$(t.target).data("bookingcode")||$(t.target).parent("li").data("bookingcode");this.set("SelectedRatePlan",this.FoodOptions.filter(function(n){return n.BookingCode===r})[0]);$(".native-choices").remove();n.updateMobileFloater();i=this.parent().parent();u=i.parent().parent();n.Events.UpdatePrice(u,i)},FoodSelectionMobileClicked:function(t){for(var r=function(){var i=t.data||t,e=$(t.target).data("selected"),f=kendo.template($("#choices-overlay-food").html()),r,u;$(i.FoodOptions).each(function(t,i){i.formattedPriceDifference=n.formatPriceDifference(i)});r=i.FoodOptions.toJSON();r.SelectedBookingCode=t.data.get("SelectedRatePlan.BookingCode");u=$(f(r));$(u).on("click","li",function(t){$(t.target).index()!==0&&n.Events.FoodSelectedMobile.apply(i,[t])});return u},e=function(){result=r();$("body").addClass("noscroll").append(result);isMobile&&$(".mealSelect").addClass("mealSelectNow")},u=r(),f="",i=0;i<u.length;i++)f=$(u[i]).html();n.DelayShowNativeChoicesWhileRetrievingGroupRequest(this,e,"Loading meal options",f)},AdultChildChangeAvailabilitySuccess:function(n,i){var u,r,f;n.data.set("SelectedRate",i[0].toJSON());n.data.set("SelectedRatePlan",i[0]);n.data.parent().parent().set("SelectedRatePlan",i[0]);u=t.get_viewModel();r=n.data.parent().parent();r.hasOwnProperty("BookingOptions")||(r=r.parent().parent());isMobile&&u.MultiRoom?(f=n.data.parent().parent(),this.UpdatePrice(r,f)):this.RebuildBookingOptions(r);n.data.set("FoodOptions",new kendo.data.ObservableArray(i))},RebuildBookingOptions:function(n){var i=t.get_viewModel(),r=n.parent().parent(),u=i.buildBookingOptions(i.Availability,r,n);n.BookingOptions.splice(0,n.BookingOptions.length);n.BookingOptions.push.apply(n.BookingOptions,u)},UpdatePrice:function(n,i){var r=t.get_viewModel(),f=n.parent().parent(),e=r.buildBookingOptions(r.Availability,f,n,i),u=n.BookingOptions.indexOf(i);n.BookingOptions[u].set("priceText",e[u].priceText)},AdultChildChangePackage:function(i){var o=i.data,u=o.parent().parent(),r=t.get_searchParams(),f={PropertyId:this.Hotel.PropertyId,Adults:i.data.Adults,Children:i.data.Children,RoomsQuantity:1,CheckIn:this.get("SearchParams.CheckIn"),CheckOut:this.get("SearchParams.CheckOut"),Promo:r.Promo,PromoCode:r.Promo,OfferId:r.OfferId,OfferType:r.OfferType,RoomTypeCode:u.RoomTypeCode,Standard:u.Standard,Ages:r.Ages===null?[]:JSON.stringify(r.Ages),RatePlanCode:u.Standard,BookingCode:u.BookingCode,PackageRequest:!0},e;f.Adults>0?(i.data.set("LoadingRR",!0),e=function(){return function(n){n.BookingEngineError?BestWestern.ShowMessage(n.Message):i.data.set("SelectedRatePlan",n)}},$.ajax({url:"/restapi/hotel-details/booking-availability/V2",type:"GET",dataType:"json",accept:"application/json",data:f,success:e(i),error:function(n){var t=JSON.parse(n.responseText);BestWestern.ShowMessage(t.ResponseStatus.Message)},complete:function(){i.data.set("LoadingRR",!1);n.set("FloaterItems",n.GetFloaterItems())}})):n.set("FloaterItems",n.GetFloaterItems())},AdultChildChange:function(i){var s=i.data,u=s.parent().parent(),o;u.hasOwnProperty("BookingOptions")||(u=u.parent().parent());var f=u.parent().parent(),h=u.Title,c=f.RoomTypeCode,r=t.get_searchParams(),e={PropertyId:this.Hotel.PropertyId,Adults:i.data.Adults,Children:i.data.Children,RoomsQuantity:1,CheckIn:this.get("SearchParams.CheckIn"),CheckOut:this.get("SearchParams.CheckOut"),Promo:r.Promo,PromoCode:r.Promo,OfferId:r.OfferId,OfferType:r.OfferType,RoomTypeCode:c,Standard:f.Standard,Ages:r.Ages===null?[]:JSON.stringify(r.Ages),RatePlanCode:f.Standard};i.data.set("FilteredRoomRates",new kendo.data.ObservableArray([]));i.data.set("RateOptions",new kendo.data.ObservableArray([]));i.data.set("RoomRates",new kendo.data.ObservableArray([]));i.data.set("SelectedRate",null);i.data.set("SelectedRatePlan",null);i.data.set("LoadingRR",!1);e.Adults>0?(i.data.set("LoadingRR",!0),o=function(t){return function(r){var u,f,e,o;if(r.BookingEngineError){isMobile&&n.MultiRoom&&i.data.set("SelectedRatePlan",null);BestWestern.ShowMessage(r.Message);return}(i.data.parent().parent().set("SelectedRatePlan",null),t.data.set("RateOptions",new kendo.data.ObservableArray(r.RateOptions)),u=t.data.RateOptions.filter(function(n){return n.Title===h}),u.length<1)||(f=t.data,f.Index=0,e=u[0].BookingCodes,o=u[0].Price,n.Events.AdultChildChangeAvailabilitySuccess(t,e,o))}},$.ajax({url:"/restapi/hotel-details/booking-availability/V2",type:"GET",dataType:"json",accept:"application/json",data:e,success:o(i),error:function(n){var t=JSON.parse(n.responseText);BestWestern.ShowMessage(t.ResponseStatus.Message)},complete:function(){i.data.set("LoadingRR",!1);n.set("FloaterItems",n.GetFloaterItems())}})):n.set("FloaterItems",n.GetFloaterItems())},DeleteRoom:function(t){var u=t.data.parent().parent(),i=u.get("RoomOptions"),f=i.indexOf(t.data),r,e;f>=0&&(i.splice(f,1),u.set("RoomOptions",i),n.updateMobileFloater(),r=t.data.parent().parent(),e=r.parent().parent(),n.Events.UpdatePrice(e,r))},ToggleVariantFloaterShow:function(t,i){i=i||!1;var r=!n.get("VariantFloaterShow");n.get("FloaterItems")&&n.get("FloaterItems").length?i&&(r=!0):r=!1;n.set("VariantFloaterShow",r)},RewardsSignupActions:function(i){var f=t,r,u,e,o,s;r=n.MultiRoom?$("#rr_wrp_multi"):$("#rr_wrp");r.height(r.height());n.get("AgreeRewardsSignup")?(n.set("AgreeRewardsSignup",!1),u=new Date,u.setTime(u.getTime()+31536e6),e=BestWestern.StorageManager.GetCookie("RewardsRatesEmail"),BestWestern.StorageManager.PutCookie("RewardsRatesEmail",null,u),BestWestern.StorageManager.DeleteCookie("RewardsRatesEmail"),BestWestern.StorageManager.PutCookie("RewardsRatesEmailReEnter",e,u),i&&i(),r.removeAttr("style")):$.fancybox!==undefined&&(s=$("#show-rewards-rates-modal").html(),n.showAlert(s,600,null,null,!1,"Close",function(){var u=BestWestern.StorageManager.GetCookie("RewardsRatesEmailReEnter"),t=kendo.observable({RewardsEmail:u,rewardsLogin:!1,swapToLogin:function(){this.set("rewardsLogin",!0);$.fancybox.reposition()},swapToEmailEntry:function(){this.set("rewardsLogin",!1);$.fancybox.reposition()},keypressEmailSubmit:function(n){n.keyCode==13&&($(n.target).blur(),this.validateEmailSubmit(n))},validateEmailSubmit:function(){$.fancybox.close();var u=this.get("RewardsEmail"),t=new Date;t.setTime(t.getTime()+31536e6);u?(BestWestern.StorageManager.PutCookie("RewardsRatesEmail",u,t),n.set("AgreeRewardsSignup",!0)):(BestWestern.StorageManager.PutCookie("RewardsRatesEmail",null,t),BestWestern.StorageManager.DeleteCookie("RewardsRatesEmail"),n.set("AgreeRewardsSignup",!1));i&&i();r.removeAttr("style")},modalLoading:!1,doUserNamePasswordLogin:function(){var n=this,t,i,r,u;if(n.set("modalLoading",!0),t=this.get("Username"),i=this.get("Password"),$("#show-rewards-rates-content .sfError").remove(),t===""||t===null||t==undefined){$('#show-rewards-rates-content [type="password"]').parent().after('<span class="sfError">Please enter a username<\/span>');n.set("modalLoading",!1);return}if(i===""||i===null||i==undefined){$('#show-rewards-rates-content [type="password"]').parent().after('<span class="sfError">Please enter a password<\/span>');n.set("modalLoading",!1);return}if(r=null,f.get_loginRequiresRecaptcha()===!0&&(r=grecaptcha.getResponse(window.attempt),r===null||r==="")){u=$("#gated-captcha");$(u).attr("data-size")==="invisible"?grecaptcha.execute(window.attempt):($(".invalid-captcha").remove(),$('#show-rewards-rates-content [type="password"]').parent().after('<span class="sfError invalid-captcha">error: Invalid captcha<\/span>'),n.set("modalLoading",!1));return}BestWestern.Authenticate(t,i,"BestWestern",function(){window.location=window.location},function(){$('#show-rewards-rates-content [type="password"]').parent().after('<span class="sfError invalid-captcha">Invalid username or password.<\/span>');n.set("modalLoading",!1)},window.attempt,f.get_loginRequiresRecaptcha())}});o=function(){t.doUserNamePasswordLogin.call(t)};kendo.bind($("#show-rewards-rates-content"),t)},function(){f.get_loginRequiresRecaptcha()&&(window.attempt=window.attempt||0,typeof grecaptcha!="undefined"&&(window.attempt=grecaptcha.render("gated-captcha",{sitekey:f.get_siteKey(),callback:o})))}))},RewardsSignUpClick:function(){var t=this;t.Events.RewardsSignupActions(function(){t.CheckAvailability(t.get("SearchParams"),function(){isMobile&&(n.MultiRoom&&(n.FloaterItems.empty(),n.set("FloaterItems",n.GetFloaterItems())),i())})})},RewardsCheckoutClick:function(){n.set("RewardsCheckout",!n.get("RewardsCheckout"));n.set("FloaterItems",n.GetFloaterItems())},ShowRatedTooltip:function(n){infoTipClickBound("#rewardsStdBound",n.data)},ShowNonRewardsRatedTooltip:function(n){infoTipClickBound("#nonRewardsStdBound",n.data)}},showAlert:function(n,t,i,r,u,f,e,o){$.fancybox({content:n,autoSize:!1,width:t,height:"auto",maxWidth:i?i:undefined,maxHeight:r?r:undefined,tpl:{wrap:'<div class="fancybox-wrap global-area" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},beforeShow:function(){$(".fancybox-outer").append(String.format('<a title="{0}" class="bw_fancybox_close fancybox-close" href="javascript:void(0);"><\/a>',f));$(".bw_fancybox_close,.close_btn").on("click",function(){$.fancybox.close()});e&&e()},afterShow:function(){o!==null&&o.length&&o=="moreInfoSlider"&&moreInfoSlider()},helpers:u===!1?{overlay:{locked:!1}}:undefined})},updateMobileFloater:function(){isMobile&&(this.GetFloaterItems(),n.set("FloaterItems",n.GetFloaterItems()))},showRoomsAlert:function(n,t,i){var r=String.format('<div class="bw_overlay"><div class="bo_header bo_large">{0}<\/div><div class="bo_body">{1}<\/div><div class="bo_footer group"><a class="button right_15 close_btn" style="width: 142px;" href="javascript:;">{2}<\/a><\/div><\/div>',n,t,i);this.showAlert(r,600,null,null,!1,i,null,null)},setNumberOfRooms:function(i,r){var u,v,h,y,f,e,c,s,l,a,o;if(r==undefined&&(r=$(i.srcElement).val()),i.data!=undefined&&(i=i.data),u=parseInt(r,10),r=="four"){f='<p>To book 4 or more rooms please contact our Specialist Group Advisors who will be able to assist you.<\/p><p><strong>For less than 6 rooms:<\/strong><br>Call 0800 393 130<br><\/p><p><strong>For 6 rooms or more:<\/strong><br>Call 0844 387 6400*<br>Email <a href="mailto:groups@bestwestern.co.uk">groups@bestwestern.co.uk<\/a><\/p><p><strong>For corporate stays:<\/strong><br>Agents call 0844 387 6410*<br>Direct call 0844 387 6240*<\/p><p>Child rates are available upon request.<br><i>*Calls cost 7ppm plus your company&apos;s access charge<\/i><\/p>';this.showRoomsAlert("Group Booking",f,"OK");return}if(this.MultiRoom){if(v=this.SearchParams.get("RoomQuantity"),h=parseInt(v,10),u>h){this.SearchParams.set("RoomQuantity",r);y=this;this.CheckAvailability(this.SearchParams);this.FloaterItems.empty();this.set("FloaterTotal",String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),0));f=String.format("<p>As you originally looked for {0} rooms, we've updated your search to include {1} rooms.<\/p> <p>Please re-select your quantity.<\/p>",h,r);this.showRoomsAlert("Search Updated",f,"OK");return}if(u>this.Availability.MaxRoomsAllowed){f=String.format("<p>Due to limited availability at this hotel you can only book {0} of these rooms.<\/p>",this.Availability.MaxRoomsAllowed);this.showRoomsAlert("Rooms unavailable",f,"OK");return}}if(i.get("RoomOptions")!==undefined){if(r===undefined||isNaN(u))return i.RoomOptions.length.toString();if(e=i.get("RoomOptions"),e.length<u)while(e.length<u)c=new t.RoomOptions,c.Loading=!1,e.push(c);else if(e.length>u){for(s=new kendo.data.ObservableArray([]);s.length<u;)s.push(e[s.length]);i.RoomOptions=s}return i.set("RoomOptions",new kendo.data.ObservableArray(i.RoomOptions.toJSON())),i.get("hasRooms"),this.set("FloaterItems",this.GetFloaterItems()),l=isMobile?i:i.BookingOptions[0],a=l.parent().parent(),isMobile&&n.MultiRoom?n.Events.UpdatePrice(a,l):n.Events.RebuildBookingOptions(a),this.SearchParams.RoomQuantity===u.toString()&&u===1&&(o=i.get("RoomOptions[0]"),o.Adults===0&&o.Children===0&&(o.set("Adults",this.SearchParams.Adults),o.set("Children",this.SearchParams.Children),this.Events.AdultChildChange.apply(this,[{data:o}]))),t.addStateClassEvents(),i.RoomOptions.length.toString()}},GetRoomTypeImage:function(n){return n.ImageUrl===null?"/App_Themes/BestWestern/Images/no-image-270-270.jpg":n.ImageUrl},GetRoomTypeImageAlt:function(n){return n.ImageAlt&&n.ImageAlt!=null?n.ImageAlt:n.Title+" room image"},GetRoomTypeImageLarge:function(n){return n.ImageUrlLarge===null?"/App_Themes/BestWestern/Images/no-image-270-180.jpg":n.ImageUrlLarge},HaveMultipleRoomTypeImages:function(n){return this.GetRoomTypeImages(n).length>1},GetRoomTypeImages:function(n){return n.get("Images")&&n.get("Images").length>0?n.get("Images").map(function(n){return{ImageUrl:n.Thumbnails["160x160"].Url,Alt:n.Alt||"Room image",ImageUrlLarge:n.Thumbnails["270x180"].Url,ImageUrlVeryLarge:n.Thumbnails["600x450"].Url}}):{ImageUrl:"",Alt:"",ImageUrlLarge:"",ImageUrlVeryLarge:""}},getPriceForRoomType:function(n){for(var t=-1,i=0;i<n.length;i++)n[i].SelectedRatePlan!==null?t=t+n[i].SelectedRatePlan.BaseAmountBeforeTax:n[i].SelectedRate!==null&&(t=t+n[i].SelectedRate.Price);return t>=0?(t+1).toFixed(2):t},itemNumber:function(n){return n.parent().indexOf(n)+1},roomNumber:function(n){return String.format("Room {0}",this.itemNumber(n))},roomNumberDisplay:function(n){return this.itemNumber(n)===1?"display: block;":"display: none;"},roomNumberState:function(n){return this.itemNumber(n)===1?"lrg_room active":"lrg_room"},getLowestPricePerRoomMulti:function(n){var r=n.Price,t=n.RoomOptions,i,u;return t===undefined&&(t=n.RateOptions),t!=undefined&&t!==null&&t.length&&(i=t.filter(function(n){return n.get("SelectedRatePlan")!==null}),i.length&&(u=i.map(function(n){return n.SelectedRatePlan.Price}),r=u.reduce(function(n,t){return n+t}))),r},getSelectedRateComparisonPriceMulti:function(n){var i=n.Price,f=!1,r=n.RoomOptions,u,e,t;return r!==null&&r.length&&(u=r.filter(function(n){return n.SelectedRatePlan!==null}),u.length&&(e=u.map(function(n){var t=0,i=n.SelectedRatePlan.RewardsDiscountRate;return i==undefined&&(i=n.SelectedRatePlan.GatedRate),i!=undefined&&(t=i.ComparisonPrice),t&&t!==0||(t=n.SelectedRatePlan.Price),t}),i=e.reduce(function(n,t){return n+t}),f=!0)),n.SelectedRatePlan==null||f||(t=n.SelectedRatePlan.RewardsDiscountRate,t==undefined&&(t=n.SelectedRatePlan.GatedRate),t==undefined&&(t=n.SelectedRatePlan.RewardsPromoTextRate),t!=undefined&&(i=t.ComparisonPrice),i&&i!==0||(i=n.SelectedRatePlan.Price)),i},formatPackagePrice:function(n){var t=n.get("Price")||0;return String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),t.toFixed(2))},formatLowestPricePerRoom:function(n){var t=null;return t=n.LowestPricePerRoom!==undefined?n.get("LowestPricePerRoom"):n.parent().parent().get("LowestPricePerRoom"),String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),t.toFixed(2))},formatGatedLowestPricePerRoom:function(n){var i=this.agreedOrAuthenticated(n),t=null;return n.LowestPricePerRoom!==undefined?i?(t=n.get("LowestAnyPricePerRoom"),t<=0&&(t=n.get("LowestPricePerRoom"))):t=n.get("LowestPricePerRoom"):i?(t=n.parent().parent().get("LowestAnyPricePerRoom"),t<=0&&(t=n.parent().parent().get("LowestPricePerRoom"))):t=n.parent().parent().get("LowestPricePerRoom"),String.format("{0}{1}",this.get("Hotel.CurrencySymbol"),t.toFixed(2))},formatGatedRateDiscount:function(n){if(n.get("SelectedRatePlan")===null)return null;var t=n.get("SelectedRatePlan");return this.showRewardsDiscountRate(n)?String.format("{0}%",t.get("RewardsDiscountRate.Discount").toFixed(0)):this.showGatedRates(n)?String.format("{0}%",t.get("GatedRate.Discount").toFixed(0)):void 0},getPromoText:function(n){if(this.showRewardsDiscountRate(n)||this.showGatedRates(n))return"Get up to "+this.formatGatedRateDiscount(n)+" off with Rewards";if(this.showRewardsPromoTextRate(n)){var t=this.extractRatePlan(n);return t.PromoText+" with Rewards"}},hasPromoText:function(n){return this.showLoyaltyRates()===!0?!1:this.showRewardsDiscountRate(n)||this.showGatedRates(n)||this.showRewardsPromoTextRate(n)},initTooltip:function(n,t,i){var f,u,r;if(elem=$(n.target),f=kendo.template(t),u=f(i),isMobile)$(".tool_overlay_alt").html(u),infoToolTip();else{r=$(u).appendTo("body");r.show().css({top:elem.offset().top-r.height()-20,left:elem.offset().left-r.outerWidth()/2+elem.outerWidth()/2});elem.on("mouseleave",function(){r.remove()})}},trimRatePlanTitle:function(n){var t=n.Title,i=n.get("SelectedRatePlan.RewardsPromoTextRate"),r;return i!==null&&i!==undefined&&(r=String.format("{0}%",i.Discount.toFixed(0)),t=n.Title+" - Save  "+r),t.length>120&&this.IsInternational()&&(t=t.substring(0,120)+"..."),t},getLinkedRate:function(n){var i=n.get("SelectedRatePlan"),t=n.get("SelectedRatePlan.RewardsDiscountRate");return t==undefined&&(t=n.get("SelectedRatePlan.RewardsPromoTextRate")),t==undefined&&(t=n.get("SelectedRatePlan.GatedRate")),t},getRewardsLinkedRate:function(n){var i=n.get("SelectedRatePlan"),t=n.get("SelectedRatePlan.RewardsDiscountRate");return t==undefined&&(t=n.get("SelectedRatePlan.RewardsPromoTextRate")),t},trimRatePlanDescription:function(n){var t=n.Description;return this.IsInternational()&&(n.Title.length>120?t="":n.Description.length>120&&(t=n.Description.substring(0,120)+"...")),t},showFullRatePlanLink:function(n){return this.IsInternational()&&(n.get("Description").length>120||n.get("Title").length>120)?!0:!1},showFullRatePlanDescription:function(n){var u=n.target,t=$(n.target).parent().parent(),f=$(".trimmedDescription",t),i=$(".fullDescription",t),e=$(".trimmedTitle",t),r=$(".fullTitle",t),o=$(i).is(":visible")||$(r).is(":visible");o?(i.hide(),f.show(),r.hide(),e.show(),$(u).text("Read more")):(i.show(),f.hide(),r.show(),e.hide(),$(u).text("Read less"))},showGatedRates:function(n){var t=this.extractRatePlan(n),i=!this.agreedOrAuthenticated();return t.GatedRate!=null&&t.GatedRate.Active&&i},getToolTip:function(t){var i=this.extractRatePlan(t.data);switch(i.RateKind){case"PromoTextRate":n.initTooltip(t,$("#tooltip").html(),{toolTipTitle:"Rewards Exclusive Rate",toolTipBody:"<p>To book this rate you just need to become a Rewards member or enter your Rewards number. Joining is free and easy - just one click during your booking.<\/p>"});break;case"RewardsDiscount":n.initTooltip(t,$("#tooltip").html(),{toolTipTitle:"Rewards Exclusive Rate",toolTipBody:String.format("<p>Discount applied off the hotel's {0}<\/p>",i.parent().Title+" "+i.Title)+"<p>To book this rate you just need to become a Rewards member or enter your Rewards number. Joining is free and easy - just one click during your booking.<\/p>"})}},buildBookingOptions:function(n,t,i,r){var u=[n.LowestOverallRate,n.LowestRewardsRate,n.LowestComparablePrice].filter(function(n){return n>0}).sort(function(n,t){return n-t})[0],f=new BookingOptionBuilder(this,u,t,i,r);return f.getBookingOptions()},gatedNoComparison:function(n){var t=this.extractRatePlan(n);return t.IsGated&&!(t.GatedRate!=null&&t.GatedRate.Active)},showRewardsDiscountRate:function(n){var t=this.extractRatePlan(n),i=!this.MultiRoom||this.MultiRoom&&this.getLowestPricePerRoomMulti(n)!==this.getSelectedRateComparisonPriceMulti(n);return i&&t.RewardsDiscountRate!=null&&t.RewardsDiscountRate.Active&&!t.HasComparisonPrice},showRewardsPromoTextRate:function(n){var t=this.extractRatePlan(n),i=!this.MultiRoom||this.MultiRoom&&this.getLowestPricePerRoomMulti(n)!==this.getSelectedRateComparisonPriceMulti(n);return i&&t.RewardsPromoTextRate!=null&&t.RewardsPromoTextRate.Active},extractRatePlan:function(n){var r=n.get("SelectedRatePlan"),t,i;return r!=undefined?r:(t=n.get("RoomOptions"),t!=undefined&&t.length>0&&t[0].SelectedRatePlan!=null)?t[0].SelectedRatePlan:(i=n.get("BookingCodes"),i!=undefined&&i.length>0)?i[0]:null},agreedOrAuthenticated:function(){return n.get("AgreeRewardsSignup")||BestWestern.IsAuthenticated()},isFloaterAgreeRewards:function(){return this.get("FloaterGated")&&!this.get("AgreeRewardsSignup")},hasFloaterPercentage:function(){var n=this.get("FloaterGatedPercent");return n!=null&&n!=undefined&&!isNaN(n)&&n>0},displayUsps:function(n){var t=n.get("SelectedRatePlan"),r=n.get("RoomOptions"),i;return t==null&&r.length>0?!0:t==null?!1:(i=n.get("SelectedRatePlan.Usps"),i!=undefined)?n.get("SelectedRatePlan.Usps").length>0:!1},getUspsOfType:function(n,t,i){var r;return n==null?[]:(r=n.get(t),r==null)?[]:$.makeArray(r.filter(function(n){return n.Type==i}))},getSundayStopoverUsps:function(n){return this.getUspsOfType(n,"ssusps","SundayStopover")},getUsps:function(n){var t=n.get("SelectedRatePlan");return this.getUspsOfType(t,"Usps","Standard")},getUspsForRewardsDiscount:function(n){var i=n.get("SelectedRatePlan"),t;return i==null?[]:(t=this.getLinkedRate(n),t!=undefined)?t.get("Usps"):n.get("SelectedRatePlan.Usps")},isLowestRate:function(n){return[n.Price,n.GatedRateComparisonPrice].filter(function(n){return n>0}).sort(function(n,t){return n-t})[0]<=[this.Availability.LowestOverallRate,this.Availability.LowestRewardsRate,this.Availability.LowestComparablePrice].filter(function(n){return n>0}).sort(function(n,t){return n-t})[0]},isLowestOrCampaign:function(n){return this.isLowestRate(n)||n.get("SelectedRatePlan.RateKind")=="PayWithPoints"},formatPriceDifference:function(n){return typeof n.PriceDifference=="undefined"?String.format("{0}{1}",this.Hotel.CurrencySymbol,n.get("Price").toFixed(2)):String.format("+{0}{1}",this.Hotel.CurrencySymbol,n.get("PriceDifference").toFixed(2))},formatUpsellPriceDifference:function(n){var t=this.getSelectedRate(n),i=n.RewardsDiscountRate;return t&&i&&i.ComparisonPrice>0&&(this.AgreeRewardsSignup||BestWestern.IsAuthenticated())&&t.RewardsDiscountRate&&t.RewardsDiscountRate.ComparisonPrice>0?String.format("{0}{1}",this.Hotel.CurrencySymbol,(i.ComparisonPrice-t.RewardsDiscountRate.ComparisonPrice).toFixed(2)):this.formatPriceDifference(n)},getSelectedRate:function(n){return n.parent().parent().SelectedRatePlan?n.parent().parent().SelectedRatePlan:null},slugify:function(n){return n.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},RoomTypeSidebarClass:function(n){return String.format("room-type-block--side-bar sidebar-{0} sidebar-{1}",n.RoomTypeClassName,n.Standard==null?"":this.slugify(n.Standard))},rtGetSelectionClassFood:function(n,t){var i="rt_selection";return n!==undefined&&n===t&&(i=i+" selected"),i},rtSelectionClassFood:function(n){var t=n.parent().parent(),i=t.SelectedRatePlan!==null&&t.SelectedRatePlan!==undefined?t.SelectedRatePlan.BookingCode:null,r=n.BookingCode===undefined?n.Code:n.BookingCode;return this.rtGetSelectionClassFood(i,r)},FloaterBookNowClassVariant:function(){for(var t,l,r,h,e,u,o,s,f,c,i=this.get("Availability.RoomTypes"),n=0;n<i.length;n++)for(t=0;t<i[n].RateOptions.length;t++)for(l=i[n].RateOptions[t].Title,r=0;r<i[n].RateOptions[t].RoomOptions.length;r++)if(h=i[n].RateOptions[t].RoomOptions[r],h.SelectedRatePlan!==null)return"button no-chevron tertiary";for(e=this.get("Availability.Packages.Items"),u=0;u<e.length;u++)for(o=e[u],n=0;n<o.RoomTypes.length;n++)for(s=o.RoomTypes[n],f=0;f<s.RoomOptions.length;f++)if(c=s.RoomOptions[f],c.SelectedRatePlan!==null)return"button no-chevron tertiary";return"button no-chevron disabled"},Book:function(n,i,r,u){var e,f,o;if(i!==null&&i!==undefined){try{GoalTracking.TrackPDPBookNowClickedGoal()}catch{}e=this.SearchParams||this.parent().SearchParams;f=new BestWestern.SearchModel;f.Adults=e.Adults;f.Children=e.Children;f.Plan=i;f.RoomQuantity=1;f.CheckIn=e.CheckIn;f.CheckOut=e.CheckOut;r&&u&&(f.CheckIn=r,f.CheckOut=u);f.Term=e.Term;f.PromoCode=e.PromoCode;f.Ages=e.Ages;f.Affiliate=t.get_affiliate();o=BestWestern.Search.BuildBookingUrl(f);n.preventDefault(!0);window.location=o}},BannerLowRateClass:function(){var n="price",t=this.get("Availability.LowestComparablePrice"),i;return t==null?n:(i=this.get("Hotel.CurrencySymbol"),(t.toFixed(2)+i).length>10&&(n=n+" price-long"),n)},BannerHighRate:function(){var n=this.get("Availability.HighestComparablePrice");return n==null?"":String.format("{0}<span>{1}<\/span>",this.get("Hotel.CurrencySymbol"),n.toFixed(2))},BannerLowRate:function(){var n=this.BannerLowRateAmount();return n==""?"":String.format("{0}<span>{1}<\/span>",this.get("Hotel.CurrencySymbol"),n)},BannerLowPointsAmount:function(){var n=this.get("Availability.LowestPayWithPointsRatePoints");return n&&n>0?n.toLocaleString():""},BannerLowPointsPriceAmount:function(){var t=this.get("Availability.LowestPayWithPointsRatePoints"),n;return t&&t>0&&(n=this.get("Availability.LowestPayWithPointsRatePrice"),n&&n>0)?n:null},BannerLowRateAmount:function(){var n=this.get("Availability.LowestComparablePrice");return(this.agreedOrAuthenticated()&&(n=[this.get("Availability.LowestOverallPrice"),this.get("Availability.LowestComparablePrice"),this.get("Availability.LowestRewardsRate")].filter(function(n){return n>0}).sort(function(n,t){return n-t})[0]),n==null)?"":String.format("{0}",n.toFixed(2))},BannerTotalNights:function(){var r,u;try{var i=parseInt(this.get("Availability.ComparableNights"),10),t=this.BannerLowPointsPriceAmount(),n=[];return t&&t>0?(r=String.format("+ {0}{1} price",this.Hotel.CurrencySymbol,t),n.push(r)):n.push("Price"),u=String.format("for <span>{0}<span> night{1}",i,i>1?"s":null),n.push(u),n.join(" ")}catch(f){}return},BannerTotalNightsMobile:function(){try{var n=parseInt(this.get("Availability.ComparableNights"),10);if(!isNaN(n))return String.format("Price for<br> <span>{0}<span> night{1}",n,n>1?"s":null)}catch(t){}return},HandleDirectConnectDown:function(n){this.set("DirectConnectDown",!0);this.set("DirectConnectDownMessage",n)},DirectConnectDown:!1,DirectConnectDownMessage:"",SendToBwCom:function(){var t="http://book.bestwestern.com/bestwestern/priceAvail.do?sob=A163&propertyCode=",n,i,r;t+=this.Hotel.PropertyId;n=getCookieValue("iata");n!==""&&n!==undefined&&n!==null&&(t+="&iata="+n);this.SearchParams.OfferType==="corpid"&&this.SearchParams.OfferId!==""&&(t+="&corpid="+this.SearchParams.OfferId);i=kendo.toString(kendo.parseDate(this.SearchParams.CheckIn,"yyyy-MM-dd"),"MM/dd/yyyy");r=kendo.toString(kendo.parseDate(this.SearchParams.CheckOut,"yyyy-MM-dd"),"MM/dd/yyyy");redirectPost(t,{arrDate:i,depDate:r,totalRooms:this.SearchParams.RoomQuantity,totalAdultsForAllRoom:0,totalAdultsForAllRoom:0})},getRoomTitle:function(n){return this.IsInternational()?n.get("Standard"):n.get("Title")},isLoggedIn:function(){return BestWestern.IsAuthenticated()},hideRewardsAddressCheckbox:function(){return this.showLoyaltyRates()===!0?!0:BestWestern.IsAuthenticated()},showLoyaltyRates:function(){return this.get("ShowLoyaltyRates")}}),e=$(".variantc-float--wrap");e&&kendo.bind(e,n);this.dataBind(n);this.autoScrollPage()},addStateClassEvents:function(){$(".fakeCustomSelect").click(function(){$(this).next(".customSelect").addClass("customSelectOpen")});$(".fakeCustomSelect").focus(function(){$(this).next(".customSelect").addClass("customSelectFocus")}).on("blur",function(){var n=$(this).next(".customSelect");n.removeClass("customSelectOpen");n.removeClass("customSelectFocus")})},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRatesV2.callBaseMethod(this,"dispose")},dataBind:function(n){console.log("viewModel",n);this.set_viewModel(n);kendo.bind(this.get_element(),this.get_viewModel());this.get_viewModel().CheckAvailability()},get_searchParams:function(){var n=window.location.pathname.replace(this.get_basePath(),"");return BestWestern.Search.GetSearchModel(n)},autoScrollPage:function(){var u=window.location.href,f=new RegExp("jumpTo=((?:[a-z]|-)*)"),t=f.exec(u),n,r,i,e;if(t&&t.length>=2&&t[1]){n=null;switch(t[1]){case"dining-and-bars":n="#head_dining_bars";break;case"golf":n="#head_golf";break;case"spa-and-leisure":n="#head_spa_leisure";break;case"weddings":n="#head_weddings";break;case"location-and-attractions":n="#location_attractions";break;case"meetings-conferences-events":n="#head_meeting_conference"}if(n){if(r=-1,i=$(n),i.length==0)return;e=$(n).next();setTimeout(function(){var t,u,f;i.addClass("active");t=$(n)[0].getElementsByClassName("absolute-content");u=$(n)[0].getElementsByClassName("aside-image-expander__greater");t!=null&&t.length>0&&(t[0].style.display="block");u!=null&&u.length>0&&(u[0].style.display="block");isMobile||equaliseHeights();f=i.offset().top;f-=window.pageYOffset;isMobile||(f-=r);window.scrollBy(0,f)},0)}}},hasAutoScroll:function(){var t=window.location.href,i=new RegExp("jumpTo=(.*)"),n=i.exec(t);return n&&n.length>=2&&n[1]},initializeFloaterDock:function(){function c(n,t){var i=(new Date).getTime();return function(){var r=(new Date).getTime();r-i>=n&&(i=r,t.apply(null,arguments))}}var s=function(){var n=$(".gen_overlay"),i=$(window).scrollTop()+$(window).height(),t=n.offset().top+n.height();t>i&&$("html, body").animate({scrollTop:t-$(window).height()})},h=function(){var n=$(".gen_overlay"),t=$(window).scrollTop(),i=n.offset().top;i-t<0&&$("html, body").animate({scrollTop:n.offset().top})},i=350;typeof WURFL!="undefined"&&WURFL.form_factor!=="Desktop"&&(i=0);$(document).on("mouseenter",".lrg_wrp",function(){var n=$(this),t=$("#lrg_overlay").html();n.is(".pos-top-left")?$(t).appendTo(n).css({bottom:"100%",right:"50%",marginRight:"-"+n.width()/2+"px"}).delay(i).fadeIn(150,function(){h()}):n.is(".pos-top")?$(t).appendTo(n).css({bottom:"100%",left:"50%",marginLeft:"-"+$(".gen_overlay").width()/2+"px"}).delay(i).fadeIn(150,function(){h()}):n.is(".pos-bottom-left")?$(t).appendTo(n).css({top:"100%",right:"50%",marginRight:"-"+n.width()/2+"px"}).delay(i).fadeIn(150,function(){s()}):$(t).appendTo(n).css({top:"100%",left:"50%",marginLeft:"-"+$(".gen_overlay").width()/2+"px"}).delay(i).fadeIn(150,function(){s()})}).on("mouseleave",".lrg_wrp",function(){$(".gen_overlay").stop(!0,!0).fadeOut(150,function(){$(this).remove()})});var r=$(window),u=$("#low_rate_track"),n=$("#low_rate_dock"),f=$("#hd_header_wrp"),t=$(".rate-wrap"),e,o=!0;$(window).on("scroll",c(25,function(){u.length>0&&t.length>0&&(e={top:r.scrollTop()-u.offset().top+(f.height()+10)+"px"},r.scrollTop()>=u.offset().top&&r.scrollTop()+n.height()+(f.height()+10)<=t.offset().top+t.height()?o?n.css(e):n.stop(!0,!1).animate(e):r.scrollTop()<u.offset().top?o?n.css({top:0}):n.stop(!0,!1).animate({top:0}):r.scrollTop()+n.height()+(f.height()+10)>t.offset().top+t.height()&&(o?n.css({top:t.height()-n.height()}):n.stop(!0,!1).animate({top:t.height()-n.height()})))}))},initHotelMap:function(n){var t,i,e=$("[data-hotel-lat]").attr("data-hotel-lat"),o=$("[data-hotel-long]").attr("data-hotel-long"),r=new google.maps.LatLng(e,o),u,f,s;i=n?!0:!1;u={zoom:17,center:r,scrollwheel:i};t=new google.maps.Map(document.getElementById("hotel_map_element"),u);f="/App_Themes/BestWesternX2/Images/x2marker.png";s=new google.maps.Marker({position:r,map:t,icon:f});google.maps.event.addListenerOnce(t,"idle",function(){$("#hd_map").addClass("state_loaded")})},removeNativeChoices:function(){$(".native-choices").fadeOut(function(){$(this).remove();$("body").removeClass("noscroll")})},get_viewModel:function(){return this._viewModel},set_viewModel:function(n){this._viewModel=n},get_internationalHotel:function(){return this._internationalHotel},set_internationalHotel:function(n){this._internationalHotel=n},get_hotelPropertyId:function(){return this._hotelPropertyId},set_hotelPropertyId:function(n){this._hotelPropertyId=n},get_hotelTitle:function(){return this._hotelTitle},set_hotelTitle:function(n){this._hotelTitle=n},get_hotelIsCoreBranded:function(){return this._hotelIsCoreBranded},set_hotelIsCoreBranded:function(n){this._hotelIsCoreBranded=n},get_qitImageUrl:function(){return this._qitImageUrl},set_qitImageUrl:function(n){this._qitImageUrl=n},get_qitImageAlt:function(){return this._qitImageAlt},set_qitImageAlt:function(n){this._qitImageAlt=n},get_hotelIsPilot:function(){return this._hotelIsPilot},set_hotelIsPilot:function(n){this._hotelIsPilot=n},get_basePath:function(){return this._basePath},set_basePath:function(n){this._basePath=n},get_hotelSearchParams:function(){return this._hotelSearchParams},get_simpleSearchSingle:function(){return this._simpleSearchSingle},set_simpleSearchSingle:function(n){this._simpleSearchSingle=n},get_simpleSearchMulti:function(){return this._simpleSearchMulti},set_simpleSearchMulti:function(n){this._simpleSearchMulti=n},get_siteKey:function(){return this._siteKey},set_siteKey:function(n){this._siteKey=n},get_loginRequiresRecaptcha:function(){return this._loginRequiresRecaptcha},set_loginRequiresRecaptcha:function(n){this._loginRequiresRecaptcha=n},get_trafficSourceShowRewards:function(){return this._trafficSourceShowRewards},set_trafficSourceShowRewards:function(n){this._trafficSourceShowRewards=n},get_affiliate:function(){return this._affiliate},set_affiliate:function(n){this._affiliate=n},get_disableRewards:function(){return this._disableRewards},set_disableRewards:function(n){this._disableRewards=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRatesV2.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRatesV2",Sys.UI.Control);var closeRateSelector=function(){},closeRateSelector=function(){var n=$(".native-choice").length;isMobile&&$(".native-choice").hasClass("selected")&&$(".mealSelect").hasClass("mealSelectNow")&&n==1&&$(".close-native-select + .native-choice").click();$(".native-choices").fadeOut(function(){$(this).remove();$("body").removeClass("noscroll")});isMobile&&$(".sro-one").css("display")=="block"&&$(".sro-one + div").css("display")=="block"&&$(".sro-one").css("display","none");setTimeout(function(){$(".mealSelect").removeClass("mealSelectNow")},500)};(function(){"use strict";var t=!1,n=[],i=function(){for(var t=0;t<n.length;t++)n[t]()};BestWestern.RoomsAndRatesSuccess=function(r,u){u?(i(),t=!0):t===!0?r():n.push(r)};BestWestern.MatchVariantCols=function(){var n=$(".varient-match-height-left");n.removeAttr("style").height($(".varient-match-height-right").height())}})();
function updateIdReward(n){var t=$(n).val(),i=t.length;i>=15&&dataLayer.push({userId:t,event:"authentication"})}Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");var _conv_product_name="",_conv_product_price="";Spinbox.Clients.BestWestern.Frontend.Web.UI.BookingConfirmation=function(n){Spinbox.Clients.BestWestern.Frontend.Web.UI.BookingConfirmation.initializeBase(this,[n]);this._reservationId=null;this._verification=null;this._splitTestName=null;this._viewModel=null;this._affiliate=null};Spinbox.Clients.BestWestern.Frontend.Web.UI.BookingConfirmation.prototype={initialize:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.BookingConfirmation.callBaseMethod(this,"initialize");var n=this;this._viewModel=kendo.observable({BookingDetails:null,ReservationId:n.get_reservationId(),Status:"Retrieving reservation",IsLoading:!0,ShowError:!1,FailedToCancel:"",SingleBookingPdpLink:"",SingleBookingPdpBookText:"",CreatedPassword:"",ShowPasswordEntry:!0,GooglePlusShareUrl:function(){return String.format("//plus.google.com/share?url={0}","https://www.bestwestern.co.uk/hotels/"+this.get("BookingDetails.Hotel.Url"))},ShareUrl:function(){return String.format("{0}","https://www.bestwestern.co.uk/hotels/"+this.get("BookingDetails.Hotel.Url"))},isEmailSplitB:function(){return n.get_splitTestName()==="emailSplitB"},createAccount:function(){var i=String.format("/restapi/booking/createaccount/{0}?V={1}&A={2}",this.get("ReservationId"),n.get_verification(),n.get_affiliate()),t=this;return $.ajax({url:i,data:JSON.stringify({AgentName:BestWestern.AgentName()}),type:"POST",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(n){n.Status==="OK"?t.set("BookingDetails.BookingData.RewardsCreated",!0):t.set("BookingDetails.BookingData.RewardsCreatedError",n.ErrorMessage)},error:function(n){t.set("BookingDetails.BookingData.RewardsCreatedError",BestWestern.GetErrorMessage(n))}}),!1},CancellationReferences:null,LocalCheckInDate:function(){if(this.get("BookingDetails")!==null&&this.get("BookingDetails.BookingData")!==null)return this.get("BookingDetails.BookingData.CheckIn").toDateObject()},LocalCheckOutDate:function(){if(this.get("BookingDetails")!==null&&this.get("BookingDetails.BookingData")!==null)return this.get("BookingDetails.BookingData.CheckOut").toDateObject()},isCancelled:function(){var t=this.get("BookingDetails.LiveReservation.Status")==="Cancelled",i=this.get("BookingDetails.BookingData.CheckoutRooms"),n;if(i!==undefined)for(n=0;n<i.length;n++)t=t&&i[n].Status==="Cancelled";return t},hasDetails:function(){return this.get("BookingDetails")!==null},isAuthenticated:function(){return BestWestern.IsAuthenticated()},hasPartialCancellation:function(){return this.get("CancellationReferences")!==""&&this.get("CancellationReferences")!==null},itemIndex:function(n){return n.parent().indexOf(n)+1},mlosText:function(){var n=this.get("BookingDetails.LiveReservation.MinimumLengthOfStay");return String.format("A minimum stay of {0} night{1} is required for your requested check-in date. Please note in case changes are needed on your reservation.",n,n>1?"s":null)},getRooms:function(){return this.hasDetails()?this.get("BookingDetails.BookingData.CheckoutRooms"):[]},getSellMessages:function(){return this.hasDetails()?this.get("BookingDetails.Hotel.SellMessages"):[]},isParkingAvailable:function(){return this.hasDetails()?this.BookingDetails.Hotel.HasFreeParking||this.BookingDetails.Hotel.HasChargedParking||this.BookingDetails.Hotel.HasParkingNearby:!1},bookingRefs:function(){return this.hasDetails()?this.get("BookingDetails.BookingData.BookingReferences"):[]},nonCancelledbookingRefsFormatted:function(){var n,i,t;if(!this.hasDetails())return"";for(n="",i=this.get("BookingDetails.BookingData.CheckoutRooms"),t=0;t<i.length;t++)i[t].Status!=="Cancelled"&&(n!==""&&(n+=" / "),n+=i[t].ReservationId);return n},bookingRefsFormatted:function(){var n,i,t;if(!this.hasDetails())return"";for(n="",i=this.get("BookingDetails.BookingData.CheckoutRooms"),t=0;t<i.length;t++)i[t].Status==="Cancelled"&&(n!==""&&(n+=" / "),n+=i[t].ReservationId);return n},cancellationRefsFormatted:function(){var t,i,n;if(!this.hasDetails())return"";for(t="",i=this.get("BookingDetails.BookingData.CheckoutRooms"),n=0;n<i.length;n++)i[n].CancellationId!==undefined&&i[n].CancellationId!==null&&(t!==""&&(t+=" / "),t+=i[n].CancellationId);return t},heroImageUrl:function(){return!this.hasDetails()||this.BookingDetails.Hotel.HeroImageUrl==null||this.BookingDetails.Hotel.HeroImageUrl==undefined?"none":this.BookingDetails.Hotel.HeroImageUrl.length>0?"url("+this.BookingDetails.Hotel.HeroImageUrl+")":"none"},mobileHeroImageUrl:function(){return!this.hasDetails()||this.BookingDetails.Hotel.MobileHero==null||this.BookingDetails.Hotel.MobileHero===undefined?"none":this.BookingDetails.Hotel.MobileHero.length>0?"url("+this.BookingDetails.Hotel.MobileHero+")":"none"},isRoomCancelled:function(n){return n.get("Status")=="Cancelled"},isRoomCancelling:function(n){return n.get("Status")=="Cancelling"},cancelRoom:function(t){var i=this,r=t.data,u=String.format("/restapi/booking/cancel-room/{0}?v={1}",r.get("ReservationId"),n.get_verification());r.set("Status","Cancelling");$.ajax({url:u,type:"POST",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(n){if(i.set("IsLoading",!1),n.Status==="OK"){if(r.set("Status","Cancelled"),typeof dataLayer!="undefined"){var t={ecommerce:{refund:{actionField:{id:i.ReservationId}}}};dataLayer.push(t);window.console&&console.log(t)}}else BestWestern.ShowMessage("Failed to cancel the reservation")},error:function(){i.set("IsLoading",!1);BestWestern.ShowMessage("Failed to cancel the reservation")}})},cancelReservation:function(){var n=this,t=String.format("/restapi/booking/cancel/{0}",this.get("ReservationId"));n.set("ShowError",!1);n.set("IsLoading",!0);n.set("Status","Cancelling reservation...");$.ajax({url:t,type:"POST",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(t){var r,i;if(n.set("IsLoading",!1),t.Status==="OK")for(n.set("BookingDetails.LiveReservation.Status","Cancelled"),n.set("CancellationReferences",t.CancellationReferences),n.set("BookingDetails.BookingData.PartiallyCancelled",!1),r=n.get("BookingDetails.BookingData.CheckoutRooms"),i=0;i<r.length;i++)n.set("BookingDetails.BookingData.CheckoutRooms["+i+"].Status","Cancelled");else n.set("ShowError",!0),n.set("CancellationReferences",t.CancellationReferences),n.set("Status",t.Error),n.set("FailedToCancel",t.FailedReference);window.scrollTo(0,0)},error:function(){n.set("IsLoading",!1);BestWestern.ShowMessage("Failed to cancel the reservation")}})},viewMap:function(){var n=this.get("BookingDetails.Hotel.Address.Longitude"),t=this.get("BookingDetails.Hotel.Address.Latitude");return"https://maps.google.com?saddr=Current+Location&daddr="+t+","+n},getEmailLink:function(){return"mailto:"+this.get("BookingDetails.Hotel.Email")},hasTaxAmount:function(){return this.get("BookingDetails.BookingData.TotalTax")>0},isCancellable:function(n){var t=n.parent().parent().get("CheckIn"),i=moment(t,"YYYY-MM-DD").toDate();return new Date>i?!1:n.CancellationPolicy!=="Non Cancellable: This rate cannot be cancelled and is non-amendable and non-refundable."},getTotalCostFormatted:function(){var i=this.get("BookingDetails.BookingData.CheckoutRooms"),n=0,t,r,u;if(i)for(t=0;t<i.length;t++){if(r=i[t].get("CheckoutProducts"),r)for(u=0;u<r.length;u++)n=n+r[u].get("TotalValue");n=n+i[t].get("RoomPrice")}return n},getProducts:function(n){return this.BookingDetails.BookingData.TotalPriceSymbol+n.Price.toFixed(2)},getProductUnitType:function(n){for(var t=0;t<this.BookingDetails.Hotel.Products.length;t++)if(this.BookingDetails.Hotel.Products[t].Code===n.Code)return this.BookingDetails.Hotel.Products[t].UnitType;return""},getVoucherAmount:function(){var i=this.get("BookingDetails.BookingData.CheckoutRooms"),t=0,r,n;if(i==undefined)return 0;for(n=0;n<i.length;n++)i[n].VoucherAmount>0&&(t=t+i[n].VoucherAmount);if(t>0)for(r=document.getElementsByClassName("voucherContent"),n=0;n<r.length;n++)r[n].hidden=!1;return t>0?t.toFixed(2):0},getTotalCostMinusVoucher:function(){var n=this.getTotalCostFormatted(),t=this.getVoucherAmount(),i=n>t?n-t:0;return i.toFixed(2)},getRoomAmountRemainingForVoucher:function(n){if(n.VoucherAmount!=null&&n.VoucherAmount!=undefined&&n.VoucherAmount!=0){var t=n.RoomPrice-n.VoucherAmount;return String.format("Amount to pay: {0}{1}",n.RoomPriceSymbol,t.toFixed(2))}return null},showVoucher:function(n){return n.VoucherAmount!=null&&n.VoucherAmount!=undefined&&n.VoucherAmount!=0}});kendo.bind(this.get_element(),this._viewModel);this.retrieveBooking()},retrieveBooking:function(){var n=this,t=String.format("/restapi/booking/reservation/{0}?v={1}",this.get_reservationId(),this.get_verification());this.get_affiliate()&&(t=t+"&a="+this.get_affiliate());n._viewModel.set("IsLoading",!0);$.ajax({url:t,type:"GET",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(t){var v,i,o,f,u,c,b,k,s,r,l,a;if(n._viewModel.set("IsLoading",!1),BestWestern.StorageManager.Delete("voucher"),t.BookingData.RewardsId==null||t.BookingData.RewardsId===""?(t.BookingData.RewardsCreated=!1,t.BookingData.ShouldCreateRewards=!0):(t.BookingData.RewardsCreated=!0,t.BookingData.ShouldCreateRewards=!1),n._viewModel.set("BookingDetails",t),t===null){n._viewModel.set("Status","Unable to retrieve reservation details.");return}if(n._viewModel.get("BookingDetails.Hotel.IsBWPremierCollectionHotel")===!0&&$("body").addClass("bw-prem-collection"),typeof singleBooking!=typeof undefined){var tt=window.location.hostname,it=t.Hotel.Title.replace(/ /g,"-"),e="https://"+tt+"/room-select/"+it+"-"+t.Hotel.PropertyId,v="Book Again";(t.Hotel.Website!==null||t.Hotel.Website.length!==0)&&(e=t.Hotel.Website,e.indexOf("https://")===-1&&(e="https://"+e),v="Back to Hotel Website");n._viewModel.set("SingleBookingPdpLink",e);n._viewModel.set("SingleBookingPdpBookText",v)}if(BestWestern.ConfirmationTracking()){i=t.Hotel;let e=t.BookingData.VoucherAmount;if(e=typeof e!=typeof undefined&&e!==null?e:0,typeof dataLayer!="undefined"&&typeof exception!="undefined"){var y=[],p=[],w=t.BookingData.CheckoutRooms;for(r=0;r<w.length;r++)o=w[r],y.push({sku:i.PropertyId,name:i.Title,price:o.RoomPrice,quantity:1}),f="",i!==undefined&&(i.Address.Street!==""&&i.Address.Street!==null?f+=i.Address.Street:"",i.Address.AddressLine2!==""&&i.Address.AddressLine2!==null?f+=", "+i.Address.AddressLine2:"",i.Address.City!==""&&i.Address.City!==null?f+=", "+i.Address.City:"",i.Address.Zip!==""&&i.Address.Zip!==null?f+=", "+i.Address.Zip:""),p.push({name:i.Title,id:i.PropertyId,price:o.RoomPrice,brand:f,category:o.RoomTitle,variant:t.BookingData.Duration+" Night(s)",quantity:1,coupon:e>0?t.BookingData.VoucherCode:null});for(c=t.BookingData.BookingReferences,r=0;r<c.length;r++)u=c.join("|");dataLayer.push({hotelId:t.Hotel.PropertyId,transactionId:u,checkInDate:t.BookingData.CheckIn,checkOutDate:t.BookingData.CheckOut,dateFormat:"%Y-%m-%d",adults:t.BookingData.Adults,children:t.BookingData.Children,length:t.BookingData.Duration,rooms:t.BookingData.Rooms,totalValue:t.BookingData.TotalPrice-e,base_price:(t.BookingData.TotalPrice-t.BookingData.TotalTax).toFixed(2),random_number:parseInt(Math.random()*1e6),transactionAffiliation:"Best Western",transactionTotal:t.BookingData.TotalPrice-e,transactionTax:t.BookingData.TotalTax,currencyCode:t.LiveReservation!=null?t.LiveReservation.CurrencyCode:t.BookingData.TotalPriceCode,transactionShipping:0,transactionProducts:y,hotelIdList:t.Hotel.PropertyId,region:t.Hotel.Address.City,city:t.Hotel.Address.City,country:t.Hotel.Address.CountryName});b={ecommerce:{currencyCode:t.LiveReservation!=null?t.LiveReservation.CurrencyCode:t.BookingData.TotalPriceCode,purchase:{actionField:{id:u,affiliation:"Best Western",revenue:t.BookingData.TotalPrice-e,tax:t.BookingData.TotalTax,shipping:0,coupon:e>0?t.BookingData.VoucherCode:null},products:p}}};dataLayer.push(b);var rt={currency:t.LiveReservation!=null?t.LiveReservation.CurrencyCode:t.BookingData.TotalPriceCode,transaction_id:u,...(e>0?{coupon:t.BookingData.VoucherCode}:null),value:t.BookingData.TotalPrice-e,items:[{item_id:t.Hotel.PropertyId,item_name:t.Hotel.Title,...(e>0?{discount:e}:null),index:0,price:t.BookingData.TotalPrice-e,quantity:1}]},ut={event:"purchase",order_value:t.BookingData.TotalPrice-e,order_id:u,enhanced_conversion_data:{email:t.LiveReservation.Email}},ft={...rt,...ut};if(dataLayer.push(ft),dataLayer.push({event:"form_submit_enhance",enhanced_conversion_data:{email:t.LiveReservation.Email,phone_number:BestWestern.StorageManager.GetCookie("UserTel")}}),BestWestern.StorageManager.PutCookie("UserTel",null,7),typeof singleBooking!=typeof undefined&&typeof dataLayer!=typeof undefined){var et=window.location.host.indexOf("www.bestwestern.co.uk")!==-1?"Live":"Dev",ot=i.Title,st=t.Hotel.PropertyId,ht={event:"gtm.js",Environment:et,HotelName:ot,PropertyNumber:st};window.dataLayer.push(ht)}typeof initGtm!="undefined"&&initGtm();typeof initFBE_GTM!="undefined"&&initFBE_GTM();dataLayer.push({event:"dataLayerUpdated"})}_conv_product_name=i.Title;_conv_product_price=t.BookingData.TotalPrice.toString(),function(n,t){var i=n.createElement(t),r=n.getElementsByTagName(t)[0];i.src="https://cdn-4.convertexperiments.com/js/10041633-10041866.js";r.parentNode.insertBefore(i,r)}(document,"script");window._conv_q=window._conv_q||[];_conv_q.push(["pushRevenue",_conv_product_price,"products_cnt","1"]);k=setInterval(function(){var e,o,r,f,s;if(typeof Cookiebot!=typeof undefined){if(Cookiebot.consent.marketing){if(BestWestern.StorageManager.GetCookie("iata")!=undefined&&BestWestern.StorageManager.GetCookie("iata").indexOf("00223916")!==-1&&$("#trivagoDynamic").length){var h=t.Hotel.PropertyId,c=t.BookingData.CheckIn,l=t.BookingData.CheckOut,a=t.BookingData.TotalPrice.toFixed(2),v=t.LiveReservation!=null?t.LiveReservation.CurrencyCode:t.BookingData.TotalPriceCode,y=u,p='<img height="1" width="1" style="border-style:none;" alt="" src="https://secde.trivago.com/page_check.php?pagetype=track&ref=2338&hotel='+h+"&arrival="+c+"&departure="+l+"&currency="+v+"&volume="+a+"&date_format=Y-m-d&booking_id="+y+'" />';document.getElementById("trivagoDynamic").innerHTML=p}if(n.get_affiliate()!=="iSite"){var w=t.LiveReservation!=null?t.LiveReservation.CurrencyCode:t.BookingData.TotalPriceCode,b=t.LiveReservation!=null?t.LiveReservation.Total:t.BookingData.TotalPrice,d=t.LiveReservation!=null?t.LiveReservation.ReservationId:t.BookingData.BookingReferences[0],i=new Image;i.id="YieldOptimizerPixel";i.alt="YieldOptimizerPixel";i.width="1px";i.height="1px";i.src="//tag.yieldoptimizer.com/ps/ps?cnv_a=1864&cnv_cpid=5174&t=i&p=1783&cnv_pg=1&cnv_cu="+w+"&cnv_htf="+b+"&cnv_hcf="+d+"&cnv_hnm="+t.Hotel.Title+"&cnv_hcd="+t.Hotel.PropertyId+"&cnv_hcy="+t.Hotel.Address.City+"&cnv_dateFormat=yyyy-MM-dd";document.body.appendChild(i)}}Cookiebot.consent.statistics&&(typeof lantern!="undefined"&&(e=u,o=(t.BookingData.TotalPrice-t.BookingData.TotalTax).toFixed(2),lantern.order_id=e,lantern.order_value=o,$("<script src='https://lantern.roeyecdn.com/lantern_global_bewe.min.js' async defer><\/script>").appendTo(document.body)),typeof AWIN!=typeof undefined&&$("#awinDynamic").length&&awinRun==0&&(r="",f=t.BookingData.TotalPrice.toFixed(2),r=t.ExistingCustomer?"EXISTING1:"+f:"NEW1:"+f,AWIN.Tracking={},AWIN.Tracking.Sale={},AWIN.Tracking.Sale.amount=t.BookingData.TotalPrice,AWIN.Tracking.Sale.channel="aw",AWIN.Tracking.Sale.orderRef=u,AWIN.Tracking.Sale.parts=r,AWIN.Tracking.Sale.test="0",s='<img border="0" height="0" src="https://www.awin1.com/sread.img?tt=ns&tv=2&merchant=2671&amount='+f+"&ch=aw&parts="+r+"&ref="+u+'&testmode=0" style="display: none;" width="0">',document.getElementById("awinDynamic").innerHTML=s,awinRun++));clearInterval(k)}},1e3);BestWestern.ConfirmationTrackingOff()}if(s="",t.Hotel.RestaurantDetails.Restaurants.length>0)for(r=0;r<t.Hotel.RestaurantDetails.Restaurants.length;r++)if(t.Hotel.RestaurantDetails.Restaurants[r].OpenTableId){s=t.Hotel.RestaurantDetails.Restaurants[r].OpenTableId;break}if(s!==""){var h=document.createElement("script"),d="standard",g="true",nt="standard";window.matchMedia("(max-width: 640px)").matches&&(d="standard",g="false",nt="button");h.setAttribute("type","text/javascript");h.setAttribute("src","//www.opentable.co.uk/widget/reservation/loader?rid="+s+"&type="+nt+"&theme="+d+"&iframe="+g+"&overlay=false&domain=couk&lang=en-GB");typeof h!="undefined"&&(window.matchMedia("(max-width: 640px)").matches?(l=document.createElement("h1"),l.innerHTML="Book a table",document.getElementById("opentablediv").appendChild(l)):(a=document.createElement("h3"),a.innerHTML="Book a table",document.getElementById("opentablediv").appendChild(a)),document.getElementById("opentablediv").appendChild(h))}n._viewModel.set("ShowPasswordEntry",!1)},complete:function(){var t=$(".share_button"),n;if(typeof stLight!="undefined")for(n=0;n<t.length;n++)stWidget.addEntry({service:"sharethis",element:t[n],url:t[n].getAttribute("data-url")})},error:function(){n._viewModel.set("Status","Unable to retrieve reservation details.");n._viewModel.set("IsLoading",!1);n._viewModel.set("ShowError",!0);typeof initGtm!="undefined"&&(initGtm(),console.log("GTM fallback fired"))}})},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.BookingConfirmation.callBaseMethod(this,"dispose")},get_reservationId:function(){return this._reservationId},set_reservationId:function(n){this._reservationId=n},get_verification:function(){return this._verification},set_verification:function(n){this._verification=n},get_splitTestName:function(){return this._splitTestName},set_splitTestName:function(n){this._splitTestName=n},get_affiliate:function(){return this._affiliate},set_affiliate:function(n){this._affiliate=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.BookingConfirmation.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.BookingConfirmation",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.RoomsAndRatesSimpleSearch=function(n){this._changeDatesLink=null;this._changeDatesWrp=null;this._changeDatesClickDelegate=null;this._availabilityInput=null;this._availabilityContainer=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.RoomsAndRatesSimpleSearch.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.RoomsAndRatesSimpleSearch.prototype={initialize:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.RoomsAndRatesSimpleSearch.callBaseMethod(this,"initialize");isMobile||(this._changeDatesLink=$(".rr_change_dates_lnk",this.get_element()));isMobile&&(this._changeDatesLink=$(".changedate",this.get_element()));this._changeDatesLink.length>0&&(isMobile||(this._changeDatesWrp=$(".rr_change_dates",this.get_element())),isMobile&&(this._changeDatesWrp=$(".roomratesearch",this.get_element())),this._changeDatesClickDelegate=Function.createDelegate(this,this._changeDatesClick),$addHandler(this._changeDatesLink[0],"click",this._changeDatesClickDelegate))},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.RoomsAndRatesSimpleSearch.callBaseMethod(this,"dispose")},_changeDatesClick:function(){this._changeDatesWrp.is(":hidden")?(this._changeDatesLink.text("Close"),this._changeDatesWrp.fadeIn()):(this._changeDatesLink.text("Change dates"),this._changeDatesWrp.hide())},performDoSearchWithModel:function(n){typeof dataLayer!="undefined"&&this._targetEntityTitle!==null&&dataLayer.push({event:"change-dates",category:"Hotel Dates Changed",action:"Dates Changed",label:this._targetEntityTitle});Spinbox.Clients.BestWestern.Frontend.Web.UI.RoomsAndRatesSimpleSearch.callBaseMethod(this,"performDoSearchWithModel",[n])},populateCalendar:function(n,t){var f=null,u=this,r=[],e=function(n){var t,u;if(r.length===0)r=n;else for(t=0;t<n.length;t++)u=i(new Date(n[t].Date)),u===null&&r.push(n[t])},i=function(n){var t=r.filter(function(t){return t.DateString===n.format("yyyy-MM-dd")});return t&&t.length?t[0]:null},o=function(t){var u=new Date(t),r;(u<Date.Today()&&(u=Date.Today()),r=new Date(t),r.setFullYear(r.getFullYear(),r.getMonth()+2,0),i(r)===null)&&$.ajax({url:"/restapi/search/availability",type:"GET","async":!1,cache:!0,data:{RatePlanCode:"RAC",PropertyId:n.PropertyId,Adults:n.Adults,Children:n.Children,Ages:n.Ages.map(function(n){return n}),RoomQuantity:n.RoomQuantity,CheckIn:u.format("yyyy-MM-dd"),CheckOut:r.format("yyyy-MM-dd")},dataType:"json",accept:"appliction/json",success:function(n){e(n.Availability)},error:function(n){BestWestern.ShowMessage(BestWestern.GetErrorMessage(n))}})};u.get_availabilityContainer()?(f=$(u.get_availabilityInput()).dateRangePicker({inline:!0,singleMonth:!0,startDate:"2015-12-01",container:"#"+u.get_availabilityContainer().id,showTopbar:!1,alwaysOpen:!0,time:{enabled:!1},minDays:2,lookBehind:!1,selectBackwards:!1,selectForward:!0,beforeShowDay:function(n){var t=i(n),r;return t||(o(n),t=i(n)),r=i(new Date(n.getTime()-864e5)),t?t.Status==="Closed"?r&&r.Status==="Open"?[!1,"date-available-checkout data-status-"+t.Status.toLowerCase(),undefined,!0]:[!1,"date-unavailable data-status-"+t.Status.toLowerCase()]:[!0,"date-available data-status-"+t.Status.toLowerCase()]:[!0,"data-status-unknown"]},hoveringTooltip:function(n){if(n>1)return n-1+" night"+(n>2?"s":"")},showDateFilter:function(n,t){return t}}).bind("datepicker-change",function(n,i){t(i)}).data("dateRangePicker"),f.showMonth(n.CheckIn,"month1")):isMobile&&this._changeDatesWrp&&this._changeDatesWrp.is(":hidden")&&this._changeDatesClick()},clearCalendar:function(){var n=$(this.get_availabilityInput()).data("dateRangePicker");n.clear()},onDateChanged:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.RoomsAndRatesSimpleSearch.callBaseMethod(this,"onDateChanged");var t=this.get_checkInDatePicker(),i=this.get_checkOutDatePicker(),n=BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRatesV2);(n==null||n==undefined)&&(n=BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.HotelRoomsAndRates));t&&t.getDates().length>0&&n.get_viewModel().set("SearchParams.CheckIn",t.getDate().format("yyyy-MM-dd"));i&&i.getDates().length>0&&n.get_viewModel().set("SearchParams.CheckOut",i.getDate().format("yyyy-MM-dd"))},get_availabilityInput:function(){return this._availabilityInput},set_availabilityInput:function(n){this._availabilityInput=n},get_availabilityContainer:function(){return this._availabilityContainer},set_availabilityContainer:function(n){this._availabilityContainer=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.RoomsAndRatesSimpleSearch.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.RoomsAndRatesSimpleSearch",Spinbox.Clients.BestWestern.Frontend.Web.UI.SimpleHotelSearch);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI.RetrieveReservation");Spinbox.Clients.BestWestern.Frontend.Web.UI.RetrieveReservation=function(n){Spinbox.Clients.BestWestern.Frontend.Web.UI.RetrieveReservation.initializeBase(this,[n]);this._showModalDelegate=null;this._showModalLink=null};Spinbox.Clients.BestWestern.Frontend.Web.UI.RetrieveReservation.prototype={initialize:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.RetrieveReservation.callBaseMethod(this,"initialize");this._showModalDelegate==null&&(this._showModalDelegate=Function.createDelegate(this,this.retrieveBooking),$addHandler(this.get_showModalLink(),"click",this._showModalDelegate))},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.RetrieveReservation.callBaseMethod(this,"dispose")},retrieveBooking:function(){var n=this,t=kendo.template($("#retrieve_reservation").html()),i=t("");$.fancybox({content:i,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},autoSize:!1,width:600,height:"auto",beforeShow:function(){var i=$('<a title="Close" class="bw_fancybox_close" href="javascript:void(0);"><\/a>'),t;$(".fancybox-outer").append(i);$(".retrieve").on("click",function(){$(".retrieveError").hide();t=!1;$(".retrieve-booking-wrp .sfError :not(.retrieveError)").remove();$("[data-required]").each(function(n,i){i=$(i);var r=i.data("required-message");i.val()===""&&(i.after('<span class="sfError">'+r+"<\/span>"),t=!0)});t||n.redirectPost("/view-reservation",{Reference:$("#bookingRef").val(),FirstName:$("#bookingFirstName").val(),LastName:$("#bookingLastName").val()})});$(".bw_fancybox_close, .bo_close").on("click",function(){$.fancybox.close()})}})},get_showModalLink:function(){return this._showModalLink},set_showModalLink:function(n){this._showModalLink=n},redirectPost:function(n,t){var i="";$.each(t,function(n,t){i+='<input type="hidden" name="'+n+'" value="'+t+'">'});$('<form action="'+n+'" method="POST">'+i+"<\/form>").appendTo($(document.body)).submit()}};Spinbox.Clients.BestWestern.Frontend.Web.UI.RetrieveReservation.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.RetrieveReservation",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.ViewBooking=function(n){Spinbox.Clients.BestWestern.Frontend.Web.UI.ViewBooking.initializeBase(this,[n]);this._reservationId=null;this._viewModel=null;this._firstName=null;this._lastName=null};Spinbox.Clients.BestWestern.Frontend.Web.UI.ViewBooking.prototype={initialize:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.ViewBooking.callBaseMethod(this,"initialize");var n=this;this._viewModel=kendo.observable({BookingDetails:null,ReservationId:n.get_reservationId(),Status:"Retrieving reservation",IsLoading:!0,ShowError:!1,FailedToCancel:"",CancellationReferences:null,LocalCheckInDate:function(){if(this.get("BookingDetails")!=null&&this.get("BookingDetails.LiveReservation")!=null)return this.get("BookingDetails.LiveReservation.CheckIn").toDateObject()},LocalCheckOutDate:function(){if(this.get("BookingDetails")!=null&&this.get("BookingDetails.LiveReservation")!=null)return this.get("BookingDetails.LiveReservation.CheckOut").toDateObject()},isCancelled:function(){return this.get("BookingDetails.LiveReservation.Status")=="Cancelled"},hasDetails:function(){return this.get("BookingDetails")!=null&&this.get("BookingDetails.ReservationNotFound")!=!0&&this.get("BookingDetails.ReservationCancelled")!=!0},hasPartialCancellation:function(){return this.get("CancellationReferences")!=""&&this.get("CancellationReferences")!=null},itemIndex:function(n){return n.parent().indexOf(n)+1},getRooms:function(){return!this.hasDetails()||this.BookingDetails.BookingData==null?[]:this.get("BookingDetails.BookingData.CheckoutRooms")},isParkingAvailable:function(){return!this.hasDetails()||this.BookingDetails.Hotel==null?!1:this.BookingDetails.Hotel.HasFreeParking||this.BookingDetails.Hotel.HasChargedParking||this.BookingDetails.Hotel.HasParkingNearby},bookingRefs:function(){return this.hasDetails()?this.get("BookingDetails.BookingData.BookingReferences")||[]:[]},getEmailLink:function(){return"mailto:"+this.get("BookingDetails.Hotel.Email")},cancellationRefsFormatted:function(){var i,n,t;if(!this.hasDetails())return"";if(i="",n=this.get("BookingDetails.BookingData.CheckoutRooms"),n&&!n.length){for(t=0;t<n.length;t++)n[t].CancellationId!==undefined&&n[t].CancellationId!==null&&(i!==""&&(i+=" / "),i+=n[t].CancellationId);return i}},mainImageUrl:function(){return this.hasDetails()?this.BookingDetails!==null&&this.BookingDetails.Hotel!=null&&this.BookingDetails.Hotel.Images!=null&&this.BookingDetails.Hotel.Images.length>0&&this.BookingDetails.Hotel.Images[0].Thumbnails["hd-hero"]?"url("+this.BookingDetails.Hotel.Images[0].Thumbnails["hd-hero"].Url+")":"none":"none"},showInfoControls:function(){return this.hasDetails()?this.BoookingDetails==null||this.BoookingDetails.ReservationCancelled==!0||this.BookingDetails.ReservationNotFound==!0?!1:!0:!1},cancelRoom:function(n){var i=this,t=n.data,r=String.format("/restapi/booking/cancel-room/{0}",t.get("ReservationId"));t.set("Status","Cancelling");$.ajax({url:r,type:"POST",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(n){i.set("IsLoading",!1);n.Status==="OK"?t.set("Status","Cancelled"):BestWestern.ShowMessage("Failed to cancel the reservation")},error:function(){i.set("IsLoading",!1);BestWestern.ShowMessage("Failed to cancel the reservation")}})},cancelReservation:function(n){var t=this,u=String.format("/restapi/booking/cancel-reservation"),i=n.data,f=i.get("ReservationId"),r;i.set("Status","Cancelling");r={ReservationNumber:f,FirstName:i.get("FirstName"),LastName:i.get("LastName")};$.ajax({url:u,type:"POST",data:JSON.stringify(r),dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(n){t.set("IsLoading",!1);n.Status==="OK"?(i.set("Status","Cancelled"),t.set("CancellationReferences",n.CancellationReferences)):(t.set("ShowError",!0),t.set("IsLoading",!1),t.set("CancellationReferences",n.CancellationReferences),i.set("Status","CancellingFailed"),t.set("FailedToCancel",n.FailedReference))},error:function(){t.set("IsLoading",!1);t.set("ShowError",!0);i.set("Status","CancellingFailed");BestWestern.ShowMessage("Failed to cancel the reservation")}})},isRoomCancelled:function(n){return n.get("Status")=="Cancelled"},isRoomCancelling:function(n){return n.get("Status")=="Cancelling"},isRoomCancellingError:function(n){return n.get("Status")=="CancellingFailed"},isCancellable:function(n){var t=n.parent().parent().get("CheckIn"),i=moment(t,"YYYY-MM-DD").toDate();return new Date>i?!1:n.CancellationPolicy!=="Non Cancellable: This rate cannot be cancelled and is non-amendable and non-refundable."},viewMap:function(){var n=this.get("BookingDetails.Hotel.Address.Longitude"),t=this.get("BookingDetails.Hotel.Address.Latitude");return"https://maps.google.com?saddr=Current+Location&daddr="+t+","+n},getTotalCostFormatted:function(){var i=this.get("BookingDetails.BookingData.CheckoutRooms"),n=0,t,r,u;if(i)for(t=0;t<i.length;t++){if(r=i[t].get("CheckoutProducts"),r)for(u=0;u<r.length;u++)n=n+r[u].get("TotalValue");n=n+i[t].get("RoomPrice")}return n},getProducts:function(n){return this.BookingDetails.BookingData.TotalPriceSymbol+n.Price.toFixed(2)},getProductUnitType:function(n){for(var t=0;t<this.BookingDetails.Hotel.Products.length;t++)if(this.BookingDetails.Hotel.Products[t].Code===n.Code)return this.BookingDetails.Hotel.Products[t].UnitType;return""},getVoucherAmount:function(){var i=this.get("BookingDetails.BookingData.CheckoutRooms"),t=0,r,n;if(i==undefined)return 0;for(n=0;n<i.length;n++)i[n].VoucherAmount>0&&(t=t+i[n].VoucherAmount);if(t>0)for(r=document.getElementsByClassName("voucherContent"),n=0;n<r.length;n++)r[n].hidden=!1;return t>0?t.toFixed(2):0},getTotalCostMinusVoucher:function(){var n=this.getTotalCostFormatted(),t=this.getVoucherAmount(),i=n>t?n-t:0;return i.toFixed(2)}});kendo.bind(this.get_element(),this._viewModel);this.retrieveBooking()},retrieveBooking:function(){var n=this,t={ReservationNumber:this.get_reservationId(),FirstName:this.get_firstName(),LastName:this.get_lastName()},i=String.format("/restapi/booking/view-reservation");$.ajax({url:i,type:"POST",data:JSON.stringify(t),dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(t){n._viewModel.set("IsLoading",!1);n._viewModel.set("BookingDetails",t)},error:function(){n._viewModel.set("Status","Unable to retrieve reservation details.")}})},cancelReservation:function(){},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.ViewBooking.callBaseMethod(this,"dispose")},get_reservationId:function(){return this._reservationId},set_reservationId:function(n){this._reservationId=n},get_firstName:function(){return this._firstName},set_firstName:function(n){this._firstName=n},get_lastName:function(){return this._lastName},set_lastName:function(n){this._lastName=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.ViewBooking.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.ViewBooking",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.RewardsJoinUserProfileView=function(n){Spinbox.Clients.BestWestern.Frontend.Web.UI.RewardsJoinUserProfileView.initializeBase(this,[n]);this._findAddressDelegate=null;this._findAddressSelectedDelegate=null;this._addressType=null;this._homeLine1=null;this._homeLine2=null;this._homeLine3=null;this._homeTownCity=null;this._homeCounty=null;this._homePostcode=null;this._businessLine1=null;this._businessLine2=null;this._businessLine3=null;this._businessTownCity=null;this._businessCounty=null;this._businessPostcode=null;this._otherLine1=null;this._otherLine2=null;this._otherLine3=null;this._otherTownCity=null;this._otherCounty=null;this._otherPostcode=null};Spinbox.Clients.BestWestern.Frontend.Web.UI.RewardsJoinUserProfileView.prototype={initialize:function(){var n;Spinbox.Clients.BestWestern.Frontend.Web.UI.RewardsJoinUserProfileView.callBaseMethod(this,"initialize");n=this;$('.rewardsAddress input[type="radio"]').on("change",function(){$(this).attr("value")!==undefined&&n.changeAddressType($(this).attr("value"))});$('.earningPreference input[type="radio"]').on("change",function(){$(this).attr("value")!==undefined&&n.changeEarningPreference($(this).attr("value"))});this.setEarningPreference();this.setAddressType();$(".enter_manual_address").on("click",this.enterAddressManually);$(".cancel_manual_address").on("click",this.cancelAddressManually);this._findAddressDelegate=Function.createDelegate(this,this.findAddress);this._findAddressSelectedDelegate=Function.createDelegate(this,this.findAddressSelected);n=this;$.each($(".find_address_btn",this.get_element()),function(){$addHandler(this,"click",n._findAddressDelegate)});$.each($("[data-addresstype] select",this.get_element()),function(){$addHandler(this,"change",n._findAddressSelectedDelegate)})},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.RewardsJoinUserProfileView.callBaseMethod(this,"dispose")},cancelAddressManually:function(){var n=$(this).parents("[data-address-block]");n.find(".address_flds").hide();n.find(".find_address_btn").show();n.find(".cancel_manual_address").hide();n.find(".enter_manual_address").show();$("[data-addresstype]").hide()},enterAddressManually:function(){var n=$(this).parents("[data-address-block]");n.find(".address_flds").fadeIn();n.find(".find_address_btn").hide();n.find(".enter_manual_address").hide();n.find(".cancel_manual_address").show()},setAddress:function(n,t){var r,i,u;n[0].set_value(t.Line1);n[1].set_value(t.Line2);r=t.Line3===""?t.Line2:t.Line3;n[2].set_value(r);i=t.Town===""?r:t.Town;i===t.Line3&&t.Line4!==""&&(i=t.Line4);n[3].set_value(i);u=t.County===""?i:t.County;n[4].set_value(u);n[5].set_value(t.Postcode.Value)},findAddressSelected:function(n){var t=$(n.target).find(":selected").data("address"),i;t!==null&&t.Line1&&(i=this.get_addressType().get_value(),i=="Home"?this.setAddress([this.get_homeLine1(),this.get_homeLine2(),this.get_homeLine3(),this.get_homeTownCity(),this.get_homeCounty(),this.get_homePostcode()],t):i=="Business"?this.setAddress([this.get_businessLine1(),this.get_businessLine2(),this.get_businessLine3(),this.get_businessTownCity(),this.get_businessCounty(),this.get_businessPostcode()],t):this.setAddress([this.get_otherLine1(),this.get_otherLine2(),this.get_otherLine3(),this.get_otherTownCity(),this.get_otherCounty(),this.get_otherPostcode()],t),this.enterAddressManually.apply($('[data-address-block="add_type_'+i.toLowerCase()+'"] .enter_manual_address').first()),$('[data-addresstype="'+i+'"]',this.get_element()).hide())},findAddress:function(){var n=null,t=null,i=this.get_addressType().get_value(),r=null,u;(r=$('[data-addresstype="'+i+'"]',this.get_element()),i=="Home"?(n=this.get_homePostcode().get_value(),t=this.get_homeLine1().get_value()):i=="Business"?(n=this.get_businessPostcode().get_value(),t=this.get_businessLine1().get_value()):(n=this.get_otherPostcode().get_value(),t=this.get_otherLine1().get_value()),n!==null&&n!=="")&&(u=String.format("/restapi/postcode/lookup/{0}/{1}",n,t),$.ajax({url:u,type:"GET",dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(n){r.show();var t=$("select",r)[0];t.options.length=1;$.each(n,function(){$(t).append($("<option />").val(this.Line1).text(this.Line1).data("address",this))})},error:function(){BestWestern.ShowMessage("Unable to find address")}}))},changeEarningPreference:function(n){n!==undefined&&n!==null&&n!==""&&(n==="AIRLINEMILES"?$(".earning_pref_am").fadeIn():$(".earning_pref_am").hide())},setEarningPreference:function(){this.changeEarningPreference($('.earningPreference input[type="radio"]:checked').val())},changeAddressType:function(n){n!==undefined&&n!==null&&n!==""&&($("[data-address-block]").hide(),$('[data-address-block="add_type_'+n.toLowerCase()+'"]').fadeIn())},setAddressType:function(){this.changeAddressType($('.rewardsAddress input[type="radio"]:checked').val())},get_addressType:function(){return this._addressType},set_addressType:function(n){this._addressType=n},get_homeLine1:function(){return this._homeLine1},set_homeLine1:function(n){this._homeLine1=n},get_homeLine2:function(){return this._homeLine2},set_homeLine2:function(n){this._homeLine2=n},get_homeLine3:function(){return this._homeLine3},set_homeLine3:function(n){this._homeLine3=n},get_homeTownCity:function(){return this._homeTownCity},set_homeTownCity:function(n){this._homeTownCity=n},get_homeCounty:function(){return this._homeCounty},set_homeCounty:function(n){this._homeCounty=n},get_homePostcode:function(){return this._homePostcode},set_homePostcode:function(n){this._homePostcode=n},get_businessLine1:function(){return this._businessLine1},set_businessLine1:function(n){this._businessLine1=n},get_businessLine2:function(){return this._businessLine2},set_businessLine2:function(n){this._businessLine2=n},get_businessLine3:function(){return this._businessLine3},set_businessLine3:function(n){this._businessLine3=n},get_businessTownCity:function(){return this._businessTownCity},set_businessTownCity:function(n){this._businessTownCity=n},get_businessCounty:function(){return this._businessCounty},set_businessCounty:function(n){this._businessCounty=n},get_businessPostcode:function(){return this._businessPostcode},set_businessPostcode:function(n){this._businessPostcode=n},get_otherLine1:function(){return this._otherLine1},set_otherLine1:function(n){this._otherLine1=n},get_otherLine2:function(){return this._otherLine2},set_otherLine2:function(n){this._otherLine2=n},get_otherLine3:function(){return this._otherLine3},set_otherLine3:function(n){this._otherLine3=n},get_otherTownCity:function(){return this._otherTownCity},set_otherTownCity:function(n){this._otherTownCity=n},get_otherCounty:function(){return this._otherCounty},set_otherCounty:function(n){this._otherCounty=n},get_otherPostcode:function(){return this._otherPostcode},set_otherPostcode:function(n){this._otherPostcode=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.RewardsJoinUserProfileView.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.RewardsJoinUserProfileView",Sys.UI.Control);
(function(){var n="/restapi/destinations/county/",r="/restapi/destinations/place/",t="/restapi/destinations/county-hotels/",u="/restapi/destinations/place-hotels/",i=function(n){return n!==null&&(n.indexOf("/")>=0||n.indexOf(";")>=0)},f=function(n,t){return function(n,i,r){t!==undefined&&t(n,i,r)}},e=function(n){return function(t){n!==undefined&&n(t)}};BestWestern.DestinationHotels=function(n,r,f){var e=n.replace("/",";"),s=i(e),o=(s?u:t)+e;return(e==="country;great-britain"||e==="country/great-britain")&&(o=t+"great-britain"),f===undefined&&(f=function(){}),new kendo.data.DataSource({serverFiltering:!0,serverPaging:!0,pageSize:r,schema:{data:function(n){return $(n.Items).each(function(){$.extend(this,{detailsUrl:function(){return this.Url}})}),n.Items},total:"Count"},transport:{read:{url:o,contentType:"application/json charset=utf-8",serverPaging:!0,type:"GET",dataType:"json"}},requestStart:f})};BestWestern.GetDestination=function(t,u,o){var s=t.replace("/",";"),c=i(s),h=(c?r:n)+s;(s==="country;great-britain"||s==="country/great-britain")&&(h=n+"great-britain");$.ajax({url:h,type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",success:function(n){BestWestern.DestinationTitle=n.Title;$.each(n.Images,function(){$.extend(this,{GetBackgoundStyle:function(){return String.format("background-image: url('{0}');",this.Url)}})});var t={Binding:!1,Destination:n},t=kendo.observable(t);e(u)(t)},errorCallback:f("GetDestination",o)})}})();Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.Destination=function(n){Spinbox.Clients.BestWestern.Frontend.Web.UI.Destination.initializeBase(this,[n]);this._viewModel=null;this._hotelSource=null;this._resultsTemplate=null;this._gridResultsTemplate=null;this._basePath=null;this._pageSize=null;this._bindDataSourceDelegate=null;this._snapshot=null};Spinbox.Clients.BestWestern.Frontend.Web.UI.Destination.prototype={initialize:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.Destination.callBaseMethod(this,"initialize");this.get_snapshot()===!1&&(this._bindDataSourceDelegate=Function.createDelegate(this,this.bindDataSource),this.loadData())},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.Destination.callBaseMethod(this,"dispose")},loadData:function(){var i=this,n=window.location.pathname.replace(this.get_basePath(),""),t;n==="s"&&(n="");n.indexOf("/")===0&&(n=n.substring(1));(n===null||n==="")&&(n="hotels");t=BestWestern.DestinationHotels(n,this.get_pageSize(),this.datasourceRequestStart);$("[kendo-hotel-pager]",this.get_element()).each(function(){$(this).kendoPager({autoBind:!1,dataSource:t,linkTemplate:'<li><a href="\\#" class="k-link" data-#=ns#page="#=idx#">#=text#<\/a><\/li>',selectTemplate:'<li><span class="k-state-selected">#=text#<\/span><\/li>'})});$("[kendo-hotel-list]",this.get_element()).kendoListView({autoBind:!1,dataSource:t,dataBound:function(){$("[data-availability]").hide();FHManager.PostBind();$(".k-link").removeAttr("tabindex");setTimeout(function(){var t=$(".sr_share"),n,i;if(typeof stLight!="undefined")for(n=0;n<t.length;n++)i=t[n].getAttribute("data-url"),stWidget.addEntry({service:"sharethis",element:t[n],url:i})},500);var n=isMobile?$(".hotelitem"):$(".sr_item");i.catalogueImpressions(n);$(window).scroll(function(){clearTimeout($.data(this,"scrollTimer"));$.data(this,"scrollTimer",setTimeout(function(){i.catalogueImpressions(n)},250))});$(".pdp-link").on("click",function(){var i=$(this),n=i.parents("[data-gtm]").data("gtm"),t="",r;n.Street!=="undefined"?t+=n.Street:"";n.AddressLine2!=="undefined"?t+=", "+n.AddressLine2:"";n.City!=="undefined"?t+=", "+n.City:"";n.Zip!=="undefined"?t+=", "+n.Zip:"";r={event:"productClick",ecommerce:{click:{actionField:{list:BestWestern.DestinationTitle+" listing"},products:[{name:n.Name,id:n.Id,price:null,brand:t,variant:null,position:i.parents("[data-gtm]").index()+1}]}},eventCallback:function(){document.location=i.attr("href")}};window.console&&console.log(r);typeof dataLayer&&dataLayer.push(r)})},template:kendo.template(i.get_resultsTemplate())});this.set_hotelSource(t);t.read();BestWestern.GetDestination(n,this._bindDataSourceDelegate,function(){})},catalogueImpressions:function(n){var f=[],u,i,t,r;if(typeof dataLayer&&n.length>0){for(u=0;u<n.length;u++)i=n[u],verge.inViewport(i)&&!$(i).data("viewed")&&(t=$(i).data("gtm"),r="",t.Street!=="undefined"?r+=t.Street:"",t.AddressLine2!=="undefined"?r+=", "+t.AddressLine2:"",t.City!=="undefined"?r+=", "+t.City:"",t.Zip!=="undefined"?r+=", "+t.Zip:"",f.push({name:t.Name,id:t.Id,price:null,brand:r,variant:null,list:BestWestern.DestinationTitle+" listing",position:$(i).index()+1}),$(i).data("viewed",!0));f.length>0&&dataLayer.push({event:"productImpression",ecommerce:{impressions:f}})}},datasourceRequestStart:function(n){try{if(n.sender.page()!==1){var t=document.getElementById("destinationHotelPager");alignWithTop=!0;t.scrollIntoView(alignWithTop)}}catch(i){}},bindDataSource:function(n){this.set_viewModel(n);kendo.bind($("[data-destination]",this.get_element()),this.get_viewModel());var t=this.get_viewModel().Hotels},get_viewModel:function(){return this._viewModel},set_viewModel:function(n){this._viewModel=n},get_resultsTemplate:function(){return this._resultsTemplate},set_resultsTemplate:function(n){this._resultsTemplate=n},get_gridResultsTemplate:function(){return this._gridResultsTemplate},set_gridResultsTemplate:function(n){this._gridResultsTemplate=n},get_basePath:function(){return this._basePath},set_basePath:function(n){this._basePath=n},get_hotelSource:function(){return this._hotelSource},set_hotelSource:function(n){this._hotelSource=n},get_pageSize:function(){return this._pageSize},set_pageSize:function(n){this._pageSize=n},get_snapshot:function(){return this._snapshot},set_snapshot:function(n){this._snapshot=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.Destination.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.Destination",Sys.UI.Control);
(function(n,t){function u(){return new Date(Date.UTC.apply(Date,arguments))}function e(){var n=new Date;return u(n.getFullYear(),n.getMonth(),n.getDate())}function y(n,t){return n.getUTCFullYear()===t.getUTCFullYear()&&n.getUTCMonth()===t.getUTCMonth()&&n.getUTCDate()===t.getUTCDate()}function c(n){return function(){return this[n].apply(this,arguments)}}function p(t,i){function s(n,t){return t.toLowerCase()}var u=n(t).data(),f={},e,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),r;i=new RegExp("^"+i.toLowerCase());for(r in u)i.test(r)&&(e=r.replace(o,s),f[e]=u[r]);return f}function w(t){var u={},i;if(r[t]||(t=t.split("-")[0],r[t]))return i=r[t],n.each(v,function(n,t){t in i&&(u[t]=i[t])}),u}var l=function(){var t={get:function(n){return this.slice(n)[0]},contains:function(n){for(var i=n&&n.valueOf(),t=0,r=this.length;t<r;t++)if(this[t].valueOf()===i)return t;return-1},remove:function(n){this.splice(n,1)},replace:function(t){t&&(n.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var n=new l;return n.replace(this),n}};return function(){var i=[];return i.push.apply(i,arguments),n.extend(i,t),i}}(),f=function(t,r){this._process_options(r);this.dates=new l;this.viewDate=this.o.defaultViewDate;this.focusDate=null;this.element=n(t);this.isInline=!1;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1;this.hasInput=this.component&&this.element.find("input").length;this.component&&this.component.length===0&&(this.component=!1);this.picker=n(i.template);this._buildEvents();this._attachEvents();this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu");r.customClass&&this.picker.addClass(r.customClass);this.o.rtl&&this.picker.addClass("datepicker-rtl");this.viewMode=this.o.startView;this.o.calendarWeeks&&this.picker.find("tfoot th.today, tfoot th.clear").attr("colspan",function(n,t){return parseInt(t)+1});this._allow_update=!1;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.setDatesDisabled(this.o.datesDisabled);this.fillDow();this.fillMonths();this._allow_update=!0;this.update();this.showMode();this.isInline&&this.show()},h,a,o,s,v,r,i;f.prototype={constructor:f,_process_options:function(f){var o,c,a,v,h,l;this._o=n.extend({},this._o,f);o=this.o=n.extend({},this._o);c=o.language;r[c]||(c=c.split("-")[0],r[c]||(c=s.language));o.language=c;switch(o.startView){case 2:case"decade":o.startView=2;break;case 1:case"year":o.startView=1;break;default:o.startView=0}switch(o.minViewMode){case 1:case"months":o.minViewMode=1;break;case 2:case"years":o.minViewMode=2;break;default:o.minViewMode=0}if(o.startView=Math.max(o.startView,o.minViewMode),o.multidate!==!0&&(o.multidate=Number(o.multidate)||!1,o.multidate!==!1&&(o.multidate=Math.max(0,o.multidate))),o.multidateSeparator=String(o.multidateSeparator),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7,a=i.parseFormat(o.format),o.startDate!==-Infinity&&(o.startDate=o.startDate?o.startDate instanceof Date?this._local_to_utc(this._zero_time(o.startDate)):i.parseDate(o.startDate,a,o.language):-Infinity),o.endDate!==Infinity&&(o.endDate=o.endDate?o.endDate instanceof Date?this._local_to_utc(this._zero_time(o.endDate)):i.parseDate(o.endDate,a,o.language):Infinity),o.daysOfWeekDisabled=o.daysOfWeekDisabled||[],n.isArray(o.daysOfWeekDisabled)||(o.daysOfWeekDisabled=o.daysOfWeekDisabled.split(/[,\s]*/)),o.daysOfWeekDisabled=n.map(o.daysOfWeekDisabled,function(n){return parseInt(n,10)}),o.datesDisabled=o.datesDisabled||[],n.isArray(o.datesDisabled)||(v=[],v.push(i.parseDate(o.datesDisabled,a,o.language)),o.datesDisabled=v),o.datesDisabled=n.map(o.datesDisabled,function(n){return i.parseDate(n,a,o.language)}),h=String(o.orientation).toLowerCase().split(/\s+/g),l=o.orientation.toLowerCase(),h=n.grep(h,function(n){return/^auto|left|right|top|bottom$/.test(n)}),o.orientation={x:"auto",y:"auto"},l&&l!=="auto")if(h.length===1)switch(h[0]){case"top":case"bottom":o.orientation.y=h[0];break;case"left":case"right":o.orientation.x=h[0]}else l=n.grep(h,function(n){return/^left|right$/.test(n)}),o.orientation.x=l[0]||"auto",l=n.grep(h,function(n){return/^top|bottom$/.test(n)}),o.orientation.y=l[0]||"auto";if(o.defaultViewDate){var y=o.defaultViewDate.year||(new Date).getFullYear(),p=o.defaultViewDate.month||0,w=o.defaultViewDate.day||1;o.defaultViewDate=u(y,p,w)}else o.defaultViewDate=e();o.showOnFocus=o.showOnFocus!==t?o.showOnFocus:!0},_events:[],_secondaryEvents:[],_applyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++){f=n[i][0];n[i].length===2?(r=t,u=n[i][1]):n[i].length===3&&(r=n[i][1],u=n[i][2]);f.on(u,r)}},_unapplyEvents:function(n){for(var i=0,f,r,u;i<n.length;i++)f=n[i][0],n[i].length===2?(u=t,r=n[i][1]):n[i].length===3&&(u=n[i][1],r=n[i][2]),f.off(r,u)},_buildEvents:function(){var t={keyup:n.proxy(function(t){n.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:n.proxy(this.keydown,this)};this.o.showOnFocus===!0&&(t.focus=n.proxy(this.show,this));this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),t],[this.component,{click:n.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:n.proxy(this.show,this)}]];this._events.push([this.element,"*",{blur:n.proxy(function(n){this._focused_from=n.target},this)}],[this.element,{blur:n.proxy(function(n){this._focused_from=n.target},this)}]);this._secondaryEvents=[[this.picker,{click:n.proxy(this.click,this)}],[n(window),{resize:n.proxy(this.place,this)}],[n(document),{"mousedown touchstart":n.proxy(function(n){this.element.is(n.target)||this.element.find(n.target).length||this.picker.is(n.target)||this.picker.find(n.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,r){var u=r||this.dates.get(-1),f=this._utc_to_local(u);this.element.trigger({type:t,date:f,dates:n.map(this.dates,this._utc_to_local),format:n.proxy(function(n,t){arguments.length===0?(n=this.dates.length-1,t=this.o.format):typeof n=="string"&&(t=n,n=this.dates.length-1);t=t||this.o.format;var r=this.dates.get(n);return i.formatDate(r,t,this.o.language)},this)})},show:function(){if(!this.element.attr("readonly"))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),this.element.attr("data-title")?this.picker.find(".datepicker-title").text(this.element.data("title")):this.picker.find(".datepicker-title").text("Select a date"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&n(this.element).blur(),this},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(n){return n&&new Date(n.getTime()+n.getTimezoneOffset()*6e4)},_local_to_utc:function(n){return n&&new Date(n.getTime()-n.getTimezoneOffset()*6e4)},_zero_time:function(n){return n&&new Date(n.getFullYear(),n.getMonth(),n.getDate())},_zero_utc_time:function(n){return n&&new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))},getDates:function(){return n.map(this.dates,this._utc_to_local)},getUTCDates:function(){return n.map(this.dates,function(n){return new Date(n)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var n=this.dates.get(-1);return typeof n!="undefined"?new Date(n):null},clearDates:function(){var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input"));n&&n.val("").change();this.update();this._trigger("changeDate");this.o.autoclose&&this.hide()},setDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=n.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,n.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:c("setDates"),setUTCDate:c("setUTCDates"),setValue:function(){var n=this.getFormattedDate();return this.isInput?this.element.val(n).change():this.component&&this.element.find("input").val(n).change(),this},getFormattedDate:function(r){r===t&&(r=this.o.format);var u=this.o.language;return n.map(this.dates,function(n){return i.formatDate(n,r,u)}).join(this.o.multidateSeparator)},setStartDate:function(n){return this._process_options({startDate:n}),this.update(),this.updateNavArrows(),this},setEndDate:function(n){return this._process_options({endDate:n}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(n){return this._process_options({daysOfWeekDisabled:n}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(n){this._process_options({datesDisabled:n});this.update();this.updateNavArrows()},place:function(){var u,p,s,w;if(this.isInline)return this;var f=this.picker.outerWidth(),e=this.picker.outerHeight(),h=n(this.o.container).width(),b=n(this.o.container).height(),c=n(this.o.container).scrollTop(),l=n(this.o.container).offset(),a=[];this.element.parents().each(function(){var t=n(this).css("z-index");t!=="auto"&&t!==0&&a.push(parseInt(t))});var v=Math.max.apply(Math,a)+10,r=this.component?this.component.parent().offset():this.element.offset(),y=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),o=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),t=r.left-l.left,i=r.top-l.top;return this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(t-=f-o)):r.left<0?(this.picker.addClass("datepicker-orient-left"),t-=r.left-10):t+f>h?(this.picker.addClass("datepicker-orient-right"),t=r.left+o-f):this.picker.addClass("datepicker-orient-left"),u=this.o.orientation.y,u==="auto"&&(p=-c+i-e,s=c+b-(i+y+e),u=Math.max(p,s)===s?"top":"bottom"),this.picker.addClass("datepicker-orient-"+u),u==="top"?i+=y:i-=e+parseInt(this.picker.css("padding-top")),this.o.rtl?(w=h-(t+o),this.picker.css({top:i,right:w,zIndex:v})):this.picker.css({top:i,left:t,zIndex:v}),this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var r=this.dates.copy(),t=[],u=!1;return arguments.length?(n.each(arguments,n.proxy(function(n,i){i instanceof Date&&(i=this._local_to_utc(i));t.push(i)},this)),u=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),t=t&&this.o.multidate?t.split(this.o.multidateSeparator):[t],delete this.element.data().date),t=n.map(t,n.proxy(function(n){return i.parseDate(n,this.o.format,this.o.language)},this)),t=n.grep(t,n.proxy(function(n){return n<this.o.startDate||n>this.o.endDate||!n},this),!0),this.dates.replace(t),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),u?this.setValue():t.length&&String(r)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&r.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var t=this.o.weekStart,n="<tr>",i;for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days thead tr:first-child th.datepicker-switch").attr("colspan",function(n,t){return parseInt(t)+1}),i='<th class="cw">&#160;<\/th>',n+=i);t<this.o.weekStart+7;)n+='<th class="dow">'+r[this.o.language].daysMin[t++%7]+"<\/th>";n+="<\/tr>";this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var n="",t=0;t<12;)n+='<span tabindex="0" class="month">'+r[this.o.language].monthsShort[t++]+"<\/span>";this.picker.find(".datepicker-months td").html(n)},setRange:function(t){t&&t.length?this.range=n.map(t,function(n){return n.valueOf()}):delete this.range;this.fill()},getClassNames:function(t){var i=[],r=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),u=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<f?i.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>f)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===u.getFullYear()&&t.getUTCMonth()===u.getMonth()&&t.getUTCDate()===u.getDate()&&i.push("today"),this.dates.contains(t)!==-1&&i.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||n.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.o.datesDisabled.length>0&&n.grep(this.o.datesDisabled,function(n){return y(t,n)}).length>0&&i.push("disabled","disabled-date"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),n.inArray(t.valueOf(),this.range)!==-1&&i.push("selected")),i},fill:function(){var g=new Date(this.viewDate),f=g.getUTCFullYear(),p=g.getUTCMonth(),w=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,ft=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,b=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,et=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,ot=r[this.o.language].today||r.en.today||"",st=r[this.o.language].clear||r.en.clear||"",y,e,k,l,s,h,o,a,it,rt,ut,c,v;if(!isNaN(f)&&!isNaN(p)){for(this.picker.find(".datepicker-days thead th.datepicker-switch").text(r[this.o.language].months[p]+" "+f),this.picker.find("tfoot th.today").text(ot).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(st).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths(),e=u(f,p-1,28),k=i.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),e.setUTCDate(k),e.setUTCDate(k-(e.getUTCDay()-this.o.weekStart+7)%7),l=new Date(e),l.setUTCDate(l.getUTCDate()+42),l=l.valueOf(),s=[];e.valueOf()<l;){if(e.getUTCDay()===this.o.weekStart&&(s.push("<tr>"),this.o.calendarWeeks)){var nt=new Date(+e+(this.o.weekStart-e.getUTCDay()-7)%7*864e5),tt=new Date(Number(nt)+(11-nt.getUTCDay())%7*864e5),d=new Date(Number(d=u(tt.getUTCFullYear(),0,1))+(11-d.getUTCDay())%7*864e5),ht=(tt-d)/6048e5+1;s.push('<td class="cw">'+ht+"<\/td>")}h=this.getClassNames(e);h.push("day");this.o.beforeShowDay!==n.noop&&(o=this.o.beforeShowDay(this._utc_to_local(e)),o===t?o={}:typeof o=="boolean"?o={enabled:o}:typeof o=="string"&&(o={classes:o}),o.enabled===!1&&h.push("disabled"),o.classes&&(h=h.concat(o.classes.split(/\s+/))),o.tooltip&&(y=o.tooltip));h=n.unique(h);s.push("<td"+(h.indexOf("disabled")>-1?"":' tabindex="0"')+' class="'+h.join(" ")+'"'+(y?' title="'+y+'"':"")+"><div>"+e.getUTCDate()+"<\/div><\/td>");y=null;e.getUTCDay()===this.o.weekEnd&&s.push("<\/tr>");e.setUTCDate(e.getUTCDate()+1)}for(this.picker.find(".datepicker-days tbody").empty().append(s.join("")),a=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active"),n.each(this.dates,function(n,t){t.getUTCFullYear()===f&&a.eq(t.getUTCMonth()).addClass("active")}),(f<w||f>b)&&a.addClass("disabled"),f===w&&a.slice(0,ft).addClass("disabled").removeAttr("tabindex"),f===b&&a.slice(et+1).addClass("disabled").removeAttr("tabindex"),this.o.beforeShowMonth!==n.noop&&(it=this,n.each(a,function(t,i){if(!n(i).hasClass("disabled")){var r=new Date(f,t,1),u=it.o.beforeShowMonth(r);u===!1&&n(i).addClass("disabled").removeAttr("tabindex")}})),s="",f=parseInt(f/10,10)*10,rt=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td"),f-=1,ut=n.map(this.dates,function(n){return n.getUTCFullYear()}),v=-1;v<11;v++)c=["year"],v===-1?c.push("old"):v===10&&c.push("new"),n.inArray(f,ut)!==-1&&c.push("active"),(f<w||f>b)&&c.push("disabled"),s+="<span "+(c.indexOf("disabled")>-1?"":' tabindex="0"')+' class="'+c.join(" ")+'">'+f+"<\/span>",f+=1;rt.html(s)}},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),n=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").addClass("disabled"):this.picker.find(".prev").removeClass("disabled");this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").addClass("disabled"):this.picker.find(".next").removeClass("disabled");break;case 1:case 2:this.o.startDate!==-Infinity&&n<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").addClass("disabled"):this.picker.find(".prev").removeClass("disabled");this.o.endDate!==Infinity&&n>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").addClass("disabled"):this.picker.find(".next").removeClass("disabled")}}},click:function(t){var r,e,f,o,h,s,c;if(t.preventDefault(),r=n(t.target).closest("span, td, th"),r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":h=i.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h);this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":s=new Date;s=u(s.getFullYear(),s.getMonth(),s.getDate(),0,0,0);this.showMode(-2);c=this.o.todayBtn==="linked"?null:"view";this._setDate(s,c);break;case"clear":this.clearDates()}break;case"span":r.is(".disabled")||(this.viewDate.setUTCDate(1),r.is(".month")?(o=1,f=r.parent().find("span").index(r),e=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(f),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(u(e,f,o))):(o=1,f=0,e=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(e),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(u(e,f,o))),this.showMode(-1),this.fill());break;case"td":r.is(".day")&&!r.is(".disabled")&&(o=parseInt(r.text(),10)||1,e=this.viewDate.getUTCFullYear(),f=this.viewDate.getUTCMonth(),r.is(".old")?f===0?(f=11,e-=1):f-=1:r.is(".new")&&(f===11?(f=0,e+=1):f+=1),this._setDate(u(e,f,o)))}this.picker.is(":visible")&&this._focused_from&&n(this._focused_from).focus();delete this._focused_from},_toggle_multidate:function(n){var t=this.dates.contains(n);if(n||this.dates.clear(),t!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(n)):this.dates.push(n),typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(n,t){t&&t!=="date"||this._toggle_multidate(n&&new Date(n));t&&t!=="view"||(this.viewDate=n&&new Date(n));this.fill();this.setValue();t&&t==="view"||this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input"));i&&i.change();this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(n,i){var e;if(!n)return t;if(!i)return n;var r=new Date(n.valueOf()),o=r.getUTCDate(),s=r.getUTCMonth(),h=Math.abs(i),u,f;if(i=i>0?1:-1,h===1)f=i===-1?function(){return r.getUTCMonth()===s}:function(){return r.getUTCMonth()!==u},u=s+i,r.setUTCMonth(u),(u<0||u>11)&&(u=(u+12)%12);else{for(e=0;e<h;e++)r=this.moveMonth(r,i);u=r.getUTCMonth();r.setUTCDate(o);f=function(){return u!==r.getUTCMonth()}}while(f())r.setUTCDate(--o),r.setUTCMonth(u);return r},moveYear:function(n,t){return this.moveMonth(n,t*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(n){var o,t,u,i,r,f;if(this.picker.is(":not(:visible)")){n.keyCode===27&&this.show();return}o=!1;r=this.focusDate||this.viewDate;switch(n.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide();n.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=n.keyCode===37?-1:1;n.ctrlKey?(u=this.moveYear(this.dates.get(-1)||e(),t),i=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(u=this.moveMonth(this.dates.get(-1)||e(),t),i=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(u=new Date(this.dates.get(-1)||e()),u.setUTCDate(u.getUTCDate()+t),i=new Date(r),i.setUTCDate(r.getUTCDate()+t));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),n.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=n.keyCode===38?-1:1;n.ctrlKey?(u=this.moveYear(this.dates.get(-1)||e(),t),i=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):n.shiftKey?(u=this.moveMonth(this.dates.get(-1)||e(),t),i=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(u=new Date(this.dates.get(-1)||e()),u.setUTCDate(u.getUTCDate()+t*7),i=new Date(r),i.setUTCDate(r.getUTCDate()+t*7));this.dateWithinRange(i)&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),n.preventDefault());break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate;this.o.keyboardNavigation&&(this._toggle_multidate(r),o=!0);this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();this.picker.is(":visible")&&(n.preventDefault(),typeof n.stopPropagation=="function"?n.stopPropagation():n.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide()}o&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change())},showMode:function(n){n&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n)));this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};h=function(t,i){this.element=n(t);this.inputs=n.map(i.inputs,function(n){return n.jquery?n[0]:n});delete i.inputs;o.call(n(this.inputs),i).bind("changeDate",n.proxy(this.dateUpdated,this));this.pickers=n.map(this.inputs,function(t){return n(t).data("datepicker")});this.updateDates()};h.prototype={updateDates:function(){this.dates=n.map(this.pickers,function(n){return n.getUTCDate()});this.updateRanges()},updateRanges:function(){var t=n.map(this.dates,function(n){return n.valueOf()});n.each(this.pickers,function(n,i){i.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var e=n(t.target).data("datepicker"),i=e.getUTCDate(),f=n.inArray(t.target,this.inputs),r=f-1,u=f+1,o=this.inputs.length;if(f!==-1){if(n.each(this.pickers,function(n,t){t.getUTCDate()||t.setUTCDate(i)}),i<this.dates[r])while(r>=0&&i<this.dates[r])this.pickers[r--].setUTCDate(i);else if(i>this.dates[u])while(u<o&&i>this.dates[u])this.pickers[u++].setUTCDate(i);this.updateDates();delete this.updating}}},remove:function(){n.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};a=n.fn.datepicker;o=function(i){var u=Array.apply(null,arguments),r;return u.shift(),this.each(function(){var c=n(this),o=c.data("datepicker"),l=typeof i=="object"&&i,v;if(!o){var a=p(this,"date"),y=n.extend({},s,a,l),b=w(y.language),e=n.extend({},s,b,a,l);e.enddate&&(e.endDate=e.enddate);e.startdate&&(e.startDate=e.startdate);c.is(".input-daterange")||e.inputs?(v={inputs:e.inputs||c.find("input").toArray()},c.data("datepicker",o=new h(this,n.extend(e,v)))):c.data("datepicker",o=new f(this,e))}if(typeof i=="string"&&typeof o[i]=="function"&&(r=o[i].apply(o,u),r!==t))return!1}),r!==t?r:this};n.fn.datepicker=o;s=n.fn.datepicker.defaults={autoclose:!1,beforeShowDay:n.noop,beforeShowMonth:n.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,container:"body"};v=n.fn.datepicker.locale_opts=["format","rtl","weekStart"];n.fn.datepicker.Constructor=f;r=n.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return n%4==0&&n%100!=0||n%400==0},getDaysInMonth:function(n,t){return[31,i.isLeapYear(n)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var t=n.replace(this.validParts,'\0').split('\0'),i=n.match(this.validParts);if(!t||!t.length||!i||i.length===0)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(e,o,s){function tt(){var n=this.slice(0,c[h].length),t=c[h].slice(0,n.length);return n.toLowerCase()===t.toLowerCase()}var nt,c,v,y,h,a,it,d,w;if(!e)return t;if(e instanceof Date)return e;if(typeof o=="string"&&(o=i.parseFormat(o)),nt=/([\-+]\d+)([dmwy])/,c=e.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)){for(e=new Date,h=0;h<c.length;h++){v=nt.exec(c[h]);y=parseInt(v[1]);switch(v[2]){case"d":e.setUTCDate(e.getUTCDate()+y);break;case"m":e=f.prototype.moveMonth.call(f.prototype,e,y);break;case"w":e.setUTCDate(e.getUTCDate()+y*7);break;case"y":e=f.prototype.moveYear.call(f.prototype,e,y)}}return u(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0)}c=e&&e.match(this.nonpunctuation)||[];e=new Date;var b={},g=["yyyy","yy","M","MM","m","mm","d","dd"],l={yyyy:function(n,t){return n.setUTCFullYear(t)},yy:function(n,t){return n.setUTCFullYear(2e3+t)},m:function(n,t){if(isNaN(n))return n;for(t-=1;t<0;)t+=12;for(t%=12,n.setUTCMonth(t);n.getUTCMonth()!==t;)n.setUTCDate(n.getUTCDate()-1);return n},d:function(n,t){return n.setUTCDate(t)}},p,k;if(l.M=l.MM=l.mm=l.m,l.dd=l.d,e=u(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),a=o.parts.slice(),c.length!==a.length&&(a=n(a).filter(function(t,i){return n.inArray(i,g)!==-1}).toArray()),c.length===a.length){for(h=0,it=a.length;h<it;h++){if(p=parseInt(c[h],10),v=a[h],isNaN(p))switch(v){case"MM":k=n(r[s].months).filter(tt);p=n.inArray(k[0],r[s].months)+1;break;case"M":k=n(r[s].monthsShort).filter(tt);p=n.inArray(k[0],r[s].monthsShort)+1}b[v]=p}for(h=0;h<g.length;h++)w=g[h],w in b&&!isNaN(b[w])&&(d=new Date(e),l[w](d,b[w]),isNaN(d)||(e=d))}return e},formatDate:function(t,u,f){var e,s,o,h;if(!t)return"";for(typeof u=="string"&&(u=i.parseFormat(u)),e={d:t.getUTCDate(),D:r[f].daysShort[t.getUTCDay()],DD:r[f].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:r[f].monthsShort[t.getUTCMonth()],MM:r[f].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()},e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,t=[],s=n.extend([],u.separators),o=0,h=u.parts.length;o<=h;o++)s.length&&t.push(s.shift()),t.push(e[u.parts[o]]);return t.join("")},headTemplate:'<thead><tr class="datepicker-selector"><th tabindex="0" class="prev" title="Previous month/year"><\/th><th tabindex="0" colspan="5" title="Switch month/year" class="datepicker-switch"><span><\/span><\/th><th tabindex="0" class="next" title="Next month/year"><\/th><\/tr><\/thead>',contTemplate:'<tbody><tr><td colspan="7"><\/td><\/tr><\/tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"><\/th><\/tr><tr><th colspan="7" class="clear"><\/th><\/tr><\/tfoot>'};i.template='<div class="datepicker"><i class="datepicker-title">Choose a date<\/i><div data-view="days" class="datepicker-days"><table class="table-condensed">'+i.headTemplate+"<tbody><\/tbody>"+i.footTemplate+'<\/table><\/div><div data-view="months" class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'<\/table><\/div><div data-view="years" class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"<\/table><\/div><\/div>";n.fn.datepicker.DPGlobal=i;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=a,this};n(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=n(this);i.data("datepicker")||(t.preventDefault(),o.call(i,"show"))});n(function(){o.call(n('[data-provide="datepicker-inline"]'))});n.fn.bsDatepicker=n.fn.datepicker})(window.jQuery);
Type.registerNamespace("OauthExternalAuthentication.Web.UI");OauthExternalAuthentication.Web.UI.OAuthLoginForm=function(n){OauthExternalAuthentication.Web.UI.OAuthLoginForm.initializeBase(this,[n]);this._loginRequiresRecaptcha=null;this._captcha=null;this._siteKey=null;this._lostPasswordButton=null;this._lostPasswordButtonClickDelegate=null;this._sendRecoveryMailButton=null;this._sendRecoveryMailButtonClickDelegate=null;this._mailText=null;this._lostPasswordError=null;this._loginValidationGroup=null;this._forgotValidationGroup=null;this._lockedAccountLoginMessage=null;this._destinationPageUrl=null};var LoginRecaptchaCallback;OauthExternalAuthentication.Web.UI.OAuthLoginForm.prototype={initialize:function(){var n=this;this.get_submitButton()&&(this._submitButtonClickDelegate=Function.createDelegate(this,this._submitButtonClick),$addHandler(this.get_submitButton(),"click",this._submitButtonClickDelegate));this.get_userNameTextField()&&this.get_passwordTextField()&&(this._textFieldKeyPressDelegate=Function.createDelegate(this,this._textFieldKeyPress),$addHandler(this.get_userNameTextField().get_element(),"keypress",this._textFieldKeyPressDelegate),$addHandler(this.get_passwordTextField().get_element(),"keypress",this._textFieldKeyPressDelegate));this.get_lostPasswordButton()&&(this._lostPasswordButtonClickDelegate=Function.createDelegate(this,this.lostPasswordButtonClicked),$addHandler(this.get_lostPasswordButton(),"click",this._lostPasswordButtonClickDelegate),this.get_lostPasswordButton().href="javascript:;");this.get_sendRecoveryMailButton()&&(this._sendRecoveryMailButtonClickDelegate=Function.createDelegate(this,this.sendRecoveryMailButtonClicked),$addHandler(this.get_sendRecoveryMailButton(),"click",this._sendRecoveryMailButtonClickDelegate),this.get_sendRecoveryMailButton().href="javascript:;",$(this.get_sendRecoveryMailButton()).attr("onclick","javascript:;"));$(".has_overlay .ha_txt, .has_overlay .ha_icon",n.get_element()).on("click",function(){$("[data-id]").hide();$('[data-id="loginWidgetPanel"]').show()});if(LoginRecaptchaCallback=function(){n._submitButtonClick.call(n)},$(".header-dropdown",n.get_element()).length>0)$(".header-link",n.get_element()).on("click",function(){InitRecaptchas()});else BestWestern.InitRecaptchasOnLoad=!0},dispose:function(){this._oAuthAuthenticationDelegate&&delete this._oAuthAuthenticationDelegate;OauthExternalAuthentication.Web.UI.OAuthLoginForm.callBaseMethod(this,"dispose")},lostPasswordButtonClicked:function(){return $("[data-id]").hide(),$('[data-id="lostPasswordPanel"]').fadeIn(),!1},sendRecoveryMailButtonClicked:function(n){var u,i,t,r;return Page_ClientValidate(this.get_forgotValidationGroup()),Page_IsValid&&(u=this.get_element(),el=$(n.target),el.attr("disabled","disabled"),i=el.parents("fieldset"),i.addClass("fieldset-loading"),t=$(this.get_lostPasswordError()),t.text(),t.hide(),r=$(this.get_mailText()).val(),jQuery.ajax({type:"POST",url:"/restapi/user/forgottenpassword",accept:"application/json",contentType:"application/json; charset=utf-8",data:JSON.stringify({MembershipNumber:r}),success:function(n,i,r){var u=JSON.parse(r.responseText);u.Result===!0?($('[data-id="lostPasswordPanel"]').hide(),$('[data-id="passwordResetSentPanel"]').fadeIn()):(u.Message&&u.Message!==""?t.text(u.Message):t.text("There was a problem resetting your password"),t.show())},error:function(){t.text("There was a problem resetting your password");t.show()},complete:function(){i.removeClass("fieldset-loading");el.attr("disabled",null)}})),!1},_submitButtonClick:function(){if(this.get_submitButton().disabled||$(this.get_submitButton()).parents(".xloading-area").hasClass("active")||(this.get_errorMessageLabel().style.display="none",!this.validate())||(Page_ClientValidate(this.get_loginValidationGroup()),Page_IsValid!==!0))return!1;var n=this,t=function(){var i=$(n.get_submitButton()).data("recaptchaid"),t=$('[data-captcha="'+i+'"]'),r=BestWestern.RecaptchaIds[$(t)[0].id];n._sendAuthenticationRequest(n.get_userNameTextField().get_value(),n.get_passwordTextField().get_value(),"/bwrewards/authenticate",r,t)};this.get_loginRequiresRecaptcha()===!0?t():t()},_sendAuthenticationRequest:function(n,t,i,r,u){var f=this,e=null;if(this.get_loginRequiresRecaptcha()===!0&&(e=grecaptcha.getResponse(r),e===null||e==="")){$(u).attr("data-size")==="invisible"?grecaptcha.execute(r):f._showErrorMessage("Error: Please tick the box above and complete the captcha to proceed to your account.");return}$(this.get_submitButton()).width($(this.get_submitButton()).width()).parents(".xloading-area").addClass("active");jQuery.ajax({type:"POST",url:i,data:{wrap_name:n,wrap_password:t,sf_domain:f._membershipProvider,sf_persistent:f.get_rememberMeCheckbox().checked,response:e,deflate:!0},success:function(n,t,i){f._authenticationSuccess(n,t,i)},error:function(){$(f.get_submitButton()).removeAttr("style").parents(".xloading-area").removeClass("active");f.get_loginRequiresRecaptcha()===!0&&grecaptcha.reset(r);f._showErrorMessage(f.get_incorrectLoginMessage())},complete:function(){f.setEnabled(!0)}})},_authenticationSuccess:function(n){var t=this._getRedirectUrl(n);window.location=t},_getRedirectUrl:function(n){var t,f=this._getReturnLocation(),e=this.get_handleRejectedUserParam(),o=this.get_rememberMeParam(),i=window.location.href,r="?",u;return i.indexOf("?")!=-1&&(r="&"),t=i+r+n+"&"+e+"=true&"+o+"="+this.get_rememberMeCheckbox().checked,u=this.get_returnUrlParam(),i.indexOf(u)<0&&(t+="&"+this.get_returnUrlParam()+"="+encodeURIComponent(f)),t},_getReturnLocation:function(){var i="",r=window.location.search.indexOf(this.get_returnUrlParam()),t,n;if(r>-1){if(t=this._getQueryStringParams(),t[this.get_returnUrlParam()]&&t[this.get_returnUrlParam()].length>0){if(n=t[this.get_returnUrlParam()],n.startsWith(window.location.protocol))return n;n.startsWith("/")||(n="/"+n);i=window.location.protocol+"//"+window.location.host+n}}else i=this.get_destinationPageUrl()?this.get_destinationPageUrl():document.URL;return i},get_returnUrlParam:function(){return"returnUrl"},get_rememberMeParam:function(){return"rememberMe"},get_destinationPageUrl:function(){return this._destinationPageUrl},set_destinationPageUrl:function(n){this._destinationPageUrl=n},get_handleRejectedUserParam:function(){return"reject"},get_siteKey:function(){return this._siteKey},set_siteKey:function(n){this._siteKey=n},get_captcha:function(){return this._captcha},set_captcha:function(n){this._captcha=n},get_lostPasswordButton:function(){return this._lostPasswordButton},set_lostPasswordButton:function(n){this._lostPasswordButton=n},get_sendRecoveryMailButton:function(){return this._sendRecoveryMailButton},set_sendRecoveryMailButton:function(n){this._sendRecoveryMailButton=n},get_mailText:function(){return this._mailText},set_mailText:function(n){this._mailText=n},get_lostPasswordError:function(){return this._lostPasswordError},set_lostPasswordError:function(n){this._lostPasswordError=n},get_loginValidationGroup:function(){return this._loginValidationGroup},set_loginValidationGroup:function(n){this._loginValidationGroup=n},get_forgotValidationGroup:function(){return this._forgotValidationGroup},set_forgotValidationGroup:function(n){this._forgotValidationGroup=n},get_loginRequiresRecaptcha:function(){return this._loginRequiresRecaptcha},set_loginRequiresRecaptcha:function(n){this._loginRequiresRecaptcha=n},get_lockedAccountLoginMessage:function(){return this._lockedAccountLoginMessage},set_lockedAccountLoginMessage:function(n){this._lockedAccountLoginMessage=n}};typeof Telerik!="undefined"&&Telerik.Sitefinity&&Telerik.Sitefinity.Web&&Telerik.Sitefinity.Web.UI&&Telerik.Sitefinity.Web.UI.PublicControls&&Telerik.Sitefinity.Web.UI.PublicControls.LoginWidget&&OauthExternalAuthentication.Web.UI.OAuthLoginForm.registerClass("OauthExternalAuthentication.Web.UI.OAuthLoginForm",Telerik.Sitefinity.Web.UI.PublicControls.LoginWidget);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();
function offerAvailGtm(n){typeof dataLayer&&(hotelName=$(n).parents(".sr_details").find(".sr_title a").text(),dataLayer.push({event:"gated-rates-check-availability",category:"Gated Rates",action:"Check Availability Button",label:hotelName}))}function offerAvailGtmMap(n){typeof dataLayer&&(hotelName=$(n).parents(".sr_in").find(".sr_title a").text(),dataLayer.push({event:"gated-rates-check-availability",category:"Gated Rates",action:"Check Availability Button",label:hotelName}))}function offerCalChange(){typeof dataLayer&&(firstDate=$(".first-date-selected").text(),lastDate=$(".last-date-selected").text(),monthName=$(".month-name").text())}function offerSelectGtm(){typeof dataLayer&&(offerSelected=hotelName+" > "+firstDate+" - "+lastDate+" "+monthName,dataLayer.push({event:"gated-rates-check-calender",category:"Gated Rates",action:"Check Availability Calendar",label:offerSelected}))}Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferControl=function(n){this._offerCode=null;this._map=null;this._markers=[];this._markerClusterer=null;this._markerTemplate=null;this._ratePlanCode=null;this._guestsSelection=null;this._isMobile=null;this._hotelSearchResults=null;this._hotelAutocomplete=null;this._listViewControl=null;this._defaultGuests=null;this._minimumLengthOfStay=null;this._minimumLengthOfStayIsFixed=null;this._gatedRate=null;this._offerPercentageStringFormat=null;this._checkInDate=null;this._checkInDateFld=null;this._checkInDatePicker=null;this._onDateChangedDelegate=null;this._onDateCloseDelegate=null;this._searchView="LIST";Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferControl.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferControl.prototype={dateRangePicker:null,initialize:function(){var n=this;$('[data-field="OfferRate"]',n.get_element()).change(function(){n.setHotelsData()});$('[data-field="Month"]',n.get_element()).change(function(){n.setHotelsData()});$('[data-field="Region"]',n.get_element()).change(function(){n.setHotelsData()});this.get_hotelAutocomplete()!=null&&(this.get_hotelAutocomplete().onHotelSelected=function(){$('[data-field="OfferRate"] option:first').prop("selected",!0);$('[data-field="Region"] option:first').prop("selected",!0);$(".hasCustomSelect").trigger("render");n.setHotelsData()}),function(){$(".search_keyword").on("keyup",function(){$(".clear-selection").show()});$(".search_keyword").on("click",function(){$(".clear-selection").show()});$(".search_keyword").on("blur",function(){setTimeout(function(){$(n.get_hotelAutocomplete()._searchInput).val().length||$(".clear-selection").hide()},200)})}();$(".clear-selection").click(function(){n.setHotelsData()});this.get_checkInDate()!=null&&(this.configureDatepicker(),$(this.get_checkInDate()).bsDatepicker("hide"));this.get_listViewControl()!=null&&this.configureListView();$(".campaign-map-view-button").on("click",function(){$("body").addClass("map-initialising");$("html").addClass("noscroll");$(".map_view_overlay").fadeIn(250,function(){n.initMap()})});$(".action--scroll-hotels").on("click",function(){$("html,body").animate({scrollTop:$(".campaign-filters").offset().top-20})});$(".campaign-filters--filters select:not(.hasCustomSelect)").customSelect();Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferControl.callBaseMethod(this,"initialize")},closeMapSearch:function(){var n=$(".map_view_overlay");if($("html").is(".ie8, .ie9"))n.fadeOut(function(){$(this).removeClass("state_closed state_loaded")});else n.addClass("state_closed").on("webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend",function(n){n.target!==null&&$(n.target).hasClass("map_view_overlay")===!0&&$(this).css("display","none").removeClass("state_closed state_loaded")});$("html").removeClass("noscroll");$("body").removeClass("campaign-map-active");$(".campaign-filters-wrp").removeAttr("style")},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferControl.callBaseMethod(this,"dispose")},icon:"/App_Themes/BestWesternX2/Images/x2marker.png",iconActive:"/App_Themes/BestWesternX2/Images/x2markerLight.png",initMap:function(){var t=this,i=new google.maps.LatLng(54.8495041,-7.5324952),r=new google.maps.StyledMapType([{featureType:"poi.business",stylers:[{visibility:"off"}]}],{name:"Styled Map"}),u={zoom:6,center:i,disableDefaultUI:!0,clickableIcons:!1},n=new google.maps.Map(document.getElementById("map_element"),u);n.mapTypes.set("map_style",r);n.setMapTypeId("map_style");this.set_map(n);this.setHotelsData();google.maps.event.addListenerOnce(this.get_map(),"idle",function(){$(".map_view_overlay").addClass("state_loaded");$(".campaign-filters-wrp").height($(".campaign-filters").outerHeight());$("body").addClass("campaign-map-active");setTimeout(function(){$("body").removeClass("map-initialising")},1500)});BestWestern.StyleSelects();$("#map_close").on("click",function(){t.closeMapSearch()})},getInfoBoxContent:function(n,t){var r=new kendo.template(this.get_markerTemplate()),i=r(n);return t!==!0&&(i=i.replace(/data-availability/g,"hidden")),i.replace(/<a /g,'<a target="_self" ')},setHotelsData:function(){this.get_hotelSearchResults()&&this.get_hotelSearchResults().updateSearchResults();this.get_isMobile()||this.getHotelsData(this.setHotelsFromDataSource)},getOfferSearchModel:function(){var c=$('[data-field="OfferRate"]',this.get_element()).val(),n=$('[data-field="Month"]',this.get_element()).val(),l=$('[data-field="Region"]',this.get_element()).val(),a=$('[data-field="Amenities"]',this.get_element()).val(),h=this.get_comparisonMode(),s=null,r=null,t,u,f,i,e,o;for(this.get_hotelAutocomplete()!=null&&(r=this.get_hotelAutocomplete().get_selectedPoint()),t={OfferCode:this.get_offerCode(),ComparisonMode:h},r!=null&&(s=r.id,t.HotelId=s),this.get_checkInDatePicker()!=null&&(u=this.get_checkInDatePicker().getDate(),u!=null&&(n=u.getMonth()+1)),n!=null&&n!=undefined&&n!=""&&(t.Month=n),f=["OfferRate","Region","Amenities","Theme"],i=0;i<f.length;i++)e=f[i],o=$('[data-field="'+e+'"]',this.get_element()).val(),o&&(t[e]=o);return t},getHotelsData:function(n){var t=this;$.ajax({url:"/restapi/search/offer/hotel",type:"GET","async":!0,cache:!0,data:t.getOfferSearchModel(),dataType:"json",success:function(i){$(i.Items).each(function(){$.extend(this,{detailsUrl:function(){return this.Url}})});n&&n.apply(t,[i.Items])}})},getFullHotelData:function(n,t){var i=this.getOfferSearchModel();i.PropertyId=n.PropertyId;$.ajax({url:"/restapi/search/offer/hotel-item",type:"GET","async":!0,cache:!0,data:i,dataType:"json",success:function(n){n!==null&&$.extend(n,{detailsUrl:function(){return this.Url}});t&&t.apply(self,[n])}})},setHotelsFromDataSource:function(n){var t=this,f=new google.maps.LatLngBounds,c=!1,i,u,e,s;if(this.clearOverlays(),i=this.get_map(),i!=null){var o=[],h=[],l="/App_Themes/BestWestern/Images/infobox-close.png";n===null||n.length===0?(i.setCenter(new google.maps.LatLng(54.8495041,-7.5324952)),i.setZoom(6)):(u=$('[data-field="Month"]',t.get_element()).val(),u||(u=((new Date).getMonth()+1)%12),this.get_checkInDatePicker()&&(e=this.get_checkInDatePicker().getDate(),e!=null&&(u=e.getMonth()+1)),n.length===1&&this.get_hotelAutocomplete().get_selectedPoint()!=null&&(s=n[0],t.getFullHotelData(s,function(n){t.loadCalendarAvailability(n.PropertyId,s.RatePlan,u,n,t.get_guests(),e)})),$(n).each(function(n,r){var s=new google.maps.LatLng(r.Address.Latitude,r.Address.Longitude),e;f.extend(s);e=new google.maps.Marker({position:s,map:i,icon:t.icon});h.push(e);t._markers.push(e);google.maps.event.addListener(e,"click",function(){t.getFullHotelData(r,function(n){var f=new InfoBox({content:t.getInfoBoxContent(n,c),alignBottom:!0,pixelOffset:new google.maps.Size(-150,-50),closeBoxURL:l,closeBoxMargin:"0px"}),i,s;for(o.push(f),i=0;i<o.length;i++)o[i].close(),h[i].setIcon(t.icon);f.open(t.get_map(),e);setTimeout(FHManager.PostBind,100);e.setIcon(t.iconActive);t.get_checkInDatePicker()&&(s=t.get_checkInDatePicker().getDate(),s!=null&&(u=s.getMonth()+1));f.addListener("domready",function(){$('[data-type="cal-avail"]').click(function(){t.loadCalendarAvailability(n.PropertyId,r.RatePlan,u,n,t.get_guests(),s)})});google.maps.event.addListener(f,"closeclick",function(){e.setIcon(t.icon)});setTimeout(function(){var t=$(".infoBox .sr_share"),n;if(typeof stLight!="undefined")for(n=0;n<t.length;n++)stWidget.addEntry({service:"sharethis",element:t[n],url:t[n].getAttribute("data-url")})},500)})})}),this._markerClusterer=new MarkerClusterer(i,this._markers,{styles:t.clustererStyle}),r=new google.maps.LatLng(f.getNorthEast().lat()+1,f.getNorthEast().lng()-1),f.extend(r),google.maps.event.addListenerOnce(i,"bounds_changed",function(){var t=i.zoom,n;t<=6&&(n=new google.maps.LatLng(i.getCenter().lat(),i.getCenter().lng()-5.1),i.setCenter(n))}),i.fitBounds(f))}},clearFilter:function(n){if(n!==undefined){var t=this.get_filters();t.hasOwnProperty(n)&&delete t[n];this.applyFilters()}else this.set_filters({}),this.applyFilters()},clustererStyle:[{url:"/App_Themes/bestwestern/images/markerclusterer/m1.png",width:53,height:52,anchor:[19,0],textSize:10},{url:"/App_Themes/bestwestern/images/markerclusterer/m2.png",width:56,height:55,anchor:[21,0],textSize:11},{url:"/App_Themes/bestwestern/images/markerclusterer/m3.png",width:66,height:65,anchor:[25,0],textSize:12}],clearOverlays:function(){for(var n=0;n<this._markers.length;n++)this._markers[n].setMap(null);this._markers=[];this._markerClusterer&&this._markerClusterer.clearMarkers()},loadCalendarAvailability:function(n,t,i,r,u,f){var e=this,o=300;isMobile&&(o=600);$.fancybox({minWidth:o,content:$("#calendar-availability").html(),tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},beforeShow:function(){var n=$('<a title="Close" class="bw_fancybox_close" href="javascript:void(0);"><\/a>');$(".fancybox-outer").append(n);$(".bw_fancybox_close, .bo_close").on("click",function(){$.fancybox.close()})},afterShow:function(){var b=this;(i==null||i==undefined)&&(i=(new Date).getMonth()+1);var a=parseInt(i),c=Date.Today(),v=c.getFullYear(),y=c.getMonth(),o=new Date;f==null||f==undefined?y+1>a?o.setFullYear(v+1,a-1,1):(o.setFullYear(v,a-1,1),o<c&&(o=c)):o=f;var k=new Date(o.getFullYear(),o.getMonth()+1,0),s=null,l=[],p=function(n){var t,i;if(l.length===0)l=n;else for(t=0;t<n.length;t++)i=h(new Date(n[t].Date)),i===null&&l.push(n[t])},h=function(n){var t=l.filter(function(t){return t.DateString===n.format("yyyy-MM-dd")});return t&&t.length?t[0]:null},w=function(i){var f=new Date(i),r;(f<Date.Today()&&(f=Date.Today()),r=new Date(i),r.setFullYear(r.getFullYear(),r.getMonth()+2,0),h(r)===null)&&$.ajax({url:"/restapi/search/availability",type:"GET","async":!1,cache:!0,data:{PropertyId:n,RatePlanCode:t,Adults:u[1],Children:u[2],Ages:u[3],RoomQuantity:u[0],CheckIn:f.format("yyyy-MM-dd"),CheckOut:r.format("yyyy-MM-dd")},dataType:"json",accept:"appliction/json",success:function(n){p(n.Availability)},error:function(n){BestWestern.ShowMessage(BestWestern.GetErrorMessage(n))}})};s=$("#calendar-availability-input").dateRangePicker({inline:!0,singleMonth:!0,startDate:"2015-12-01",container:"#calendar-availability-range",showTopbar:!1,alwaysOpen:!0,time:{enabled:!1},minDays:2,lookBehind:!1,selectBackward:!1,selectForward:!0,beforeShowDay:function(n,t){var i=h(n),o,s,f,r,u,l,c;if(i||(w(n),i=h(n)),o=n,s=n.getTimezoneOffset()*6e4,o=new Date(n.getTime()-s-864e5),f=h(o),i){if(i.Status==="Closed")return f&&f.Status==="Open"&&!e.get_minimumLengthOfStayIsFixed()?[t&&!0,"date-available-checkout data-status-"+f.Status.toLowerCase(),undefined,!0]:[!1,"date-unavailable data-status-"+i.Status.toLowerCase()];if(e.get_minimumLengthOfStayIsFixed()){for(r=!0,u=0;u<e.get_minimumLengthOfStay();u++)l=new Date(n.getTime()-s+864e5*(u+1)),c=h(l),c!=null&&(r=u==e.get_minimumLengthOfStay()-1?r&&i.Status=="Open":r&&i.Status=="Open"&&c.Status=="Open");return r?[!0,"date-available data-status-"+i.Status.toLowerCase()]:[!1,"date-available data-status-closed"]}return[!0,"date-available data-status-"+i.Status.toLowerCase()]}return[!0,"data-status-unknown"]},hoveringTooltip:function(n){if(n>1)return n-1+" night"+(n>2?"s":"")},showDateFilter:function(n,t){return t}}).bind("datepicker-first-date-selected",function(n,t){e.get_minimumLengthOfStayIsFixed()&&s.setEndDate(t.date1.valueOf()+864e5*e.get_minimumLengthOfStay())}).bind("datepicker-change",function(n,i){e.dateRangeSelected(n,i,t,r,u)}).data("dateRangePicker");s.showMonth(o.format("yyyy-MM-dd"),"month1");e.dateRangePicker=s;$(".bw_fancybox").resize();$("#calendar-availability-checkout-button").click(function(){var t,i,f;if(!s)return null;if(t=$("#calendar-availability-input").val().split(" to "),t.length<2||t[0]===""||t[0]===undefined){i=this;$("[data-error]",i.parentNode).show();setTimeout(function(){$("[data-error]",i.parentNode).hide()},2e3);return}var e=t[0],o=t[1],n=new BestWestern.SearchModel;n.Term=r.Url;n.Type="hotel";n.RoomQuantity=u[0];n.Adults=u[1];n.Children=u[2];n.Ages=u[3];n.CheckIn=e;n.CheckOut=o;f=BestWestern.Search.BuildSearchUrl(n);window.location="/hotels"+f+"#hd_rooms_rates"});$(".clear-availability-selection").on("click",function(n){s.clear();n.stopPropagation()})}})},meetsMlosRequirement:function(n,t){if(this.get_minimumLengthOfStay()>1){var i=(t-n)/864e5;return i>=this.get_minimumLengthOfStay()}return!0},dateRangeSelected:function(n,t,i,r,u){var f=this,e;if(this.meetsMlosRequirement(t.date1,t.date2)===!1){$("#room-results span").addClass("sfMsgNegative").text(String.format("Please ensure you have selected a {0} night stay",this.get_minimumLengthOfStay()));$("#room-results").show();return}e={PropertyId:r.PropertyId,Adults:u[1],Children:u[2],RoomQuantity:u[0],CheckIn:t.date1.format("yyyy-MM-dd"),CheckOut:t.date2.format("yyyy-MM-dd"),PromoCode:this.get_offerCode(),Ages:null,ComparisonMode:this.get_comparisonMode()};$("#room-results").hide();$("#room-results span").removeClass("sfMsgNegative");$("#room-results span").removeClass("sfMsgPositive");$("#room-results span").addClass("loading");$("#calendar-availability-checkout-button").addClass("disabled");$("#room-results span").html("");$("#room-results").show();$.ajax({url:"/restapi/hotel-details/availability",type:"POST",dataType:"json",accept:"application/json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",success:function(n){var t=null;t=[].concat.apply([],n.RoomTypes.map(function(n){return n.RoomRates})).filter(function(n){return n.RatePlan.RatePlanCode===i}).map(function(n){return n.TotalAmountAfterTax}).reduce(function(n,t){return n===null?t:Math.min(n,t)},null);t!=null&&t?f.get_gatedRate()&&n.OfferPercentage>0?$("#room-results span").addClass("sfMsgPositive").html(String.format(f.get_offerPercentageStringFormat(),n.OfferPercentage.toFixed(0))):$("#room-results span").addClass("sfMsgPositive").html(String.format("Price from: <strong>&pound;{0}<\/strong>",parseFloat(t).toFixed(2))):($("#room-results span").addClass("sfMsgNegative").text("No availability found."),f.dateRangePicker.clear());$("#room-results").show()},error:function(n){var t=JSON.parse(n.responseText);BestWestern.ShowMessage(t.ResponseStatus.Message)},complete:function(){$("#room-results span").removeClass("loading");$("#calendar-availability-checkout-button").removeClass("disabled")}})},configureDatepicker:function(){var t;this._onDateChangedDelegate=Function.createDelegate(this,this.onDateChanged);this._onDateCloseDelegate=Function.createDelegate(this,this.onDateClosed);var f=this,i=this.get_element(),n=new Date,e=n.addDays(1),o=n.addDays(2),u=n.addDays(348),s=n.addDays(349),r;isMobile||(r=this.get_checkInDate().getAttribute("data-orientation")==="right"?"dropdown-menu datepicker-orient-top datepicker-orient-"+this.get_checkInDate().getAttribute("data-orientation"):"dropdown-menu datepicker-orient-top");t=$(this.get_checkInDate()).bsDatepicker({format:"D, dd/mm",startDate:n,endDate:u,multidateSeparator:"-",todayHighlight:!0,customClass:r});t.on("change",this._onDateChangedDelegate).on("blur",this._onDateChangedDelegate).on("hide",this._onDateCloseDelegate);this.set_checkInDatePicker(t.data("datepicker"));this.set_checkInDateFld($(".checkindate_fld",this.get_element())[0]);t.on("changeDate",this._onDateChangedDelegate);$(".date",i).on("click",function(){var n=$(this),r=n.data("type"),t=$("."+r,i);n.prop("disabled")||(setTimeout(function(){n.addClass("selecting-date")},200),$(".date").removeClass("active selecting-date"),n.addClass("active"),t.is(":hidden")?($(".dateselector",i).hide(),isMobile?t.fadeIn():t.show()):(n.removeClass("active selecting-date").find(".sfTxt").blur(),t.hide()))})},configureListView:function(){},onDateChanged:function(){var n=this.get_checkInDatePicker(),t=this.get_checkInDateFld();n.getDates().length>0?this.setInField(n.getDate()):this.setInField(null);this.onDateClosed(this)},onDateClosed:function(){var n=this.get_checkInDatePicker(),t=n.getDate();this.get_isMobile()&&this.setHotelsData()},setInField:function(n){var t=this.get_checkInDateFld();t&&(n===null?$(t).text(""):$(t).text(n.format("ddd, dd/MM")))},get_offerCode:function(){return this._offerCode},set_offerCode:function(n){this._offerCode=n},get_comparisonMode:function(){return this._comparisonMode},set_comparisonMode:function(n){this._comparisonMode=n},get_ratePlanCode:function(){return this._ratePlanCode},set_ratePlanCode:function(n){this._ratePlanCode=n},get_map:function(){return this._map},set_map:function(n){this._map=n},get_guests:function(){return this.get_guestsSelection()?this.get_guestsSelection().getValue():this.get_defaultGuests()},get_markerTemplate:function(){return this._markerTemplate},set_markerTemplate:function(n){this._markerTemplate=n},get_guestsSelection:function(){return this._guestsSelection},set_guestsSelection:function(n){this._guestsSelection=n},get_isMobile:function(){return this._isMobile},set_isMobile:function(n){this._isMobile=n},get_hotelSearchResults:function(){return this._hotelSearchResults},set_hotelSearchResults:function(n){this._hotelSearchResults=n},get_hotelAutocomplete:function(){return this._hotelAutocomplete},set_hotelAutocomplete:function(n){this._hotelAutocomplete=n},get_checkInDate:function(){return this._checkInDate},set_checkInDate:function(n){this._checkInDate=n},get_checkInDateFld:function(){return this._checkInDateFld},set_checkInDateFld:function(n){this._checkInDateFld=n},set_checkInDatePicker:function(n){this._checkInDatePicker=n},get_checkInDatePicker:function(){return this._checkInDatePicker},set_listViewControl:function(n){this._listViewControl=n},get_listViewControl:function(){return this._listViewControl},get_searchView:function(){return this._searchView},set_searchView:function(n){this._searchView=n},get_minimumLengthOfStay:function(){return this._minimumLengthOfStay},set_minimumLengthOfStay:function(n){this._minimumLengthOfStay=n},get_minimumLengthOfStayIsFixed:function(){return this._minimumLengthOfStayIsFixed},set_minimumLengthOfStayIsFixed:function(n){this._minimumLengthOfStayIsFixed=n},get_gatedRate:function(){return this._gatedRate},set_gatedRate:function(n){this._gatedRate=n},toggleSearchView:function(){if($(".promo-outer--wrap").length===0){var n=this.get_searchView();n=="MAP"?($("#map_element").hide(),$("#search-list").show(),this.set_searchView("LIST")):($("#map_element").show(),$("#search-list").hide(),this.set_searchView("MAP"))}},get_defaultGuests:function(){return this._defaultGuests},set_defaultGuests:function(n){this._defaultGuests=n},get_offerPercentageStringFormat:function(){return this._offerPercentageStringFormat},set_offerPercentageStringFormat:function(n){this._offerPercentageStringFormat=n}};var hotelName="",firstDate="",lastDate="",monthName="";Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferControl.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferControl",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferSearchResults=function(n){this._basePath=null;this._resultsElementSelector=null;this._pagerElementSelector=null;this._relativeSearchServiceUrl=null;this._resultsTemplate=null;this._gridResultsTemplate=null;this._maxThumbnailImages=null;this._resultsList=null;this._pageSize=null;this._sortBySelect=null;this._dataSchema=null;this._dataSource=null;this._filters=null;this._thumbnailName=null;this._fullImageName=null;this._searchResultsFilter=null;this._switchToGridViewDelegate=null;this._switchToListViewDelegate=null;this._sortBySelectChangedDelegate=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferSearchResults.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferSearchResults.prototype={initialize:function(){var n,t;Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferSearchResults.callBaseMethod(this,"initialize");n=this;$("#has_filtered").click(function(){setTimeout(function(){$("html, body").animate({scrollTop:0})},500,$("#list_view_tab").click())});t=BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferControl);this.set_searchResultsFilter(t);this.get_searchResultsFilter()!=null&&this.get_searchResultsFilter().set_hotelSearchResults(this);n.bindSearchResults();$('[data-tab="map_view_tab"]').click(function(){n.get_mapControl().showMapSearch()});this.set_filters({})},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferSearchResults.callBaseMethod(this,"dispose")},DataSchema:function(){return{MinPrice:0,MaxPrice:0,CurrencySymbol:"&pound;",Location:"",TotalIncludingUnavailable:null,TierCounts:null,AmenitiesCounts:null,AllAmenities:null,AvailabilitySearch:!1,IsInternationalSearch:!1}},dataSchemeData:function(n){var t=new this.DataSchema,r,u,f,e,o;n.DirectConnectDown!=undefined&&n.DirectConnectDown&&(n=n.Response);t.TotalIncludingUnavailable=n.TotalPropertiesIncludingUnavailable;t.Location=n.Location;var i=n.Items.map(function(n){return n.TotalPrice}),s=Math.max.apply(Math,i),h=Math.min.apply(Math,i);return t.MaxPrice=s,t.MinPrice=h,n.Items.length>0&&(t.CurrencySymbol=n.Items[0].CurrencySymbol),t.IsInternationalSearch=n.IsInternationalSearch,r=n.Items.map(function(n){return n.TierId}),u=r.reduceToCount(),t.TierCounts=u,f=n.Items.map(function(n){return n.Amenities}).reduce(function(n,t){return n.concat(t)},[]),e=f.reduceToCount(),t.AmenitiesCounts=e,t.AllAmenities=n.Items.map(function(n){return n.Amenities}),t.AvailabilitySearch=n.AvailabilitySearch,this.set_dataSchema(t),o=this,$(n.Items).each(function(){$.extend(this,{detailsUrl:function(){return this.Url+o.get_searchParms()}})}),n.Items},updateSearchResults:function(){this.get_dataSource().read();this.get_dataSource().page(1)},bindSearchResults:function(){var t=window.location.pathname.replace(this.get_basePath(),""),n=this;this.set_dataSource(new kendo.data.DataSource({transport:{read:{url:this.get_relativeSearchServiceUrl(),dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",data:function(){return n.get_searchResultsFilter()!=null?n.get_searchResultsFilter().getOfferSearchModel():null}}},schema:{total:"TotalPropertiesIncludingUnavailable",data:function(n){return n.DirectConnectDown!=undefined&&n.DirectConnectDown?n.Response.Items:n.Items}},requestEnd:function(t){t.response!==undefined&&(t.response.DirectConnectDown!=undefined&&t.response.DirectConnectDown&&($("[data-dc-down]",n.get_element()).show(),$("[data-dc-down] .sfMsgNegative span",n.get_element()).text(t.response.ResultsMessage)),n.dataSchemeData(t.response),t.response.Count!==undefined&&(t.response.Count===0?$("[data-no-results]",n.get_element()).show():$("[data-no-results]",n.get_element()).hide()))},pageSize:this.get_pageSize(),serverPaging:!0,serverFiltering:!0,serverSorting:!0}));$(this.get_pagerElementSelector()).kendoPager({dataSource:n.get_dataSource(),autoBind:!1,info:!1,previousNext:!1,buttonCount:5});$(this.get_pagerElementSelector()+"-bottom").kendoPager({dataSource:n.get_dataSource(),autoBind:!1,info:!1,previousNext:!1,buttonCount:5});$(this.get_resultsElementSelector()).kendoListView({dataSource:n.get_dataSource(),autoBind:!1,template:kendo.template(n.get_resultsTemplate()),dataBound:function(){$('[data-type="cal-avail"]').click(function(){var r=n.get_resultsList().dataItem(this),t=n.get_searchResultsFilter(),u=$('[data-field="Month"]',t.get_element()).val(),i;t.get_checkInDatePicker()&&(i=t.get_checkInDatePicker().getDate(),i!=null&&(u=i.getMonth()+1));t.loadCalendarAvailability(r.PropertyId,t.get_ratePlanCode(),u,r,t.get_guests())});FHManager.PostBind();setTimeout(function(){var t=$(".sr_share"),n,i;if(typeof stLight!="undefined")for(n=0;n<t.length;n++)i=t[n].getAttribute("data-url"),stWidget.addEntry({service:"sharethis",element:t[n],url:i})},500)}});this.set_resultsList($(n.get_resultsElementSelector()).data("kendoListView"));this.updateSearchResults()},get_resultsList:function(){return this._resultsList},set_resultsList:function(n){this._resultsList=n},get_basePath:function(){return this._basePath},set_basePath:function(n){this._basePath=n},get_resultsElementSelector:function(){return this._resultsElementSelector},set_resultsElementSelector:function(n){this._resultsElementSelector=n},get_pagerElementSelector:function(){return this._pagerElementSelector},set_pagerElementSelector:function(n){this._pagerElementSelector=n},get_relativeSearchServiceUrl:function(){return this._relativeSearchServiceUrl},set_relativeSearchServiceUrl:function(n){this._relativeSearchServiceUrl=n},get_resultsTemplate:function(){return this._resultsTemplate},set_resultsTemplate:function(n){this._resultsTemplate=n},get_gridResultsTemplate:function(){return this._gridResultsTemplate},set_gridResultsTemplate:function(n){this._gridResultsTemplate=n},get_maxThumbnailImages:function(){return this._maxThumbnailImages},set_maxThumbnailImages:function(n){this._maxThumbnailImages=n},get_pageSize:function(){return this._pageSize},set_pageSize:function(n){this._pageSize=n},get_thumbnailName:function(){return this._thumbnailName},set_thumbnailName:function(n){this._thumbnailName=n},get_fullImageName:function(){return this._fullImageName},set_fullImageName:function(n){this._fullImageName=n},get_searchResultsFilter:function(){return this._searchResultsFilter},set_searchResultsFilter:function(n){this._searchResultsFilter=n},get_mapControl:function(){return this._mapControl},set_mapControl:function(n){this._mapControl=n},get_searchParms:function(){var n=window.location.pathname.replace(this.get_basePath(),""),t=BestWestern.Search.GetSearchModel(n);return BestWestern.Search.BuildSearchParams(t)},get_dataSchema:function(){return this._dataSchema},set_dataSchema:function(n){this._dataSchema=n},get_filters:function(){return this._filters},set_filters:function(n){this._filters=n},get_dataSource:function(){return this._dataSource},set_dataSource:function(n){this._dataSource=n},get_sortBySelect:function(){return this._sortBySelect},set_sortBySelect:function(n){this._sortBySelect=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferSearchResults.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.OfferSearchResults",Sys.UI.Control);
var upKeyActions=function(n){var i=$(n.target),t;$("#main_nav a").is(":focus")&&(t=i.next(".ul2"),t.length>0&&t.animate({height:"hide",opacity:"hide"}));BestWestern.LastKeyPressEnter=!1},downKeyActions=function(n){var i=$(n.target),t;$("#main_nav a").is(":focus")&&(t=i.next(".ul2"),t.length>0&&t.animate({height:"show",opacity:"show"}),n.preventDefault());BestWestern.LastKeyPressEnter=!1},leftKeyActions=function(n){var t=$(n.target);BestWestern.LastKeyPressEnter=!1},rightKeyActions=function(n){var t=$(n.target);$("#bw_fav").is(":focus")&&$("body").is(".oc_active")&&$("#oc_close").focus();BestWestern.LastKeyPressEnter=!1},enterKeyActions=function(n){var t=$(n.target);$("#oc_close").is(":focus")&&setTimeout(function(){$("#bw_fav").focus()},50);$(".guest_fld input").is(":focus")&&(setTimeout(function(){t.trigger("click")},100),n.preventDefault());$("div.rt_selection").is(":focus")&&t.next(".rt_selections").fadeIn();$("tr.rt_selection").is(":focus")&&(t.trigger("click"),t.parents(".rt_selections").hide(),t.find(".rt_radio input").prop("checked",!0),t.siblings().removeClass("selected"),t.addClass("selected"),t.parents(".rt-item, .rt_selector").find("div.rt_selection").length>0&&t.parents(".rt-item, .rt_selector").find("div.rt_selection").focus());t.is(".datepicker *")&&t.trigger("click");($("#offer-id-txt-wrp input").is(":focus")||$(".advanced_search_wrp button.button").is(":focus"))&&(t.parents(".advanced_search_wrp").find("button.button").trigger("click"),n.preventDefault());BestWestern.LastKeyPressEnter=!0},tabKeyActions=function(n){var t=$(n.target);setTimeout(function(){var n=$("#main_nav .ul2:visible");n.length>0&&n.find($(document.activeElement)).length===0&&n.animate({height:"hide",opacity:"hide"})},150);BestWestern.LastKeyPressEnter=!1};(function(){$(document).keydown(function(n){switch(n.which){case 13:enterKeyActions(n);break;case 37:leftKeyActions(n);break;case 38:upKeyActions(n);break;case 39:rightKeyActions(n);break;case 40:downKeyActions(n);break;case 9:tabKeyActions(n);break;default:return}});$(document).click(function(n){n.which===13&&(BestWestern.LastKeyPressEnter=!0)})})();
$(function(){"use strict";var e=$(".bw-image-gallery .sfimageListItem"),o,n,t,r,s;if(e.length>1){for(n=0,t=3,o=$('<div id="bw-image-gallery-pager"><\/div>'),r=0;r<e.length;r++)s="",r===0&&(s="active"),o.append('<a class="'+s+'" data-slide-index="'+r+'" href="javascript:;"><img src="'+$(e[r]).find("img").attr("src")+'" /><\/a>');$(".bw-image-gallery").append('<div class="bw-image-gallery-pager"><\/div>');$(".bw-image-gallery-pager").append(o);var u=$(".bw-image-gallery .sfimagesList").show().bxSlider({controls:!0,pager:!1,pagerCustom:"#bw-image-gallery-pager",infiniteLoop:!1,hideControlOnEnd:!0,onSlideBefore:function(r,u,e){$("#bw-image-gallery-pager a").removeClass("active");$("#bw-image-gallery-pager a:eq("+e+")").addClass("active");e===t&&$("#bw-image-gallery-pager a:eq("+t+")").next().length>0&&(n++,t++,f.goToNextSlide());e===n&&$("#bw-image-gallery-pager a:eq("+n+")").prev().length>0&&(n--,t--,f.goToPrevSlide());u===i&&e===0&&(f.goToSlide(0),n=0,t=3);u===0&&e===i&&(f.goToSlide(i-3),n=i-3,t=i);typeof dataLayer!="undefined"&&dataLayer.push({event:"why-carousel",category:"Why Best Western",action:"Image Click",label:null})}}),i=u.getSlideCount()-1,f=$("#bw-image-gallery-pager").show().bxSlider({pager:!1,controls:!1,minSlides:4,maxSlides:4,moveSlides:1,slideWidth:75,slideMargin:10,infiniteLoop:!1,onSliderLoad:function(){var n=$("#bw-image-gallery-pager a");n.on("click",function(){var t=$(this),i=t.data("slide-index");n.removeClass("active");t.addClass("active");u.goToSlide(parseInt(i))})}});$(".bw-image-gallery .bx-controls-direction a.bx-next").on("click",function(){u.getCurrentSlide()===i&&u.goToSlide(0)});$(".bw-image-gallery .bx-controls-direction a.bx-prev").on("click",function(){u.getCurrentSlide()===0&&u.goToSlide(i)})}});
function close(){$("#hd_map").fadeOut(function(){$(this).remove();$("body").removeClass("noscroll")})}function initViewGemMap(n){n=$(n);body=$("body");body.addClass("noscroll").append('<div id="hd_map" class="in-body"><div><span class="close"><\/span><div id="hotel_map_element"><\/div><\/div><\/div>');initGemMap();$(".close").on("click",function(){close()});$(document).on("keyup",function(n){n.keyCode==27&&close()})}function initGemMap(){var n,r=$("[data-hotel-lat]").attr("data-hotel-lat"),u=$("[data-hotel-long]").attr("data-hotel-long"),t=new google.maps.LatLng(r,u),f={zoom:17,center:t,scrollwheel:!0},e=new google.maps.StyledMapType([{featureType:"poi.business",stylers:[{visibility:"off"}]}],{name:"Styled Map"}),i,o;n=new google.maps.Map(document.getElementById("hotel_map_element"),f);n.mapTypes.set("map_style",e);n.setMapTypeId("map_style");i="/App_Themes/BestWesternX2/Images/x2marker.png";o=new google.maps.Marker({position:t,map:n,icon:i});google.maps.event.addListenerOnce(n,"idle",function(){$("#hd_map").addClass("state_loaded");$("#hd_hero #hd_map").css({marginTop:$("#hd_header_wrp").height()})})}var hiddenGems={config:{},init:function(){this.initGallery();this.initFancyBox();this.introText()},initGallery:function(){"use strict";$(".gem-hero #hd_hero_gallery").append('<div class="hd-gallery-nav-next"><\/div><div class="hd-gallery-nav-prev"><\/div>');$(".gem-hero #hd_hero_gallery_items").show().bxSlider({pager:!1,prevSelector:".hd-gallery-nav-prev",nextSelector:".hd-gallery-nav-next",minSlides:6,maxSlides:6,slideWidth:150,moveSlides:1,slideMargin:20,infiniteLoop:!1,nextText:"",prevText:"",speed:200,hideControlOnEnd:!0})},initFancyBox:function(){$().fancybox&&$(".gem-hero #hd_hero_gallery_items a").fancybox({beforeShow:function(){this.element.find("img").attr("alt")!==undefined&&(this.title=this.element.find("img").attr("alt"))}})},introText:function(){var n=$("#intro_text").text().substring(0,250);$("#intro_excerpt").html("<p>"+n+"&hellip;<\/p>")}},showGemIntroText=function(){$("#show_intro_text").removeClass("down_btn").addClass("up_btn").text("View less");$("#intro_excerpt").hide();$("#intro_text").show()},hideGemIntroText=function(){$("#show_intro_text").removeClass("up_btn").addClass("down_btn").text("View more");$("#intro_text").hide();$("#intro_excerpt").show()},showGemIntro=function(){$("#intro_text").is(":hidden")?showGemIntroText():hideGemIntroText()};(function(){hiddenGems.init()})();
(function(){BestWestern.ProcessDataLoginTracking()})();
function utf8_encode(n){var i,t,f,h;if(n===null||typeof n=="undefined")return"";var e=n+"",o="",r,u,s=0;for(r=u=0,s=e.length,i=0;i<s;i++){if(t=e.charCodeAt(i),f=null,t<128)u++;else if(t>127&&t<2048)f=String.fromCharCode(t>>6|192,t&63|128);else if((t&63488)!=55296)f=String.fromCharCode(t>>12|224,t>>6&63|128,t&63|128);else{if((t&64512)!=55296)throw new RangeError("Unmatched trail surrogate at "+i);if(h=e.charCodeAt(++i),(h&64512)!=56320)throw new RangeError("Unmatched lead surrogate at "+(i-1));t=((t&1023)<<10)+(h&1023)+65536;f=String.fromCharCode(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}f!==null&&(u>r&&(o+=e.slice(r,u)),o+=f,r=u=i+1)}return u>r&&(o+=e.slice(r,s)),o}function md5(n){var n=n.toLowerCase(),ht,a=function(n,t){return n<<t|n>>>32-t},o=function(n,t){var f,e,r,u,i;return(r=n&2147483648,u=t&2147483648,f=n&1073741824,e=t&1073741824,i=(n&1073741823)+(t&1073741823),f&e)?i^2147483648^r^u:f|e?i&1073741824?i^3221225472^r^u:i^1073741824^r^u:i^r^u},pt=function(n,t,i){return n&t|~n&i},wt=function(n,t,i){return n&i|t&~i},bt=function(n,t,i){return n^t^i},kt=function(n,t,i){return t^(n|~i)},s=function(n,t,i,r,u,f,e){return n=o(n,o(o(pt(t,i,r),u),e)),o(a(n,f),t)},h=function(n,t,i,r,u,f,e){return n=o(n,o(o(wt(t,i,r),u),e)),o(a(n,f),t)},c=function(n,t,i,r,u,f,e){return n=o(n,o(o(bt(t,i,r),u),e)),o(a(n,f),t)},l=function(n,t,i,r,u,f,e){return n=o(n,o(o(kt(t,i,r),u),e)),o(a(n,f),t)},dt=function(n){for(var r,u=n.length,o=u+8,s=(o-o%64)/64,e=(s+1)*16,i=new Array(e-1),f=0,t=0;t<u;)r=(t-t%4)/4,f=t%4*8,i[r]=i[r]|n.charCodeAt(t)<<f,t++;return r=(t-t%4)/4,f=t%4*8,i[r]=i[r]|128<<f,i[e-2]=u<<3,i[e-1]=u>>>29,i},v=function(n){for(var i="",r="",u,t=0;t<=3;t++)u=n>>>t*8&255,r="0"+u.toString(16),i=i+r.substr(r.length-2,2);return i},e=[],f,ct,lt,at,vt,t,i,r,u,y=7,p=12,w=17,b=22,k=5,d=9,g=14,nt=20,tt=4,it=11,rt=16,ut=23,ft=6,et=10,ot=15,st=21,yt;for(n=utf8_encode(n),e=dt(n),t=1732584193,i=4023233417,r=2562383102,u=271733878,ht=e.length,f=0;f<ht;f+=16)ct=t,lt=i,at=r,vt=u,t=s(t,i,r,u,e[f+0],y,3614090360),u=s(u,t,i,r,e[f+1],p,3905402710),r=s(r,u,t,i,e[f+2],w,606105819),i=s(i,r,u,t,e[f+3],b,3250441966),t=s(t,i,r,u,e[f+4],y,4118548399),u=s(u,t,i,r,e[f+5],p,1200080426),r=s(r,u,t,i,e[f+6],w,2821735955),i=s(i,r,u,t,e[f+7],b,4249261313),t=s(t,i,r,u,e[f+8],y,1770035416),u=s(u,t,i,r,e[f+9],p,2336552879),r=s(r,u,t,i,e[f+10],w,4294925233),i=s(i,r,u,t,e[f+11],b,2304563134),t=s(t,i,r,u,e[f+12],y,1804603682),u=s(u,t,i,r,e[f+13],p,4254626195),r=s(r,u,t,i,e[f+14],w,2792965006),i=s(i,r,u,t,e[f+15],b,1236535329),t=h(t,i,r,u,e[f+1],k,4129170786),u=h(u,t,i,r,e[f+6],d,3225465664),r=h(r,u,t,i,e[f+11],g,643717713),i=h(i,r,u,t,e[f+0],nt,3921069994),t=h(t,i,r,u,e[f+5],k,3593408605),u=h(u,t,i,r,e[f+10],d,38016083),r=h(r,u,t,i,e[f+15],g,3634488961),i=h(i,r,u,t,e[f+4],nt,3889429448),t=h(t,i,r,u,e[f+9],k,568446438),u=h(u,t,i,r,e[f+14],d,3275163606),r=h(r,u,t,i,e[f+3],g,4107603335),i=h(i,r,u,t,e[f+8],nt,1163531501),t=h(t,i,r,u,e[f+13],k,2850285829),u=h(u,t,i,r,e[f+2],d,4243563512),r=h(r,u,t,i,e[f+7],g,1735328473),i=h(i,r,u,t,e[f+12],nt,2368359562),t=c(t,i,r,u,e[f+5],tt,4294588738),u=c(u,t,i,r,e[f+8],it,2272392833),r=c(r,u,t,i,e[f+11],rt,1839030562),i=c(i,r,u,t,e[f+14],ut,4259657740),t=c(t,i,r,u,e[f+1],tt,2763975236),u=c(u,t,i,r,e[f+4],it,1272893353),r=c(r,u,t,i,e[f+7],rt,4139469664),i=c(i,r,u,t,e[f+10],ut,3200236656),t=c(t,i,r,u,e[f+13],tt,681279174),u=c(u,t,i,r,e[f+0],it,3936430074),r=c(r,u,t,i,e[f+3],rt,3572445317),i=c(i,r,u,t,e[f+6],ut,76029189),t=c(t,i,r,u,e[f+9],tt,3654602809),u=c(u,t,i,r,e[f+12],it,3873151461),r=c(r,u,t,i,e[f+15],rt,530742520),i=c(i,r,u,t,e[f+2],ut,3299628645),t=l(t,i,r,u,e[f+0],ft,4096336452),u=l(u,t,i,r,e[f+7],et,1126891415),r=l(r,u,t,i,e[f+14],ot,2878612391),i=l(i,r,u,t,e[f+5],st,4237533241),t=l(t,i,r,u,e[f+12],ft,1700485571),u=l(u,t,i,r,e[f+3],et,2399980690),r=l(r,u,t,i,e[f+10],ot,4293915773),i=l(i,r,u,t,e[f+1],st,2240044497),t=l(t,i,r,u,e[f+8],ft,1873313359),u=l(u,t,i,r,e[f+15],et,4264355552),r=l(r,u,t,i,e[f+6],ot,2734768916),i=l(i,r,u,t,e[f+13],st,1309151649),t=l(t,i,r,u,e[f+4],ft,4149444226),u=l(u,t,i,r,e[f+11],et,3174756917),r=l(r,u,t,i,e[f+2],ot,718787259),i=l(i,r,u,t,e[f+9],st,3951481745),t=o(t,ct),i=o(i,lt),r=o(r,at),u=o(u,vt);return yt=v(t)+v(i)+v(r)+v(u),yt.toLowerCase()};
~function(){var n=window.location.href;n.indexOf("confirmation")<0&&$("<script src='https://lantern.roeyecdn.com/lantern_global_bewe.min.js' async defer><\/script>").appendTo(document.body)}();
function offerAvailGtm(n){typeof dataLayer&&(hotelName=$(n).parents(".sr_details").find(".sr_title a").text(),dataLayer.push({event:"gated-rates-check-availability",category:"Gated Rates",action:"Check Availability Button",label:hotelName}))}function offerAvailGtmMap(n){typeof dataLayer&&(hotelName=$(n).parents(".sr_in").find(".sr_title a").text(),dataLayer.push({event:"gated-rates-check-availability",category:"Gated Rates",action:"Check Availability Button",label:hotelName}))}function offerCalChange(){typeof dataLayer&&(firstDate=$(".first-date-selected").text(),lastDate=$(".last-date-selected").text(),monthName=$(".month-name").text())}function offerSelectGtm(){typeof dataLayer&&(offerSelected=hotelName+" > "+firstDate+" - "+lastDate+" "+monthName,dataLayer.push({event:"gated-rates-check-calender",category:"Gated Rates",action:"Check Availability Calendar",label:offerSelected}))}Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.PackagesControl=function(n){this._offerCode=null;this._map=null;this._markers=[];this._markerClusterer=null;this._markerTemplate=null;this._ratePlanCode=null;this._guestsSelection=null;this._isMobile=null;this._hotelSearchResults=null;this._hotelAutocomplete=null;this._listViewControl=null;this._defaultGuests=null;this._minimumLengthOfStay=null;this._gatedRate=null;this._offerPercentageStringFormat=null;this._regionFilter=null;this._checkInDate=null;this._checkInDateFld=null;this._checkInDatePicker=null;this._onDateChangedDelegate=null;this._onDateCloseDelegate=null;this._searchView="LIST";Spinbox.Clients.BestWestern.Frontend.Web.UI.PackagesControl.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.PackagesControl.prototype={initialize:function(){var n=this;$('[data-field="OfferRate"]',n.get_element()).change(function(){n.setHotelsData()});$('[data-field="Month"]',n.get_element()).change(function(){n.setHotelsData()});$('[data-field="Region"]',n.get_element()).change(function(){n.setHotelsData()});this.get_hotelAutocomplete()!=null&&(this.get_hotelAutocomplete().onHotelSelected=function(){$('[data-field="OfferRate"] option:first').prop("selected",!0);$('[data-field="Region"] option:first').prop("selected",!0);$(".hasCustomSelect").trigger("render");n.setHotelsData()}),function(){$(".search_keyword").on("keyup",function(){$(".clear-selection").show()});$(".search_keyword").on("click",function(){$(".clear-selection").show()});$(".search_keyword").on("blur",function(){setTimeout(function(){$(n.get_hotelAutocomplete()._searchInput).val().length||$(".clear-selection").hide()},200)})}();$(".clear-selection").click(function(){n.setHotelsData()});this.get_checkInDate()!=null&&(this.configureDatepicker(),$(this.get_checkInDate()).bsDatepicker("hide"));this.get_listViewControl()!=null&&this.configureListView();$(".campaign-map-view-button").on("click",function(){$("body").addClass("map-initialising");$("html").addClass("noscroll");$(".map_view_overlay").fadeIn(250,function(){n.initMap()})});$(".action--scroll-hotels").on("click",function(){$("html,body").animate({scrollTop:$(".campaign-filters").offset().top-20})});$(".campaign-filters--filters select:not(.hasCustomSelect)").customSelect();Spinbox.Clients.BestWestern.Frontend.Web.UI.PackagesControl.callBaseMethod(this,"initialize")},closeMapSearch:function(){var n=$(".map_view_overlay");if($("html").is(".ie8, .ie9"))n.fadeOut(function(){$(this).removeClass("state_closed state_loaded")});else n.addClass("state_closed").on("webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend",function(n){n.target!==null&&$(n.target).hasClass("map_view_overlay")===!0&&$(this).css("display","none").removeClass("state_closed state_loaded")});$("html").removeClass("noscroll");$("body").removeClass("campaign-map-active");$(".campaign-filters-wrp").removeAttr("style")},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.PackagesControl.callBaseMethod(this,"dispose")},icon:"/App_Themes/BestWesternX2/Images/x2marker.png",iconActive:"/App_Themes/BestWesternX2/Images/x2markerLight.png",selectedPlan:null,initMap:function(){var t=this,i=new google.maps.LatLng(54.8495041,-7.5324952),r=new google.maps.StyledMapType([{featureType:"poi.business",stylers:[{visibility:"off"}]}],{name:"Styled Map"}),u={zoom:6,center:i,disableDefaultUI:!0,clickableIcons:!1},n=new google.maps.Map(document.getElementById("map_element"),u);n.mapTypes.set("map_style",r);n.setMapTypeId("map_style");this.set_map(n);this.setHotelsData();google.maps.event.addListenerOnce(this.get_map(),"idle",function(){$(".map_view_overlay").addClass("state_loaded");$(".campaign-filters-wrp").height($(".campaign-filters").outerHeight());$("body").addClass("campaign-map-active");setTimeout(function(){$("body").removeClass("map-initialising")},1500)});BestWestern.StyleSelects();$("#map_close").on("click",function(){t.closeMapSearch()})},getInfoBoxContent:function(n,t){var r=new kendo.template(this.get_markerTemplate()),i=r(n);return t!==!0&&(i=i.replace(/data-availability/g,"hidden")),i.replace(/<a /g,'<a target="_self" ')},setHotelsData:function(){this.get_hotelSearchResults()&&this.get_hotelSearchResults().updateSearchResults();this.get_isMobile()||this.getHotelsData(this.setHotelsFromDataSource)},getPackagesSearchModel:function(){var t=$('[data-field="Month"]',this.get_element()).val(),h=$('[data-field="Region"]',this.get_element()).val(),c=$('[data-field="Amenities"]',this.get_element()).val(),s=null,r=null,n,u,f,i,e,o;for(this.get_hotelAutocomplete()!=null&&(r=this.get_hotelAutocomplete().get_selectedPoint()),n={CategoryId:this.get_categoryId()},r!=null&&(s=r.id,n.HotelId=s),this.get_checkInDatePicker()!=null&&(u=this.get_checkInDatePicker().getDate(),u!=null&&(t=u.getMonth()+1)),t!=null&&t!=undefined&&t!=""&&(n.Month=t),f=["OfferRate","Region","Amenities","Theme"],i=0;i<f.length;i++)e=f[i],o=$('[data-field="'+e+'"]',this.get_element()).val(),o&&(n[e]=o);return $(".map_view_overlay").is(":visible")&&(n.take=999),n},getHotelsData:function(n){var t=this;$.ajax({url:"/restapi/search/packages/hotel",type:"GET","async":!0,cache:!0,data:t.getPackagesSearchModel(),dataType:"json",success:function(i){$(i.Items).each(function(){$.extend(this,{detailsUrl:function(){return this.Url},CategoryColour:i.CategoryColour})});n&&n.apply(t,[i.Items])}})},getFullHotelData:function(n,t){var i=this.getPackagesSearchModel();i.PropertyId=n.PropertyId;$.ajax({url:"/restapi/search/packages/hotel-item",type:"GET","async":!0,cache:!0,data:i,dataType:"json",success:function(n){n!==null&&$.extend(n,{detailsUrl:function(){return this.Url},CategoryColour:n.CategoryColour});t&&t.apply(self,[n])}})},setHotelsFromDataSource:function(n){var t=this,f=new google.maps.LatLngBounds,l=!1,i,u,e,s,h;if(this.clearOverlays(),i=this.get_map(),i!=null){var o=[],c=[],a="/App_Themes/BestWestern/Images/infobox-close.png";n===null||n.length===0?(i.setCenter(new google.maps.LatLng(54.8495041,-7.5324952)),i.setZoom(6)):(u=$('[data-field="Month"]',t.get_element()).val(),u||(u=((new Date).getMonth()+1)%12),this.get_checkInDatePicker()&&(e=this.get_checkInDatePicker().getDate(),e!=null&&(u=e.getMonth()+1)),n.length===1&&this.get_hotelAutocomplete().get_selectedPoint()!=null&&(s=n[0],t.getFullHotelData(s,function(n){t.loadCalendarAvailability(n.PropertyId,s.RatePlan,u,n,t.get_guests(),e)})),h=[],$(n).each(function(n,r){var s,e;h[r.PropertyId]==null&&(h[r.PropertyId]=r,s=new google.maps.LatLng(r.Address.Latitude,r.Address.Longitude),f.extend(s),e=new google.maps.Marker({position:s,map:i,icon:t.icon}),c.push(e),t._markers.push(e),google.maps.event.addListener(e,"click",function(){t.getFullHotelData(r,function(n){var f=new InfoBox({content:t.getInfoBoxContent(n,l),alignBottom:!0,pixelOffset:new google.maps.Size(-150,-50),closeBoxURL:a,closeBoxMargin:"0px"}),i,s;for(o.push(f),i=0;i<o.length;i++)o[i].close(),c[i].setIcon(t.icon);f.open(t.get_map(),e);setTimeout(FHManager.PostBind,100);e.setIcon(t.iconActive);t.get_checkInDatePicker()&&(s=t.get_checkInDatePicker().getDate(),s!=null&&(u=s.getMonth()+1));f.addListener("domready",function(){$('[data-type="cal-avail"]').click(function(){t.loadCalendarAvailability(n.PropertyId,r.PackageInCategory.PromotionCode,u,n,t.get_guests(),s)})});google.maps.event.addListener(f,"closeclick",function(){e.setIcon(t.icon)});setTimeout(function(){var t=$(".infoBox .sr_share"),n;if(typeof stLight!="undefined")for(n=0;n<t.length;n++)stWidget.addEntry({service:"sharethis",element:t[n],url:t[n].getAttribute("data-url")})},500)})}))}),this._markerClusterer=new MarkerClusterer(i,this._markers,{styles:t.clustererStyle,maxZoom:8}),r=new google.maps.LatLng(f.getNorthEast().lat()+1,f.getNorthEast().lng()-1),f.extend(r),google.maps.event.addListenerOnce(i,"bounds_changed",function(){var t=i.zoom,n;t<=6&&(n=new google.maps.LatLng(i.getCenter().lat(),i.getCenter().lng()-5.1),i.setCenter(n))}),i.fitBounds(f))}},clearFilter:function(n){if(n!==undefined){var t=this.get_filters();t.hasOwnProperty(n)&&delete t[n];this.applyFilters()}else this.set_filters({}),this.applyFilters()},clustererStyle:[{url:"/App_Themes/bestwestern/images/markerclusterer/m1.png",width:53,height:52,anchor:[19,0],textSize:10},{url:"/App_Themes/bestwestern/images/markerclusterer/m2.png",width:56,height:55,anchor:[21,0],textSize:11},{url:"/App_Themes/bestwestern/images/markerclusterer/m3.png",width:66,height:65,anchor:[25,0],textSize:12}],clearOverlays:function(){for(var n=0;n<this._markers.length;n++)this._markers[n].setMap(null);this._markers=[];this._markerClusterer&&this._markerClusterer.clearMarkers()},loadCalendarAvailability:function(n,t,i,r,u,f,e,o,s){var h=this,l=300,c;isMobile&&(l=600);e&&(c=new Date(e));$.fancybox({minWidth:l,content:$("#calendar-availability").html(),tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="bw_fancybox"><div class="fancybox-outer"><div class="fancybox-inner"><\/div><\/div><\/div><\/div>'},beforeShow:function(){var n=$('<a title="Close" class="bw_fancybox_close" href="javascript:void(0);"><\/a>');$(".fancybox-outer").append(n);$(".bw_fancybox_close, .bo_close").on("click",function(){$.fancybox.close()})},afterShow:function(){var g=this;(i==null||i==undefined)&&(i=(new Date).getMonth()+1);var p=parseInt(i),y=Date.Today(),w=y.getFullYear(),b=y.getMonth(),e=new Date;f==null||f==undefined?b+1>p?e.setFullYear(w+1,p-1,1):(e.setFullYear(w,p-1,1),e<y&&(e=y)):e=f;var nt=new Date(e.getFullYear(),e.getMonth()+1,0),l=null,a=[],k=function(n){var t,r,i;if(a.length===0)a=n;else for(t=0;t<n.length;t++)r=v(new Date(n[t].Date)),r===null&&(i=new Date(n[t].Date),c&&i>c&&(n[t].Status=i>=c.valueOf()+o*864e5?"Closed":"CTA"),a.push(n[t]))},v=function(n){var t=a.filter(function(t){return t.DateString===n.format("yyyy-MM-dd")});return t&&t.length?t[0]:null},d=function(i){var f=new Date(i),r;(f<Date.Today()&&(f=Date.Today()),r=new Date(i),r.setFullYear(r.getFullYear(),r.getMonth()+2,0),v(r)===null)&&$.ajax({url:"/restapi/search/availability",type:"GET","async":!1,cache:!0,data:{PropertyId:n,RatePlanCode:t,Adults:u[1],Children:u[2],Ages:u[3],RoomQuantity:u[0],CheckIn:f.format("yyyy-MM-dd"),CheckOut:r.format("yyyy-MM-dd")},dataType:"json",accept:"appliction/json",success:function(n){k(n.Availability)},error:function(n){BestWestern.ShowMessage(BestWestern.GetErrorMessage(n))}})};l=$("#calendar-availability-input").dateRangePicker({inline:!0,singleMonth:!0,startDate:"2015-12-01",container:"#calendar-availability-range",showTopbar:!1,alwaysOpen:!0,time:{enabled:!1},minDays:2,lookBehind:!1,selectBackward:!1,selectForward:!0,beforeShowDay:function(n,t){var i=v(n),u,r;return i||(d(n),i=v(n)),u=new Date(n.getTime()-n.getTimezoneOffset()*6e4-864e5),r=v(u),(s!=null||s!=undefined)&&h.set_minimumLengthOfStayIsFixed(s),(o!=null||o!=undefined)&&h.set_minimumLengthOfStay(o),i?i.Status!=="Open"?r&&r.Status!=="Closed"?[t&&!0,"date-available-checkout data-status-"+i.Status.toLowerCase(),undefined,!0]:[!1,"date-unavailable data-status-"+i.Status.toLowerCase()]:[!0,"date-available data-status-"+i.Status.toLowerCase()]:[!0,"data-status-unknown"]},hoveringTooltip:function(n){if(n>1)return n-1+" night"+(n>2?"s":"")},showDateFilter:function(n,t){return t}}).bind("datepicker-first-date-selected",function(n,t){h.get_minimumLengthOfStayIsFixed()&&l.setEndDate(t.date1.valueOf()+864e5*h.get_minimumLengthOfStay())}).bind("datepicker-change",function(n,i){h.dateRangeSelected(n,i,t,r,u)}).bind("datepicker-opened",function(){var n=a.filter(n=>n.Status=="Open")[0],t;n!=null&&n!=undefined&&(t=new Date(n.Date),l.showMonth(t,"month1"))}).data("dateRangePicker");l.showMonth(e.format("yyyy-MM-dd"),"month1");$(".bw_fancybox").resize();$("#calendar-availability-checkout-button").click(function(){var i,f,e;if(!l)return null;if(i=$("#calendar-availability-input").val().split(" to "),i.length<2||i[0]===""||i[0]===undefined){f=this;$("[data-error]",f.parentNode).show();setTimeout(function(){$("[data-error]",f.parentNode).hide()},2e3);return}var o=i[0],s=i[1],n=new BestWestern.SearchModel;n.Term=r.Url;n.Type="hotel";n.RoomQuantity=u[0];n.Adults=u[1];n.Children=u[2];n.Ages=u[3];n.CheckIn=o;n.CheckOut=s;e=BestWestern.Search.BuildSearchUrl(n);window.location=h.selectedPlan!==null?"/hotels"+e+"#d4bwlink-"+h.selectedPlan:"/hotels"+e+"#d4bwlink-"+t});$(".clear-availability-selection").on("click",function(n){l.clear();n.stopPropagation()})}})},meetsMlosRequirement:function(n,t){if(this.get_minimumLengthOfStay()>1){var i=n.valueOf()-n.getTimezoneOffset()*6e4,r=t.valueOf()-t.getTimezoneOffset()*6e4,u=(r-i)/864e5;return u>=this.get_minimumLengthOfStay()}return!0},dateRangeSelected:function(n,t,i,r,u){var f=this,e;if(this.meetsMlosRequirement(t.date1,t.date2)===!1){$("#room-results span").removeClass("loading").removeClass("sfMsgPositive").addClass("sfMsgNegative").text(String.format("Please ensure you have selected a {0} night stay",this.get_minimumLengthOfStay()));$("#room-results").show();return}e={PropertyId:r.PropertyId,Adults:u[1],Children:u[2],RoomQuantity:u[0],CheckIn:t.date1.format("yyyy-MM-dd"),CheckOut:t.date2.format("yyyy-MM-dd"),PromoCode:this.get_offerCode(),Ages:null,ComparisonMode:this.get_comparisonMode()};$("#room-results").hide();$("#room-results span").removeClass("sfMsgNegative");$("#room-results span").removeClass("sfMsgPositive");$("#room-results span").addClass("loading");$("#room-results span").html("");$("#room-results").show();$.ajax({url:"/restapi/hotel-details/availability/V2",type:"POST",dataType:"json",accept:"application/json",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",success:function(n){var t,r,u;$("#room-results").show();$("#room-results-failed").hide();t=null;r=null;n.Packages.Items!==null&&(u=[].concat.apply([],n.Packages.Items.filter(function(n){return n.RatePlanCode===i}).map(function(n){return n.RoomTypes})).sort(function(n,t){return n.Price-t.Price}),u&&u.length&&(r=u[0]));r?(t=r.Price,f.selectedPlan=r.BookingCode,t!==null&&t?f.get_gatedRate()&&n.OfferPercentage>0?$("#room-results span").addClass("sfMsgPositive").html(String.format(f.get_offerPercentageStringFormat(),n.OfferPercentage.toFixed(0))):$("#room-results span").addClass("sfMsgPositive").html(String.format("Price for 2 adults from: <strong>&pound;{0}<\/strong>",+parseFloat(t).toFixed(2))):$("#room-results span").addClass("sfMsgNegative").text("No availability found."),$("#room-results").show(),$("#room-results-failed").hide(),$("#calendar-availability-checkout-button").removeClass("disabled")):($("#room-results").hide(),$("#room-results-failed").show(),$("#calendar-availability-checkout-button").addClass("disabled"))},error:function(n){var t=JSON.parse(n.responseText);BestWestern.ShowMessage(t.ResponseStatus.Message)},complete:function(){$("#room-results span").removeClass("loading")}})},configureDatepicker:function(){var t;this._onDateChangedDelegate=Function.createDelegate(this,this.onDateChanged);this._onDateCloseDelegate=Function.createDelegate(this,this.onDateClosed);var f=this,i=this.get_element(),n=new Date,e=n.addDays(1),o=n.addDays(2),u=n.addDays(348),s=n.addDays(349),r;isMobile||(r=this.get_checkInDate().getAttribute("data-orientation")==="right"?"dropdown-menu datepicker-orient-top datepicker-orient-"+this.get_checkInDate().getAttribute("data-orientation"):"dropdown-menu datepicker-orient-top");t=$(this.get_checkInDate()).bsDatepicker({format:"D, dd/mm",startDate:n,endDate:u,multidateSeparator:"-",todayHighlight:!0,customClass:r});t.on("change",this._onDateChangedDelegate).on("blur",this._onDateChangedDelegate).on("hide",this._onDateCloseDelegate);this.set_checkInDatePicker(t.data("datepicker"));this.set_checkInDateFld($(".checkindate_fld",this.get_element())[0]);t.on("changeDate",this._onDateChangedDelegate);$(".date",i).on("click",function(){var n=$(this),r=n.data("type"),t=$("."+r,i);n.prop("disabled")||(setTimeout(function(){n.addClass("selecting-date")},200),$(".date").removeClass("active selecting-date"),n.addClass("active"),t.is(":hidden")?($(".dateselector",i).hide(),isMobile?t.fadeIn():t.show()):(n.removeClass("active selecting-date").find(".sfTxt").blur(),t.hide()))})},configureListView:function(){},onDateChanged:function(){var n=this.get_checkInDatePicker(),t=this.get_checkInDateFld();n.getDates().length>0?this.setInField(n.getDate()):this.setInField(null);this.onDateClosed(this)},onDateClosed:function(){var n=this.get_checkInDatePicker(),t=n.getDate();this.get_isMobile()&&this.setHotelsData()},setInField:function(n){var t=this.get_checkInDateFld();t&&(n===null?$(t).text(""):$(t).text(n.format("ddd, dd/MM")))},get_offerCode:function(){return this._offerCode},set_offerCode:function(n){this._offerCode=n},get_comparisonMode:function(){return this._comparisonMode},set_comparisonMode:function(n){this._comparisonMode=n},get_ratePlanCode:function(){return this._ratePlanCode},set_ratePlanCode:function(n){this._ratePlanCode=n},get_map:function(){return this._map},set_map:function(n){this._map=n},get_guests:function(){return this.get_guestsSelection()?this.get_guestsSelection().getValue():this.get_defaultGuests()},get_markerTemplate:function(){return this._markerTemplate},set_markerTemplate:function(n){this._markerTemplate=n},get_guestsSelection:function(){return this._guestsSelection},set_guestsSelection:function(n){this._guestsSelection=n},get_isMobile:function(){return this._isMobile},set_isMobile:function(n){this._isMobile=n},get_hotelSearchResults:function(){return this._hotelSearchResults},set_hotelSearchResults:function(n){this._hotelSearchResults=n},get_hotelAutocomplete:function(){return this._hotelAutocomplete},set_hotelAutocomplete:function(n){this._hotelAutocomplete=n},get_checkInDate:function(){return this._checkInDate},set_checkInDate:function(n){this._checkInDate=n},get_checkInDateFld:function(){return this._checkInDateFld},set_checkInDateFld:function(n){this._checkInDateFld=n},set_checkInDatePicker:function(n){this._checkInDatePicker=n},get_checkInDatePicker:function(){return this._checkInDatePicker},set_listViewControl:function(n){this._listViewControl=n},get_listViewControl:function(){return this._listViewControl},get_searchView:function(){return this._searchView},set_searchView:function(n){this._searchView=n},get_minimumLengthOfStayIsFixed:function(){return this._minimumLengthOfStayIsFixed},set_minimumLengthOfStayIsFixed:function(n){this._minimumLengthOfStayIsFixed=n},get_minimumLengthOfStay:function(){return this._minimumLengthOfStay},set_minimumLengthOfStay:function(n){this._minimumLengthOfStay=n},get_gatedRate:function(){return this._gatedRate},set_gatedRate:function(n){this._gatedRate=n},toggleSearchView:function(){if($(".promo-outer--wrap").length===0){var n=this.get_searchView();n=="MAP"?($("#map_element").hide(),$("#search-list").show(),this.set_searchView("LIST")):($("#map_element").show(),$("#search-list").hide(),this.set_searchView("MAP"))}},get_defaultGuests:function(){return this._defaultGuests},set_defaultGuests:function(n){this._defaultGuests=n},get_offerPercentageStringFormat:function(){return this._offerPercentageStringFormat},set_offerPercentageStringFormat:function(n){this._offerPercentageStringFormat=n},get_categoryId:function(){return this._categoryId},set_categoryId:function(n){this._categoryId=n},get_regionFilter:function(){return this.regionFilter},set_regionFilter:function(n){this.regionFilter=n}};var hotelName="",firstDate="",lastDate="",monthName="";Spinbox.Clients.BestWestern.Frontend.Web.UI.PackagesControl.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.PackagesControl",Sys.UI.Control);
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.PackageSearchResults=function(n){this._basePath=null;this._resultsElementSelector=null;this._pagerElementSelector=null;this._relativeSearchServiceUrl=null;this._resultsTemplate=null;this._gridResultsTemplate=null;this._maxThumbnailImages=null;this._resultsList=null;this._pageSize=null;this._sortBySelect=null;this._dataSchema=null;this._dataSource=null;this._filters=null;this._thumbnailName=null;this._fullImageName=null;this._searchResultsFilter=null;this._categoryId=null;this._switchToGridViewDelegate=null;this._switchToListViewDelegate=null;this._sortBySelectChangedDelegate=null;this._regionCountSet=!1;this._lastSearchModel=null;Spinbox.Clients.BestWestern.Frontend.Web.UI.PackageSearchResults.initializeBase(this,[n])};Spinbox.Clients.BestWestern.Frontend.Web.UI.PackageSearchResults.prototype={initialize:function(){var n,t;Spinbox.Clients.BestWestern.Frontend.Web.UI.PackageSearchResults.callBaseMethod(this,"initialize");n=this;$("#has_filtered").click(function(){setTimeout(function(){$("html, body").animate({scrollTop:0})},500,$("#list_view_tab").click())});t=BestWestern.GetControl(Spinbox.Clients.BestWestern.Frontend.Web.UI.PackagesControl);this.set_searchResultsFilter(t);this.get_searchResultsFilter()!=null&&this.get_searchResultsFilter().set_hotelSearchResults(this);n.bindSearchResults();$('[data-tab="map_view_tab"]').click(function(){n.get_mapControl().showMapSearch()});this.set_filters({})},dispose:function(){Spinbox.Clients.BestWestern.Frontend.Web.UI.PackageSearchResults.callBaseMethod(this,"dispose")},DataSchema:function(){return{MinPrice:0,MaxPrice:0,CurrencySymbol:"&pound;",Location:"",TotalIncludingUnavailable:null,TierCounts:null,AmenitiesCounts:null,AllAmenities:null,AvailabilitySearch:!1,IsInternationalSearch:!1}},dataSchemeData:function(n){var t=new this.DataSchema,r,u,f,e,o;n.DirectConnectDown!=undefined&&n.DirectConnectDown&&(n=n.Response);t.TotalIncludingUnavailable=n.TotalPropertiesIncludingUnavailable;t.Location=n.Location;var i=n.Items.map(function(n){return n.TotalPrice}),s=Math.max.apply(Math,i),h=Math.min.apply(Math,i);return t.MaxPrice=s,t.MinPrice=h,n.Items.length>0&&(t.CurrencySymbol=n.Items[0].CurrencySymbol),t.IsInternationalSearch=n.IsInternationalSearch,r=n.Items.map(function(n){return n.TierId}),u=r.reduceToCount(),t.TierCounts=u,f=n.Items.map(function(n){return n.Amenities}).reduce(function(n,t){return n.concat(t)},[]),e=f.reduceToCount(),t.AmenitiesCounts=e,t.AllAmenities=n.Items.map(function(n){return n.Amenities}),t.AvailabilitySearch=n.AvailabilitySearch,this.set_dataSchema(t),o=this,$(n.Items).each(function(){$.extend(this,{detailsUrl:function(){return this.Url+o.get_searchParms()},CategoryColour:n.CategoryColour})}),n.Items},updateSearchResults:function(){this.get_dataSource().read();this.get_dataSource().page(1)},bindSearchResults:function(){var t=window.location.pathname.replace(this.get_basePath(),""),n=this;this.set_dataSource(new kendo.data.DataSource({transport:{read:{url:this.get_relativeSearchServiceUrl(),dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",data:function(){var t=n.get_searchResultsFilter().getPackagesSearchModel();return n.get_searchResultsFilter()!==null?t:null}}},schema:{total:"TotalPropertiesIncludingUnavailable",data:function(n){return n.DirectConnectDown!=undefined&&n.DirectConnectDown?n.Response.Items:n.Items}},requestEnd:function(t){if(t.response!==undefined&&(t.response.DirectConnectDown!=undefined&&t.response.DirectConnectDown&&($("[data-dc-down]",n.get_element()).show(),$("[data-dc-down] .sfMsgNegative span",n.get_element()).text(t.response.ResultsMessage)),n.dataSchemeData(t.response),t.response.Count!==undefined))if(t.response.Count===0)$("[data-no-results]",n.get_element()).show();else if($("[data-no-results]",n.get_element()).hide(),n.regionFilterChanged(),!n._regionCountSet){var i=t.response.RegionCounts,r=$("[data-field='Region'] option",n.get_searchResultsFilter().get_element());r.each(function(){var n=$(this),t=n.data("lbl-original"),r;t==undefined&&(n.data("lbl-original",n.text()),t=n.text());r=i[n.val()];n.val()!="00000000-0000-0000-0000-000000000000"&&(r!=undefined?n.text(t+" ("+r+")"):n.text(t+" (0)"))});$("[data-field='Region'] option",n.get_searchResultsFilter().get_element()).trigger("render.customSelect");n._regionCountSet=!0;n._lastSearchModel=n.get_searchResultsFilter().getPackagesSearchModel()}},pageSize:this.get_pageSize(),serverPaging:!0,serverFiltering:!0,serverSorting:!0}));$(this.get_pagerElementSelector()).kendoPager({dataSource:n.get_dataSource(),autoBind:!1,info:!1,previousNext:!1,buttonCount:5});$(this.get_pagerElementSelector()+"-bottom").kendoPager({dataSource:n.get_dataSource(),autoBind:!1,info:!1,previousNext:!1,buttonCount:5});$(this.get_resultsElementSelector()).kendoListView({dataSource:n.get_dataSource(),autoBind:!1,template:kendo.template(n.get_resultsTemplate()),dataBound:function(){$('[data-type="cal-avail"]').click(function(){var t=n.get_resultsList().dataItem(this),i=n.get_searchResultsFilter(),u=$('[data-field="Month"]',i.get_element()).val(),r;i.get_checkInDatePicker()&&(r=i.get_checkInDatePicker().getDate(),r!=null&&(u=r.getMonth()+1));i.loadCalendarAvailability(t.PropertyId,t.PackageInCategory.PromotionCode,u,t,i.get_guests(),undefined,t.PackageInCategory.LastestKnownCheckIn,t.PackageInCategory.MLOS,t.PackageInCategory.FixedMlos)});FHManager.PostBind();setTimeout(function(){var t=$(".sr_share"),n,i;if(typeof stLight!="undefined")for(n=0;n<t.length;n++)i=t[n].getAttribute("data-url"),stWidget.addEntry({service:"sharethis",element:t[n],url:i})},500)}});this.set_resultsList($(n.get_resultsElementSelector()).data("kendoListView"));this.updateSearchResults()},regionFilterChanged:function(){var n=this,t=n.get_searchResultsFilter().getPackagesSearchModel();n._lastSearchModel!=null&&(t.CategoryId!=n._lastSearchModel.CategoryId||t.Month!=n._lastSearchModel.Month||t.OfferRate!=n._lastSearchModel.OfferRate||t.Region!=n._lastSearchModel.Region||t.Amenities!=n._lastSearchModel.Amenities||t.Theme!=n._lastSearchModel.Theme)&&(n._regionCountSet=!1)},get_resultsList:function(){return this._resultsList},set_resultsList:function(n){this._resultsList=n},get_basePath:function(){return this._basePath},set_basePath:function(n){this._basePath=n},get_resultsElementSelector:function(){return this._resultsElementSelector},set_resultsElementSelector:function(n){this._resultsElementSelector=n},get_pagerElementSelector:function(){return this._pagerElementSelector},set_pagerElementSelector:function(n){this._pagerElementSelector=n},get_relativeSearchServiceUrl:function(){return this._relativeSearchServiceUrl},set_relativeSearchServiceUrl:function(n){this._relativeSearchServiceUrl=n},get_resultsTemplate:function(){return this._resultsTemplate},set_resultsTemplate:function(n){this._resultsTemplate=n},get_gridResultsTemplate:function(){return this._gridResultsTemplate},set_gridResultsTemplate:function(n){this._gridResultsTemplate=n},get_maxThumbnailImages:function(){return this._maxThumbnailImages},set_maxThumbnailImages:function(n){this._maxThumbnailImages=n},get_pageSize:function(){return this._pageSize},set_pageSize:function(n){this._pageSize=n},get_thumbnailName:function(){return this._thumbnailName},set_thumbnailName:function(n){this._thumbnailName=n},get_fullImageName:function(){return this._fullImageName},set_fullImageName:function(n){this._fullImageName=n},get_searchResultsFilter:function(){return this._searchResultsFilter},set_searchResultsFilter:function(n){this._searchResultsFilter=n},get_mapControl:function(){return this._mapControl},set_mapControl:function(n){this._mapControl=n},get_searchParms:function(){var n=window.location.pathname.replace(this.get_basePath(),""),t=BestWestern.Search.GetSearchModel(n);return BestWestern.Search.BuildSearchParams(t)},get_dataSchema:function(){return this._dataSchema},set_dataSchema:function(n){this._dataSchema=n},get_filters:function(){return this._filters},set_filters:function(n){this._filters=n},get_dataSource:function(){return this._dataSource},set_dataSource:function(n){this._dataSource=n},get_sortBySelect:function(){return this._sortBySelect},set_sortBySelect:function(n){this._sortBySelect=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.PackageSearchResults.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.PackageSearchResults",Sys.UI.Control);
~function(){function e(n,t){var i=document.createElement("script");i.type="text/javascript";i.readyState?i.onreadystatechange=function(){("loaded"==i.readyState||"complete"==i.readyState)&&(i.onreadystatechange=null,void 0!=t&&t())}:void 0!=t&&(i.onload=function(){t()});i.src=n;document.getElementsByTagName("head")[0].appendChild(i)}function u(n){var r,i,t;for(n+="=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(t=r[i];" "==t.charAt(0);)t=t.substring(1,t.length);if(0==t.indexOf(n))return t.substring(n.length,t.length)}return null}function n(n){for(var u=i+r,t=0;t<reciteLoaded.length;t++)if(reciteLoaded[t]==u)return;reciteLoaded.push(u);e(i+r,function(){"function"==typeof _reciteLoaded&&_reciteLoaded();"function"==typeof n&&n();Recite.load(f);Recite.Event.subscribe("Recite:load",function(){Recite.enable()})})}var i="//api.reciteme.com/asset/js?key=",r="c476d9bb8755a22519a83ff97a641b6b38d79c63",f={},t;window.reciteLoaded=[];t=!1;window.location.hash==="#reciteEnable"&&(t=!0);"true"==u("Recite.Persist")&&n();(!1&&"false"!=u("Recite.Persist")||t)&&(document.addEventListener?document.addEventListener("DOMContentLoaded",function(){n()}):n());window.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("#enableRecite").forEach(function(t){t.addEventListener("click",function(){n()})})})}();
let BestWesternX={};const Bod=document.querySelector("body"),inBackEnd=Bod.classList.contains("sfPageEditor");let veritcalScroll=pageYOffset,lastScrollTop=0,inMobile=(typeof orientation!="undefined"||navigator.userAgent.indexOf("IEMobile")!==-1)&&window.matchMedia("(max-width: 1145px)").matches,inDesktop=typeof orientation=="undefined"&&navigator.userAgent.indexOf("IEMobile")===-1&&window.matchMedia("(min-width: 1146px)").matches;inMobile===!1&&inDesktop===!1&&(window.matchMedia("(max-width: 1145px)").matches?inMobile=!0:inDesktop=!0);let inIpad,inIphone,inAndroid;inMobile&&(inIpad=navigator.userAgent.match(/iPad|Opera Mini/i),inIphone=navigator.userAgent.match(/iPhone|iPod|Opera Mini/i),inAndroid=navigator.userAgent.match(/Android|BlackBerry|Opera Mini/i),inIpad?Bod.classList.add("ipad"):inIphone?Bod.classList.add("iphone"):inAndroid&&Bod.classList.add("android"));const hrefPath=window.location.pathname;let runOnceMobClick=0;(function(){"use strict";let n,t;BestWesternX={settings:{appWidth:document.body.clientWidth},init:function(){n=this;t=n.settings;n.generalNavHandler();n.copyRightHandler();n.veritcalScrollHandler();n.echoLazyLoadingHandler();n.tinySliderHandler();n.tinySliderCleanHandler();n.tinySliderTabsHandler();n.tinySliderGlobalTabsHandler();n.generalAccordion();inIpad&&n.ipadCardHeight()},generalNavHandler:function(){const i=$(".nav-flex .a1"),n=i.parent(),t=$(".nav-flex .li1.has-children, .nav-flex [has-children]");t.on("mouseenter",function(){const t=$(this);t.hasClass("active")?t.removeClass("active"):(n.removeClass("active"),t.addClass("active"))});t.on("mouseleave",function(){n.hasClass("active")&&(n.removeClass("active"),Bod.classList.remove("nav-animations-on"))});const r=$(".nav-flex .li1:not(.has-children)");r.on("mouseenter",function(){Bod.classList.add("nav-animations-on")});const u=$(".main-nav");u.on("mouseleave",function(){Bod.classList.add("nav-animations-on")})},copyRightHandler:function(){const n=document.querySelectorAll("#copyYear");if(n.length){var t=(new Date).getFullYear();n.forEach(function(n){n.textContent=t})}},veritcalScrollHandler:function(){if(veritcalScroll=pageYOffset,inDesktop){if(veritcalScroll>59?Bod.classList.add("scrolling"):Bod.classList.remove("scrolling"),$("#homepage-slider").length||$(".search_wrp--search-at-top").length){var n=window.pageYOffset||document.documentElement.scrollTop;veritcalScroll>780?Bod.classList.add("search-sticky-prep"):Bod.classList.remove("search-sticky-prep");veritcalScroll>820&&n>=lastScrollTop?Bod.classList.add("search-sticky"):Bod.classList.remove("search-sticky");lastScrollTop=n<=0?0:n}}else veritcalScroll>0?Bod.classList.add("scrolling"):Bod.classList.remove("scrolling")},echoLazyLoadingHandler:function(){if($("[data-echo-background]").length||$("[data-echo]").length)if(inBackEnd){const n=document.querySelectorAll("[data-echo-background]");n.length&&Array.prototype.forEach.call(n,function(n){const t=n.getAttribute("data-echo-background");t.length&&(n.style.backgroundImage="url("+t+")")})}else echo.init({offset:600,throttle:300,debounce:!1,unload:!1,callback:function(){}})},tinySliderHandler:function(){const n=document.querySelector(".sbx-slider");if(n!==null){var i=$(n).data("autoplay"),r=$(n).data("autoplay-timeout"),t=$(n).data("slider-change-func");const u=tns({container:".sbx-slider",mode:"gallery",items:1,speed:1e3,autoplayTimeout:r||9e5,autoplay:i,autoplayButtonOutput:!1,loop:!0,mouseDrag:!0,swipeAngle:15,gutter:0,edgePadding:0,slideBy:1,center:!1,controlsText:["",""],navContainer:"#hero-dots",controlsContainer:".sbx-slider__wrp .sbx-slider-controls",navAsThumbnails:!0,nav:!0,controls:!0,responsive:{767:{},1145:{items:1}}});u.events.on("indexChanged",function(n,i){t&&window[t](n,i);const r=document.querySelectorAll("[data-paul-background]");r.length&&Array.prototype.forEach.call(r,function(n){const t=n.getAttribute("data-paul-background");t.length&&(n.style.backgroundImage="url("+t+")")})})}},tinySliderCleanHandler:function(){const n=document.querySelectorAll(".cleanslide");n.length&&Array.prototype.forEach.call(n,function(n){const i=n.querySelectorAll(".listing-item");let t=!1;i.length==5&&(n.parentNode.classList.add("five-items"),t=4);i.length==4&&(n.parentNode.classList.add("four-items"),t=4);const r=tns({container:n,items:4.4,speed:1e3,autoplayTimeout:9e5,autoplay:!1,loop:!0,mouseDrag:!0,swipeAngle:20,gutter:10,slideBy:"3",nav:!1,controls:!0,controlsContainer:n.parentNode.parentNode.querySelector(".sbx-slider-controls"),responsive:{0:{slideBy:"1",items:2.3},768:{slideBy:"2",items:2.8},992:{items:3.2},1200:{items:4},1461:{slideBy:"3",items:t?t:4.4}}});r.events.on("transitionEnd",function(){echo.render()})})},tinySliderTabsHandler:function(){const n=document.querySelector(".slider-tabs-bottom");let t="";n!==null&&(t=tns({container:".slider-tabs-bottom",mode:"gallery",items:1,speed:200,autoplayTimeout:9e5,autoplay:!1,autoplayButtonOutput:!1,loop:!0,mouseDrag:!0,swipeAngle:15,gutter:0,edgePadding:0,slideBy:1,center:!1,controlsText:["",""],controlsContainer:".slider-tabs-bottom-wrp .sbx-slider-controls",navContainer:".slider-tabs-top",navAsThumbnails:!0,nav:!0,controls:!0,responsive:{0:{disable:!1},768:{disable:!1},1145:{items:1}}}));$(".slider-tabs__tab").length===1&&$(".slider-tabs-top").show()},tinySliderGlobalTabsHandler:function(){const n=document.querySelector(".angular-rates-tabs--global-version:not(.art-kill) .angular-rates-tabs-bottom__tabs-container");if(n!==null){const t=document.querySelector(".angular-rates-tabs--global-version .sbx-slider-controls");let i;t!==null&&(i=tns({container:n,mode:"gallery",items:1,speed:200,autoplayTimeout:9e5,autoplay:!1,autoplayButtonOutput:!1,loop:!1,mouseDrag:!1,swipeAngle:15,gutter:0,edgePadding:0,slideBy:1,center:!1,controlsText:["",""],controlsContainer:".angular-rates-tabs--global-version .sbx-slider-controls",navContainer:".angular-rates-tabs--global-version .angular-rates-tabs-top",navAsThumbnails:!0,nav:!0,controls:!0}))}},generalAccordion:function(){if(!inBackEnd){var n=$(".accordion-title");n.on("click",function(){$(this).is(".active")?$(this).removeClass("active").next().slideUp():($(".accordion-content").slideUp(),n.removeClass("active").filter(this).addClass("active").next().slideDown())})}},ipadCardHeight:function(){setTimeout(function(){const n=document.querySelectorAll(".two-col-no-padding");n.length&&Array.prototype.forEach.call(n,function(n){const t=$(n).outerHeight();console.log(t);t>0&&$(n).find(".info-card-elem").css("height",t+"px")})},1e3)},onResize:function(){inMobile=(typeof orientation!="undefined"||navigator.userAgent.indexOf("IEMobile")!==-1)&&window.matchMedia("(max-width: 1145px)").matches;inDesktop=typeof orientation=="undefined"&&navigator.userAgent.indexOf("IEMobile")===-1&&window.matchMedia("(min-width: 1146px)").matches;inMobile===!1&&inDesktop===!1&&inMobile===!1&&inDesktop===!1&&(window.matchMedia("(max-width: 1145px)").matches?inMobile=!0:inDesktop=!0);n.veritcalScrollHandler();inIpad&&n.ipadCardHeight();Bod.classList.remove("mobile-nav-active")},onScroll:function(){this.veritcalScrollHandler()},onLoad:function(){Bod.classList.add("page-loaded")}};$(function(){BestWesternX.init()});$(window).on("scroll",function(){BestWesternX.onScroll()});$(window).on("resize",function(){var n;clearTimeout(n);n=setTimeout(function(){document.body.clientWidth!==t.appWidth&&BestWesternX.onResize();t.appWidth=document.body.clientWidth},150)});$(window).on("load",function(){BestWesternX.onLoad()})})();var mobDoc=$(document);$(".Xnav-toggle").click(function(){$("body").toggleClass("mob-nav-active")});mobDoc.on("click",function(){$("body").removeClass("mob-nav-active")});$(".tablet-nav, .Xnav-toggle").on("click",function(n){n.stopPropagation()});
BestWestern.AddressLookup=function(n,t,i){var r=this;this.findResultsDictionary=null;this.findUrl=n;this.retrieveUrl=t;this.countryCode="GBR";this.containerIdForNextFind=null;this.onFindFailure=null;this.inputElement=i;this.DataSource=new kendo.data.DataSource({cache:!1,serverFiltering:!0,transport:{read:function(n){r.DoLookup(n)}}})};BestWestern.AddressLookup.prototype.DoLookup=function(n){var i=n.data.filter.filters[0].value,t=this;i?(t.callFind(i,t.containerIdForNextFind,function(r){t.processFindResults(i,r,function(i){if(t.isError(i)){if(t.onFindFailure)t.onFindFailure(t.inputElement);n.success([])}else{var r=t.mapFindResults(i);n.success(r)}})}),t.containerIdForNextFind=null):n.success([])};BestWestern.AddressLookup.prototype.HandleSelection=function(n,t,i){var r=findResultsDictionary[t],u=this,f;return r.Type=="Address"?(u.callRetrieve(t,function(n){i(u.mapRetrieveResult(n))}),!0):(u.containerIdForNextFind=t,f=r.Text+" ",n.value(f),n.search(r.Text),!1)};BestWestern.AddressLookup.prototype.callFind=function(n,t,i){var r=this.findUrl.replace("[[SearchText]]",encodeURIComponent(n)).replace("[[ContainerId]]",t?encodeURIComponent(t):"").replace("[[Countries]]",this.countryCode);$.ajax({type:"GET",url:r,dataType:"json",success:function(n){i(n)},error:function(n){i({TransportError:n.responseText})}})};BestWestern.AddressLookup.prototype.isError=function(n){return typeof n.TransportError!="undefined"||!n.Items||n.Items.length>0&&typeof n.Items[0].Error!="undefined"};BestWestern.AddressLookup.prototype.mapFindResults=function(n){if(this.isError(n))return[];findResultsDictionary={};var t=this;return n.Items.map(function(n){findResultsDictionary[n.Id]=n;var i=n.Highlight.split(";");return{Id:n.Id,Text:n.Text,FormattedText:t.applyHighlight(n.Text,i.length>0?i[0]:null),FormattedDescription:t.applyHighlight(n.Description,i.length>1?i[1]:null),Type:n.Type}})};BestWestern.AddressLookup.prototype.processFindResults=function(n,t,i){this.isError(t)||t.Items.length!=1||t.Items[0].Type==="Address"?i(t):this.callFind(n,t.Items[0].Id,function(n){i(n)})};BestWestern.AddressLookup.prototype.applyHighlight=function(n,t){var o,f,s,e,u,r,i;if(!n||!t)return n;for(o=t.split(","),f=[],r=0;r<o.length;r++)s=o[r],s&&(i=s.split("-"),i.length==2&&f.push([i[0],i[1]]));for(f.sort(function(n,t){return n[0]<t[0]?-1:n[0]>t[0]?1:0}),e=0,u="",r=0;r<f.length;r++)i=f[r],i[0]>=0&&i[0]<n.length&&i[1]>0&&i[1]<=n.length&&i[1]>i[0]&&i[0]>=e&&(u+=n.substring(e,i[0]),u+="<strong>",u+=n.substring(i[0],i[1]),u+="<\/strong>",e=i[1]);return u+n.substring(e)};BestWestern.AddressLookup.prototype.callRetrieve=function(n,t){var i=this.retrieveUrl.replace("[[Id]]",encodeURIComponent(n));$.ajax({type:"GET",url:i,dataType:"json",success:function(n){t(n)},error:function(n){t({TransportError:n.responseText})}})};BestWestern.AddressLookup.prototype.joinAddressParts=function(n){return n.filter(function(n){return n}).join(", ")};BestWestern.AddressLookup.prototype.mapRetrieveResult=function(n){if(this.isError(n)||n.Items.length==0)return null;var t=n.Items[0];return{houseNumberOrName:this.joinAddressParts([t.Company,t.BuildingNumber,t.BuildingName,t.SubBuilding]),addressLine1:this.joinAddressParts([t.Street,t.SecondaryStreet]),addressLine2:this.joinAddressParts([t.Block,t.Neighbourhood,t.District]),townCity:t.City,country:t.CountryName,postCode:t.PostalCode}};
function myshowp(n){txtBox=n.parentElement.getElementsByTagName("input").item(0);txtBox.type=="password"?(txtBox.type="text",n.classList.remove("fa-eye"),n.classList.add("fa-eye-slash")):(txtBox.type="password",n.classList.remove("fa-eye-slash"),n.classList.add("fa-eye"))};
Type.registerNamespace("Spinbox.Clients.BestWestern.Frontend.Web.UI");Spinbox.Clients.BestWestern.Frontend.Web.UI.RappNewsletterSubscribe=function(n){Spinbox.Clients.BestWestern.Frontend.Web.UI.RappNewsletterSubscribe.initializeBase(this,[n]);this._subscribeButton=null;this._emailInput=null;this._firstnameInput=null;this._lastnameInput=null;this._messageControl=null;this._newsLetterSubscribeDelegate=null};Spinbox.Clients.BestWestern.Frontend.Web.UI.RappNewsletterSubscribe.prototype={initialize:function(){this._newsLetterSubscribeDelegate=Function.createDelegate(this,this.subscribe);$addHandler(this.get_subscribeButton(),"click",this._newsLetterSubscribeDelegate)},dispose:function(){this._newsLetterSubscribeDelegate&&delete this._newsLetterSubscribeDelegate},subscribe:function(){if(Page_ClientValidate("newsletter"),Page_IsValid===!0){var n=this,t={EmailAddress:n.get_emailInput().value,FirstName:n.get_firstnameInput().value,LastName:n.get_lastnameInput().value};$(n.get_subscribeButton()).addClass("is_loading");$.ajax({url:"/restapi/my-account/newsletter",type:"POST",data:JSON.stringify(t),dataType:"json",accept:"application/json",contentType:"application/json; charset=utf-8",success:function(t){t.Error!==null&&t.Error!==""?n.get_messageControl().showNegativeMessage(t.Message):n.get_messageControl().showPositiveMessage(t.Message)},error:function(t){var i=BestWestern.GetErrorMessage(t);n.get_messageControl(i).showNegativeMessage(i)},complete:function(){$(n.get_subscribeButton()).removeClass("is_loading")}})}},get_subscribeButton:function(){return this._subscribeButton},set_subscribeButton:function(n){this._subscribeButton=n},get_emailInput:function(){return this._emailInput},set_emailInput:function(n){this._emailInput=n},get_firstnameInput:function(){return this._firstnameInput},set_firstnameInput:function(n){this._firstnameInput=n},get_lastnameInput:function(){return this._lastnameInput},set_lastnameInput:function(n){this._lastnameInput=n},get_messageControl:function(){return this._messageControl},set_messageControl:function(n){this._messageControl=n}};Spinbox.Clients.BestWestern.Frontend.Web.UI.RappNewsletterSubscribe.registerClass("Spinbox.Clients.BestWestern.Frontend.Web.UI.RappNewsletterSubscribe",Sys.UI.Control);